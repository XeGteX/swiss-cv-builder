[{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\agents\\base-agent.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\agents\\code-refactor-agent.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\agents\\security-agent.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\app.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\config\\env.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\ai-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\auth-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\bi-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\health-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\letter-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\profile-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\subscription-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\controllers\\webhook-controller.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\lib\\stripe.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\middleware\\auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\middleware\\error.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\middleware\\profiler.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\prisma.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\ai.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\bi.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\letters.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\profile.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\subscriptions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\routes\\webhook.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\__tests__\\auth-service.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\ai-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\auth-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\bi-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\email-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\event-bus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\letter-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\logger-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\monitor-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\profile-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\stripe-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\server\\services\\subscription-service.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\dist-server\\src\\domain\\services\\ai\\core\\vector-math.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\prisma\\seed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\restore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\restore_from_repomix.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\restore_targets.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\restore_targets.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\eternal-loop.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\sentinel.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'writeHealth' is defined but never used.","line":61,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'duration' is assigned a value but never used.","line":215,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ­ƒøí´©Å AEGIS SENTINEL - Main Guardian Script\r\n * \r\n * Orchestrates all validation checks and reports system health.\r\n * \r\n * Usage: npm run sentinel\r\n * \r\n * Exit codes:\r\n * - 0: All checks passed (HEALTHY)\r\n * - 1: One or more checks failed (BROKEN)\r\n */\r\n\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { scanImports, type ScanResult } from './utils/import-scanner';\r\nimport { runTypeCheck, type TypeCheckResult } from './utils/type-checker';\r\nimport { detectCircularDependencies, type DepGraphResult } from './utils/dep-graph';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\ntype SystemStatus = 'HEALTHY' | 'DEGRADED' | 'BROKEN';\r\n\r\ninterface SystemHealth {\r\n    status: SystemStatus;\r\n    timestamp: number;\r\n    lastAction: string;\r\n    checks: {\r\n        imports: {\r\n            passed: boolean;\r\n            totalFiles: number;\n            totalImports: number;\n            brokenCount: number;\n            details: ScanResult['brokenImports'];\n        };\n        types: {\n            passed: boolean;\n            errorCount: number;\n            duration: number;\n            details: TypeCheckResult['errors'];\n        };\n        circularDeps: {\n            passed: boolean;\n            cycleCount: number;\n            details: DepGraphResult['cycles'];\n        };\n    };\n    summary: string;\n}\n\n// ============================================================================\n// HEALTH FILE MANAGEMENT\n// ============================================================================\n\nconst HEALTH_FILE = path.join(process.cwd(), '.ai', 'system-health.json');\n\n/**\n * Write system health to JSON (atomic)\n */\nfunction writeHealth(health: SystemHealth): void {\n    try {\n        const dir = path.dirname(HEALTH_FILE);\n        if (!fs.existsSync(dir)) {\n            fs.mkdirSync(dir, { recursive: true });\n        }\n\n        const tempFile = `${HEALTH_FILE}.tmp`;\n        fs.writeFileSync(tempFile, JSON.stringify(health, null, 2), 'utf-8');\n        fs.renameSync(tempFile, HEALTH_FILE);\n\n        console.log(`\\n­ƒôØ System health written to: ${HEALTH_FILE}`);\n    } catch (err) {\n        console.error('Failed to write health file:', err);\n    }\n}\n\n/**\n * Save snapshot to history\n */\nfunction saveSnapshot(health: SystemHealth): void {\n    try {\n        const historyDir = path.join(process.cwd(), '.ai', 'history');\n        if (!fs.existsSync(historyDir)) {\n            fs.mkdirSync(historyDir, { recursive: true });\n        }\n\n        const date = new Date().toISOString().split('T')[0];\n        const snapshotFile = path.join(historyDir, `${date}.json`);\n        fs.writeFileSync(snapshotFile, JSON.stringify(health, null, 2), 'utf-8');\n    } catch (err) {\n        console.error('Failed to save snapshot:', err);\n    }\n}\n\n// ============================================================================\n// MAIN SENTINEL\n// ============================================================================\n\nasync function runSentinel(): Promise<number> {\n    console.log('­ƒøí´©Å  AEGIS SENTINEL - Guardian Awakens\\n');\n    console.log('Ôöü'.repeat(60));\n\n    const startTime = Date.now();\n    const projectRoot = process.cwd();\n    const srcDir = path.join(projectRoot, 'src');\n\n    // ========================================\n    // CHECK 1: Import Validation\n    // ========================================\n    console.log('\\n­ƒôª STEP 1: Validating Imports...');\n    console.log('Ôöü'.repeat(60));\n\n    let importResult: ScanResult;\n    try {\n        importResult = scanImports(srcDir);\n    } catch (err) {\n        console.error('Import scan failed:', err);\n        importResult = {\n            totalFiles: 0,\n            totalImports: 0,\n            brokenImports: [],\n            success: false\n        };\n    }\n\n    // ========================================\n    // CHECK 2: Type Validation\n    // ========================================\n    console.log('\\n­ƒöì STEP 2: Type Checking...');\n    console.log('Ôöü'.repeat(60));\n\n    let typeResult: TypeCheckResult;\n    try {\n        typeResult = await runTypeCheck(projectRoot);\n    } catch (err) {\n        console.error('Type check failed:', err);\n        typeResult = {\n            success: false,\n            errors: [],\n            duration: 0\n        };\n    }\n\n    // ========================================\n    // CHECK 3: Circular Dependencies\n    // ========================================\n    console.log('\\n­ƒöä STEP 3: Circular Dependency Check...');\n    console.log('Ôöü'.repeat(60));\n\n    let depGraphResult: DepGraphResult;\n    try {\n        const files = importResult.totalFiles > 0\n            ? getAllFiles(srcDir)\n            : [];\n        depGraphResult = detectCircularDependencies(srcDir, files);\n    } catch (err) {\n        console.error('Dependency graph check failed:', err);\n        depGraphResult = {\n            success: false,\n            cycles: []\n        };\n    }\n\n    // ========================================\n    // DETERMINE STATUS\n    // ========================================\n    const allPassed = importResult.success && typeResult.success && depGraphResult.success;\n    const anyFailed = !importResult.success || !typeResult.success || !depGraphResult.success;\n\n    let status: SystemStatus;\n    if (allPassed) {\n        status = 'HEALTHY';\n    } else if (anyFailed) {\n        status = 'BROKEN';\n    } else {\n        status = 'DEGRADED';\n    }\n\n    // ========================================\n    // BUILD HEALTH REPORT\n    // ========================================\n    const health: SystemHealth = {\n        status,\n        timestamp: Date.now(),\n        lastAction: 'Sentinel scan',\n        checks: {\n            imports: {\n                passed: importResult.success,\n                totalFiles: importResult.totalFiles,\n                totalImports: importResult.totalImports,\n                brokenCount: importResult.brokenImports.length,\n                details: importResult.brokenImports\n            },\n            types: {\n                passed: typeResult.success,\n                errorCount: typeResult.errors.length,\n                duration: typeResult.duration,\n                details: typeResult.errors\n            },\n            circularDeps: {\n                passed: depGraphResult.success,\n                cycleCount: depGraphResult.cycles.length,\n                details: depGraphResult.cycles\n            }\n        },\n        summary: allPassed\n            ? 'Ô£à All checks passed. System is healthy.'\n            : `ÔØî ${[!importResult.success && 'imports', !typeResult.success && 'types', !depGraphResult.success && 'circular deps'].filter(Boolean).join(', ')} failed.`\n    };\n\n    // ========================================\n    // OUTPUT SUMMARY\n    // ========================================\n    const duration = Date.now() - startTime;\n\n    console.log('\\nÔöü'.repeat(60));\n    console.log('­ƒôè SENTINEL REPORT');\n    console.log('Ôöü'.repeat(60));\n    console.log(`\\n­ƒöì Import Validation: ${importResult.success ? 'Ô£à PASS' : 'ÔØî FAIL'}`);\n    console.log(`   Files scanned: ${importResult.totalFiles}`);\n    console.log(`   Imports checked: ${importResult.totalImports}`);\n    console.log(`   Broken imports: ${importResult.brokenImports.length}`);\n\n    console.log(`\\n­ƒöì Type Checking: ${typeResult.success ? 'Ô£à PASS' : 'ÔØî FAIL'}`);\n    console.log(`   Type errors: ${typeResult.errors.length}`);\n    saveSnapshot(health);\n\n    // ========================================\n    // EXIT CODE\n    // ========================================\n    return status === 'HEALTHY' ? 0 : 1;\n}\n\n// ============================================================================\n// HELPERS\n// ============================================================================\n\nfunction getAllFiles(dir: string): string[] {\n    const files: string[] = [];\n\n    function walk(currentDir: string) {\n        try {\n            const entries = fs.readdirSync(currentDir, { withFileTypes: true });\n            for (const entry of entries) {\n                const fullPath = path.join(currentDir, entry.name);\n                if (entry.isDirectory() && !['node_modules', '.git', 'dist', 'build'].includes(entry.name)) {\n                    walk(fullPath);\n                } else if (entry.isFile() && /\\.(ts|tsx)$/.test(entry.name)) {\n                    files.push(fullPath);\n                }\n            }\n        } catch (err) {\n            console.error(`Failed to read ${ currentDir }: `, err);\n        }\n    }\n\n    walk(dir);\n    return files;\n}\n\n// ============================================================================\n// RUN\n// ============================================================================\n\nrunSentinel()\n    .then((exitCode) => {\n        process.exit(exitCode);\n    })\n    .catch((err) => {\n        console.error('\\nÔØî Sentinel crashed:', err);\n        process.exit(1);\n    });\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\start-all.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\test-cleaner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\utils\\dep-graph.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\utils\\import-scanner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\utils\\type-checker.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'path' is defined but never used.","line":9,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AEGIS SENTINEL - Type Checker\r\n * \r\n * Wraps TypeScript compiler to validate types.\r\n * This is our COMPILER JUDGE.\r\n */\r\n\r\nimport { spawn } from 'child_process';\r\nimport * as path from 'path';\r\n\r\nexport interface TypeErrorInfo {\r\n    file: string;\r\n    line: number;\r\n    column: number;\r\n    message: string;\r\n    code: string;\r\n}\r\n\r\nexport interface TypeCheckResult {\r\n    success: boolean;\r\n    errors: TypeErrorInfo[];\r\n    duration: number;\r\n}\r\n\r\n/**\r\n * Parse TypeScript compiler output\r\n * Format: \"src/App.tsx(42,15): error TS2304: Cannot find name 'Foo'.\"\r\n */\r\nfunction parseTypeScriptError(line: string): TypeErrorInfo | null {\r\n    const match = line.match(/^(.+?)\\((\\d+),(\\d+)\\):\\s*error\\s+(TS\\d+):\\s*(.+)$/);\r\n\r\n    if (!match) return null;\r\n\r\n    return {\r\n        file: match[1],\r\n        line: parseInt(match[2], 10),\r\n        column: parseInt(match[3], 10),\r\n        code: match[4],\r\n        message: match[5]\r\n    };\r\n}\r\n\r\n/**\r\n * Run TypeScript compiler in check mode\r\n */\r\nexport function runTypeCheck(projectRoot: string): Promise<TypeCheckResult> {\r\n    return new Promise((resolve) => {\r\n        const startTime = Date.now();\r\n        console.log('­ƒöì Running TypeScript compiler...');\r\n\r\n        const tsc = spawn('npx', ['tsc', '--noEmit', '--skipLibCheck'], {\r\n            cwd: projectRoot,\r\n            shell: true\r\n        });\r\n\r\n        let stdout = '';\r\n        let stderr = '';\r\n\r\n        tsc.stdout.on('data', (data) => {\r\n            stdout += data.toString();\r\n        });\r\n\r\n        tsc.stderr.on('data', (data) => {\r\n            stderr += data.toString();\r\n        });\r\n\r\n        tsc.on('close', (code) => {\r\n            const duration = Date.now() - startTime;\r\n            const output = stdout + stderr;\r\n            const lines = output.split('\\n');\r\n\r\n            const errors: TypeErrorInfo[] = [];\r\n            for (const line of lines) {\r\n                const error = parseTypeScriptError(line);\r\n                if (error) {\r\n                    errors.push(error);\r\n                }\r\n            }\r\n\r\n            const success = code === 0 && errors.length === 0;\r\n\r\n            if (success) {\r\n                console.log(`Ô£à Type checking passed (${duration}ms)`);\r\n            } else {\r\n                console.log(`ÔØî Found ${errors.length} type errors (${duration}ms)`);\r\n            }\r\n\r\n            resolve({\r\n                success,\r\n                errors,\r\n                duration\r\n            });\r\n        });\r\n\r\n        tsc.on('error', (err) => {\r\n            console.error('Failed to run TypeScript compiler:', err);\r\n            resolve({\r\n                success: false,\r\n                errors: [],\r\n                duration: Date.now() - startTime\r\n            });\r\n        });\r\n    });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\verify-backend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\scripts\\verify-scoring.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\agents\\base-agent.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2056,2059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2056,2059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2182,2185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2182,2185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4847,4850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4847,4850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Enhanced BaseAgent with State Tracking\r\n * \r\n * All AEGIS agents extend this class and report their status\r\n * to the AgentManager for real-time monitoring.\r\n */\r\n\r\nimport { LoggerService } from '../services/logger-service';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport type AgentStatus = 'IDLE' | 'WORKING' | 'ERROR' | 'OFFLINE';\r\nexport type LogType = 'info' | 'error' | 'warning' | 'success';\r\n\r\nexport interface LogEntry {\r\n    message: string;\r\n    timestamp: Date;\r\n    type: LogType;\r\n}\r\n\r\nexport interface AgentState {\r\n    id: string;              // Unique identifier ('sentinel', 'cleaner', etc.)\r\n    name: string;            // Display name ('AEGIS Sentinel')\r\n    role: string;            // Description ('Code Integrity Guardian')\r\n    status: AgentStatus;     // Current status\r\n    lastHeartbeat: Date;     // Last activity timestamp\r\n    currentTask: string;     // What it's doing now\r\n    logs: LogEntry[];        // Recent log entries (max 50)\r\n}\r\n\r\n// ============================================================================\r\n// BASE AGENT CLASS\r\n// ============================================================================\r\n\r\nexport abstract class BaseAgent {\r\n    // Required properties (must be set by subclass)\r\n    abstract name: string;\r\n\r\n    // State tracking\r\n    protected id!: string;\r\n    protected role!: string;\r\n    protected status: AgentStatus = 'IDLE';\r\n    protected currentTask: string = 'Waiting...';\r\n    protected logs: LogEntry[] = [];\r\n    protected readonly MAX_LOGS = 50;\r\n\r\n    // Timestamp tracking\r\n    protected lastHeartbeat: Date = new Date();\r\n\r\n    // ========================================\r\n    // ABSTRACT METHODS (must be implemented)\r\n    // ========================================\r\n\r\n    /**\r\n     * Analyzes the system state relevant to this agent.\r\n     * Returns a report or list of actions.\r\n     */\r\n    abstract analyze(): Promise<any>;\r\n\r\n    /**\r\n     * Executes the necessary actions based on the analysis.\r\n     */\r\n    abstract execute(analysisResult: any): Promise<void>;\r\n\r\n    // ========================================\r\n    // STATE MANAGEMENT\r\n    // ========================================\r\n\r\n    /**\r\n     * Update heartbeat timestamp\r\n     */\r\n    protected heartbeat(): void {\r\n        this.lastHeartbeat = new Date();\r\n    }\r\n\r\n    /**\r\n     * Set agent status and update heartbeat\r\n     */\r\n    protected setStatus(status: AgentStatus, task?: string): void {\r\n        this.status = status;\r\n        if (task) {\r\n            this.currentTask = task;\r\n        }\r\n        this.heartbeat();\r\n\r\n        // Log status change\r\n        this.log(`Status changed to ${status}${task ? `: ${task}` : ''}`, 'info');\r\n    }\r\n\r\n    /**\r\n     * Add log entry (with auto-cleanup of old logs)\r\n     */\r\n    protected log(message: string, type: LogType = 'info'): void {\r\n        const entry: LogEntry = {\r\n            message,\r\n            timestamp: new Date(),\r\n            type\r\n        };\r\n\r\n        this.logs.push(entry);\r\n\r\n        // Keep only last MAX_LOGS entries\r\n        if (this.logs.length > this.MAX_LOGS) {\r\n            this.logs = this.logs.slice(-this.MAX_LOGS);\r\n        }\r\n\r\n        // Also log to console (for development)\r\n        const emoji = type === 'error' ? 'ÔØî' : type === 'warning' ? 'ÔÜá´©Å' : type === 'success' ? 'Ô£à' : 'Ôä╣´©Å';\r\n        LoggerService.info(`${emoji} [${this.name}] ${message}`);\r\n    }\r\n\r\n    /**\r\n     * Get current agent state (for monitoring)\r\n     */\r\n    getState(): AgentState {\r\n        return {\r\n            id: this.id,\r\n            name: this.name,\r\n            role: this.role,\r\n            status: this.status,\r\n            lastHeartbeat: this.lastHeartbeat,\r\n            currentTask: this.currentTask,\r\n            logs: [...this.logs] // Return copy\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Set agent ID and role (called in constructor)\r\n     */\r\n    protected initialize(id: string, role: string): void {\r\n        this.id = id;\r\n        this.role = role;\r\n        this.heartbeat();\r\n        this.log(`Agent initialized`, 'success');\r\n    }\r\n\r\n    // ========================================\r\n    // MAIN EXECUTION\r\n    // ========================================\r\n\r\n    /**\r\n     * Main entry point for the agent.\r\n     */\r\n    async run() {\r\n        this.setStatus('WORKING', 'Starting analysis...');\r\n\r\n        try {\r\n            this.log(`Starting cycle...`, 'info');\r\n\r\n            const analysis = await this.analyze();\r\n\r\n            this.setStatus('WORKING', 'Executing actions...');\r\n            await this.execute(analysis);\r\n\r\n            this.setStatus('IDLE', 'Cycle complete');\r\n            this.log(`Cycle complete`, 'success');\r\n\r\n        } catch (error: any) {\r\n            this.setStatus('ERROR', `Failed: ${error.message}`);\r\n            this.log(`Failed: ${error.message}`, 'error');\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\agents\\cleaner-agent.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analysisResult' is defined but never used.","line":128,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3892,3895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3892,3895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":285,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":285,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":425,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":425,"endColumn":25}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ­ƒº╣ AEGIS CLEANER AGENT\r\n * \r\n * Intelligent Garbage Collector for Technical Debt.\r\n * \r\n * Identifies:\r\n * - Dead code (orphan files never imported)\r\n * - Legacy files (*.v1.*, *.old.*, etc.)\r\n * - Empty shells (files with no meaningful content)\r\n * \r\n * DOES NOT DELETE - only reports candidates for human review.\r\n */\r\n\r\nimport { BaseAgent } from './base-agent';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\ntype CleanupReason = 'ORPHAN' | 'LEGACY_PATTERN' | 'EMPTY_SHELL' | 'DUPLICATE';\r\ntype Confidence = 'HIGH' | 'MEDIUM' | 'LOW';\r\n\r\ninterface CleanupCandidate {\r\n    path: string;\r\n    reason: CleanupReason;\r\n    confidence: Confidence;\r\n    description: string;\r\n    fileSize?: number;\r\n    lastModified?: number;\r\n}\r\n\r\ninterface CleanupManifest {\r\n    timestamp: number;\r\n    totalScanned: number;\r\n    candidates: CleanupCandidate[];\r\n    summary: {\r\n        orphans: number;\r\n        legacy: number;\r\n        empty: number;\r\n        duplicates: number;\r\n    };\r\n}\r\n\r\ninterface DependencyGraph {\r\n    [filePath: string]: Set<string>; // file -> files it imports\r\n}\r\n\r\n// ============================================================================\r\n// CLEANER AGENT\r\n// ============================================================================\r\n\r\nexport class CleanerAgent extends BaseAgent {\r\n    name = 'AEGIS Cleaner';\r\n    private projectRoot: string;\r\n    private entryPoints: string[];\r\n    private excludePatterns: string[];\r\n\r\n    constructor() {\r\n        super();\r\n        this.initialize('cleaner', 'Technical Debt Hunter');\r\n        this.projectRoot = process.cwd();\r\n        this.entryPoints = [\r\n            path.join(this.projectRoot, 'src', 'main.tsx'),\r\n            path.join(this.projectRoot, 'server', 'index.ts'),\r\n            path.join(this.projectRoot, 'server', 'app.ts')\r\n        ];\r\n        this.excludePatterns = [\r\n            'node_modules',\r\n            '.git',\r\n            'dist',\r\n            'build',\r\n            '.next',\r\n            'coverage',\r\n            '__tests__',\r\n            'test',\r\n            'tests',\r\n            '.spec.',\r\n            '.test.',\r\n            'vite.config',\r\n            'tsconfig',\r\n            'eslint'\r\n        ];\r\n    }\r\n\r\n    // ========================================\r\n    // ANALYSIS\r\n    // ========================================\r\n\r\n    async analyze(): Promise<string> {\r\n        console.log('­ƒº╣ CLEANER AGENT - Starting Technical Debt Analysis\\n');\r\n\r\n        const candidates: CleanupCandidate[] = [];\r\n\r\n        // Scan 1: Dead Code\r\n        console.log('­ƒôª SCAN 1: Detecting Orphans (Dead Code)...');\r\n        const orphans = await this.detectOrphans();\r\n        candidates.push(...orphans);\r\n        console.log(`   Found ${orphans.length} orphan files\\n`);\r\n\r\n        // Scan 2: Legacy Patterns\r\n        console.log('­ƒæ╗ SCAN 2: Detecting Legacy Files...');\r\n        const legacy = await this.detectLegacyFiles();\r\n        candidates.push(...legacy);\r\n        console.log(`   Found ${legacy.length} legacy files\\n`);\r\n\r\n        // Scan 3: Empty Shells\r\n        console.log('­ƒùæ´©Å  SCAN 3: Detecting Empty Shells...');\r\n        const empty = await this.detectEmptyShells();\r\n        candidates.push(...empty);\r\n        console.log(`   Found ${empty.length} empty files\\n`);\r\n\r\n        return JSON.stringify({\r\n            totalCandidates: candidates.length,\r\n            breakdown: {\r\n                orphans: orphans.length,\r\n                legacy: legacy.length,\r\n                empty: empty.length\r\n            }\r\n        }, null, 2);\r\n    }\r\n\r\n    // ========================================\r\n    // EXECUTION\r\n    // ========================================\r\n\r\n    async execute(analysisResult: any): Promise<void> {\r\n        console.log('­ƒº╣ CLEANER AGENT - Generating Cleanup Manifest\\n');\r\n\r\n        const candidates: CleanupCandidate[] = [];\r\n\r\n        // Run all scans\r\n        const orphans = await this.detectOrphans();\r\n        const legacy = await this.detectLegacyFiles();\r\n        const empty = await this.detectEmptyShells();\r\n\r\n        candidates.push(...orphans, ...legacy, ...empty);\r\n\r\n        // Build manifest\r\n        const manifest: CleanupManifest = {\r\n            timestamp: Date.now(),\r\n            totalScanned: this.getAllProjectFiles().length,\r\n            candidates,\r\n            summary: {\r\n                orphans: orphans.length,\r\n                legacy: legacy.length,\r\n                empty: empty.length,\r\n                duplicates: 0 // Future enhancement\r\n            }\r\n        };\r\n\r\n        // Save manifest\r\n        const manifestPath = path.join(this.projectRoot, '.ai', 'cleanup-manifest.json');\r\n        const dir = path.dirname(manifestPath);\r\n        if (!fs.existsSync(dir)) {\r\n            fs.mkdirSync(dir, { recursive: true });\r\n        }\r\n\r\n        fs.writeFileSync(manifestPath, JSON.stringify(manifest, null, 2), 'utf-8');\r\n        console.log(`\\n­ƒôØ Cleanup manifest saved to: ${manifestPath}`);\r\n        console.log(`\\n­ƒôè Summary: ${candidates.length} candidates identified`);\r\n        console.log(`   - Orphans: ${orphans.length}`);\r\n        console.log(`   - Legacy: ${legacy.length}`);\r\n        console.log(`   - Empty: ${empty.length}`);\r\n    }\r\n\r\n    // ========================================\r\n    // SCAN 1: ORPHAN DETECTION\r\n    // ========================================\r\n\r\n    private async detectOrphans(): Promise<CleanupCandidate[]> {\r\n        const graph = this.buildDependencyGraph();\r\n        const allFiles = this.getAllProjectFiles();\r\n        const reachable = this.getReachableFiles(graph);\r\n\r\n        const orphans: CleanupCandidate[] = [];\r\n\r\n        for (const file of allFiles) {\r\n            // Skip entry points themselves\r\n            if (this.entryPoints.some(ep => file.includes(path.basename(ep)))) {\r\n                continue;\r\n            }\r\n\r\n            // Skip special directories\r\n            if (this.shouldExclude(file)) {\r\n                continue;\r\n            }\r\n\r\n            // Check if file is reachable from entry points\r\n            if (!reachable.has(file)) {\r\n                orphans.push({\r\n                    path: path.relative(this.projectRoot, file),\r\n                    reason: 'ORPHAN',\r\n                    confidence: 'HIGH',\r\n                    description: 'File is never imported in the dependency graph.'\r\n                });\r\n            }\r\n        }\r\n\r\n        return orphans;\r\n    }\r\n\r\n    // ========================================\r\n    // SCAN 2: LEGACY PATTERN DETECTION\r\n    // ========================================\r\n\r\n    private async detectLegacyFiles(): Promise<CleanupCandidate[]> {\r\n        const allFiles = this.getAllProjectFiles();\r\n        const legacy: CleanupCandidate[] = [];\r\n\r\n        const legacyPatterns = [\r\n            /\\.old\\./i,\r\n            /\\.backup\\./i,\r\n            /_v\\d+\\./i,\r\n            /\\.v\\d+\\./i,\r\n            /^temp_/i,\r\n            /^copy_of_/i,\r\n            /-old\\./i,\r\n            /-backup\\./i,\r\n            /\\.deprecated\\./i\r\n        ];\r\n\r\n        for (const file of allFiles) {\r\n            const basename = path.basename(file);\r\n\r\n            for (const pattern of legacyPatterns) {\r\n                if (pattern.test(basename)) {\r\n                    // Check if a newer version exists\r\n                    const modernVersion = this.findModernVersion(file);\r\n\r\n                    legacy.push({\r\n                        path: path.relative(this.projectRoot, file),\r\n                        reason: 'LEGACY_PATTERN',\r\n                        confidence: modernVersion ? 'HIGH' : 'MEDIUM',\r\n                        description: modernVersion\r\n                            ? `Detected legacy pattern while modern version exists: ${path.basename(modernVersion)}`\r\n                            : `Detected legacy pattern in filename: ${basename}`\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return legacy;\r\n    }\r\n\r\n    // ========================================\r\n    // SCAN 3: EMPTY SHELL DETECTION\r\n    // ========================================\r\n\r\n    private async detectEmptyShells(): Promise<CleanupCandidate[]> {\r\n        const allFiles = this.getAllProjectFiles();\r\n        const empty: CleanupCandidate[] = [];\r\n\r\n        for (const file of allFiles) {\r\n            try {\r\n                const stats = fs.statSync(file);\r\n                const content = fs.readFileSync(file, 'utf-8');\r\n\r\n                // Check file size\r\n                if (stats.size < 50) {\r\n                    empty.push({\r\n                        path: path.relative(this.projectRoot, file),\r\n                        reason: 'EMPTY_SHELL',\r\n                        confidence: 'HIGH',\r\n                        description: `File is only ${stats.size} bytes.`,\r\n                        fileSize: stats.size,\r\n                        lastModified: stats.mtimeMs\r\n                    });\r\n                    continue;\r\n                }\r\n\r\n                // Check if only comments/imports\r\n                const meaningfulContent = this.extractMeaningfulContent(content);\r\n                if (meaningfulContent.length < 20) {\r\n                    empty.push({\r\n                        path: path.relative(this.projectRoot, file),\r\n                        reason: 'EMPTY_SHELL',\r\n                        confidence: 'MEDIUM',\r\n                        description: 'File contains only comments/imports without exports.',\r\n                        fileSize: stats.size\r\n                    });\r\n                }\r\n            } catch (err) {\r\n                // Skip files that can't be read\r\n                continue;\r\n            }\r\n        }\r\n\r\n        return empty;\r\n    }\r\n\r\n    // ========================================\r\n    // DEPENDENCY GRAPH BUILDER\r\n    // ========================================\r\n\r\n    private buildDependencyGraph(): DependencyGraph {\r\n        const graph: DependencyGraph = {};\r\n        const allFiles = this.getAllProjectFiles();\r\n\r\n        for (const file of allFiles) {\r\n            const imports = this.extractImports(file);\r\n            graph[file] = new Set(imports);\r\n        }\r\n\r\n        return graph;\r\n    }\r\n\r\n    private extractImports(filePath: string): string[] {\r\n        try {\r\n            const content = fs.readFileSync(filePath, 'utf-8');\r\n            const imports: string[] = [];\r\n\r\n            const patterns = [\r\n                /import\\s+.*?\\s+from\\s+['\"]([^'\"]+)['\"]/g,\r\n                /import\\s+['\"]([^'\"]+)['\"]/g,\r\n                /require\\(['\"]([^'\"]+)['\"]\\)/g\r\n            ];\r\n\r\n            patterns.forEach(pattern => {\r\n                const matches = content.matchAll(pattern);\r\n                for (const match of matches) {\r\n                    const importPath = match[1];\r\n                    if (importPath.startsWith('.') || importPath.startsWith('/')) {\r\n                        const resolved = this.resolveImportPath(filePath, importPath);\r\n                        if (resolved) {\r\n                            imports.push(resolved);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return imports;\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    private resolveImportPath(fromFile: string, importPath: string): string | null {\r\n        const fromDir = path.dirname(fromFile);\r\n        const basePath = path.resolve(fromDir, importPath);\r\n\r\n        // Try exact path\r\n        if (fs.existsSync(basePath) && fs.statSync(basePath).isFile()) {\r\n            return basePath;\r\n        }\r\n\r\n        // Try with extensions\r\n        const extensions = ['.ts', '.tsx', '.js', '.jsx'];\r\n        for (const ext of extensions) {\r\n            const withExt = basePath + ext;\r\n            if (fs.existsSync(withExt) && fs.statSync(withExt).isFile()) {\r\n                return withExt;\r\n            }\r\n        }\r\n\r\n        // Try as directory with index\r\n        for (const ext of extensions) {\r\n            const indexPath = path.join(basePath, `index${ext}`);\r\n            if (fs.existsSync(indexPath) && fs.statSync(indexPath).isFile()) {\r\n                return indexPath;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    // ========================================\r\n    // REACHABILITY ANALYSIS\r\n    // ========================================\r\n\r\n    private getReachableFiles(graph: DependencyGraph): Set<string> {\r\n        const reachable = new Set<string>();\r\n        const visited = new Set<string>();\r\n\r\n        const dfs = (file: string) => {\r\n            if (visited.has(file)) return;\r\n            visited.add(file);\r\n            reachable.add(file);\r\n\r\n            const imports = graph[file] || new Set();\r\n            for (const imported of imports) {\r\n                dfs(imported);\r\n            }\r\n        };\r\n\r\n        // Start from all entry points\r\n        for (const entryPoint of this.entryPoints) {\r\n            if (fs.existsSync(entryPoint)) {\r\n                dfs(entryPoint);\r\n            }\r\n        }\r\n\r\n        return reachable;\r\n    }\r\n\r\n    // ========================================\r\n    // HELPERS\r\n    // ========================================\r\n\r\n    private getAllProjectFiles(): string[] {\r\n        const files: string[] = [];\r\n        const scanDirs = [\r\n            path.join(this.projectRoot, 'src'),\r\n            path.join(this.projectRoot, 'server')\r\n        ];\r\n\r\n        const walk = (dir: string) => {\r\n            try {\r\n                if (!fs.existsSync(dir)) return;\r\n\r\n                const entries = fs.readdirSync(dir, { withFileTypes: true });\r\n                for (const entry of entries) {\r\n                    const fullPath = path.join(dir, entry.name);\r\n\r\n                    if (entry.isDirectory()) {\r\n                        if (!this.shouldExclude(entry.name)) {\r\n                            walk(fullPath);\r\n                        }\r\n                    } else if (entry.isFile() && /\\.(ts|tsx|js|jsx)$/.test(entry.name)) {\r\n                        files.push(fullPath);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                // Skip unreadable directories\r\n            }\r\n        };\r\n\r\n        scanDirs.forEach(walk);\r\n        return files;\r\n    }\r\n\r\n    private shouldExclude(pathOrName: string): boolean {\r\n        return this.excludePatterns.some(pattern => pathOrName.includes(pattern));\r\n    }\r\n\r\n    private findModernVersion(legacyFile: string): string | null {\r\n        const dir = path.dirname(legacyFile);\r\n        const basename = path.basename(legacyFile);\r\n\r\n        // Remove legacy patterns to find modern version\r\n        const modernName = basename\r\n            .replace(/\\.old/gi, '')\r\n            .replace(/\\.backup/gi, '')\r\n            .replace(/_v\\d+/gi, '')\r\n            .replace(/\\.v\\d+/gi, '')\r\n            .replace(/^temp_/gi, '')\r\n            .replace(/^copy_of_/gi, '')\r\n            .replace(/-old/gi, '')\r\n            .replace(/-backup/gi, '')\r\n            .replace(/\\.deprecated/gi, '');\r\n\r\n        if (modernName === basename) return null;\r\n\r\n        const modernPath = path.join(dir, modernName);\r\n        return fs.existsSync(modernPath) ? modernPath : null;\r\n    }\r\n\r\n    private extractMeaningfulContent(content: string): string {\r\n        // Remove comments\r\n        let meaningful = content\r\n            .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') // Block comments\r\n            .replace(/\\/\\/.*/g, ''); // Line comments\r\n\r\n        // Remove imports\r\n        meaningful = meaningful\r\n            .replace(/import\\s+.*?;/g, '')\r\n            .replace(/require\\([^)]+\\);?/g, '');\r\n\r\n        // Remove whitespace\r\n        meaningful = meaningful.replace(/\\s+/g, '');\r\n\r\n        return meaningful;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\agents\\code-refactor-agent.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[929,932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[929,932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { BaseAgent } from './base-agent';\r\nimport { LoggerService } from '../services/logger-service';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\nexport class CodeRefactorAgent extends BaseAgent {\r\n    name = 'CodeRefactorAgent';\r\n\r\n    async analyze() {\r\n        // Simple heuristic: Find files larger than 2KB in server/controllers\r\n        const controllerDir = path.join(process.cwd(), 'server', 'controllers');\r\n        const files = await fs.readdir(controllerDir);\r\n\r\n        const candidates = [];\r\n\r\n        for (const file of files) {\r\n            if (file.endsWith('.ts')) {\r\n                const stats = await fs.stat(path.join(controllerDir, file));\r\n                if (stats.size > 2000) { // Arbitrary threshold\r\n                    candidates.push({ file, size: stats.size });\r\n                }\r\n            }\r\n        }\r\n\r\n        return candidates;\r\n    }\r\n\r\n    async execute(candidates: any[]) {\r\n        if (candidates.length === 0) {\r\n            LoggerService.info(`Ô£¿ [${this.name}] Codebase is clean.`);\r\n            return;\r\n        }\r\n\r\n        LoggerService.info(`­ƒº╣ [${this.name}] Found ${candidates.length} candidates for refactoring:`);\r\n        candidates.forEach(c => {\r\n            LoggerService.info(`   - ${c.file} (${(c.size / 1024).toFixed(2)} KB)`);\r\n        });\r\n\r\n        // In a real scenario, this agent would use an LLM to rewrite the code.\r\n        // For now, we just log the intent.\r\n        LoggerService.info(`­ƒôØ [${this.name}] Scheduled for optimization.`);\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\agents\\kairos-cleaner.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":181,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":181,"endColumn":23},{"ruleId":"prefer-const","severity":2,"message":"'resolved' is never reassigned. Use 'const' instead.","line":193,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":193,"endColumn":21,"fix":{"range":[6110,6159],"text":"const resolved = path.resolve(fromDir, importPath);"}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   KAIROS CLEANER v1.2 - Dead Code Hunter with Sanctuary Protocol\r\n *   \"Le temps r├®v├¿le tout. Les morts doivent partir.\"\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n */\r\n\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { speak } from '../system/language-matrix';\r\n\r\ninterface DeadFile {\r\n    path: string;\r\n    relativePath: string;\r\n    size: number;\r\n    lastModified: Date;\r\n    reason: string;\r\n}\r\n\r\nexport interface KairosReport {\r\n    scanDate: Date;\r\n    filesScanned: number;\r\n    orphansFound: number;\r\n    deadFiles: DeadFile[];\r\n    totalWasteBytes: number;\r\n}\r\n\r\n/**\r\n * KAIROS Cleaner - Dead Code Detection Agent\r\n */\r\nexport class KairosCleaner {\r\n    private rootDir: string;\r\n    private report: KairosReport | null = null;\r\n    private readonly IGNORED_DIRS = ['node_modules', 'dist', 'dist-server', '.git', '.gemini', 'build'];\r\n    private readonly IGNORED_FILES = [\r\n        'vite.config.ts',\r\n        'tsconfig.json',\r\n        'tsconfig.app.json',\r\n        'tsconfig.node.json',\r\n        'tsconfig.server.json',\r\n        'package.json',\r\n        'postcss.config.js',\r\n        'tailwind.config.js'\r\n    ];\r\n    private readonly ENTRY_POINTS = ['main.tsx', 'App.tsx', 'index.ts', 'server.ts'];\r\n\r\n    constructor(rootDir: string = process.cwd()) {\r\n        this.rootDir = path.join(rootDir, 'src');\r\n    }\r\n\r\n    /**\r\n     * Scan for dead code\r\n     */\r\n    public async scanDeadCode(): Promise<KairosReport> {\r\n        console.log(speak('KAIROS', 'PERFORMANCE_CHECK'));\r\n\r\n        const startTime = Date.now();\r\n\r\n        // Step 1: Collect all files\r\n        const allFiles = this.collectFiles(this.rootDir);\r\n        console.log(`[KAIROS] ­ƒôè ${allFiles.length} fichiers collect├®s`);\r\n\r\n        // Step 2: Build import graph\r\n        const importGraph = this.buildImportGraph(allFiles);\r\n\r\n        // Step 3: Find orphans\r\n        const orphans = this.findOrphans(allFiles, importGraph);\r\n\r\n        // Calculate waste\r\n        const totalWaste = orphans.reduce((sum: number, file: DeadFile) => sum + file.size, 0);\r\n\r\n        this.report = {\r\n            scanDate: new Date(),\r\n            filesScanned: allFiles.length,\r\n            orphansFound: orphans.length,\r\n            deadFiles: orphans,\r\n            totalWasteBytes: totalWaste\r\n        };\r\n\r\n        const duration = Date.now() - startTime;\r\n        console.log(`[KAIROS] ­ƒº╣ Analyse termin├®e en ${duration}ms. ${orphans.length} fichiers orphelins d├®tect├®s.`);\r\n\r\n        return this.report;\r\n    }\r\n\r\n    /**\r\n     * Get current report\r\n     */\r\n    public getReport(): KairosReport | null {\r\n        return this.report;\r\n    }\r\n\r\n    /**\r\n     * Collect all source files recursively\r\n     */\r\n    private collectFiles(dir: string): string[] {\r\n        const files: string[] = [];\r\n\r\n        const scan = (currentDir: string) => {\r\n            const entries = fs.readdirSync(currentDir, { withFileTypes: true });\r\n\r\n            for (const entry of entries) {\r\n                const fullPath = path.join(currentDir, entry.name);\r\n\r\n                // Skip ignored directories\r\n                if (entry.isDirectory()) {\r\n                    if (this.IGNORED_DIRS.includes(entry.name)) continue;\r\n                    scan(fullPath);\r\n                    continue;\r\n                }\r\n\r\n                // Only process source files\r\n                if (entry.isFile()) {\r\n                    const ext = path.extname(entry.name);\r\n                    if (['.ts', '.tsx', '.css', '.scss'].includes(ext)) {\r\n                        // Skip ignored config files\r\n                        if (this.IGNORED_FILES.includes(entry.name)) continue;\r\n                        files.push(fullPath);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        scan(dir);\r\n        return files;\r\n    }\r\n\r\n    /**\r\n     * Build import dependency graph\r\n     */\r\n    private buildImportGraph(files: string[]): Map<string, Set<string>> {\r\n        const graph = new Map<string, Set<string>>();\r\n\r\n        for (const file of files) {\r\n            const imports = this.extractImports(file);\r\n            graph.set(file, imports);\r\n        }\r\n\r\n        return graph;\r\n    }\r\n\r\n    /**\r\n     * Extract all imports from a file\r\n     */\r\n    private extractImports(filePath: string): Set<string> {\r\n        const imports = new Set<string>();\r\n\r\n        try {\r\n            const content = fs.readFileSync(filePath, 'utf-8');\r\n            const lines = content.split('\\n');\r\n\r\n            for (const line of lines) {\r\n                // Match: import ... from '...'\r\n                const importMatch = line.match(/import\\s+.*?\\s+from\\s+['\"](.+?)['\"]/);\r\n                if (importMatch) {\r\n                    const importPath = importMatch[1];\r\n\r\n                    // Resolve relative imports\r\n                    if (importPath.startsWith('.')) {\r\n                        const resolvedPath = this.resolveImport(filePath, importPath);\r\n                        if (resolvedPath) {\r\n                            imports.add(resolvedPath);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Match: import '...'\r\n                const directImportMatch = line.match(/import\\s+['\"](.+?)['\"]/);\r\n                if (directImportMatch) {\r\n                    const importPath = directImportMatch[1];\r\n                    if (importPath.startsWith('.')) {\r\n                        const resolvedPath = this.resolveImport(filePath, importPath);\r\n                        if (resolvedPath) {\r\n                            imports.add(resolvedPath);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            // File read error - skip\r\n        }\r\n\r\n        return imports;\r\n    }\r\n\r\n    /**\r\n     * Resolve relative import to absolute path\r\n     */\r\n    private resolveImport(fromFile: string, importPath: string): string | null {\r\n        const fromDir = path.dirname(fromFile);\r\n        let resolved = path.resolve(fromDir, importPath);\r\n\r\n        // Try with extensions\r\n        const extensions = ['.ts', '.tsx', '.css', '.scss', '/index.ts', '/index.tsx'];\r\n\r\n        for (const ext of extensions) {\r\n            const candidate = resolved + ext;\r\n            if (fs.existsSync(candidate)) {\r\n                return candidate;\r\n            }\r\n        }\r\n\r\n        // Try as-is\r\n        if (fs.existsSync(resolved)) {\r\n            return resolved;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Check if file is vital (should never be flagged as orphan)\r\n     * KAIROS v1.1 - False Positive Prevention\r\n     */\r\n    private isVitalFile(filePath: string): boolean {\r\n        const relativePath = path.relative(process.cwd(), filePath);\r\n        const basename = path.basename(filePath);\r\n\r\n        // 1. Tests - Never flag test files\r\n        if (basename.match(/\\.(test|spec)\\.(ts|tsx)$/)) {\r\n            return true;\r\n        }\r\n\r\n        // 2. Workers - Never flag worker files\r\n        if (relativePath.includes('worker') || basename.endsWith('.worker.ts')) {\r\n            return true;\r\n        }\r\n\r\n        // 3. Special Pages - Puppeteer entry points\r\n        if (basename === 'PDFRenderPage.tsx') {\r\n            return true;\r\n        }\r\n\r\n        // 4. Styles - CSS/SCSS are imported differently\r\n        if (basename.endsWith('.css') || basename.endsWith('.scss')) {\r\n            return true;\r\n        }\r\n\r\n        // 5. V2 Architecture - Work in progress\r\n        if (relativePath.includes('/v2/') || relativePath.includes('/atomic-editor/')) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Check if file is in a sanctuarized zone\r\n     * KAIROS v1.4 - OS Agnostic Sanctuary Protocol\r\n     * \r\n     * Certain critical architectural components must be protected\r\n     * even if they appear orphaned during incremental development.\r\n     * \r\n     * v1.4 CHANGES:\r\n     * - Normalized paths for Windows compatibility (backslash ÔåÆ forward slash)\r\n     * - Added explicit file whitelist for common utilities\r\n     */\r\n    private isSanctuarized(filePath: string): boolean {\r\n        const relativePath = path.relative(process.cwd(), filePath).toLowerCase();\r\n\r\n        // ÔÜá´©Å CRITICAL: Normalize path separators for cross-platform compatibility\r\n        // Windows uses backslashes (\\), but our sanctuary keywords use forward slashes (/)\r\n        const normalizedPath = relativePath.replace(/\\\\/g, '/');\r\n\r\n        // Extract filename for explicit checks\r\n        const basename = path.basename(filePath).toLowerCase();\r\n\r\n        // Explicit file whitelist - Common utilities often flagged as orphans\r\n        const explicitWhitelist = [\r\n            'feature-flags.ts',\r\n            'feature-flags.tsx',\r\n            'tokens.ts',\r\n            'tokens.tsx',\r\n            'constants.ts'\r\n        ];\r\n\r\n        if (explicitWhitelist.includes(basename)) {\r\n            return true;\r\n        }\r\n\r\n        // Sanctuary keywords (directories & patterns)\r\n        const sanctuaries = [\r\n            'domain',          // Ô¡É CRITICAL - Domain layer (Business Logic) - NEVER DELETE\r\n            'v2',              // New architecture\r\n            'admin',           // Admin dashboard\r\n            'infrastructure',  // EventBus & core services\r\n            'types',           // TypeScript definitions\r\n            'worker',          // Background threads\r\n            'test',            // QA files\r\n            '__tests__',       // Alternative test directory\r\n            '/ai/',            // AI Brain modules (nano-brain, semantic-analyzer, etc.)\r\n            '/bi/',            // Business Intelligence & Strategy\r\n            '/intelligence/',  // Intelligence Tracker\r\n            '/scv/'            // Data Mapper (Syst├¿me de Cartographie des Valeurs)\r\n        ];\r\n\r\n        // Check if NORMALIZED path contains any sanctuary keyword\r\n        for (const sanctuary of sanctuaries) {\r\n            if (normalizedPath.includes(sanctuary)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Find orphaned files (not imported by anyone)\r\n     */\r\n    private findOrphans(allFiles: string[], importGraph: Map<string, Set<string>>): DeadFile[] {\r\n        const orphans: DeadFile[] = [];\r\n\r\n        // Build reverse map: file -> importers\r\n        const importedBy = new Map<string, Set<string>>();\r\n\r\n        for (const [file, imports] of importGraph) {\r\n            for (const imported of imports) {\r\n                if (!importedBy.has(imported)) {\r\n                    importedBy.set(imported, new Set());\r\n                }\r\n                importedBy.get(imported)!.add(file);\r\n            }\r\n        }\r\n\r\n        // Check each file\r\n        for (const file of allFiles) {\r\n            const basename = path.basename(file);\r\n\r\n            // Skip entry points\r\n            if (this.ENTRY_POINTS.includes(basename)) continue;\r\n\r\n            // ÔÜá´©Å KAIROS v1.2 - Sanctuary Protocol (CRITICAL)\r\n            if (this.isSanctuarized(file)) {\r\n                console.log(`[KAIROS] ­ƒøí´©Å Fichier sanctuaris├® : ${path.relative(process.cwd(), file)}`);\r\n                continue;\r\n            }\r\n\r\n            // ÔÜá´©Å KAIROS v1.1 - Skip vital files (False Positive Prevention)\r\n            if (this.isVitalFile(file)) {\r\n                console.log(`[KAIROS] ­ƒøí´©Å Fichier vital prot├®g├® : ${path.relative(process.cwd(), file)}`);\r\n                continue;\r\n            }\r\n\r\n            // Check if imported\r\n            if (!importedBy.has(file) || importedBy.get(file)!.size === 0) {\r\n                const stats = fs.statSync(file);\r\n                orphans.push({\r\n                    path: file,\r\n                    relativePath: path.relative(process.cwd(), file),\r\n                    size: stats.size,\r\n                    lastModified: stats.mtime,\r\n                    reason: 'Jamais import├®'\r\n                });\r\n            }\r\n        }\r\n\r\n        return orphans;\r\n    }\r\n\r\n    /**\r\n     * Quarantine a file (rename to .bak)\r\n     */\r\n    public quarantineFile(filePath: string): boolean {\r\n        try {\r\n            const bakPath = filePath + '.bak';\r\n            fs.renameSync(filePath, bakPath);\r\n            console.log(`[KAIROS] ­ƒùæ´©Å Fichier mis en quarantaine : ${filePath}`);\r\n            return true;\r\n        } catch (error) {\r\n            console.error(`[KAIROS] ÔØî ├ëchec quarantaine : ${error}`);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Purge dead files\r\n     * @param filePaths Optional array of specific file paths to purge. If not provided, purges all.\r\n     */\r\n    public purgeDeadFiles(filePaths?: string[]): number {\r\n        if (!this.report) return 0;\r\n\r\n        let purged = 0;\r\n        const filesToPurge = filePaths\r\n            ? this.report.deadFiles.filter(df => filePaths.includes(df.path))\r\n            : this.report.deadFiles;\r\n\r\n        for (const deadFile of filesToPurge) {\r\n            if (this.quarantineFile(deadFile.path)) {\r\n                purged++;\r\n\r\n                // Remove from report after successful quarantine\r\n                const index = this.report.deadFiles.findIndex(f => f.path === deadFile.path);\r\n                if (index !== -1) {\r\n                    this.report.deadFiles.splice(index, 1);\r\n                    this.report.orphansFound--;\r\n                }\r\n            }\r\n        }\r\n\r\n        console.log(`[KAIROS] ­ƒº╣ ${purged} fichiers purg├®s`);\r\n        return purged;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\agents\\security-agent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\app.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\config\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\ai-controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\auth-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":65,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2836,2839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2836,2839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":83,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":83,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { z } from 'zod';\r\nimport { AuthService } from '../services/auth-service';\r\nimport { env } from '../config/env';\r\nimport { LoggerService } from '../services/logger-service';\r\nimport { eventBus, EVENTS } from '../services/event-bus';\r\n\r\nconst registerSchema = z.object({\r\n    email: z.string().email(),\r\n    password: z.string().min(6),\r\n});\r\n\r\nconst loginSchema = z.object({\r\n    email: z.string().email(),\r\n    password: z.string(),\r\n});\r\n\r\nexport class AuthController {\r\n    static async register(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const { email, password } = registerSchema.parse(req.body);\r\n            const user = await AuthService.register(email, password);\r\n            const { accessToken, refreshToken } = AuthService.generateTokens(user);\r\n\r\n            AuthController.setCookies(res, accessToken, refreshToken);\r\n\r\n            LoggerService.info('User registered', { userId: user.id, email: user.email });\r\n            eventBus.emit(EVENTS.USER.REGISTERED, { userId: user.id, email: user.email, timestamp: new Date() });\r\n\r\n            res.status(201).json({\r\n                user: {\r\n                    id: user.id,\r\n                    email: user.email,\r\n                    role: user.role,\r\n                    subscriptionStatus: user.subscriptionStatus,\r\n                },\r\n            });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async login(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const { email, password } = loginSchema.parse(req.body);\r\n            const user = await AuthService.login(email, password);\r\n            const { accessToken, refreshToken } = AuthService.generateTokens(user);\r\n\r\n            AuthController.setCookies(res, accessToken, refreshToken);\r\n\r\n            res.json({\r\n                user: {\r\n                    id: user.id,\r\n                    email: user.email,\r\n                    role: user.role,\r\n                    subscriptionStatus: user.subscriptionStatus,\r\n                },\r\n            });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async refresh(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const refreshToken = req.cookies.refreshToken;\r\n            if (!refreshToken) {\r\n                return res.status(401).json({ error: 'Refresh token required' });\r\n            }\r\n\r\n            const payload = AuthService.verifyRefreshToken(refreshToken);\r\n            const user = await AuthService.getUserById(payload.id);\r\n\r\n            if (!user) {\r\n                return res.status(401).json({ error: 'User not found' });\r\n            }\r\n\r\n            const tokens = AuthService.generateTokens(user as any);\r\n            AuthController.setCookies(res, tokens.accessToken, tokens.refreshToken);\r\n\r\n            res.json({ message: 'Token refreshed' });\r\n        } catch (error) {\r\n            res.clearCookie('accessToken');\r\n            res.clearCookie('refreshToken');\r\n            return res.status(401).json({ error: 'Invalid refresh token' });\r\n        }\r\n    }\r\n\r\n    static logout(req: Request, res: Response) {\r\n        LoggerService.info('User logged out');\r\n        res.clearCookie('accessToken');\r\n        res.clearCookie('refreshToken');\r\n        res.json({ message: 'Logged out' });\r\n    }\r\n\r\n    static async me(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            if (!req.user?.id) {\r\n                return res.status(401).json({ error: 'Unauthorized' });\r\n            }\r\n            const user = await AuthService.getUserById(req.user.id);\r\n            if (!user) {\r\n                return res.status(404).json({ error: 'User not found' });\r\n            }\r\n            res.json({ user });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    private static setCookies(res: Response, accessToken: string, refreshToken: string) {\r\n        res.cookie('accessToken', accessToken, {\r\n            httpOnly: true,\r\n            secure: env.NODE_ENV === 'production',\r\n            sameSite: 'lax',\r\n            maxAge: 15 * 60 * 1000, // 15 minutes\r\n        });\r\n\r\n        res.cookie('refreshToken', refreshToken, {\r\n            httpOnly: true,\r\n            secure: env.NODE_ENV === 'production',\r\n            sameSite: 'lax',\r\n            maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\r\n        });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\bi-controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\health-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":15,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response } from 'express';\r\nimport prisma from '../prisma';\r\n\r\nexport class HealthController {\r\n    static async deepCheck(req: Request, res: Response) {\r\n        const start = Date.now();\r\n        let dbStatus = 'disconnected';\r\n        let dbLatency = 0;\r\n\r\n        try {\r\n            await prisma.$queryRaw`SELECT 1`;\r\n            dbStatus = 'connected';\r\n            dbLatency = Date.now() - start;\r\n        } catch (error) {\r\n            dbStatus = 'error';\r\n        }\r\n\r\n        const memoryUsage = process.memoryUsage();\r\n\r\n        res.json({\r\n            status: dbStatus === 'connected' ? 'healthy' : 'degraded',\r\n            timestamp: new Date().toISOString(),\r\n            uptime: process.uptime(),\r\n            database: {\r\n                status: dbStatus,\r\n                latencyMs: dbLatency\r\n            },\r\n            memory: {\r\n                rss: Math.round(memoryUsage.rss / 1024 / 1024) + 'MB',\r\n                heapTotal: Math.round(memoryUsage.heapTotal / 1024 / 1024) + 'MB',\r\n                heapUsed: Math.round(memoryUsage.heapUsed / 1024 / 1024) + 'MB',\r\n            },\r\n            version: process.env.npm_package_version || '1.0.0'\r\n        });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\letter-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[919,922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[919,922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1404,1407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1404,1407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1806,1809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1806,1809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2232,2235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2232,2235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { LetterService } from '../services/letter-service';\r\nimport { z } from 'zod';\r\n\r\nconst createLetterSchema = z.object({\r\n    title: z.string().min(1),\r\n    content: z.string().min(1),\r\n    language: z.string().default('en'),\r\n    targetJob: z.string().optional(),\r\n    targetCompany: z.string().optional(),\r\n});\r\n\r\nconst updateLetterSchema = createLetterSchema.partial();\r\n\r\nexport class LetterController {\r\n    static async list(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const letters = await LetterService.listLetters(userId);\r\n            res.json({ letters });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async get(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n            const letter = await LetterService.getLetter(userId, id);\r\n\r\n            if (!letter) {\r\n                return res.status(404).json({ error: 'Letter not found' });\r\n            }\r\n\r\n            res.json({ letter });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async create(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const data = createLetterSchema.parse(req.body);\r\n\r\n            const letter = await LetterService.createLetter(userId, data);\r\n            res.status(201).json({ letter });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async update(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n            const data = updateLetterSchema.parse(req.body);\r\n\r\n            await LetterService.updateLetter(userId, id, data);\r\n            res.json({ success: true });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async delete(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n\r\n            await LetterService.deleteLetter(userId, id);\r\n            res.json({ success: true });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\profile-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[970,973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[970,973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1292,1295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1292,1295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1944,1947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1944,1947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2369,2372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2369,2372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":90,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3678,3681],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3678,3681],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4044,4047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4044,4047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { ProfileService } from '../services/profile-service';\r\nimport { z } from 'zod';\r\n\r\nconst createProfileSchema = z.object({\r\n    title: z.string().optional(),\r\n    data: z.record(z.any()), // Full CV object\r\n});\r\n\r\nconst updateProfileSchema = z.object({\r\n    title: z.string().optional(),\r\n    data: z.record(z.any()),\r\n});\r\n\r\n// ATLAS Protocol - Full profile schema for auto-save\r\nconst atlasProfileSchema = z.object({\r\n    id: z.string(),\r\n    lastUpdated: z.number(),\r\n    personal: z.any(),\r\n    summary: z.string().optional(),\r\n    experiences: z.array(z.any()),\r\n    educations: z.array(z.any()),\r\n    languages: z.array(z.any()),\r\n    skills: z.array(z.any()),\r\n    strengths: z.array(z.any()).optional(),\r\n    metadata: z.any()\r\n});\r\n\r\nexport class ProfileController {\r\n    static async list(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const profiles = await ProfileService.listProfiles(userId);\r\n            res.json({ profiles });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async get(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n            const profile = await ProfileService.getProfile(userId, id);\r\n\r\n            if (!profile) {\r\n                return res.status(404).json({ error: 'Profile not found' });\r\n            }\r\n\r\n            // Parse JSON data before sending\r\n            const parsedData = profile.data ? JSON.parse(profile.data) : null;\r\n            res.json({ profile: { ...profile, data: parsedData } });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async create(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { data, title } = createProfileSchema.parse(req.body);\r\n\r\n            const profile = await ProfileService.createProfile(userId, data, title);\r\n            res.status(201).json({ profile });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async update(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n            const { data, title } = updateProfileSchema.parse(req.body);\r\n\r\n            await ProfileService.updateProfile(userId, id, data, title);\r\n            res.json({ success: true });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ATLAS Protocol Permanence - Auto-save current profile\r\n     * PUT /api/profile (no ID)\r\n     * \r\n     * Used by ATLAS sync service for real-time cloud persistence\r\n     */\r\n    static async updateCurrent(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            // For now, work without auth for V2 testing\r\n            // In production, use: const userId = (req as any).user!.id;\r\n            const profileData = atlasProfileSchema.parse(req.body);\r\n            \r\n            console.log(`[ATLAS] ­ƒÆ¥ Saving profile: ${profileData.id}`);\r\n\r\n            // Use profile ID from the data itself\r\n            const userId = 'v2-test-user'; // Temporary for V2\r\n            \r\n            await ProfileService.updateProfile(userId, profileData.id, profileData, 'Auto-saved');\r\n\r\n            res.json({\r\n                success: true,\r\n                savedAt: Date.now(),\r\n                profileId: profileData.id\r\n            });\r\n        } catch (error: any) {\r\n            console.error('[ATLAS] ÔØî Save error:', error);\r\n            res.status(500).json({\r\n                success: false,\r\n                error: error.message || 'Failed to save profile'\r\n            });\r\n        }\r\n    }\r\n\r\n    static async delete(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            const userId = (req as any).user!.id;\r\n            const { id } = req.params;\r\n\r\n            await ProfileService.deleteProfile(userId, id);\r\n            res.json({ success: true });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\subscription-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LoggerService' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { SubscriptionService } from '../services/subscription-service';\r\nimport { LoggerService } from '../services/logger-service';\r\n\r\nexport class SubscriptionController {\r\n    static async getStatus(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            if (!req.user?.id) return res.status(401).json({ error: 'Unauthorized' });\r\n\r\n            const subscription = await SubscriptionService.getSubscription(req.user.id);\r\n            res.json({ subscription });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async createCheckout(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            if (!req.user?.id || !req.user?.email) return res.status(401).json({ error: 'Unauthorized' });\r\n\r\n            const session = await SubscriptionService.createCheckoutSession(req.user.id, req.user.email, 'PRO');\r\n            res.json(session);\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n\r\n    static async createPortal(req: Request, res: Response, next: NextFunction) {\r\n        try {\r\n            if (!req.user?.id) return res.status(401).json({ error: 'Unauthorized' });\r\n\r\n            const session = await SubscriptionService.createPortalSession(req.user.id);\r\n            res.json(session);\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\controllers\\webhook-controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'env' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1078,1081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1078,1081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2635,2638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2635,2638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response } from 'express';\r\nimport { StripeService } from '../services/stripe-service';\r\nimport prisma from '../prisma';\r\nimport { env } from '../config/env';\r\n\r\nexport class WebhookController {\r\n    static async handleWebhook(req: Request, res: Response) {\r\n        const signature = req.headers['stripe-signature'];\r\n\r\n        if (!signature) {\r\n            return res.status(400).send('Missing stripe-signature header');\r\n        }\r\n\r\n        let event;\r\n\r\n        try {\r\n            // Note: req.body must be raw buffer for signature verification\r\n            // We need to ensure the body parser is configured correctly in app.ts\r\n            event = StripeService.constructEvent(req.body, signature as string);\r\n        } catch (err: any) {\r\n            console.error(`Webhook Error: ${err.message}`);\r\n            return res.status(400).send(`Webhook Error: ${err.message}`);\r\n        }\r\n\r\n        try {\r\n            switch (event.type) {\r\n                case 'checkout.session.completed': {\r\n                    const session = event.data.object as any;\r\n                    const subscriptionId = session.subscription;\r\n                    const customerId = session.customer;\r\n\r\n                    // Find user by Stripe Customer ID\r\n                    const user = await prisma.subscription.findFirst({\r\n                        where: { stripeCustomerId: customerId },\r\n                        include: { user: true },\r\n                    });\r\n\r\n                    if (user) {\r\n                        await prisma.subscription.update({\r\n                            where: { id: user.id },\r\n                            data: {\r\n                                status: 'active',\r\n                                plan: 'PRO',\r\n                                stripeSubscriptionId: subscriptionId,\r\n                                currentPeriodStart: new Date(), // Should ideally come from subscription object\r\n                                currentPeriodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // Approx 1 month\r\n                            },\r\n                        });\r\n\r\n                        // Update User role/status if needed\r\n                        await prisma.user.update({\r\n                            where: { id: user.userId },\r\n                            data: { subscriptionStatus: 'PRO' }\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'customer.subscription.updated':\r\n                case 'customer.subscription.deleted': {\r\n                    const subscription = event.data.object as any;\r\n                    const status = subscription.status;\r\n\r\n                    await prisma.subscription.updateMany({\r\n                        where: { stripeSubscriptionId: subscription.id },\r\n                        data: {\r\n                            status: status,\r\n                            currentPeriodEnd: new Date(subscription.current_period_end * 1000),\r\n                        },\r\n                    });\r\n\r\n                    // If canceled/unpaid, downgrade user\r\n                    if (status !== 'active') {\r\n                        const sub = await prisma.subscription.findFirst({\r\n                            where: { stripeSubscriptionId: subscription.id }\r\n                        });\r\n                        if (sub) {\r\n                            await prisma.user.update({\r\n                                where: { id: sub.userId },\r\n                                data: { subscriptionStatus: 'FREE' }\r\n                            });\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    console.log(`Unhandled event type ${event.type}`);\r\n            }\r\n\r\n            res.json({ received: true });\r\n        } catch (error) {\r\n            console.error('Error processing webhook:', error);\r\n            res.status(500).send('Internal Server Error');\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\demo-agents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\lib\\stripe.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[287,290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[287,290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport Stripe from 'stripe';\r\n\r\n\r\nif (!process.env.STRIPE_SECRET_KEY) {\r\n    console.warn('STRIPE_SECRET_KEY is missing. Stripe features will not work.');\r\n}\r\n\r\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY || 'sk_test_placeholder', {\r\n    apiVersion: '2025-11-17.clover' as any, // Cast to any to avoid strict type checking if versions drift\r\n    typescript: true,\r\n});\r\n\r\nexport default stripe;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\middleware\\admin-auth.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[541,544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[541,544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Admin Middleware\r\n * \r\n * Protects admin routes - requires authenticated admin user.\r\n */\r\n\r\nimport type { Request, Response, NextFunction } from 'express';\r\n\r\n/**\r\n * Require admin role\r\n */\r\nexport const requireAdmin = (req: Request, res: Response, next: NextFunction) => {\r\n    // TODO: Implement proper authentication check\r\n    // For now, allow in development mode\r\n    if (process.env.NODE_ENV === 'development') {\r\n        return next();\r\n    }\r\n\r\n    // Check if user is authenticated and is admin\r\n    const user = (req as any).user;\r\n    if (!user) {\r\n        return res.status(401).json({\r\n            error: 'Authentication required'\r\n        });\r\n    }\r\n\r\n    if (!user.isAdmin) {\r\n        return res.status(403).json({\r\n            error: 'Admin access required'\r\n        });\r\n    }\r\n\r\n    next();\r\n};\r\n\r\n/**\r\n * Rate limiting for admin endpoints\r\n */\r\nexport const adminRateLimit = (req: Request, res: Response, next: NextFunction) => {\r\n    // TODO: Implement rate limiting\r\n    // For now, just pass through\r\n    next();\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\middleware\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":13,"column":5,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":17,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":31,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport jwt from 'jsonwebtoken';\r\nimport { env } from '../config/env';\r\n\r\ninterface UserPayload {\r\n    id: string;\r\n    role: string;\r\n    email: string;\r\n}\r\n\r\ndeclare global {\r\n    namespace Express {\r\n        interface Request {\r\n            user?: UserPayload;\r\n        }\r\n    }\r\n}\r\n\r\nexport const authenticateToken = (req: Request, res: Response, next: NextFunction) => {\r\n    const token = req.cookies.accessToken || req.headers['authorization']?.split(' ')[1];\r\n\r\n    if (!token) {\r\n        return res.status(401).json({ error: 'Unauthorized' });\r\n    }\r\n\r\n    try {\r\n        const payload = jwt.verify(token, env.JWT_SECRET) as UserPayload;\r\n        req.user = payload;\r\n        next();\r\n    } catch (error) {\r\n        return res.status(403).json({ error: 'Forbidden' });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\middleware\\error.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":22,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request, Response, NextFunction } from 'express';\r\n\r\nexport class AppError extends Error {\r\n    statusCode: number;\r\n    code?: string;\r\n\r\n    constructor(message: string, statusCode: number, code?: string) {\r\n        super(message);\r\n        this.statusCode = statusCode;\r\n        this.code = code;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\nimport { MonitorService } from '../services/monitor-service';\r\n\r\nexport const errorHandler = (\r\n    err: AppError,\r\n    req: Request,\r\n    res: Response,\r\n    next: NextFunction\r\n) => {\r\n    const statusCode = err.statusCode || 500;\r\n    const message = err.message || 'Internal Server Error';\r\n\r\n    // Record error for monitoring\r\n    MonitorService.recordError();\r\n\r\n    console.error(`[Error] ${req.method} ${req.path}:`, err);\r\n\r\n    res.status(statusCode).json({\r\n        status: 'error',\r\n        statusCode,\r\n        message,\r\n        ...(process.env.NODE_ENV === 'development' && { stack: err.stack }),\r\n    });\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\middleware\\profiler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\admin.routes.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1003,1006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1003,1006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1657,1660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1657,1660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2161,2164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2161,2164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2640,2643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2640,2643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3172,3175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3172,3175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Admin API Routes\r\n * \r\n * Protected endpoints for agent monitoring and system management.\r\n */\r\n\r\nimport { Router } from 'express';\r\nimport { agentManager } from '../services/agent-manager';\r\nimport { requireAdmin, adminRateLimit } from '../middleware/admin-auth';\r\n\r\nconst router = Router();\r\n\r\n// Apply middlewares to all admin routes\r\nrouter.use(requireAdmin);\r\nrouter.use(adminRateLimit);\r\n\r\n// ============================================================================\r\n// AGENT MONITORING\r\n// ============================================================================\r\n\r\n/**\r\n * GET /api/admin/agents-status\r\n * Get status of all registered agents\r\n */\r\nrouter.get('/agents-status', (req, res) => {\r\n    try {\r\n        const agents = agentManager.getAllAgents();\r\n        const summary = agentManager.getSummary();\r\n\r\n        res.json({\r\n            success: true,\r\n            data: {\r\n                agents,\r\n                summary\r\n            }\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/admin/agents/:id\r\n * Get status of a specific agent\r\n */\r\nrouter.get('/agents/:id', (req, res) => {\r\n    try {\r\n        const { id } = req.params;\r\n        const agentStatus = agentManager.getAgentStatus(id);\r\n\r\n        if (!agentStatus) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                error: `Agent ${id} not found`\r\n            });\r\n        }\r\n\r\n        res.json({\r\n            success: true,\r\n            data: agentStatus\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/admin/agents/:id/trigger\r\n * Manually trigger an agent\r\n */\r\nrouter.post('/agents/:id/trigger', async (req, res) => {\r\n    try {\r\n        const { id } = req.params;\r\n\r\n        await agentManager.triggerAgent(id);\r\n\r\n        res.json({\r\n            success: true,\r\n            message: `Agent ${id} triggered successfully`\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/admin/logs\r\n * Get recent logs from all agents\r\n */\r\nrouter.get('/logs', (req, res) => {\r\n    try {\r\n        const limit = parseInt(req.query.limit as string) || 100;\r\n        const logs = agentManager.getRecentLogs(limit);\r\n\r\n        res.json({\r\n            success: true,\r\n            data: logs\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/admin/health\r\n * Get overall system health\r\n */\r\nrouter.get('/health', (req, res) => {\r\n    try {\r\n        const summary = agentManager.getSummary();\r\n        const isHealthy = agentManager.isHealthy();\r\n\r\n        res.json({\r\n            success: true,\r\n            data: {\r\n                healthy: isHealthy,\r\n                summary\r\n            }\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n// ============================================================================\r\n// SYSTEM MANAGEMENT (Future)\r\n// ============================================================================\r\n\r\n/**\r\n * POST /api/admin/system/flush-cache\r\n * Flush application cache\r\n */\r\nrouter.post('/system/flush-cache', (req, res) => {\r\n    // TODO: Implement cache flushing\r\n    res.json({\r\n        success: true,\r\n        message: 'Cache flushed (not implemented yet)'\r\n    });\r\n});\r\n\r\nexport default router;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\bi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\letters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\pdf-profile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\pdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\profile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\puppeteer-pdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\subscriptions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\system.routes.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2676,2679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2676,2679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3636,3639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3636,3639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4521,4524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4521,4524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * System Routes - Neural Link API\r\n * \r\n * Exposes OlympusCore health data to the frontend.\r\n */\r\n\r\nimport { Router } from 'express';\r\nimport { OlympusCore } from '../system/neural-core';\r\nimport { KairosCleaner } from '../agents/kairos-cleaner';\r\n\r\nconst router = Router();\r\n\r\n// Global instances\r\nlet olympus: OlympusCore | null = null;\r\nlet kairosCleaner: KairosCleaner | null = null;\r\n\r\n/**\r\n * Initialize Olympus Core and KAIROS\r\n */\r\nexport function initializeOlympus() {\r\n    if (!olympus) {\r\n        olympus = new OlympusCore();\r\n        olympus.awaken().then(() => {\r\n            console.log('[OLYMPUS] ­ƒôí Neural Link established. Monitoring active.');\r\n\r\n            // Initialize KAIROS cleaner\r\n            kairosCleaner = new KairosCleaner();\r\n            kairosCleaner.scanDeadCode().then(() => {\r\n                console.log('[KAIROS] ÔÅ░ Dead code scanner initialized.');\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * GET /api/system/pulse\r\n * Real-time system health and activity\r\n */\r\nrouter.get('/pulse', (req, res) => {\r\n    try {\r\n        if (!olympus) {\r\n            return res.status(503).json({\r\n                success: false,\r\n                error: 'Olympus not initialized'\r\n            });\r\n        }\r\n\r\n        // Get health check from Olympus\r\n        const health = olympus.healthCheck();\r\n        const hermes = olympus.getHermes();\r\n\r\n        // Get recent synaptic activity\r\n        const recentLogs = hermes.getSynapticActivity(50).map(msg => ({\r\n            id: msg.id,\r\n            timestamp: msg.timestamp,\r\n            agent: msg.sender,\r\n            message: `${msg.type} - ${JSON.stringify(msg.payload).substring(0, 100)}`,\r\n            type: msg.priority === 0 ? 'error' : msg.priority === 1 ? 'warning' : 'info'\r\n        }));\r\n\r\n        // Format response\r\n        const response = {\r\n            success: true,\r\n            data: {\r\n                olympus: health.olympus,\r\n                agents: health.generals.map(general => ({\r\n                    id: general.name.toLowerCase(),\r\n                    name: general.name,\r\n                    status: general.status,\r\n                    lastAction: general.mentalState,\r\n                    capacity: general.operationalCapacity,\r\n                    lastHeartbeat: general.lastHeartbeat\r\n                })),\r\n                logs: recentLogs,\r\n                hermes: {\r\n                    deadLetters: health.hermes.deadLetters,\r\n                    recentActivity: health.hermes.recentActivity\r\n                },\r\n                kairosReport: kairosCleaner?.getReport() || null\r\n            }\r\n        };\r\n\r\n        res.json(response);\r\n\r\n    } catch (error: any) {\r\n        console.error('[SYSTEM API] Error getting pulse:', error);\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/system/status\r\n * Quick status check\r\n */\r\nrouter.get('/status', (req, res) => {\r\n    res.json({\r\n        success: true,\r\n        data: {\r\n            olympus: olympus ? 'ONLINE' : 'OFFLINE',\r\n            timestamp: new Date()\r\n        }\r\n    });\r\n});\r\n\r\n/**\r\n * POST /api/system/kairos/rescan\r\n * Trigger KAIROS rescan\r\n */\r\nrouter.post('/kairos/rescan', async (req, res) => {\r\n    try {\r\n        if (!kairosCleaner) {\r\n            return res.status(503).json({\r\n                success: false,\r\n                error: 'KAIROS not initialized'\r\n            });\r\n        }\r\n\r\n        const report = await kairosCleaner.scanDeadCode();\r\n\r\n        res.json({\r\n            success: true,\r\n            data: report\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/system/kairos/purge\r\n * Purge dead files (quarantine)\r\n * Body: { files?: string[] } - Optional list of files to purge. If not provided, purges all.\r\n */\r\nrouter.post('/kairos/purge', (req, res) => {\r\n    try {\r\n        if (!kairosCleaner) {\r\n            return res.status(503).json({\r\n                success: false,\r\n                error: 'KAIROS not initialized'\r\n            });\r\n        }\r\n\r\n        const { files } = req.body as { files?: string[] };\r\n        const purged = kairosCleaner.purgeDeadFiles(files);\r\n\r\n        res.json({\r\n            success: true,\r\n            data: {\r\n                purged,\r\n                message: `${purged} fichiers mis en quarantaine (.bak)`\r\n            }\r\n        });\r\n    } catch (error: any) {\r\n        res.status(500).json({\r\n            success: false,\r\n            error: error.message\r\n        });\r\n    }\r\n});\r\n\r\nexport default router;\r\nexport { olympus, kairosCleaner };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\routes\\webhook.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\__tests__\\auth-service.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[724,727],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[724,727],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[786,789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[786,789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1443,1446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1443,1446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\r\nimport { AuthService } from '../auth-service';\r\nimport prisma from '../../prisma';\r\nimport bcrypt from 'bcrypt';\r\n\r\n// Mock Prisma and Bcrypt\r\nvi.mock('../../prisma', () => ({\r\n    default: {\r\n        user: {\r\n            findUnique: vi.fn(),\r\n            create: vi.fn(),\r\n        },\r\n    },\r\n}));\r\n\r\nvi.mock('bcrypt', () => ({\r\n    default: {\r\n        hash: vi.fn().mockResolvedValue('hashed_password'),\r\n        compare: vi.fn(),\r\n    },\r\n}));\r\n\r\ndescribe('AuthService', () => {\r\n    beforeEach(() => {\r\n        vi.clearAllMocks();\r\n    });\r\n\r\n    it('should register a new user', async () => {\r\n        // Setup mocks\r\n        (prisma.user.findUnique as any).mockResolvedValue(null);\r\n        (prisma.user.create as any).mockResolvedValue({\r\n            id: '123',\r\n            email: 'test@example.com',\r\n            role: 'USER',\r\n            subscriptionStatus: 'FREE',\r\n        });\r\n\r\n        const user = await AuthService.register('test@example.com', 'password123');\r\n\r\n        expect(prisma.user.findUnique).toHaveBeenCalledWith({ where: { email: 'test@example.com' } });\r\n        expect(bcrypt.hash).toHaveBeenCalledWith('password123', 10);\r\n        expect(prisma.user.create).toHaveBeenCalled();\r\n        expect(user.email).toBe('test@example.com');\r\n    });\r\n\r\n    it('should throw error if user already exists', async () => {\r\n        (prisma.user.findUnique as any).mockResolvedValue({ id: '123', email: 'test@example.com' });\r\n\r\n        await expect(AuthService.register('test@example.com', 'password123'))\r\n            .rejects\r\n            .toThrow('User already exists');\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\agent-manager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AgentStatus' is defined but never used.","line":8,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AgentManager - Singleton\r\n * \r\n * Central registry for all AEGIS agents.\r\n * Provides real-time monitoring and control.\r\n */\r\n\r\nimport type { BaseAgent, AgentState, AgentStatus, LogType } from '../agents/base-agent';\r\n\r\n// ============================================================================\r\n// AGENT MANAGER\r\n// ============================================================================\r\n\r\nexport class AgentManager {\r\n    private static instance: AgentManager;\r\n    private agents: Map<string, BaseAgent> = new Map();\r\n\r\n    private constructor() {\r\n        // Private constructor for singleton\r\n    }\r\n\r\n    /**\r\n     * Get singleton instance\r\n     */\r\n    static getInstance(): AgentManager {\r\n        if (!AgentManager.instance) {\r\n            AgentManager.instance = new AgentManager();\r\n        }\r\n        return AgentManager.instance;\r\n    }\r\n\r\n    /**\r\n     * Register an agent for monitoring\r\n     */\r\n    registerAgent(agent: BaseAgent): void {\r\n        const state = agent.getState();\r\n        this.agents.set(state.id, agent);\r\n        console.log(`Ô£à Registered agent: ${state.name} (${state.id})`);\r\n    }\r\n\r\n    /**\r\n     * Get agent by ID\r\n     */\r\n    getAgent(id: string): BaseAgent | null {\r\n        return this.agents.get(id) || null;\r\n    }\r\n\r\n    /**\r\n     * Get agent status by ID\r\n     */\r\n    getAgentStatus(id: string): AgentState | null {\r\n        const agent = this.agents.get(id);\r\n        return agent ? agent.getState() : null;\r\n    }\r\n\r\n    /**\r\n     * Get all registered agents' states\r\n     */\r\n    getAllAgents(): AgentState[] {\r\n        const states: AgentState[] = [];\r\n        for (const agent of this.agents.values()) {\r\n            states.push(agent.getState());\r\n        }\r\n        return states;\r\n    }\r\n\r\n    /**\r\n     * Get summary of all agents\r\n     */\r\n    getSummary(): {\r\n        total: number;\r\n        idle: number;\r\n        working: number;\r\n        error: number;\r\n        offline: number;\r\n    } {\r\n        const states = this.getAllAgents();\r\n        return {\r\n            total: states.length,\r\n            idle: states.filter(s => s.status === 'IDLE').length,\r\n            working: states.filter(s => s.status === 'WORKING').length,\r\n            error: states.filter(s => s.status === 'ERROR').length,\r\n            offline: states.filter(s => s.status === 'OFFLINE').length\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Get recent logs from all agents (aggregated)\r\n     */\r\n    getRecentLogs(limit: number = 100): Array<{\r\n        agentId: string;\r\n        agentName: string;\r\n        message: string;\r\n        timestamp: Date;\r\n        type: LogType;\r\n    }> {\r\n        const allLogs: Array<{\r\n            agentId: string;\r\n            agentName: string;\r\n            message: string;\r\n            timestamp: Date;\r\n            type: LogType;\r\n        }> = [];\r\n\r\n        for (const agent of this.agents.values()) {\r\n            const state = agent.getState();\r\n            for (const log of state.logs) {\r\n                allLogs.push({\r\n                    agentId: state.id,\r\n                    agentName: state.name,\r\n                    message: log.message,\r\n                    timestamp: log.timestamp,\r\n                    type: log.type\r\n                });\r\n            }\r\n        }\r\n\r\n        // Sort by timestamp (newest first)\r\n        allLogs.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\r\n\r\n        // Return limited results\r\n        return allLogs.slice(0, limit);\r\n    }\r\n\r\n    /**\r\n     * Manually trigger an agent\r\n     */\r\n    async triggerAgent(id: string): Promise<void> {\r\n        const agent = this.agents.get(id);\r\n        if (!agent) {\r\n            throw new Error(`Agent ${id} not found`);\r\n        }\r\n\r\n        await agent.run();\r\n    }\r\n\r\n    /**\r\n     * Check if all agents are healthy (not in ERROR state)\r\n     */\r\n    isHealthy(): boolean {\r\n        const states = this.getAllAgents();\r\n        return !states.some(s => s.status === 'ERROR');\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// SINGLETON EXPORT\r\n// ============================================================================\r\n\r\nexport const agentManager = AgentManager.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\ai-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\auth-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\bi-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\email-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\event-bus.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[332,335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[332,335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport EventEmitter from 'events';\r\nimport { LoggerService } from './logger-service';\r\n\r\nclass EventBus extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n        this.on('error', (err) => {\r\n            LoggerService.error('ÔØî [EventBus] Uncaught error:', err);\r\n        });\r\n    }\r\n\r\n    emit(event: string, ...args: any[]): boolean {\r\n        LoggerService.info(`­ƒôó [EventBus] Emitting: ${event}`);\r\n        return super.emit(event, ...args);\r\n    }\r\n}\r\n\r\nexport const eventBus = new EventBus();\r\n\r\n// Standard Event Names\r\nexport const EVENTS = {\r\n    USER: {\r\n        REGISTERED: 'USER_REGISTERED',\r\n        LOGIN: 'USER_LOGIN'\r\n    },\r\n    CV: {\r\n        CREATED: 'CV_CREATED',\r\n        UPDATED: 'CV_UPDATED'\r\n    },\r\n    SUBSCRIPTION: {\r\n        UPGRADED: 'SUBSCRIPTION_UPGRADED',\r\n        CANCELLED: 'SUBSCRIPTION_CANCELLED'\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\letter-service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[479,482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[479,482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[901,904],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[901,904],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport prisma from '../prisma';\r\n\r\nexport class LetterService {\r\n    static async listLetters(userId: string) {\r\n        return prisma.letter.findMany({\r\n            where: { userId },\r\n            orderBy: { updatedAt: 'desc' }\r\n        });\r\n    }\r\n\r\n    static async getLetter(userId: string, letterId: string) {\r\n        return prisma.letter.findFirst({\r\n            where: { id: letterId, userId }\r\n        });\r\n    }\r\n\r\n    static async createLetter(userId: string, data: any) {\r\n        return prisma.letter.create({\r\n            data: {\r\n                userId,\r\n                title: data.title,\r\n                content: data.content,\r\n                language: data.language || 'en',\r\n                targetJob: data.targetJob,\r\n                targetCompany: data.targetCompany,\r\n            }\r\n        });\r\n    }\r\n\r\n    static async updateLetter(userId: string, letterId: string, data: any) {\r\n        return prisma.letter.updateMany({\r\n            where: { id: letterId, userId },\r\n            data: {\r\n                title: data.title,\r\n                content: data.content,\r\n                language: data.language,\r\n                targetJob: data.targetJob,\r\n                targetCompany: data.targetCompany,\r\n            }\r\n        });\r\n    }\r\n\r\n    static async deleteLetter(userId: string, letterId: string) {\r\n        return prisma.letter.deleteMany({\r\n            where: { id: letterId, userId }\r\n        });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\logger-service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":3,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[75,78],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[75,78],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[247,250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[247,250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[390,393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[390,393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport class LoggerService {\r\n    static info(message: string, context?: any) {\r\n        console.log(`[INFO] ${new Date().toISOString()} - ${message}`, context ? JSON.stringify(context) : '');\r\n    }\r\n\r\n    static error(message: string, error?: any) {\r\n        console.error(`[ERROR] ${new Date().toISOString()} - ${message}`, error);\r\n    }\r\n\r\n    static warn(message: string, context?: any) {\r\n        console.warn(`[WARN] ${new Date().toISOString()} - ${message}`, context ? JSON.stringify(context) : '');\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\monitor-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\profile-service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Prisma' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1133,1136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1133,1136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport prisma from '../prisma';\r\nimport { Prisma } from '@prisma/client';\r\n\r\nexport class ProfileService {\r\n    static async listProfiles(userId: string) {\r\n        return prisma.profile.findMany({\r\n            where: { userId },\r\n            select: {\r\n                id: true,\r\n                title: true, // Was name\r\n                updatedAt: true,\r\n                isDemo: true,\r\n                data: true, // Need data to get name/title if not in top level\r\n            },\r\n            orderBy: { updatedAt: 'desc' }\r\n        });\r\n    }\r\n\r\n    static async getProfile(userId: string, profileId: string) {\r\n        return prisma.profile.findFirst({\r\n            where: { id: profileId, userId }\r\n        });\r\n    }\r\n\r\n    static async createProfile(userId: string, data: any, title: string = 'My CV') {\r\n        const profileData = JSON.stringify(data);\r\n        return prisma.profile.create({\r\n            data: {\r\n                userId,\r\n                title, // Was name\r\n                data: profileData,\r\n            }\r\n        });\r\n    }\r\n\r\n    static async updateProfile(userId: string, profileId: string, data: any, title?: string) {\r\n        const profileData = JSON.stringify(data);\r\n        return prisma.profile.updateMany({\r\n            where: { id: profileId, userId },\r\n            data: {\r\n                data: profileData,\r\n                ...(title && { title }),\r\n            }\r\n        });\r\n    }\r\n\r\n    static async deleteProfile(userId: string, profileId: string) {\r\n        return prisma.profile.deleteMany({\r\n            where: { id: profileId, userId }\r\n        });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\puppeteer-pdf.service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7655,7658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7655,7658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":233,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":233,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":242,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":242,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":360,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":360,"endColumn":23}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   PUPPETEER PDF SERVICE - LIQUID GLASS PROTOCOL\r\n * \r\n *   \"The mirror must be perfect. The glass must be liquid. The PDF must be truth.\"\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n * Architecture: PANTHEON-GRADE\r\n * Quality: PIXEL-PERFECT\r\n * Support: GLASSMORPHISM | LUCIDE | DYNAMIC TEMPLATES\r\n * \r\n */\r\n\r\nimport puppeteer from 'puppeteer';\r\nimport type { Browser, Page } from 'puppeteer';\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// TYPES & INTERFACES\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport interface PDFGenerationOptions {\r\n    profileId: string;\r\n    templateId?: string;        // 'modern' | 'ats' | 'creative' | ... (future-proof)\r\n    frontendUrl?: string;       // Default: http://localhost:5173\r\n    quality?: 'standard' | 'high' | 'ultra';\r\n    timeout?: number;           // Max wait time in ms\r\n}\r\n\r\nexport interface PDFGenerationResult {\r\n    buffer: Buffer;\r\n    size: number;\r\n    generationTime: number;\r\n    metadata: {\r\n        profileId: string;\r\n        templateId: string;\r\n        timestamp: Date;\r\n        resolution: { width: number; height: number };\r\n    };\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// PUPPETEER PDF SERVICE - LIQUID GLASS EDITION\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport class PuppeteerPDFService {\r\n    private static browserInstance: Browser | null = null;\r\n\r\n    /**\r\n     * Generate PDF with LIQUID GLASS protocol\r\n     * \r\n     * Features:\r\n     * - Glassmorphism support (backdrop-filter rendering)\r\n     * - Perfect Lucide icon synchronization\r\n     * - Dynamic template registry\r\n     * - Zombie process protection\r\n     */\r\n    static async generatePDF(options: PDFGenerationOptions): Promise<PDFGenerationResult> {\r\n        const startTime = Date.now();\r\n\r\n        const {\r\n            profileId,\r\n            templateId = 'modern',\r\n            frontendUrl = 'http://localhost:5173',\r\n            quality = 'high',\r\n            timeout = 30000\r\n        } = options;\r\n\r\n        this.log('­ƒÄ¿', 'INIT', `Generating PDF for profile ${profileId} with template \"${templateId}\"`);\r\n\r\n        let browser: Browser | null = null;\r\n        let page: Page | null = null;\r\n\r\n        try {\r\n            // =====================================================\r\n            // STEP 1: LAUNCH BROWSER (Liquid Glass Configuration)\r\n            // =====================================================\r\n            browser = await this.launchBrowser(quality);\r\n            page = await browser.newPage();\r\n\r\n            this.log('­ƒîÉ', 'BROWSER', 'Browser launched with Liquid Glass protocol');\r\n\r\n            // =====================================================\r\n            // STEP 2: CONFIGURE PAGE (A4 dimensions, high DPI)\r\n            // =====================================================\r\n            const resolution = this.getResolution(quality);\r\n\r\n            await page.setViewport({\r\n                width: resolution.width,\r\n                height: resolution.height,\r\n                deviceScaleFactor: resolution.scale\r\n            });\r\n\r\n            this.log('­ƒôÉ', 'VIEWPORT', `Set to ${resolution.width}x${resolution.height} @ ${resolution.scale}x scale`);\r\n\r\n            // =====================================================\r\n            // STEP 3: BUILD RENDER URL (Template Registry)\r\n            // =====================================================\r\n            const renderUrl = this.buildRenderUrl(frontendUrl, profileId, templateId);\r\n\r\n            this.log('­ƒöù', 'URL', `Navigating to ${renderUrl}`);\r\n\r\n            // =====================================================\r\n            // STEP 4: NAVIGATE & WAIT (Network idle)\r\n            // =====================================================\r\n            await page.goto(renderUrl, {\r\n                waitUntil: ['networkidle0', 'domcontentloaded'],\r\n                timeout\r\n            });\r\n\r\n            this.log('ÔÅ│', 'LOADING', 'Initial page load complete');\r\n\r\n            // =====================================================\r\n            // STEP 5: DOUBLE SYNCHRONIZATION (Liquid Glass Protocol)\r\n            // =====================================================\r\n\r\n            // Wait for CV container to be visible\r\n            await page.waitForSelector('#cv-template', {\r\n                visible: true,\r\n                timeout: 10000\r\n            });\r\n\r\n            this.log('Ô£à', 'DOM', 'CV template container found');\r\n\r\n            // Wait for ACTUAL CV CONTENT (not loading message)\r\n            // Check that the content doesn't contain loading/error states\r\n            await page.waitForFunction(\r\n                () => {\r\n                    const container = document.querySelector('#cv-template');\r\n                    if (!container) return false;\r\n\r\n                    const text = container.textContent || '';\r\n                    // Check for loading/error states\r\n                    if (text.includes('Loading CV...')) return false;\r\n                    if (text.includes('Waiting for profile')) return false;\r\n                    if (text.includes('Error:')) return false;\r\n\r\n                    // Check for actual CV content - look for common CV elements\r\n                    // The template should have section headers or content\r\n                    const hasContent = container.querySelectorAll('[class*=\"section\"], h1, h2, h3').length > 0\r\n                        || text.length > 200; // Fallback: has substantial text\r\n\r\n                    return hasContent;\r\n                },\r\n                { timeout: 15000, polling: 500 }\r\n            );\r\n\r\n            this.log('Ô£à', 'CONTENT', 'CV template content rendered');\r\n\r\n            // Wait for ALL fonts to load (critical for icons & typography)\r\n            await page.evaluate(() => document.fonts.ready);\r\n\r\n            this.log('Ô£à', 'FONTS', 'All fonts loaded and ready');\r\n\r\n            // Additional wait for Lucide icons to render (they load async)\r\n            await this.waitForLucideIcons(page);\r\n\r\n            this.log('Ô£à', 'ICONS', 'Lucide icons rendered');\r\n\r\n            // Final stabilization wait (reduced but safer than none)\r\n            await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n            this.log('­ƒÄ¿', 'RENDER', 'All assets synchronized. Ready for capture.');\r\n\r\n            // =====================================================\r\n            // STEP 6: GENERATE PDF (Liquid Glass quality)\r\n            // =====================================================\r\n            const pdfBuffer = await page.pdf({\r\n                format: 'A4',\r\n                printBackground: true,\r\n                preferCSSPageSize: false,\r\n                margin: {\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                }\r\n            });\r\n\r\n            const generationTime = Date.now() - startTime;\r\n\r\n            this.log('Ô£¿', 'SUCCESS', `PDF generated in ${generationTime}ms (${pdfBuffer.length} bytes)`);\r\n\r\n            return {\r\n                buffer: Buffer.from(pdfBuffer),\r\n                size: pdfBuffer.length,\r\n                generationTime,\r\n                metadata: {\r\n                    profileId,\r\n                    templateId,\r\n                    timestamp: new Date(),\r\n                    resolution\r\n                }\r\n            };\r\n\r\n        } catch (error: any) {\r\n            this.log('ÔØî', 'ERROR', `PDF generation failed: ${error.message}`);\r\n\r\n            // Enhanced error diagnostics\r\n            if (page) {\r\n                try {\r\n                    const url = page.url();\r\n                    this.log('­ƒöì', 'DEBUG', `Failed at URL: ${url}`);\r\n\r\n                    // Capture screenshot to see what went wrong\r\n                    const screenshotPath = `./pdf-error-${Date.now()}.png`;\r\n                    await page.screenshot({ path: screenshotPath, fullPage: true });\r\n                    this.log('­ƒô©', 'DEBUG', `Error screenshot saved to: ${screenshotPath}`);\r\n\r\n                    // Get page content for debugging\r\n                    const content = await page.content();\r\n                    this.log('­ƒôä', 'DEBUG', `Page content (first 500 chars): ${content.substring(0, 500)}`);\r\n\r\n                    // Check for specific error states\r\n                    const bodyText = await page.evaluate(() => document.body?.innerText || 'EMPTY');\r\n                    this.log('­ƒôØ', 'DEBUG', `Body text: ${bodyText.substring(0, 200)}`);\r\n                } catch (debugError) {\r\n                    this.log('ÔÜá´©Å', 'DEBUG', `Debug capture failed: ${debugError}`);\r\n                }\r\n            }\r\n\r\n            throw new Error(`PDF Generation failed: ${error.message}`);\r\n\r\n        } finally {\r\n            // =====================================================\r\n            // STEP 7: ZOMBIE KILLER (Always close browser)\r\n            // =====================================================\r\n            if (page) {\r\n                try {\r\n                    await page.close();\r\n                    this.log('­ƒöÆ', 'CLEANUP', 'Page closed');\r\n                } catch (err) {\r\n                    this.log('ÔÜá´©Å', 'CLEANUP', 'Failed to close page (non-critical)');\r\n                }\r\n            }\r\n\r\n            if (browser) {\r\n                try {\r\n                    await browser.close();\r\n                    this.log('­ƒöÆ', 'CLEANUP', 'Browser closed - no zombie processes');\r\n                } catch (err) {\r\n                    this.log('ÔÜá´©Å', 'CLEANUP', 'Failed to close browser (non-critical)');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Launch browser with Liquid Glass configuration\r\n     */\r\n    private static async launchBrowser(quality: 'standard' | 'high' | 'ultra'): Promise<Browser> {\r\n        const args = [\r\n            // Core stability\r\n            '--no-sandbox',\r\n            '--disable-setuid-sandbox',\r\n            '--disable-dev-shm-usage',\r\n\r\n            // Graphics & Rendering (LIQUID GLASS CRITICAL)\r\n            '--disable-web-security',           // Allow CORS for localhost\r\n            '--enable-features=NetworkService',\r\n            '--disable-features=VizDisplayCompositor',\r\n\r\n            // Typography perfection\r\n            '--font-render-hinting=none',       // Vector-perfect fonts\r\n            '--disable-font-subpixel-positioning',\r\n\r\n            // GPU & Acceleration (backdrop-filter support)\r\n            '--enable-gpu-rasterization',\r\n            '--enable-oop-rasterization',\r\n            '--disable-software-rasterizer',\r\n\r\n            // CSS Effects (Glassmorphism)\r\n            '--enable-features=BackdropFilter', // CRITICAL for backdrop-filter\r\n            '--enable-unsafe-webgpu',           // Modern CSS effects\r\n\r\n            // Memory & Performance\r\n            '--disable-extensions',\r\n            '--disable-plugins',\r\n            '--disable-background-networking',\r\n            '--disable-default-apps',\r\n            '--disable-sync'\r\n        ];\r\n\r\n        // Ultra quality: Add more rendering precision\r\n        if (quality === 'ultra') {\r\n            args.push(\r\n                '--force-color-profile=srgb',\r\n                '--disable-accelerated-2d-canvas=false'\r\n            );\r\n        }\r\n\r\n        return await puppeteer.launch({\r\n            headless: true,\r\n            args\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get resolution based on quality setting\r\n     */\r\n    private static getResolution(quality: 'standard' | 'high' | 'ultra'): {\r\n        width: number;\r\n        height: number;\r\n        scale: number;\r\n    } {\r\n        // A4 @ 96 DPI = 794 x 1123 px\r\n        const baseWidth = 794;\r\n        const baseHeight = 1123;\r\n\r\n        switch (quality) {\r\n            case 'ultra':\r\n                return { width: baseWidth, height: baseHeight, scale: 3 }; // 300 DPI equivalent\r\n            case 'high':\r\n                return { width: baseWidth, height: baseHeight, scale: 2 }; // 192 DPI\r\n            case 'standard':\r\n            default:\r\n                return { width: baseWidth, height: baseHeight, scale: 1.5 }; // 144 DPI\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Build render URL with template registry support\r\n     */\r\n    private static buildRenderUrl(\r\n        frontendUrl: string,\r\n        profileId: string,\r\n        templateId: string\r\n    ): string {\r\n        // Clean base URL\r\n        const baseUrl = frontendUrl.replace(/\\/$/, '');\r\n\r\n        // Template-agnostic URL construction\r\n        // Format: /pdf-render/:profileId?template=modern\r\n        return `${baseUrl}/pdf-render/${profileId}?template=${templateId}`;\r\n    }\r\n\r\n    /**\r\n     * Wait for Lucide icons to be fully rendered\r\n     * \r\n     * Lucide icons are SVGs that may load asynchronously.\r\n     * This ensures they're not empty squares.\r\n     */\r\n    private static async waitForLucideIcons(page: Page): Promise<void> {\r\n        try {\r\n            await page.waitForFunction(\r\n                () => {\r\n                    // Check if any SVG elements exist and have paths\r\n                    const svgs = document.querySelectorAll('svg');\r\n                    if (svgs.length === 0) return true; // No icons = OK\r\n\r\n                    // Ensure all SVGs have rendered content\r\n                    return Array.from(svgs).every(svg => {\r\n                        const paths = svg.querySelectorAll('path, circle, rect, line, polyline, polygon');\r\n                        return paths.length > 0; // Icon has shapes\r\n                    });\r\n                },\r\n                { timeout: 5000 }\r\n            );\r\n        } catch (error) {\r\n            // Non-critical: If no icons or timeout, proceed anyway\r\n            this.log('ÔÜá´©Å', 'ICONS', 'Icon check timeout (non-critical, proceeding)');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Console logging with personality\r\n     */\r\n    private static log(emoji: string, category: string, message: string): void {\r\n        console.log(`[LIQUID-GLASS] ${emoji} ${category}: ${message}`);\r\n    }\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// EXPORT\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport default PuppeteerPDFService;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\stripe-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\services\\subscription-service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'plan' is defined but never used.","line":42,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":75}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport prisma from '../prisma';\r\nimport { AppError } from '../middleware/error';\r\nimport { env } from '../config/env';\r\n\r\nimport { StripeService } from './stripe-service';\r\n\r\nexport class SubscriptionService {\r\n    static async getSubscription(userId: string) {\r\n        return prisma.subscription.findUnique({\r\n            where: { userId },\r\n        });\r\n    }\r\n\r\n    static async getOrCreateCustomer(userId: string, email: string) {\r\n        let subscription = await prisma.subscription.findUnique({\r\n            where: { userId },\r\n        });\r\n\r\n        if (!subscription) {\r\n            // Create initial subscription record\r\n            subscription = await prisma.subscription.create({\r\n                data: {\r\n                    userId,\r\n                    status: 'incomplete',\r\n                    plan: 'FREE',\r\n                },\r\n            });\r\n        }\r\n\r\n        if (!subscription.stripeCustomerId) {\r\n            const customer = await StripeService.createCustomer(email, userId);\r\n            subscription = await prisma.subscription.update({\r\n                where: { userId },\r\n                data: { stripeCustomerId: customer.id },\r\n            });\r\n        }\r\n\r\n        return subscription.stripeCustomerId!;\r\n    }\r\n\r\n    static async createCheckoutSession(userId: string, email: string, plan: string) {\r\n        const customerId = await this.getOrCreateCustomer(userId, email);\r\n        const successUrl = `${env.CORS_ORIGIN}/app?tab=subscription&success=true`;\r\n        const cancelUrl = `${env.CORS_ORIGIN}/app?tab=subscription&canceled=true`;\r\n\r\n        const session = await StripeService.createCheckoutSession(\r\n            customerId,\r\n            env.STRIPE_PRICE_ID_PRO,\r\n            successUrl,\r\n            cancelUrl\r\n        );\r\n\r\n        return { url: session.url };\r\n    }\r\n\r\n    static async createPortalSession(userId: string) {\r\n        const subscription = await prisma.subscription.findUnique({\r\n            where: { userId },\r\n        });\r\n\r\n        if (!subscription?.stripeCustomerId) {\r\n            throw new AppError('No billing account found', 400);\r\n        }\r\n\r\n        const returnUrl = `${env.CORS_ORIGIN}/app?tab=subscription`;\r\n        const session = await StripeService.createPortalSession(subscription.stripeCustomerId!, returnUrl);\r\n\r\n        return { url: session.url };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\system\\language-matrix.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12021,12024],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12021,12024],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   LANGUAGE MATRIX - PROTOCOLE BABEL\r\n *   Multilingual Neural Communication System\r\n * \r\n *   \"Les dieux parlent toutes les langues. Nous choisissons la v├┤tre.\"\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n */\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// TYPES\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport type Language = 'fr' | 'en';\r\n\r\ninterface AgentPhrases {\r\n    [key: string]: string;\r\n}\r\n\r\ninterface AgentLanguageSet {\r\n    OLYMPUS: AgentPhrases;\r\n    AEGIS: AgentPhrases;\r\n    HELIOS: AgentPhrases;\r\n    NEXUS: AgentPhrases;\r\n    KAIROS: AgentPhrases;\r\n    HERMES: AgentPhrases;\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// LANGUAGE MATRIX\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport const MATRIX: Record<Language, AgentLanguageSet> = {\r\n    // ========================================\r\n    // FRAN├çAIS - La Langue Noble\r\n    // ========================================\r\n    fr: {\r\n        OLYMPUS: {\r\n            WAKE: '­ƒîî Syst├¿mes en ├®veil. Le Panth├®on vous observe.',\r\n            AWAKENING: 'ÔÜí Initialisation neuronale. Conscience ├®mergente...',\r\n            ONLINE: 'Ô£à Tous syst├¿mes op├®rationnels. Le Panth├®on vit.',\r\n            STATUS: '­ƒæü´©Å STATUT : Conscience op├®rationnelle.',\r\n            UPTIME: 'ÔÅ▒´©Å Temps de veille :',\r\n            HEALTHY: '­ƒÆÜ Tous les contr├┤les r├®ussis. Le syst├¿me est sain.',\r\n            DEGRADED: 'ÔÜá´©Å Syst├¿mes d├®grad├®s. Attention requise.',\r\n            BROKEN: 'ÔØî D├®faillance critique d├®tect├®e.',\r\n            SHUTDOWN: '­ƒîæ S├®quence d\\'arr├¬t initi├®e. Le Panth├®on s\\'endort...',\r\n            OFFLINE: 'Ô£à Noyau neuronal hors ligne. ├Ç bient├┤t.',\r\n            HEARTBEAT: '­ƒÆô Pulsation d├®tect├®e.'\r\n        },\r\n\r\n        AEGIS: {\r\n            INIT: '­ƒøí´©Å Protocoles de s├®curit├® engag├®s. P├®rim├¿tre scann├®.',\r\n            AWAKENING: '­ƒÄû´©Å G├®n├®ral AEGIS se pr├®sente au devoir.',\r\n            ACTIVE: '­ƒæü´©Å Vigilant. Les murs tiennent bon.',\r\n            SCAN_START: '­ƒöì Scan de s├®curit├® en cours...',\r\n            SCAN_COMPLETE: 'Ô£à Patrouille des Sentinelles termin├®e',\r\n            NO_THREATS: '­ƒƒó Aucune menace d├®tect├®e',\r\n            THREAT_DETECTED: '­ƒö┤ MENACE D├ëTECT├ëE : ',\r\n            FIREWALL_OK: '­ƒøí´©Å Int├®grit├® du pare-feu : 100%',\r\n            SECURITY_UPDATE: '­ƒöä Protocoles de s├®curit├® mis ├á jour',\r\n            VULNERABILITY_CHECK: '­ƒöÄ Recherche de vuln├®rabilit├®s...',\r\n            SENTINEL_REPORT: '­ƒôí Rapport de Sentinelle envoy├®',\r\n            MENTAL_STATE: 'Vigilant. Les murs tiennent bon.'\r\n        },\r\n\r\n        HELIOS: {\r\n            INIT: 'ÔÿÇ´©Å Syst├¿mes de build en ligne. La lumi├¿re guide le chemin.',\r\n            AWAKENING: '­ƒÄû´©Å G├®n├®ral HELIOS se pr├®sente au devoir.',\r\n            ACTIVE: '­ƒöÑ Radiant. La forge br├╗le avec ├®clat.',\r\n            BUILD_START: '­ƒö¿ La forge br├╗le. Compilation en cours...',\r\n            BUILD_SUCCESS: 'Ô£à Artefact g├®n├®r├® avec succ├¿s.',\r\n            BUILD_FAILED: 'ÔØî ├ëchec de compilation. Analyse requise.',\r\n            PDF_OPTIMIZE: '­ƒÄ¿ Optimisation des assets PDF...',\r\n            LIQUID_GLASS: '­ƒÆÄ Protocole Liquid Glass actif',\r\n            FONT_RENDER: 'Ô£ì´©Å Rendu des polices : vectoris├®',\r\n            PIPELINE_READY: 'ÔÜÖ´©Å Pipeline de build pr├¬t',\r\n            ASSET_COMPLETE: '­ƒôª Assets finalis├®s',\r\n            MENTAL_STATE: 'Radiant. La forge br├╗le avec ├®clat.'\r\n        },\r\n\r\n        NEXUS: {\r\n            INIT: '­ƒò©´©Å Voies neuronales ├®tablies. Toutes connexions actives.',\r\n            AWAKENING: '­ƒÄû´©Å G├®n├®ral NEXUS se pr├®sente au devoir.',\r\n            ACTIVE: '­ƒîÉ Connect├®. La toile est forte.',\r\n            API_VERIFIED: 'Ô£à Points d\\'API v├®rifi├®s',\r\n            NETWORK_OK: '­ƒîÉ Latence r├®seau : optimale',\r\n            CONNECTIONS_STABLE: '­ƒöù Connexions externes stables',\r\n            WEBHOOK_ACTIVE: '­ƒ¬Ø ├ëcouteurs webhook actifs',\r\n            DATA_SYNC: '­ƒöä Synchronisation des donn├®es en cours...',\r\n            INTEGRATION_CHECK: '­ƒöî V├®rification des int├®grations',\r\n            ENDPOINT_TEST: '­ƒÄ» Test des endpoints...',\r\n            MENTAL_STATE: 'Connect├®. La toile est forte.'\r\n        },\r\n\r\n        KAIROS: {\r\n            INIT: 'ÔÅ░ Syst├¿mes temporels synchronis├®s. L\\'horloge est mienne.',\r\n            AWAKENING: '­ƒÄû´©Å G├®n├®ral KAIROS se pr├®sente au devoir.',\r\n            ACTIVE: 'ÔÖ¥´©Å ├ëternel. Le temps plie ├á ma volont├®.',\r\n            METRICS_OK: '­ƒôè M├®triques de performance nominales',\r\n            SCHEDULERS_SYNC: 'ÔÅ▒´©Å Planificateurs synchronis├®s',\r\n            CRON_EXECUTED: 'Ô£à T├óches cron ex├®cut├®es',\r\n            FAST_RESPONSE: 'ÔÜí Temps de r├®ponse : <100ms',\r\n            UPTIME_HIGH: '­ƒôê Uptime syst├¿me : 99.9%',\r\n            PERFORMANCE_CHECK: '­ƒÅâ V├®rification des performances...',\r\n            TIME_SYNC: '­ƒò░´©Å Synchronisation temporelle compl├¿te',\r\n            MENTAL_STATE: '├ëternel. Le temps plie ├á ma volont├®.'\r\n        },\r\n\r\n        HERMES: {\r\n            INIT: 'ÔÜí BUS HERMES INITIALIS├ë. Le messager s\\'├®veille. Voies neuronales : ACTIVES.',\r\n            SYNAPSE_FIRED: 'ÔÜí Synapse urgente envoy├®e de',\r\n            SYNAPSE_DELIVERED: 'Ô£à Message livr├® avec succ├¿s',\r\n            SYNAPSE_RETRY: '­ƒöä Nouvelle tentative de livraison',\r\n            SYNAPSE_FAILED: 'ÔØî ├ëchec de livraison',\r\n            DEAD_LETTER: '­ƒÆÇ Message envoy├® en autopsie. Raison :',\r\n            PRIORITY_CRITICAL: '­ƒö┤ CRITIQUE',\r\n            PRIORITY_HIGH: '­ƒƒá HAUTE',\r\n            PRIORITY_NORMAL: '­ƒƒí NORMALE',\r\n            PRIORITY_LOW: '­ƒƒó BASSE',\r\n            QUEUE_PROCESSING: 'ÔÜÖ´©Å Traitement de la file d\\'attente...'\r\n        }\r\n    },\r\n\r\n    // ========================================\r\n    // ENGLISH - The Universal Tongue\r\n    // ========================================\r\n    en: {\r\n        OLYMPUS: {\r\n            WAKE: '­ƒîî Systems awakening. The Pantheon is watching.',\r\n            AWAKENING: 'ÔÜí Neural initialization. Consciousness emerging...',\r\n            ONLINE: 'Ô£à All systems operational. The Pantheon lives.',\r\n            STATUS: '­ƒæü´©Å STATUS: Operational consciousness.',\r\n            UPTIME: 'ÔÅ▒´©Å Uptime:',\r\n            HEALTHY: '­ƒÆÜ All checks passed. System is healthy.',\r\n            DEGRADED: 'ÔÜá´©Å Systems degraded. Attention required.',\r\n            BROKEN: 'ÔØî Critical failure detected.',\r\n            SHUTDOWN: '­ƒîæ Shutdown sequence initiated. The Pantheon sleeps...',\r\n            OFFLINE: 'Ô£à Neural core offline. Until we meet again.',\r\n            HEARTBEAT: '­ƒÆô Heartbeat detected.'\r\n        },\r\n\r\n        AEGIS: {\r\n            INIT: '­ƒøí´©Å Security protocols engaged. Perimeter scanned.',\r\n            AWAKENING: '­ƒÄû´©Å General AEGIS reporting for duty.',\r\n            ACTIVE: '­ƒæü´©Å Vigilant. The walls hold.',\r\n            SCAN_START: '­ƒöì Security scan in progress...',\r\n            SCAN_COMPLETE: 'Ô£à Sentinel patrol complete',\r\n            NO_THREATS: '­ƒƒó No threats detected',\r\n            THREAT_DETECTED: '­ƒö┤ THREAT DETECTED: ',\r\n            FIREWALL_OK: '­ƒøí´©Å Firewall integrity: 100%',\r\n            SECURITY_UPDATE: '­ƒöä Security protocols updated',\r\n            VULNERABILITY_CHECK: '­ƒöÄ Scanning for vulnerabilities...',\r\n            SENTINEL_REPORT: '­ƒôí Sentinel report sent',\r\n            MENTAL_STATE: 'Vigilant. The walls hold.'\r\n        },\r\n\r\n        HELIOS: {\r\n            INIT: 'ÔÿÇ´©Å Build systems online. The light guides the way.',\r\n            AWAKENING: '­ƒÄû´©Å General HELIOS reporting for duty.',\r\n            ACTIVE: '­ƒöÑ Radiant. The forge burns bright.',\r\n            BUILD_START: '­ƒö¿ The forge burns. Compilation in progress...',\r\n            BUILD_SUCCESS: 'Ô£à Artifact generated successfully.',\r\n            BUILD_FAILED: 'ÔØî Compilation failed. Analysis required.',\r\n            PDF_OPTIMIZE: '­ƒÄ¿ Optimizing PDF assets...',\r\n            LIQUID_GLASS: '­ƒÆÄ Liquid Glass protocol active',\r\n            FONT_RENDER: 'Ô£ì´©Å Font rendering: vectorized',\r\n            PIPELINE_READY: 'ÔÜÖ´©Å Build pipeline ready',\r\n            ASSET_COMPLETE: '­ƒôª Assets finalized',\r\n            MENTAL_STATE: 'Radiant. The forge burns bright.'\r\n        },\r\n\r\n        NEXUS: {\r\n            INIT: '­ƒò©´©Å Neural pathways established. All connections live.',\r\n            AWAKENING: '­ƒÄû´©Å General NEXUS reporting for duty.',\r\n            ACTIVE: '­ƒîÉ Connected. The web is strong.',\r\n            API_VERIFIED: 'Ô£à API endpoints verified',\r\n            NETWORK_OK: '­ƒîÉ Network latency: optimal',\r\n            CONNECTIONS_STABLE: '­ƒöù External connections stable',\r\n            WEBHOOK_ACTIVE: '­ƒ¬Ø Webhook listeners active',\r\n            DATA_SYNC: '­ƒöä Data sync in progress...',\r\n            INTEGRATION_CHECK: '­ƒöî Checking integrations',\r\n            ENDPOINT_TEST: '­ƒÄ» Testing endpoints...',\r\n            MENTAL_STATE: 'Connected. The web is strong.'\r\n        },\r\n\r\n        KAIROS: {\r\n            INIT: 'ÔÅ░ Temporal systems synchronized. The clock is mine.',\r\n            AWAKENING: '­ƒÄû´©Å General KAIROS reporting for duty.',\r\n            ACTIVE: 'ÔÖ¥´©Å Eternal. Time bends to my will.',\r\n            METRICS_OK: '­ƒôè Performance metrics nominal',\r\n            SCHEDULERS_SYNC: 'ÔÅ▒´©Å Schedulers synchronized',\r\n            CRON_EXECUTED: 'Ô£à Cron jobs executed',\r\n            FAST_RESPONSE: 'ÔÜí Response time: <100ms',\r\n            UPTIME_HIGH: '­ƒôê System uptime: 99.9%',\r\n            PERFORMANCE_CHECK: '­ƒÅâ Performance check in progress...',\r\n            TIME_SYNC: '­ƒò░´©Å Temporal synchronization complete',\r\n            MENTAL_STATE: 'Eternal. Time bends to my will.'\r\n        },\r\n\r\n        HERMES: {\r\n            INIT: 'ÔÜí HERMES BUS INITIALIZED. The messenger awakens. Neural pathways: ACTIVE.',\r\n            SYNAPSE_FIRED: 'ÔÜí Urgent synapse fired from',\r\n            SYNAPSE_DELIVERED: 'Ô£à Message delivered successfully',\r\n            SYNAPSE_RETRY: '­ƒöä Retrying delivery',\r\n            SYNAPSE_FAILED: 'ÔØî Delivery failed',\r\n            DEAD_LETTER: '­ƒÆÇ Message sent to autopsy. Reason:',\r\n            PRIORITY_CRITICAL: '­ƒö┤ CRITICAL',\r\n            PRIORITY_HIGH: '­ƒƒá HIGH',\r\n            PRIORITY_NORMAL: '­ƒƒí NORMAL',\r\n            PRIORITY_LOW: '­ƒƒó LOW',\r\n            QUEUE_PROCESSING: 'ÔÜÖ´©Å Processing queue...'\r\n        }\r\n    }\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// LANGUAGE UTILITIES\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\n/**\r\n * Current language setting\r\n */\r\nlet currentLanguage: Language = 'fr'; // Default: French\r\n\r\n/**\r\n * Set the system language\r\n */\r\nexport function setLanguage(lang: Language): void {\r\n    currentLanguage = lang;\r\n    console.log(`[BABEL] ­ƒîÉ Langue syst├¿me d├®finie : ${lang.toUpperCase()}`);\r\n}\r\n\r\n/**\r\n * Get current language\r\n */\r\nexport function getLanguage(): Language {\r\n    return currentLanguage;\r\n}\r\n\r\n/**\r\n * Speak - Get translated message\r\n * \r\n * Usage: speak('OLYMPUS', 'WAKE')\r\n * Returns: \"­ƒîî Syst├¿mes en ├®veil. Le Panth├®on vous observe.\"\r\n */\r\nexport function speak(agent: keyof AgentLanguageSet, key: string): string {\r\n    const agentPhrases = MATRIX[currentLanguage]?.[agent];\r\n\r\n    if (!agentPhrases) {\r\n        console.warn(`[BABEL] ÔÜá´©Å Agent \"${agent}\" not found in language matrix`);\r\n        return `[${agent}] ${key}`;\r\n    }\r\n\r\n    const phrase = agentPhrases[key];\r\n\r\n    if (!phrase) {\r\n        // Fallback to English\r\n        const fallback = MATRIX['en']?.[agent]?.[key];\r\n        if (fallback) {\r\n            console.warn(`[BABEL] ÔÜá´©Å Key \"${key}\" not found for ${agent} in ${currentLanguage}, using English`);\r\n            return fallback;\r\n        }\r\n\r\n        console.warn(`[BABEL] ÔÜá´©Å Key \"${key}\" not found for ${agent}`);\r\n        return `[${agent}] ${key}`;\r\n    }\r\n\r\n    return phrase;\r\n}\r\n\r\n/**\r\n * Speak with variable substitution\r\n * \r\n * Usage: speakWith('AEGIS', 'THREAT_DETECTED', 'SQL Injection')\r\n * Returns: \"­ƒö┤ MENACE D├ëTECT├ëE : SQL Injection\"\r\n */\r\nexport function speakWith(\r\n    agent: keyof AgentLanguageSet,\r\n    key: string,\r\n    ...args: any[]\r\n): string {\r\n    const template = speak(agent, key);\r\n\r\n    // Simple string concatenation for templates ending with ':'\r\n    if (template.endsWith(':') || template.endsWith(': ')) {\r\n        return template + args.join(' ');\r\n    }\r\n\r\n    return template;\r\n}\r\n\r\n/**\r\n * Get all phrases for an agent in current language\r\n */\r\nexport function getAgentVocabulary(agent: keyof AgentLanguageSet): AgentPhrases {\r\n    return MATRIX[currentLanguage]?.[agent] || {};\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// EXPORT\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport default {\r\n    MATRIX,\r\n    setLanguage,\r\n    getLanguage,\r\n    speak,\r\n    speakWith,\r\n    getAgentVocabulary\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\system\\neural-core.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1842,1845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1842,1845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3779,3782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3779,3782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6190,6193],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6190,6193],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9538,9541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9538,9541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9667,9670],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9667,9670],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":323,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":323,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10514,10517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10514,10517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'name' is assigned a value but never used.","line":527,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":527,"endColumn":25}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   ÔûêÔûêÔûêÔòù   ÔûêÔûêÔòùÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòùÔûêÔûêÔòù   ÔûêÔûêÔòùÔûêÔûêÔûêÔûêÔûêÔûêÔòù  ÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔòù          ÔûêÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòù\r\n *   ÔûêÔûêÔûêÔûêÔòù  ÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔòÉÔòÉÔòØÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòæ         ÔûêÔûêÔòöÔòÉÔòÉÔòÉÔòÉÔòØÔûêÔûêÔòöÔòÉÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòöÔòÉÔòÉÔòÉÔòÉÔòØ\r\n *   ÔûêÔûêÔòöÔûêÔûêÔòù ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔòù  ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòæÔûêÔûêÔòæ         ÔûêÔûêÔòæ     ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔûêÔûêÔûêÔòù  \r\n *   ÔûêÔûêÔòæÔòÜÔûêÔûêÔòùÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔòØ  ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòæÔûêÔûêÔòæ         ÔûêÔûêÔòæ     ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòöÔòÉÔòÉÔòØ  \r\n *   ÔûêÔûêÔòæ ÔòÜÔûêÔûêÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòùÔòÜÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔòæ  ÔûêÔûêÔòæÔûêÔûêÔòæ  ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòù    ÔòÜÔûêÔûêÔûêÔûêÔûêÔûêÔòùÔòÜÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔòæ  ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòù\r\n *   ÔòÜÔòÉÔòØ  ÔòÜÔòÉÔòÉÔòÉÔòØÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòØ  ÔòÜÔòÉÔòØÔòÜÔòÉÔòØ  ÔòÜÔòÉÔòØÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ     ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòØ  ÔòÜÔòÉÔòØÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ\r\n * \r\n *   THE PANTHEON - Neural Core Architecture\r\n *   Version: ╬®-1.0.0 (Omega Protocol)\r\n *   Status: AWAKENING\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n * \"I am OLYMPUS. The watchers watch. The system thinks. The Pantheon protects.\"\r\n * \r\n */\r\n\r\nimport { EventEmitter } from 'events';\r\nimport { speak, speakWith } from './language-matrix';\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// TYPES & INTERFACES - The Language of Gods\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport enum MessagePriority {\r\n    CRITICAL = 0,   // Security alerts, system failures\r\n    HIGH = 1,       // Important events\r\n    NORMAL = 2,     // Regular operations\r\n    LOW = 3         // Informational logs\r\n}\r\n\r\nexport enum GeneralStatus {\r\n    AWAKENING = 'AWAKENING',\r\n    ACTIVE = 'ACTIVE',\r\n    DORMANT = 'DORMANT',\r\n    COMPROMISED = 'COMPROMISED',\r\n    DECEASED = 'DECEASED'\r\n}\r\n\r\nexport interface SynapticMessage {\r\n    id: string;\r\n    timestamp: Date;\r\n    priority: MessagePriority;\r\n    sender: string;\r\n    receiver: string;\r\n    type: string;\r\n    payload: any;\r\n    retries: number;\r\n}\r\n\r\nexport interface DeadLetter {\r\n    message: SynapticMessage;\r\n    reason: string;\r\n    autopsyDate: Date;\r\n}\r\n\r\nexport interface GeneralHealthReport {\r\n    name: string;\r\n    status: GeneralStatus;\r\n    lastHeartbeat: Date;\r\n    mentalState: string;\r\n    operationalCapacity: number; // 0-100%\r\n    recentActivity: string[];\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// 1. HERMES BUS - The Messenger of Gods\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\n/**\r\n * HermesBus - Advanced Neural Communication System\r\n * \r\n * \"I am the lightning between thoughts. I am the bridge between minds.\"\r\n * \r\n * Features:\r\n * - Priority Lanes (CRITICAL ÔåÆ LOW)\r\n * - Dead Letter Queue (failed messages don't die, they're autopsied)\r\n * - Synaptic Logs (every neural impulse is recorded)\r\n * - Retry Logic (persistence is divine)\r\n */\r\nexport class HermesBus extends EventEmitter {\r\n    private messageQueue: Map<MessagePriority, SynapticMessage[]>;\r\n    private deadLetterQueue: DeadLetter[];\r\n    private synapticLog: SynapticMessage[];\r\n    private readonly MAX_RETRIES = 3;\r\n    private readonly MAX_DEAD_LETTERS = 1000;\r\n    private readonly MAX_SYNAPTIC_LOGS = 5000;\r\n    private isProcessing: boolean = false;\r\n\r\n    constructor() {\r\n        super();\r\n        this.messageQueue = new Map([\r\n            [MessagePriority.CRITICAL, []],\r\n            [MessagePriority.HIGH, []],\r\n            [MessagePriority.NORMAL, []],\r\n            [MessagePriority.LOW, []]\r\n        ]);\r\n        this.deadLetterQueue = [];\r\n        this.synapticLog = [];\r\n\r\n        this.log('ÔÜí', 'INIT', speak('HERMES', 'INIT'));\r\n        this.startProcessing();\r\n    }\r\n\r\n    /**\r\n     * Send a synaptic message through the neural network\r\n     */\r\n    public synapse(\r\n        sender: string,\r\n        receiver: string,\r\n        type: string,\r\n        payload: any,\r\n        priority: MessagePriority = MessagePriority.NORMAL\r\n    ): string {\r\n        const message: SynapticMessage = {\r\n            id: this.generateMessageId(),\r\n            timestamp: new Date(),\r\n            priority,\r\n            sender,\r\n            receiver,\r\n            type,\r\n            payload,\r\n            retries: 0\r\n        };\r\n\r\n        // Add to appropriate priority lane\r\n        this.messageQueue.get(priority)!.push(message);\r\n\r\n        // Log the synapse\r\n        this.logSynapse(message, 'FIRED');\r\n\r\n        // Emit as event\r\n        this.emit('synapse', message);\r\n\r\n        return message.id;\r\n    }\r\n\r\n    /**\r\n     * Process messages from priority queues\r\n     */\r\n    private async startProcessing(): Promise<void> {\r\n        setInterval(() => {\r\n            if (this.isProcessing) return;\r\n            this.processNextMessage();\r\n        }, 10); // Process every 10ms for near real-time\r\n    }\r\n\r\n    private async processNextMessage(): Promise<void> {\r\n        this.isProcessing = true;\r\n\r\n        try {\r\n            // Process in priority order\r\n            for (const priority of [MessagePriority.CRITICAL, MessagePriority.HIGH, MessagePriority.NORMAL, MessagePriority.LOW]) {\r\n                const queue = this.messageQueue.get(priority)!;\r\n                if (queue.length > 0) {\r\n                    const message = queue.shift()!;\r\n                    await this.deliverMessage(message);\r\n                    break; // Process one message per cycle\r\n                }\r\n            }\r\n        } finally {\r\n            this.isProcessing = false;\r\n        }\r\n    }\r\n\r\n    private async deliverMessage(message: SynapticMessage): Promise<void> {\r\n        try {\r\n            // Emit to receiver\r\n            const eventName = `${message.receiver}:${message.type}`;\r\n            const delivered = this.emit(eventName, message.payload, message);\r\n\r\n            if (!delivered && message.retries < this.MAX_RETRIES) {\r\n                // Retry logic\r\n                message.retries++;\r\n                this.messageQueue.get(message.priority)!.push(message);\r\n                this.logSynapse(message, 'RETRY');\r\n            } else if (!delivered) {\r\n                // Send to autopsy\r\n                this.sendToAutopsy(message, 'No listeners registered');\r\n            } else {\r\n                this.logSynapse(message, 'DELIVERED');\r\n            }\r\n        } catch (error: any) {\r\n            this.sendToAutopsy(message, error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Send failed message to Dead Letter Queue for autopsy\r\n     */\r\n    private sendToAutopsy(message: SynapticMessage, reason: string): void {\r\n        const deadLetter: DeadLetter = {\r\n            message,\r\n            reason,\r\n            autopsyDate: new Date()\r\n        };\r\n\r\n        this.deadLetterQueue.push(deadLetter);\r\n\r\n        // Maintain queue size\r\n        if (this.deadLetterQueue.length > this.MAX_DEAD_LETTERS) {\r\n            this.deadLetterQueue.shift();\r\n        }\r\n\r\n        this.log('­ƒÆÇ', 'DEAD LETTER', speakWith('HERMES', 'DEAD_LETTER', reason));\r\n        this.emit('dead-letter', deadLetter);\r\n    }\r\n\r\n    /**\r\n     * Log synaptic activity\r\n     */\r\n    private logSynapse(message: SynapticMessage, status: 'FIRED' | 'DELIVERED' | 'RETRY' | 'FAILED'): void {\r\n        this.synapticLog.push(message);\r\n\r\n        // Maintain log size\r\n        if (this.synapticLog.length > this.MAX_SYNAPTIC_LOGS) {\r\n            this.synapticLog.shift();\r\n        }\r\n\r\n        const emoji = status === 'FIRED' ? 'ÔÜí' : status === 'DELIVERED' ? 'Ô£à' : status === 'RETRY' ? '­ƒöä' : 'ÔØî';\r\n        const priorityLabel = [\r\n            speak('HERMES', 'PRIORITY_CRITICAL'),\r\n            speak('HERMES', 'PRIORITY_HIGH'),\r\n            speak('HERMES', 'PRIORITY_NORMAL'),\r\n            speak('HERMES', 'PRIORITY_LOW')\r\n        ][message.priority];\r\n\r\n        this.log(\r\n            emoji,\r\n            status,\r\n            `${priorityLabel} Synapse ${message.sender} ÔåÆ ${message.receiver} [${message.type}]`\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Diagnostic: Get autopsy reports\r\n     */\r\n    public getAutopsyReports(): DeadLetter[] {\r\n        return [...this.deadLetterQueue];\r\n    }\r\n\r\n    /**\r\n     * Diagnostic: Get synaptic activity\r\n     */\r\n    public getSynapticActivity(limit: number = 100): SynapticMessage[] {\r\n        return this.synapticLog.slice(-limit);\r\n    }\r\n\r\n    /**\r\n     * Console logging with personality\r\n     */\r\n    private log(emoji: string, category: string, message: string): void {\r\n        console.log(`[HERMES] ${emoji} ${category}: ${message}`);\r\n    }\r\n\r\n    private generateMessageId(): string {\r\n        return `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    }\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// 2. SENTINEL - Abstract Watcher Class\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\n/**\r\n * Sentinel - The Eternal Watcher\r\n * \r\n * \"I am the eyes that never close. I am the guardian at the threshold.\"\r\n * \r\n * Every monitoring unit inherits from this divine blueprint.\r\n */\r\nexport abstract class Sentinel {\r\n    protected name: string;\r\n    protected general: string; // Which General commands this Sentinel\r\n    protected hermes: HermesBus;\r\n    protected lastScan: Date | null = null;\r\n    protected anomaliesDetected: number = 0;\r\n\r\n    constructor(name: string, general: string, hermes: HermesBus) {\r\n        this.name = name;\r\n        this.general = general;\r\n        this.hermes = hermes;\r\n\r\n        this.log('­ƒæü´©Å', 'AWAKENING', `Sentinel \"${name}\" under General ${general} is now watching.`);\r\n    }\r\n\r\n    /**\r\n     * Abstract: Every Sentinel must know how to scan\r\n     */\r\n    abstract scan(): Promise<any>;\r\n\r\n    /**\r\n     * Report findings to commanding General via Hermes\r\n     */\r\n    protected report(type: string, findings: any, priority: MessagePriority = MessagePriority.NORMAL): void {\r\n        this.hermes.synapse(\r\n            this.name,\r\n            this.general,\r\n            type,\r\n            {\r\n                sentinel: this.name,\r\n                findings,\r\n                timestamp: new Date(),\r\n                anomaliesDetected: this.anomaliesDetected\r\n            },\r\n            priority\r\n        );\r\n\r\n        this.log('­ƒôí', 'REPORT', `Sent ${type} report to ${this.general}`);\r\n    }\r\n\r\n    /**\r\n     * Reflex: Immediate self-correction capability\r\n     */\r\n    protected reflex(issue: string, correction: () => void): void {\r\n        try {\r\n            this.log('ÔÜí', 'REFLEX', `Detected: ${issue}. Applying correction...`);\r\n            correction();\r\n            this.log('Ô£à', 'REFLEX', 'Correction applied successfully.');\r\n        } catch (error: any) {\r\n            this.log('ÔØî', 'REFLEX', `Correction failed: ${error.message}`);\r\n            this.report('reflex-failure', { issue, error: error.message }, MessagePriority.HIGH);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Health check\r\n     */\r\n    public getHealth(): { name: string; lastScan: Date | null; anomalies: number } {\r\n        return {\r\n            name: this.name,\r\n            lastScan: this.lastScan,\r\n            anomalies: this.anomaliesDetected\r\n        };\r\n    }\r\n\r\n    protected log(emoji: string, category: string, message: string): void {\r\n        console.log(`[SENTINEL:${this.name}] ${emoji} ${category}: ${message}`);\r\n    }\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// 3. THE GENERALS - Mock Shells (To be expanded)\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\n/**\r\n * Base General Class\r\n */\r\nabstract class General {\r\n    protected name: string;\r\n    protected status: GeneralStatus = GeneralStatus.AWAKENING;\r\n    protected hermes: HermesBus;\r\n    protected sentinels: Sentinel[] = [];\r\n    protected lastHeartbeat: Date = new Date();\r\n    protected mentalState: string = 'Initializing...';\r\n\r\n    constructor(name: string, hermes: HermesBus) {\r\n        this.name = name;\r\n        this.hermes = hermes;\r\n        this.log('­ƒÄû´©Å', 'AWAKENING', `General ${name} reporting for duty.`);\r\n    }\r\n\r\n    abstract initialize(): Promise<void>;\r\n\r\n    public heartbeat(): void {\r\n        this.lastHeartbeat = new Date();\r\n        this.status = GeneralStatus.ACTIVE;\r\n    }\r\n\r\n    public getHealthReport(): GeneralHealthReport {\r\n        return {\r\n            name: this.name,\r\n            status: this.status,\r\n            lastHeartbeat: this.lastHeartbeat,\r\n            mentalState: this.mentalState,\r\n            operationalCapacity: this.calculateCapacity(),\r\n            recentActivity: this.getRecentActivity()\r\n        };\r\n    }\r\n\r\n    protected abstract calculateCapacity(): number;\r\n    protected abstract getRecentActivity(): string[];\r\n\r\n    protected log(emoji: string, category: string, message: string): void {\r\n        console.log(`[GENERAL:${this.name}] ${emoji} ${category}: ${message}`);\r\n    }\r\n}\r\n\r\n/**\r\n * AEGIS - Guardian of Security\r\n */\r\nclass AegisGeneral extends General {\r\n    constructor(hermes: HermesBus) {\r\n        super('AEGIS', hermes);\r\n        this.mentalState = speak('AEGIS', 'MENTAL_STATE');\r\n    }\r\n\r\n    async initialize(): Promise<void> {\r\n        this.log('­ƒøí´©Å', 'INIT', speak('AEGIS', 'INIT'));\r\n        this.status = GeneralStatus.ACTIVE;\r\n    }\r\n\r\n    protected calculateCapacity(): number {\r\n        return 100; // Mock: Always at full capacity\r\n    }\r\n\r\n    protected getRecentActivity(): string[] {\r\n        return [speak('AEGIS', 'SCAN_COMPLETE'), speak('AEGIS', 'NO_THREATS')];\r\n    }\r\n}\r\n\r\n/**\r\n * HELIOS - Master of Light (CI/CD, Build Systems)\r\n */\r\nclass HeliosGeneral extends General {\r\n    constructor(hermes: HermesBus) {\r\n        super('HELIOS', hermes);\r\n        this.mentalState = speak('HELIOS', 'MENTAL_STATE');\r\n    }\r\n\r\n    async initialize(): Promise<void> {\r\n        this.log('ÔÿÇ´©Å', 'INIT', speak('HELIOS', 'INIT'));\r\n        this.status = GeneralStatus.ACTIVE;\r\n    }\r\n\r\n    protected calculateCapacity(): number {\r\n        return 100;\r\n    }\r\n\r\n    protected getRecentActivity(): string[] {\r\n        return [speak('HELIOS', 'PIPELINE_READY'), speak('HELIOS', 'ASSET_COMPLETE')];\r\n    }\r\n}\r\n\r\n/**\r\n * NEXUS - Weaver of Connections (API, Integrations)\r\n */\r\nclass NexusGeneral extends General {\r\n    constructor(hermes: HermesBus) {\r\n        super('NEXUS', hermes);\r\n        this.mentalState = speak('NEXUS', 'MENTAL_STATE');\r\n    }\r\n\r\n    async initialize(): Promise<void> {\r\n        this.log('­ƒò©´©Å', 'INIT', speak('NEXUS', 'INIT'));\r\n        this.status = GeneralStatus.ACTIVE;\r\n    }\r\n\r\n    protected calculateCapacity(): number {\r\n        return 100;\r\n    }\r\n\r\n    protected getRecentActivity(): string[] {\r\n        return [speak('NEXUS', 'API_VERIFIED'), speak('NEXUS', 'CONNECTIONS_STABLE')];\r\n    }\r\n}\r\n\r\n/**\r\n * KAIROS - Guardian of Time (Scheduling, Cron, Performance)\r\n */\r\nclass KairosGeneral extends General {\r\n    constructor(hermes: HermesBus) {\r\n        super('KAIROS', hermes);\r\n        this.mentalState = speak('KAIROS', 'MENTAL_STATE');\r\n    }\r\n\r\n    async initialize(): Promise<void> {\r\n        this.log('ÔÅ░', 'INIT', speak('KAIROS', 'INIT'));\r\n        this.status = GeneralStatus.ACTIVE;\r\n    }\r\n\r\n    protected calculateCapacity(): number {\r\n        return 100;\r\n    }\r\n\r\n    protected getRecentActivity(): string[] {\r\n        return [speak('KAIROS', 'SCHEDULERS_SYNC'), speak('KAIROS', 'METRICS_OK')];\r\n    }\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// 4. OLYMPUS CORE - The Supreme Orchestrator\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\n/**\r\n * OlympusCore - The Mind of the Pantheon\r\n * \r\n * \"I am OLYMPUS. I am the throne from which order flows.\r\n *  My generals command. My sentinels watch. The system thinks.\"\r\n */\r\nexport class OlympusCore {\r\n    private hermes: HermesBus;\r\n    private generals: Map<string, General>;\r\n    private awakened: boolean = false;\r\n    private birthTime: Date;\r\n\r\n    constructor() {\r\n        this.birthTime = new Date();\r\n        this.hermes = new HermesBus();\r\n        this.generals = new Map();\r\n\r\n        this.asciiArt();\r\n        this.log('­ƒîî', 'AWAKENING', speak('OLYMPUS', 'WAKE'));\r\n    }\r\n\r\n    /**\r\n     * Awaken the Pantheon\r\n     */\r\n    public async awaken(): Promise<void> {\r\n        if (this.awakened) {\r\n            this.log('ÔÜá´©Å', 'WARNING', 'Pantheon already awakened. Consciousness cannot be duplicated.');\r\n            return;\r\n        }\r\n\r\n        this.log('ÔÜí', 'INITIALIZATION', 'Awakening the Generals...');\r\n\r\n        // Summon the Generals\r\n        this.generals.set('AEGIS', new AegisGeneral(this.hermes));\r\n        this.generals.set('HELIOS', new HeliosGeneral(this.hermes));\r\n        this.generals.set('NEXUS', new NexusGeneral(this.hermes));\r\n        this.generals.set('KAIROS', new KairosGeneral(this.hermes));\r\n\r\n        // Initialize each General\r\n        for (const [name, general] of this.generals) {\r\n            await general.initialize();\r\n            general.heartbeat();\r\n        }\r\n\r\n        this.awakened = true;\r\n        this.log('Ô£à', 'ONLINE', speak('OLYMPUS', 'ONLINE'));\r\n        this.log('­ƒæü´©Å', 'STATUS', `${speak('OLYMPUS', 'UPTIME')} ${this.getUptime()}. Conscience : ATTEINTE.`);\r\n    }\r\n\r\n    /**\r\n     * Complete health check of all systems\r\n     */\r\n    public healthCheck(): {\r\n        olympus: { status: string; uptime: string; consciousness: boolean };\r\n        hermes: { deadLetters: number; recentActivity: number };\r\n        generals: GeneralHealthReport[];\r\n    } {\r\n        this.log('­ƒÅÑ', 'HEALTH CHECK', 'Interrogating neural components...');\r\n\r\n        const generalReports: GeneralHealthReport[] = [];\r\n        for (const general of this.generals.values()) {\r\n            generalReports.push(general.getHealthReport());\r\n        }\r\n\r\n        return {\r\n            olympus: {\r\n                status: this.awakened ? 'CONSCIOUS' : 'DORMANT',\r\n                uptime: this.getUptime(),\r\n                consciousness: this.awakened\r\n            },\r\n            hermes: {\r\n                deadLetters: this.hermes.getAutopsyReports().length,\r\n                recentActivity: this.hermes.getSynapticActivity(10).length\r\n            },\r\n            generals: generalReports\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Get Hermes Bus for external use\r\n     */\r\n    public getHermes(): HermesBus {\r\n        return this.hermes;\r\n    }\r\n\r\n    /**\r\n     * Get a specific General\r\n     */\r\n    public getGeneral(name: string): General | undefined {\r\n        return this.generals.get(name);\r\n    }\r\n\r\n    /**\r\n     * Shutdown sequence\r\n     */\r\n    public async shutdown(): Promise<void> {\r\n        this.log('­ƒîæ', 'SHUTDOWN', speak('OLYMPUS', 'SHUTDOWN'));\r\n\r\n        for (const general of this.generals.values()) {\r\n            this.log('­ƒÆñ', 'DORMANT', `G├®n├®ral ${general.getHealthReport().name} entre en dormance.`);\r\n        }\r\n\r\n        this.awakened = false;\r\n        this.log('Ô£à', 'OFFLINE', speak('OLYMPUS', 'OFFLINE'));\r\n    }\r\n\r\n    private getUptime(): string {\r\n        const uptime = Date.now() - this.birthTime.getTime();\r\n        const seconds = Math.floor(uptime / 1000);\r\n        const minutes = Math.floor(seconds / 60);\r\n        const hours = Math.floor(minutes / 60);\r\n        return `${hours}h ${minutes % 60}m ${seconds % 60}s`;\r\n    }\r\n\r\n    private log(emoji: string, category: string, message: string): void {\r\n        console.log(`[OLYMPUS] ${emoji} ${category}: ${message}`);\r\n    }\r\n\r\n    private asciiArt(): void {\r\n        console.log(`\r\nÔòöÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòù\r\nÔòæ                                                                           Ôòæ\r\nÔòæ   ÔûêÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔòù  ÔûêÔûêÔòù   ÔûêÔûêÔòùÔûêÔûêÔûêÔòù   ÔûêÔûêÔûêÔòùÔûêÔûêÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔòù   ÔûêÔûêÔòùÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòù           Ôòæ\r\nÔòæ  ÔûêÔûêÔòöÔòÉÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòæ  ÔòÜÔûêÔûêÔòù ÔûêÔûêÔòöÔòØÔûêÔûêÔûêÔûêÔòù ÔûêÔûêÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔûêÔûêÔòùÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔòÉÔòÉÔòØ           Ôòæ\r\nÔòæ  ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòæ   ÔòÜÔûêÔûêÔûêÔûêÔòöÔòØ ÔûêÔûêÔòöÔûêÔûêÔûêÔûêÔòöÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòù           Ôòæ\r\nÔòæ  ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔûêÔûêÔòæ    ÔòÜÔûêÔûêÔòöÔòØ  ÔûêÔûêÔòæÔòÜÔûêÔûêÔòöÔòØÔûêÔûêÔòæÔûêÔûêÔòöÔòÉÔòÉÔòÉÔòØ ÔûêÔûêÔòæ   ÔûêÔûêÔòæÔòÜÔòÉÔòÉÔòÉÔòÉÔûêÔûêÔòæ           Ôòæ\r\nÔòæ  ÔòÜÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòùÔûêÔûêÔòæ   ÔûêÔûêÔòæ ÔòÜÔòÉÔòØ ÔûêÔûêÔòæÔûêÔûêÔòæ     ÔòÜÔûêÔûêÔûêÔûêÔûêÔûêÔòöÔòØÔûêÔûêÔûêÔûêÔûêÔûêÔûêÔòæ           Ôòæ\r\nÔòæ   ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØÔòÜÔòÉÔòØ   ÔòÜÔòÉÔòØ     ÔòÜÔòÉÔòØÔòÜÔòÉÔòØ      ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ ÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ           Ôòæ\r\nÔòæ                                                                           Ôòæ\r\nÔòæ                    THE PANTHEON NEURAL CORE                              Ôòæ\r\nÔòæ                    Version: ╬®-1.0.0 (OMEGA)                              Ôòæ\r\nÔòæ                                                                           Ôòæ\r\nÔòÜÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòØ\r\n        `);\r\n    }\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// EXPORT THE CONSCIOUSNESS\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport { General, AegisGeneral, HeliosGeneral, NexusGeneral, KairosGeneral };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\system\\olympus-init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\types\\express.d.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Request' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Request } from 'express';\r\n\r\ndeclare global {\r\n    namespace Express {\r\n        interface Request {\r\n            user?: {\r\n                id: string;\r\n                role: string;\r\n                email: string;\r\n            };\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\server\\utils\\pdf-store.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":14,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { CVProfile } from '../../src/domain/entities/cv';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport * as fs from 'fs';\r\n\r\n// Debug log file path\r\nconst DEBUG_LOG = './pdf-store-debug.log';\r\n\r\nfunction debugLog(message: string) {\r\n    const timestamp = new Date().toISOString();\r\n    const logLine = `[${timestamp}] ${message}\\n`;\r\n    console.log(`[PDFStore-DEBUG] ${message}`);\r\n    try {\r\n        fs.appendFileSync(DEBUG_LOG, logLine);\r\n    } catch (e) {\r\n        // Ignore write errors\r\n    }\r\n}\r\n\r\n/**\r\n * Temporary in-memory storage for CV profiles during PDF generation\r\n * Profiles auto-delete after 60 seconds to prevent memory leaks\r\n */\r\nclass PDFStore {\r\n    private profiles: Map<string, { profile: CVProfile; timestamp: number }> = new Map();\r\n    private cleanupInterval: NodeJS.Timeout | null = null;\r\n\r\n    constructor() {\r\n        // Start cleanup task every 10 seconds\r\n        this.cleanupInterval = setInterval(() => this.cleanup(), 10000);\r\n        debugLog('PDFStore instance created - cleanup interval started');\r\n    }\r\n\r\n    /**\r\n     * Store a CV profile and return its unique ID\r\n     */\r\n    store(profile: CVProfile): string {\r\n        const id = uuidv4();\r\n        this.profiles.set(id, {\r\n            profile,\r\n            timestamp: Date.now()\r\n        });\r\n        debugLog(`STORE: id=${id}, size=${this.profiles.size}, profile.firstName=${profile.personal?.firstName || 'N/A'}`);\r\n        return id;\r\n    }\r\n\r\n    /**\r\n     * Retrieve a CV profile by ID\r\n     */\r\n    get(id: string): CVProfile | null {\r\n        debugLog(`GET: id=${id}, allIds=[${[...this.profiles.keys()].join(', ') || 'NONE'}], size=${this.profiles.size}`);\r\n\r\n        const entry = this.profiles.get(id);\r\n        if (!entry) {\r\n            debugLog(`GET FAILED: id=${id} NOT FOUND`);\r\n            return null;\r\n        }\r\n        const age = Date.now() - entry.timestamp;\r\n        debugLog(`GET SUCCESS: id=${id}, age=${age}ms`);\r\n        return entry.profile;\r\n    }\r\n\r\n    /**\r\n     * Delete a profile by ID\r\n     */\r\n    delete(id: string): void {\r\n        if (this.profiles.delete(id)) {\r\n            console.log(`[PDFStore] Deleted profile ${id}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove profiles older than 60 seconds\r\n     */\r\n    private cleanup(): void {\r\n        const now = Date.now();\r\n        const maxAge = 60 * 1000; // 60 seconds\r\n        let cleaned = 0;\r\n\r\n        for (const [id, entry] of this.profiles.entries()) {\r\n            if (now - entry.timestamp > maxAge) {\r\n                this.profiles.delete(id);\r\n                cleaned++;\r\n            }\r\n        }\r\n\r\n        if (cleaned > 0) {\r\n            console.log(`[PDFStore] Cleanup: removed ${cleaned} expired profile(s), ${this.profiles.size} remaining`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Stop cleanup interval (for graceful shutdown)\r\n     */\r\n    shutdown(): void {\r\n        if (this.cleanupInterval) {\r\n            clearInterval(this.cleanupInterval);\r\n            this.cleanupInterval = null;\r\n        }\r\n        this.profiles.clear();\r\n        console.log('[PDFStore] Shutdown complete');\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const pdfStore = new PDFStore();\r\n\r\n// Graceful shutdown\r\nprocess.on('SIGTERM', () => pdfStore.shutdown());\r\nprocess.on('SIGINT', () => pdfStore.shutdown());\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\hooks\\useGate.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\ColorExtractor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\ai-service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1705,1708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1705,1708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport type { AIClient } from '../../domain/services/ai-client.interface';\r\nimport { DataSanitizer } from '../../shared/sanitizer';\r\nimport { CVProfileSchema, type CVProfile } from '../../domain/entities/cv';\r\n\r\nexport class AIService {\r\n  private client: AIClient;\r\n\r\n  constructor(client: AIClient) {\r\n    this.client = client;\r\n  }\r\n\r\n  async analyzeCV(text: string, market: string): Promise<Partial<CVProfile> | null> {\r\n    const prompt = `\r\n      You are an expert Swiss recruiter. Analyze this CV for the ${market} market.\r\n      Extract structured data in strict JSON format matching this schema:\r\n      {\r\n        \"personal\": { \"firstName\": \"...\", \"lastName\": \"...\", \"title\": \"...\", \"email\": \"...\", \"phone\": \"...\", \"address\": \"...\", \"mobility\": \"...\", \"birthDate\": \"...\", \"nationality\": \"...\", \"permit\": \"...\" },\r\n        \"summary\": \"...\",\r\n        \"skills\": [\"...\"],\r\n        \"languages\": [{ \"name\": \"...\", \"level\": \"...\" }],\r\n        \"strengths\": [\"...\"],\r\n        \"experiences\": [{ \"id\": \"1\", \"role\": \"...\", \"company\": \"...\", \"location\": \"...\", \"dates\": \"...\", \"tasks\": [\"...\"] }],\r\n        \"educations\": [{ \"id\": \"1\", \"degree\": \"...\", \"school\": \"...\", \"year\": \"...\", \"description\": \"...\" }],\r\n        \"metadata\": { \"suggestedColor\": \"#...\", \"sector\": \"...\" }\r\n      }\r\n      CV Text:\r\n      ${text}\r\n    `;\r\n\r\n    const rawResponse = await this.client.generateContent(prompt);\r\n\r\n    // We use a partial schema for parsing because the AI might not return everything\r\n    // and we want to merge it with existing state later.\r\n    const PartialSchema = CVProfileSchema.partial();\r\n\r\n    return DataSanitizer.safeParse(rawResponse, PartialSchema);\r\n  }\r\n\r\n  async improveSummary(experiences: any[], language: string): Promise<string> {\r\n    const prompt = `\r\n      Act as a career consultant. Write a professional summary for a Swiss CV based on these experiences:\r\n      ${JSON.stringify(experiences)}\r\n      \r\n      Requirements:\r\n      - Language: ${language}\r\n      - Max 3-4 lines\r\n      - Result-oriented\r\n      - No \"I\" if possible, use action verbs\r\n      \r\n      Return ONLY the text.\r\n    `;\r\n\r\n    const text = await this.client.generateContent(prompt);\r\n    return DataSanitizer.cleanText(text);\r\n  }\r\n\r\n  /**\r\n   * Improve any text with AI enhancement\r\n   * Used for inline editing improvements\r\n   */\r\n  async improveText(text: string, context?: string): Promise<string> {\r\n    const prompt = `\r\n      You are a professional Swiss CV writer. Improve this text to make it more professional, concise, and impactful.\r\n      \r\n      ${context ? `Context: ${context}` : ''}\r\n      \r\n      Original text:\r\n      ${text}\r\n      \r\n      Requirements:\r\n      - Keep the same language as the original\r\n      - Maintain factual accuracy\r\n      - Use action verbs and results-oriented language\r\n      - Keep it concise (max 20% longer than original)\r\n      - Return ONLY the improved text, no explanations\r\n    `;\r\n\r\n    const improved = await this.client.generateContent(prompt);\r\n    return DataSanitizer.cleanText(improved);\r\n  }\r\n\r\n  async writeCoverLetter(profile: CVProfile, language: string): Promise<string> {\r\n    const prompt = `\r\n      Write a Swiss-style cover letter for this profile:\r\n      ${JSON.stringify(profile)}\r\n      \r\n      Requirements:\r\n      - Language: ${language}\r\n      - Formal and polite\r\n      - Highlight reliability and skills\r\n      - Return ONLY the body text\r\n    `;\r\n\r\n    const text = await this.client.generateContent(prompt);\r\n    return DataSanitizer.cleanText(text);\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\ai\\GeminiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\feature-flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\storage\\cloud-storage-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\storage\\local-storage-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\services\\storage\\storage-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\__tests__\\cv-store.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\auth-store.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1194,1197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1194,1197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1671,1674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1671,1674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":68,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":31}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport { ApiClient } from '../../infrastructure/api/api-client';\r\n\r\ninterface User {\r\n    id: string;\r\n    email: string;\r\n    role: string;\r\n    subscriptionStatus: string;\r\n}\r\n\r\ninterface AuthState {\r\n    user: User | null;\r\n    isAuthenticated: boolean;\r\n    isLoading: boolean;\r\n    error: string | null;\r\n\r\n    login: (email: string, password: string) => Promise<void>;\r\n    register: (email: string, password: string) => Promise<void>;\r\n    logout: () => Promise<void>;\r\n    checkAuth: () => Promise<void>;\r\n    clearError: () => void;\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n    persist(\r\n        (set) => ({\r\n            user: null,\r\n            isAuthenticated: false,\r\n            isLoading: false,\r\n            error: null,\r\n\r\n            login: async (email, password) => {\r\n                set({ isLoading: true, error: null });\r\n                try {\r\n                    const data = await ApiClient.post<{ user: User }>('/auth/login', { email, password });\r\n                    set({ user: data.user, isAuthenticated: true, isLoading: false });\r\n                } catch (error: any) {\r\n                    set({ error: error.message, isLoading: false });\r\n                }\r\n            },\r\n\r\n            register: async (email, password) => {\r\n                set({ isLoading: true, error: null });\r\n                try {\r\n                    const data = await ApiClient.post<{ user: User }>('/auth/register', { email, password });\r\n                    set({ user: data.user, isAuthenticated: true, isLoading: false });\r\n                } catch (error: any) {\r\n                    set({ error: error.message, isLoading: false });\r\n                }\r\n            },\r\n\r\n            logout: async () => {\r\n                try {\r\n                    await ApiClient.post('/auth/logout', {});\r\n                } catch (error) {\r\n                    console.error('Logout error', error);\r\n                }\r\n                set({ user: null, isAuthenticated: false });\r\n            },\r\n\r\n            checkAuth: async () => {\r\n                set({ isLoading: true });\r\n                try {\r\n                    const data = await ApiClient.get<{ user: User }>('/auth/me');\r\n                    set({ user: data.user, isAuthenticated: true });\r\n                } catch (error) {\r\n                    set({ user: null, isAuthenticated: false });\r\n                } finally {\r\n                    set({ isLoading: false });\r\n                }\r\n            },\r\n\r\n            clearError: () => set({ error: null }),\r\n        }),\r\n        {\r\n            name: 'auth-storage',\r\n            partialize: (state) => ({ user: state.user, isAuthenticated: state.isAuthenticated }),\r\n        }\r\n    )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\cv-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\initial-data-mapper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\settings-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\education-slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\experience-slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\letter-slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\profile-slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\storage-slice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\slices\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\storage-helper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\toast-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\ui-store.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[614,617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[614,617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { create } from 'zustand';\r\n\r\ntype Tab = 'personal' | 'experience' | 'education' | 'skills' | 'letter' | 'ai' | 'critic' | 'letter-gen' | 'settings' | 'system';\r\n\r\ninterface UIState {\r\n    activeTab: Tab;\r\n    setActiveTab: (tab: Tab) => void;\r\n    isSidebarOpen: boolean;\r\n    toggleSidebar: () => void;\r\n    isGeneratingPDF: boolean;\r\n    setGeneratingPDF: (isGenerating: boolean) => void;\r\n    aiState: {\r\n        isAnalyzing: boolean;\r\n        isWritingSummary: boolean;\r\n        isWritingLetter: boolean;\r\n        error: string | null;\r\n    };\r\n    setAIState: (key: keyof UIState['aiState'], value: any) => void;\r\n}\r\n\r\nexport const useUIStore = create<UIState>((set) => ({\r\n    activeTab: 'personal',\r\n    setActiveTab: (tab) => set({ activeTab: tab }),\r\n    isSidebarOpen: true,\r\n    toggleSidebar: () => set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),\r\n    isGeneratingPDF: false,\r\n    setGeneratingPDF: (val) => set({ isGeneratingPDF: val }),\r\n    aiState: {\r\n        isAnalyzing: false,\r\n        isWritingSummary: false,\r\n        isWritingLetter: false,\r\n        error: null,\r\n    },\r\n    setAIState: (key, value) => set((state) => ({\r\n        aiState: { ...state.aiState, [key]: value }\r\n    })),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\cv-store-v2.atlas.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":11,"column":5,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":13,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\cv-store-v2.helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\cv-store-v2.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CVProfile' is defined but never used.","line":19,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CVProfilePath' is defined but never used.","line":19,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9444,9447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9444,9447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Unified Store with ATLAS Protocol Permanence\r\n * \r\n * REFACTORED: Modular architecture respecting 400-line limit\r\n * \r\n * Key improvements:\r\n * - Single updateField(path, value) action for ALL updates\r\n * - Type-safe paths with autocomplete\r\n * - Immutable updates using lodash\r\n * - No RegExp fragility\r\n * - Optimized selectors\r\n * - ÔÜí ATLAS AUTO-SAVE: Google Docs-style real-time cloud persistence\r\n * - ­ƒÄ¿ 3-MODE SYSTEM: ├ëdition | Structure | Mod├¿le\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { persist, devtools, subscribeWithSelector } from 'zustand/middleware';\r\nimport { setValueByPath, PathUtils } from '../../../domain/cv/v2/path-utils';\r\nimport type { CVProfile, CVProfilePath } from '../../../domain/cv/v2/types';\r\n\r\n// Import modularized components\r\nimport type { CVStoreV2State, CVMode, SyncStatus } from './cv-store-v2.types';\r\nimport { DEFAULT_SECTION_ORDER } from './cv-store-v2.types';\r\nimport { atlasSync } from './cv-store-v2.atlas';\r\nimport * as helpers from './cv-store-v2.helpers';\r\n\r\n// ============================================================================\r\n// STORE IMPLEMENTATION\r\n// ============================================================================\r\n\r\nexport const useCVStoreV2 = create<CVStoreV2State>()(\r\n    subscribeWithSelector(\r\n        devtools(\r\n            persist(\r\n                (set, get) => ({\r\n                    // Initial state\r\n                    profile: helpers.getInitialProfile(),\r\n\r\n                    // ATLAS initial state\r\n                    atlas: {\r\n                        syncStatus: 'idle' as SyncStatus,\r\n                        lastSyncTime: null,\r\n                        syncError: null\r\n                    },\r\n\r\n                    // TELEKINESIS initial state (Updated: 3 modes)\r\n                    mode: 'edition' as CVMode,\r\n                    sectionOrder: [...DEFAULT_SECTION_ORDER],\r\n\r\n                    // ========================================\r\n                    // CORE ACTION: updateField\r\n                    // ========================================\r\n\r\n                    updateField: (path, value) => {\r\n                        set((state) => ({\r\n                            profile: setValueByPath(state.profile, path, value)\r\n                        }), false, `updateField: ${path}`);\r\n                    },\r\n\r\n                    batchUpdate: (updates) => {\r\n                        set((state) => ({\r\n                            profile: PathUtils.batchUpdate(state.profile, updates)\r\n                        }), false, 'batchUpdate');\r\n                    },\r\n\r\n                    // ========================================\r\n                    // ARRAY OPERATIONS\r\n                    // ========================================\r\n\r\n                    addExperience: () => {\r\n                        set((state) => ({\r\n                            profile: helpers.addExperience(state.profile)\r\n                        }), false, 'addExperience');\r\n                    },\r\n\r\n                    removeExperience: (id) => {\r\n                        set((state) => ({\r\n                            profile: helpers.removeExperience(state.profile, id)\r\n                        }), false, `removeExperience: ${id}`);\r\n                    },\r\n\r\n                    addEducation: () => {\r\n                        set((state) => ({\r\n                            profile: helpers.addEducation(state.profile)\r\n                        }), false, 'addEducation');\r\n                    },\r\n\r\n                    removeEducation: (id) => {\r\n                        set((state) => ({\r\n                            profile: helpers.removeEducation(state.profile, id)\r\n                        }), false, `removeEducation: ${id}`);\r\n                    },\r\n\r\n                    addSkill: (skill) => {\r\n                        set((state) => ({\r\n                            profile: helpers.addSkill(state.profile, skill)\r\n                        }), false, 'addSkill');\r\n                    },\r\n\r\n                    removeSkill: (index) => {\r\n                        set((state) => ({\r\n                            profile: helpers.removeSkill(state.profile, index)\r\n                        }), false, `removeSkill: ${index}`);\r\n                    },\r\n\r\n                    addLanguage: (language) => {\r\n                        set((state) => ({\r\n                            profile: helpers.addLanguage(state.profile, language)\r\n                        }), false, 'addLanguage');\r\n                    },\r\n\r\n                    removeLanguage: (index) => {\r\n                        set((state) => ({\r\n                            profile: helpers.removeLanguage(state.profile, index)\r\n                        }), false, `removeLanguage: ${index}`);\r\n                    },\r\n\r\n                    // ========================================\r\n                    // TELEKINESIS - REORDER OPERATIONS\r\n                    // ========================================\r\n\r\n                    reorderExperiences: (startIndex, endIndex) => {\r\n                        set((state) => ({\r\n                            profile: helpers.reorderExperiences(state.profile, startIndex, endIndex)\r\n                        }), false, `telekinesis:reorderExperiences:${startIndex}ÔåÆ${endIndex}`);\r\n                    },\r\n\r\n                    reorderSkills: (startIndex, endIndex) => {\r\n                        set((state) => ({\r\n                            profile: helpers.reorderSkills(state.profile, startIndex, endIndex)\r\n                        }), false, `telekinesis:reorderSkills:${startIndex}ÔåÆ${endIndex}`);\r\n                    },\r\n\r\n                    reorderEducations: (startIndex, endIndex) => {\r\n                        set((state) => ({\r\n                            profile: helpers.reorderEducations(state.profile, startIndex, endIndex)\r\n                        }), false, `telekinesis:reorderEducations:${startIndex}ÔåÆ${endIndex}`);\r\n                    },\r\n\r\n                    reorderSections: (startIndex, endIndex) => {\r\n                        set((state) => ({\r\n                            sectionOrder: helpers.reorderSections(state.sectionOrder, startIndex, endIndex)\r\n                        }), false, `telekinesis:reorderSections:${startIndex}ÔåÆ${endIndex}`);\r\n                    },\r\n\r\n                    // ========================================\r\n                    // ATLAS ACTIONS\r\n                    // ========================================\r\n\r\n                    setSyncStatus: (status, error) => {\r\n                        set((state) => ({\r\n                            atlas: {\r\n                                ...state.atlas,\r\n                                syncStatus: status,\r\n                                syncError: error || null\r\n                            }\r\n                        }), false, `atlas:setSyncStatus:${status}`);\r\n                    },\r\n\r\n                    markSynced: () => {\r\n                        set((state) => ({\r\n                            atlas: {\r\n                                ...state.atlas,\r\n                                syncStatus: 'synced',\r\n                                lastSyncTime: Date.now(),\r\n                                syncError: null\r\n                            }\r\n                        }), false, 'atlas:markSynced');\r\n                    },\r\n\r\n                    // ========================================\r\n                    // TELEKINESIS MODE ACTIONS (Updated: 3 modes)\r\n                    // ========================================\r\n\r\n                    setMode: (mode) => {\r\n                        set({ mode }, false, `telekinesis:setMode:${mode}`);\r\n                    },\r\n\r\n                    // ========================================\r\n                    // UTILITY ACTIONS\r\n                    // ========================================\r\n\r\n                    setFullProfile: (profile) => {\r\n                        set({ profile }, false, 'setFullProfile');\r\n                    },\r\n\r\n                    reset: () => {\r\n                        set({ profile: helpers.getInitialProfile() }, false, 'reset');\r\n                    },\r\n\r\n                    exportProfile: () => {\r\n                        return get().profile;\r\n                    }\r\n                }),\r\n                {\r\n                    name: 'swiss-cv-v2-storage',\r\n                    version: 3, // Bumped for 3-mode migration\r\n\r\n                    // Auto-migration for sectionOrder and mode\r\n                    onRehydrateStorage: () => (state) => {\r\n                        if (state) {\r\n                            // Migrate sectionOrder\r\n                            const currentOrder = state.sectionOrder || [];\r\n                            const missingSections = DEFAULT_SECTION_ORDER.filter(\r\n                                section => !currentOrder.includes(section)\r\n                            );\r\n\r\n                            if (missingSections.length > 0) {\r\n                                state.sectionOrder = [...currentOrder, ...missingSections];\r\n                                console.info(\r\n                                    `[PATCH V2.1] ­ƒöº Auto-migrated sectionOrder: added ${missingSections.join(', ')}`\r\n                                );\r\n                            }\r\n\r\n                            // Migrate mode: 'write' -> 'edition'\r\n                            if ((state.mode as any) === 'write') {\r\n                                state.mode = 'edition';\r\n                                console.info('[V3 MIGRATION] ­ƒöº Updated mode: write ÔåÆ edition');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            ),\r\n            {\r\n                name: 'CVStoreV2',\r\n                enabled: import.meta.env.DEV\r\n            }\r\n        )\r\n    )\r\n);\r\n\r\n// ============================================================================\r\n// ATLAS AUTO-SYNC INITIALIZATION\r\n// ============================================================================\r\n\r\nif (typeof window !== 'undefined') {\r\n    useCVStoreV2.subscribe(\r\n        (state) => state.profile,\r\n        (profile) => {\r\n            const { setSyncStatus, markSynced } = useCVStoreV2.getState();\r\n            atlasSync.debouncedSync(profile, setSyncStatus, markSynced);\r\n        }\r\n    );\r\n\r\n    console.log('[ATLAS] ÔÜí Protocol Permanence activated - Auto-save enabled');\r\n}\r\n\r\n// ============================================================================\r\n// CONVENIENCE HOOKS (Optimized Selectors)\r\n// ============================================================================\r\n\r\n/**\r\n * Hook to get only the profile (no actions)\r\n * Use this for read-only components to avoid re-renders\r\n */\r\nexport const useProfile = () => useCVStoreV2((state) => state.profile);\r\n\r\n/**\r\n * Hook to get ATLAS sync status\r\n */\r\nexport const useAtlasStatus = () => useCVStoreV2((state) => state.atlas);\r\n\r\n/**\r\n * Hook to get only updateField action\r\n */\r\nexport const useUpdateField = () => useCVStoreV2((state) => state.updateField);\r\n\r\n/**\r\n * Hook to get current mode (edition | structure | modele)\r\n */\r\nexport const useMode = () => useCVStoreV2((state) => state.mode);\r\n\r\n/**\r\n * Hook to get setMode action\r\n */\r\nexport const useSetMode = () => useCVStoreV2((state) => state.setMode);\r\n\r\n/**\r\n * Hook to get all array operations\r\n */\r\nexport const useArrayActions = () => useCVStoreV2((state) => ({\r\n    addExperience: state.addExperience,\r\n    removeExperience: state.removeExperience,\r\n    addEducation: state.addEducation,\r\n    removeEducation: state.removeEducation,\r\n    addSkill: state.addSkill,\r\n    removeSkill: state.removeSkill,\r\n    addLanguage: state.addLanguage,\r\n    removeLanguage: state.removeLanguage\r\n}));\r\n\r\n/**\r\n * Hook to get all reorder operations\r\n */\r\nexport const useReorderActions = () => useCVStoreV2((state) => ({\r\n    reorderExperiences: state.reorderExperiences,\r\n    reorderEducations: state.reorderEducations,\r\n    reorderSkills: state.reorderSkills,\r\n    reorderSections: state.reorderSections\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\cv-store-v2.types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1407,1410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1407,1410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1464,1467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1464,1467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Store V2 - Type Definitions\r\n * \r\n * Centralized type definitions for the V2 store architecture.\r\n * Extracted from cv-store-v2.ts to respect 400-line limit.\r\n */\r\n\r\nimport type { CVProfile, CVProfilePath } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// SYNC & ATLAS TYPES\r\n// ============================================================================\r\n\r\nexport type SyncStatus = 'idle' | 'saving' | 'synced' | 'error';\r\n\r\nexport interface AtlasState {\r\n    syncStatus: SyncStatus;\r\n    lastSyncTime: number | null;\r\n    syncError: string | null;\r\n}\r\n\r\n// ============================================================================\r\n// MODE TYPES (Updated for 3-mode system)\r\n// ============================================================================\r\n\r\nexport type CVMode = 'edition' | 'structure' | 'ai' | 'modele';\r\n\r\n// ============================================================================\r\n// STORE STATE INTERFACE\r\n// ============================================================================\r\n\r\nexport interface CVStoreV2State {\r\n    // Data\r\n    profile: CVProfile;\r\n\r\n    // ATLAS - Sync State\r\n    atlas: AtlasState;\r\n\r\n    // TELEKINESIS - Mode State (Updated: 3 modes)\r\n    mode: CVMode;\r\n    sectionOrder: string[];\r\n\r\n    // Actions\r\n    updateField: (path: CVProfilePath | string, value: any) => void;\r\n    batchUpdate: (updates: Record<string, any>) => void;\r\n\r\n    // Array operations\r\n    addExperience: () => void;\r\n    removeExperience: (id: string) => void;\r\n    addEducation: () => void;\r\n    removeEducation: (id: string) => void;\r\n    addSkill: (skill: string) => void;\r\n    removeSkill: (index: number) => void;\r\n    addLanguage: (language: { name: string; level: string }) => void;\r\n    removeLanguage: (index: number) => void;\r\n\r\n    // TELEKINESIS - Reorder operations\r\n    reorderExperiences: (startIndex: number, endIndex: number) => void;\r\n    reorderEducations: (startIndex: number, endIndex: number) => void;\r\n    reorderSkills: (startIndex: number, endIndex: number) => void;\r\n    reorderSections: (startIndex: number, endIndex: number) => void;\r\n\r\n    // ATLAS Actions\r\n    setSyncStatus: (status: SyncStatus, error?: string) => void;\r\n    markSynced: () => void;\r\n\r\n    // TELEKINESIS Actions (Updated: 3 modes)\r\n    setMode: (mode: CVMode) => void;\r\n\r\n    // Utility\r\n    setFullProfile: (profile: CVProfile) => void;\r\n    reset: () => void;\r\n    exportProfile: () => CVProfile;\r\n}\r\n\r\n// ============================================================================\r\n// CONSTANTS\r\n// ============================================================================\r\n\r\n/**\r\n * Default section order for CV template\r\n * PATCH V2.1: Used for initialization and auto-migration\r\n */\r\nexport const DEFAULT_SECTION_ORDER = ['summary', 'experience', 'education', 'skills', 'languages'] as const;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\application\\store\\v2\\selectors.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CVProfile' is defined but never used.","line":9,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Language' is defined but never used.","line":9,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":188,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5375,5378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5375,5378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Type-Safe Selectors\r\n * \r\n * Optimized selectors for the CV store to prevent unnecessary re-renders.\r\n * Use these instead of direct store access for better performance.\r\n */\r\n\r\nimport { useCVStoreV2 } from './cv-store-v2';\r\nimport type { CVProfile, Experience, Education, Language } from '../../../domain/cv/v2/types';\r\nimport { getValueByPath } from '../../../domain/cv/v2/path-utils';\r\n\r\n// ============================================================================\r\n// PERSONAL INFO SELECTORS\r\n// ============================================================================\r\n\r\n/**\r\n * Get personal info only\r\n * Component re-renders only when personal info changes\r\n */\r\nexport const usePersonalInfo = () =>\r\n    useCVStoreV2((state) => state.profile.personal);\r\n\r\n/**\r\n * Get full name (computed)\r\n */\r\nexport const useFullName = () =>\r\n    useCVStoreV2((state) =>\r\n        `${state.profile.personal.firstName} ${state.profile.personal.lastName}`.trim()\r\n    );\r\n\r\n/**\r\n * Get contact info only\r\n */\r\nexport const useContactInfo = () =>\r\n    useCVStoreV2((state) => state.profile.personal.contact);\r\n\r\n// ============================================================================\r\n// SECTION SELECTORS\r\n// ============================================================================\r\n\r\n/**\r\n * Get summary only\r\n */\r\nexport const useSummary = () =>\r\n    useCVStoreV2((state) => state.profile.summary);\r\n\r\n/**\r\n * Get all experiences\r\n */\r\nexport const useExperiences = () =>\r\n    useCVStoreV2((state) => state.profile.experiences);\r\n\r\n/**\r\n * Get single experience by ID\r\n */\r\nexport const useExperience = (id: string): Experience | undefined =>\r\n    useCVStoreV2((state) =>\r\n        state.profile.experiences.find(exp => exp.id === id)\r\n    );\r\n\r\n/**\r\n * Get all educations\r\n */\r\nexport const useEducations = () =>\r\n    useCVStoreV2((state) => state.profile.educations);\r\n\r\n/**\r\n * Get single education by ID\r\n */\r\nexport const useEducation = (id: string): Education | undefined =>\r\n    useCVStoreV2((state) =>\r\n        state.profile.educations.find(edu => edu.id === id)\r\n    );\r\n\r\n/**\r\n * Get all languages\r\n */\r\nexport const useLanguages = () =>\r\n    useCVStoreV2((state) => state.profile.languages);\r\n\r\n/**\r\n * Get all skills\r\n */\r\nexport const useSkills = () =>\r\n    useCVStoreV2((state) => state.profile.skills);\r\n\r\n/**\r\n * Get all strengths\r\n */\r\nexport const useStrengths = () =>\r\n    useCVStoreV2((state) => state.profile.strengths);\r\n\r\n// ============================================================================\r\n// METADATA SELECTORS\r\n// ============================================================================\r\n\r\n/**\r\n * Get all metadata\r\n */\r\nexport const useMetadata = () =>\r\n    useCVStoreV2((state) => state.profile.metadata);\r\n\r\n/**\r\n * Get accent color only\r\n */\r\nexport const useAccentColor = () =>\r\n    useCVStoreV2((state) => state.profile.metadata.accentColor);\r\n\r\n/**\r\n * Get template ID only\r\n */\r\nexport const useTemplateId = () =>\r\n    useCVStoreV2((state) => state.profile.metadata.templateId);\r\n\r\n/**\r\n * Get density only\r\n */\r\nexport const useDensity = () =>\r\n    useCVStoreV2((state) => state.profile.metadata.density);\r\n\r\n/**\r\n * Get font family only\r\n */\r\nexport const useFontFamily = () =>\r\n    useCVStoreV2((state) => state.profile.metadata.fontFamily);\r\n\r\n// ============================================================================\r\n// COMPUTED SELECTORS\r\n// ============================================================================\r\n\r\n/**\r\n * Check if profile is empty (has minimal data)\r\n */\r\nexport const useIsProfileEmpty = () =>\r\n    useCVStoreV2((state) => {\r\n        const { personal, experiences, educations } = state.profile;\r\n        return (\r\n            !personal.firstName &&\r\n            !personal.lastName &&\r\n            experiences.length === 0 &&\r\n            educations.length === 0\r\n        );\r\n    });\r\n\r\n/**\r\n * Get profile completion percentage\r\n */\r\nexport const useProfileCompletion = () =>\r\n    useCVStoreV2((state) => {\r\n        const { personal, summary, experiences, educations, skills, languages } = state.profile;\r\n\r\n        let completed = 0;\r\n        const total = 8;\r\n\r\n        if (personal.firstName && personal.lastName) completed++;\r\n        if (personal.title) completed++;\r\n        if (personal.contact.email) completed++;\r\n        if (summary) completed++;\r\n        if (experiences.length > 0) completed++;\r\n        if (educations.length > 0) completed++;\r\n        if (skills.length > 0) completed++;\r\n        if (languages.length > 0) completed++;\r\n\r\n        return Math.round((completed / total) * 100);\r\n    });\r\n\r\n/**\r\n * Get total years of experience (computed from experiences)\r\n */\r\nexport const useTotalExperience = () =>\r\n    useCVStoreV2((state) => {\r\n        // This is a simplified calculation\r\n        // You might want to parse actual dates from dateRange\r\n        return state.profile.experiences.length;\r\n    });\r\n\r\n// ============================================================================\r\n// DYNAMIC PATH SELECTOR\r\n// ============================================================================\r\n\r\n/**\r\n * Get value by dynamic path (for generic components)\r\n * \r\n * @example\r\n * const firstName = useFieldValue(\"personal.firstName\");\r\n * const role = useFieldValue(\"experiences.0.role\");\r\n */\r\nexport function useFieldValue<T = any>(path: string): T | undefined {\r\n    return useCVStoreV2((state) =>\r\n        getValueByPath<T>(state.profile, path)\r\n    );\r\n}\r\n\r\n/**\r\n * Check if a field has a value\r\n */\r\nexport function useHasFieldValue(path: string): boolean {\r\n    return useCVStoreV2((state) => {\r\n        const value = getValueByPath(state.profile, path);\r\n        return value !== undefined && value !== null && value !== '';\r\n    });\r\n}\r\n\r\n// ============================================================================\r\n// EXPORT ALL\r\n// ============================================================================\r\n\r\nexport const Selectors = {\r\n    // Personal\r\n    usePersonalInfo,\r\n    useFullName,\r\n    useContactInfo,\r\n\r\n    // Sections\r\n    useSummary,\r\n    useExperiences,\r\n    useExperience,\r\n    useEducations,\r\n    useEducation,\r\n    useLanguages,\r\n    useSkills,\r\n    useStrengths,\r\n\r\n    // Metadata\r\n    useMetadata,\r\n    useAccentColor,\r\n    useTemplateId,\r\n    useDensity,\r\n    useFontFamily,\r\n\r\n    // Computed\r\n    useIsProfileEmpty,\r\n    useProfileCompletion,\r\n    useTotalExperience,\r\n\r\n    // Dynamic\r\n    useFieldValue,\r\n    useHasFieldValue\r\n} as const;\r\n\r\nexport default Selectors;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\data\\dictionaries\\action-verbs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\data\\initialData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\data\\translations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\bi\\pricing-advisor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\cv\\v2\\path-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\cv\\v2\\path-utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1161,1164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1161,1164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1843,1846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1843,1846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3362,3365],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3362,3365],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4518,4521],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4518,4521],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7055,7058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7055,7058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\[.","line":274,"column":38,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":274,"endColumn":39,"suggestions":[{"messageId":"removeEscape","fix":{"range":[8164,8165],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[8164,8164],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Path Utilities\r\n * \r\n * This module provides type-safe path resolution using lodash get/set.\r\n * NO REGEX - uses battle-tested lodash path parsing.\r\n * \r\n * Key features:\r\n * - Immutable updates (always returns new object)\r\n * - Handles nested arrays automatically\r\n * - Type-safe with CVProfile\r\n * - Zero RegExp fragility\r\n */\r\n\r\nimport { get, set, cloneDeep } from 'lodash';\r\nimport type { CVProfile, CVProfilePath } from './types';\r\n\r\n// ============================================================================\r\n// CORE PATH OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Get a value from a nested path in the CV profile\r\n * \r\n * @param profile - The CV profile object\r\n * @param path - Dot-notation path (e.g., \"personal.firstName\" or \"experiences.0.role\")\r\n * @returns The value at the path, or undefined if not found\r\n * \r\n * @example\r\n * const name = getValueByPath(profile, \"personal.firstName\");\r\n * const role = getValueByPath(profile, \"experiences.0.role\");\r\n * const task = getValueByPath(profile, \"experiences.0.tasks.1\");\r\n */\r\nexport function getValueByPath<T = any>(\r\n    profile: CVProfile,\r\n    path: CVProfilePath | string\r\n): T | undefined {\r\n    return get(profile, path) as T | undefined;\r\n}\r\n\r\n/**\r\n * Set a value at a nested path in the  CV profile (IMMUTABLE)\r\n * \r\n * @param profile - The CV profile object\r\n * @param path - Dot-notation path\r\n * @param value - The value to set\r\n * @returns A NEW profile object with the value updated\r\n * \r\n * @example\r\n * const updated = setValueByPath(profile, \"personal.firstName\", \"John\");\r\n * const updated = setValueByPath(profile, \"experiences.0.role\", \"Senior Developer\");\r\n * \r\n * @note This function ALWAYS returns a new object (immutable update)\r\n */\r\nexport function setValueByPath<T = any>(\r\n    profile: CVProfile,\r\n    path: CVProfilePath | string,\r\n    value: T\r\n): CVProfile {\r\n    // Deep clone to ensure immutability\r\n    const cloned = cloneDeep(profile);\r\n\r\n    // Use lodash set (handles all path formats automatically)\r\n    set(cloned, path, value);\r\n\r\n    return cloned;\r\n}\r\n\r\n/**\r\n * Check if a path exists in the profile\r\n * \r\n * @param profile - The CV profile object\r\n * @param path - Dot-notation path\r\n * @returns True if the path exists and has a value\r\n * \r\n * @example\r\n * hasPath(profile, \"personal.photoUrl\") // true if photo exists\r\n */\r\nexport function hasPath(\r\n    profile: CVProfile,\r\n    path: CVProfilePath | string\r\n): boolean {\r\n    const value = get(profile, path);\r\n    return value !== undefined && value !== null;\r\n}\r\n\r\n// ============================================================================\r\n// ARRAY OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Insert an item into an array at a specific path\r\n * \r\n * @param profile - The CV profile object\r\n * @param arrayPath - Path to the array (e.g., \"experiences\" or \"experiences.0.tasks\")\r\n * @param item - The item to insert\r\n * @param index - Optional index to insert at (defaults to end)\r\n * @returns A NEW profile with the item inserted\r\n * \r\n * @example\r\n * const updated = insertArrayItem(profile, \"experiences\", newExperience);\r\n * const updated = insertArrayItem(profile, \"experiences.0.tasks\", \"New task\", 0);\r\n */\r\nexport function insertArrayItem<T = any>(\r\n    profile: CVProfile,\r\n    arrayPath: string,\r\n    item: T,\r\n    index?: number\r\n): CVProfile {\r\n    const cloned = cloneDeep(profile);\r\n    const array = get(cloned, arrayPath) as T[] | undefined;\r\n\r\n    if (!Array.isArray(array)) {\r\n        // If array doesn't exist, create it\r\n        set(cloned, arrayPath, [item]);\r\n    } else {\r\n        if (index !== undefined && index >= 0 && index <= array.length) {\r\n            array.splice(index, 0, item);\r\n        } else {\r\n            array.push(item);\r\n        }\r\n    }\r\n\r\n    return cloned;\r\n}\r\n\r\n/**\r\n * Remove an item from an array at a specific path\r\n * \r\n * @param profile - The CV profile object\r\n * @param arrayPath - Path to the array\r\n * @param index - Index of item to remove\r\n * @returns A NEW profile with the item removed\r\n * \r\n * @example\r\n * const updated = removeArrayItem(profile, \"experiences\", 0);\r\n * const updated = removeArrayItem(profile, \"experiences.0.tasks\", 2);\r\n */\r\nexport function removeArrayItem(\r\n    profile: CVProfile,\r\n    arrayPath: string,\r\n    index: number\r\n): CVProfile {\r\n    const cloned = cloneDeep(profile);\r\n    const array = get(cloned, arrayPath) as any[] | undefined;\r\n\r\n    if (Array.isArray(array) && index >= 0 && index < array.length) {\r\n        array.splice(index, 1);\r\n    }\r\n\r\n    return cloned;\r\n}\r\n\r\n/**\r\n * Remove an item from an array by ID\r\n * \r\n * @param profile - The CV profile object\r\n * @param arrayPath - Path to the array\r\n * @param id - ID of the item to remove\r\n * @returns A NEW profile with the item removed\r\n * \r\n * @example\r\n * const updated = removeArrayItemById(profile, \"experiences\", \"exp-123\");\r\n * const updated = removeArrayItemById(profile, \"educations\", \"edu-456\");\r\n */\r\nexport function removeArrayItemById(\r\n    profile: CVProfile,\r\n    arrayPath: string,\r\n    id: string\r\n): CVProfile {\r\n    const cloned = cloneDeep(profile);\r\n    const array = get(cloned, arrayPath) as Array<{ id: string }> | undefined;\r\n\r\n    if (Array.isArray(array)) {\r\n        const index = array.findIndex(item => item.id === id);\r\n        if (index !== -1) {\r\n            array.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    return cloned;\r\n}\r\n\r\n/**\r\n * Update an item in an array by ID\r\n * \r\n * @param profile - The CV profile object\r\n * @param arrayPath - Path to the array\r\n * @param id - ID of the item to update\r\n * @param updates - Partial updates to apply\r\n * @returns A NEW profile with the item updated\r\n * \r\n * @example\r\n * const updated = updateArrayItemById(profile, \"experiences\", \"exp-123\", { role: \"Senior Dev\" });\r\n */\r\nexport function updateArrayItemById<T extends { id: string }>(\r\n    profile: CVProfile,\r\n    arrayPath: string,\r\n    id: string,\r\n    updates: Partial<T>\r\n): CVProfile {\r\n    const cloned = cloneDeep(profile);\r\n    const array = get(cloned, arrayPath) as T[] | undefined;\r\n\r\n    if (Array.isArray(array)) {\r\n        const index = array.findIndex(item => item.id === id);\r\n        if (index !== -1) {\r\n            array[index] = { ...array[index], ...updates };\r\n        }\r\n    }\r\n\r\n    return cloned;\r\n}\r\n\r\n// ============================================================================\r\n// BATCH OPERATIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Apply multiple updates atomically\r\n * \r\n * @param profile - The CV profile object\r\n * @param updates - Map of paths to values\r\n * @returns A NEW profile with all updates applied\r\n * \r\n * @example\r\n * const updated = batchUpdate(profile, {\r\n *   \"personal.firstName\": \"John\",\r\n *   \"personal.lastName\": \"Doe\",\r\n *   \"summary\": \"Updated summary\"\r\n * });\r\n */\r\nexport function batchUpdate(\r\n    profile: CVProfile,\r\n    updates: Record<string, any>\r\n): CVProfile {\r\n    let result = cloneDeep(profile);\r\n\r\n    for (const [path, value] of Object.entries(updates)) {\r\n        result = setValueByPath(result, path, value);\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n// ============================================================================\r\n// VALIDATION HELPERS\r\n// ============================================================================\r\n\r\n/**\r\n * Validate that a path is safe to use\r\n * \r\n * @param path - The path to validate\r\n * @returns True if path is valid\r\n * \r\n * @example\r\n * isValidPath(\"personal.firstName\") // true\r\n * isValidPath(\"__proto__\") // false (prototype pollution)\r\n */\r\nexport function isValidPath(path: string): boolean {\r\n    // Prevent prototype pollution\r\n    const dangerous = ['__proto__', 'constructor', 'prototype'];\r\n    const parts = path.split('.');\r\n\r\n    return !parts.some(part => dangerous.includes(part));\r\n}\r\n\r\n/**\r\n * Sanitize a path string\r\n * \r\n * @param path - The path to sanitize\r\n * @returns Sanitized path\r\n */\r\nexport function sanitizePath(path: string): string {\r\n    return path.replace(/[^a-zA-Z0-9.\\[\\]]/g, '');\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport const PathUtils = {\r\n    get: getValueByPath,\r\n    set: setValueByPath,\r\n    has: hasPath,\r\n    insertArrayItem,\r\n    removeArrayItem,\r\n    removeArrayItemById,\r\n    updateArrayItemById,\r\n    batchUpdate,\r\n    isValidPath,\r\n    sanitizePath\r\n} as const;\r\n\r\nexport default PathUtils;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\cv\\v2\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4613,4616],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4613,4616],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Strict Type Definitions\r\n * \r\n * This file contains the complete type system for the CV Builder v2.\r\n * All types are strict and immutable to ensure type safety across the application.\r\n * \r\n * Key improvements over v1:\r\n * - No optional chaining needed\r\n * - Full autocomplete support\r\n * - PathOf utility type for type-safe path strings\r\n * - Compatible with existing Zod schemas\r\n */\r\n\r\n// ============================================================================\r\n// VALUE OBJECTS\r\n// ============================================================================\r\n\r\nexport interface DateRange {\r\n    start?: string;\r\n    end?: string;\r\n    isCurrent?: boolean;\r\n    displayString: string; // e.g., \"Jan 2020 - Present\"\r\n}\r\n\r\nexport interface ContactInfo {\r\n    email: string;\r\n    phone: string;\r\n    address: string;\r\n    linkedin?: string;\r\n    website?: string;\r\n}\r\n\r\n// ============================================================================\r\n// ENTITIES\r\n// ============================================================================\r\n\r\nexport interface PersonalInfo {\r\n    firstName: string;\r\n    lastName: string;\r\n    title: string;\r\n    photoUrl?: string;\r\n    birthDate?: string;\r\n    nationality?: string;\r\n    permit?: string;\r\n    mobility?: string;\r\n    contact: ContactInfo;\r\n}\r\n\r\nexport interface Experience {\r\n    id: string;\r\n    role: string;\r\n    company: string;\r\n    location?: string;\r\n    dateRange?: DateRange;\r\n    dates: string; // Legacy simple string support\r\n    tasks: string[]; // Array of task descriptions\r\n}\r\n\r\nexport interface Education {\r\n    id: string;\r\n    degree: string;\r\n    school: string;\r\n    year: string;\r\n    description?: string;\r\n}\r\n\r\nexport interface Language {\r\n    name: string;\r\n    level: string; // e.g., \"Native\", \"Fluent\", \"Intermediate\"\r\n}\r\n\r\nexport interface SkillCategory {\r\n    name: string;\r\n    skills: string[];\r\n}\r\n\r\nexport interface Letter {\r\n    id: string;\r\n    title: string;\r\n    content: string;\r\n    lastUpdated: number;\r\n    targetJob?: string;\r\n    targetCompany?: string;\r\n}\r\n\r\n// ============================================================================\r\n// METADATA\r\n// ============================================================================\r\n\r\nexport interface CVMetadata {\r\n    templateId: string;\r\n    density: 'comfortable' | 'compact' | 'dense';\r\n    accentColor: string;\r\n    fontFamily: 'sans' | 'serif';\r\n}\r\n\r\n// ============================================================================\r\n// AGGREGATE ROOT\r\n// ============================================================================\r\n\r\nexport interface CVProfile {\r\n    id: string;\r\n    lastUpdated: number;\r\n    personal: PersonalInfo;\r\n    summary: string;\r\n    experiences: Experience[];\r\n    educations: Education[];\r\n    languages: Language[];\r\n    skills: string[]; // Simple list\r\n    skillCategories?: SkillCategory[]; // Structured list\r\n    strengths: string[];\r\n    letter?: string; // Legacy, kept for migration\r\n    letters?: Letter[]; // New multi-letter support\r\n    metadata: CVMetadata;\r\n}\r\n\r\n// ============================================================================\r\n// PATH UTILITY TYPES\r\n// ============================================================================\r\n\r\n/**\r\n * Utility type to extract all valid paths from a nested object structure.\r\n * \r\n * Examples:\r\n * - \"personal.firstName\" Ô£à\r\n * - \"personal.contact.email\" Ô£à\r\n * - \"experiences.0.role\" Ô£à\r\n * - \"experiences.0.tasks.1\" Ô£à\r\n * - \"metadata.accentColor\" Ô£à\r\n * \r\n * This provides autocomplete and compile-time validation for path strings.\r\n */\r\nexport type PathOf<T, Prefix extends string = ''> = T extends object\r\n    ? {\r\n        [K in keyof T & string]: T[K] extends Array<infer U>\r\n        ? `${Prefix}${K}` | `${Prefix}${K}.${number}` | PathOf<U, `${Prefix}${K}.${number}.`>\r\n        : T[K] extends object\r\n        ? `${Prefix}${K}` | PathOf<T[K], `${Prefix}${K}.`>\r\n        : `${Prefix}${K}`;\r\n    }[keyof T & string]\r\n    : never;\r\n\r\n/**\r\n * Type-safe path for CVProfile\r\n * \r\n * Usage:\r\n * ```ts\r\n * const path: CVProfilePath = \"personal.firstName\"; // Ô£à OK\r\n * const path: CVProfilePath = \"invalid.path\"; // ÔØî Type error\r\n * ```\r\n */\r\nexport type CVProfilePath = PathOf<CVProfile>;\r\n\r\n// ============================================================================\r\n// VALIDATION TYPES\r\n// ============================================================================\r\n\r\nexport interface ValidationRule {\r\n    required?: boolean;\r\n    minLength?: number;\r\n    maxLength?: number;\r\n    pattern?: RegExp;\r\n    custom?: (value: any) => boolean;\r\n}\r\n\r\nexport interface FieldMeta {\r\n    path: CVProfilePath;\r\n    label: string;\r\n    placeholder?: string;\r\n    validation?: ValidationRule;\r\n    removable?: boolean; // Can be deleted (e.g., array items)\r\n}\r\n\r\n// ============================================================================\r\n// UTILITY FUNCTIONS (TYPE GUARDS)\r\n// ============================================================================\r\n\r\n/**\r\n * Type guard to check if a value is a valid CVProfile\r\n */\r\nexport function isCVProfile(value: unknown): value is CVProfile {\r\n    return (\r\n        typeof value === 'object' &&\r\n        value !== null &&\r\n        'personal' in value &&\r\n        'summary' in value &&\r\n        'experiences' in value &&\r\n        'educations' in value\r\n    );\r\n}\r\n\r\n/**\r\n * Type guard to check if a path is a valid array path\r\n */\r\nexport function isArrayPath(path: string): boolean {\r\n    return /\\[\\d+\\]/.test(path) || /\\.\\d+/.test(path);\r\n}\r\n\r\n/**\r\n * Extract array index from path\r\n * e.g., \"experiences.0.role\" => 0\r\n */\r\nexport function extractArrayIndex(path: string): number | null {\r\n    const match = path.match(/\\.(\\d+)\\.?/);\r\n    return match ? parseInt(match[1], 10) : null;\r\n}\r\n\r\n/**\r\n * Extract array name from path\r\n * e.g., \"experiences.0.role\" => \"experiences\"\r\n */\r\nexport function extractArrayName(path: string): string | null {\r\n    const match = path.match(/^(\\w+)\\.\\d+/);\r\n    return match ? match[1] : null;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\entities\\cv.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\events\\event-bus.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[335,338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[335,338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[450,453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[450,453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport type EventType =\r\n    | 'CV_UPDATED'\r\n    | 'LAYOUT_CALCULATED'\r\n    | 'PERFORMANCE_METRIC'\r\n    | 'SYSTEM_ERROR'\r\n    | 'USER_INTERACTION'\r\n    | 'DRAG_START'\r\n    | 'DRAG_END'\r\n    | 'DROP_PREVIEW'\r\n    | 'MODE_SWITCHED'\r\n    | 'TEMPLATE_CHANGED';\r\n\r\nexport interface SystemEvent<T = any> {\r\n    id: string;\r\n    type: EventType;\r\n    payload: T;\r\n    timestamp: number;\r\n}\r\n\r\ntype EventHandler<T = any> = (event: SystemEvent<T>) => void;\r\n\r\nclass EventBus {\r\n    private handlers: Map<EventType, Set<EventHandler>> = new Map();\r\n\r\n    subscribe<T>(type: EventType, handler: EventHandler<T>): () => void {\r\n        if (!this.handlers.has(type)) {\r\n            this.handlers.set(type, new Set());\r\n        }\r\n        this.handlers.get(type)!.add(handler);\r\n\r\n        return () => {\r\n            this.handlers.get(type)?.delete(handler);\r\n        };\r\n    }\r\n\r\n    publish<T>(type: EventType, payload: T): void {\r\n        const event: SystemEvent<T> = {\r\n            id: uuidv4(),\r\n            type,\r\n            payload,\r\n            timestamp: Date.now(),\r\n        };\r\n\r\n        const handlers = this.handlers.get(type);\r\n        if (handlers) {\r\n            handlers.forEach(handler => {\r\n                try {\r\n                    handler(event);\r\n                } catch (error) {\r\n                    console.error(`Error in event handler for ${type}:`, error);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const systemEventBus = new EventBus();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\experiments\\feature-registry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\motivation-letter\\letter-generator.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_context' is defined but never used.","line":34,"column":100,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":108}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport type { GenerationContext, LetterSection } from './letter-types';\r\nimport { LocalMemory } from '../services/local-learning/local-memory';\r\n\r\nexport interface GeneratedLetter {\r\n    content: string;\r\n    usedSectionIds: string[];\r\n}\r\n\r\nexport class LetterGenerator {\r\n    static generate(context: GenerationContext): GeneratedLetter {\r\n        const sections = LocalMemory.getSections();\r\n\r\n        // Filter by language\r\n        const langSections = sections.filter(s => s.language === context.language);\r\n\r\n        const intro = this.selectSection(langSections, 'intro', context);\r\n        const body = this.selectSection(langSections, 'body', context);\r\n        const conclusion = this.selectSection(langSections, 'conclusion', context);\r\n\r\n        if (!intro || !body || !conclusion) {\r\n            throw new Error('Insufficient templates for generation');\r\n        }\r\n\r\n        const rawContent = [intro.content, body.content, conclusion.content].join('\\n\\n');\r\n        const filledContent = this.fillPlaceholders(rawContent, context);\r\n\r\n        return {\r\n            content: filledContent,\r\n            usedSectionIds: [intro.id, body.id, conclusion.id]\r\n        };\r\n    }\r\n\r\n    private static selectSection(sections: LetterSection[], type: 'intro' | 'body' | 'conclusion', _context: GenerationContext): LetterSection | undefined {\r\n        const candidates = sections.filter(s => s.type === type);\r\n        if (candidates.length === 0) return undefined;\r\n\r\n        // Weighted random selection\r\n        const totalWeight = candidates.reduce((sum, s) => sum + s.weight, 0);\r\n        let random = Math.random() * totalWeight;\r\n\r\n        for (const section of candidates) {\r\n            random -= section.weight;\r\n            if (random <= 0) return section;\r\n        }\r\n        return candidates[0];\r\n    }\r\n\r\n    private static fillPlaceholders(template: string, context: GenerationContext): string {\r\n        let text = template;\r\n        text = text.replace(/{{role}}/g, context.jobTitle);\r\n        text = text.replace(/{{company}}/g, context.companyName);\r\n\r\n        // Join skills naturally\r\n        const skillsStr = context.candidateSkills.slice(0, 3).join(', ');\r\n        text = text.replace(/{{skills}}/g, skillsStr || (context.language === 'fr' ? 'mes comp├®tences' : 'my skills'));\r\n\r\n        return text;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\motivation-letter\\letter-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\pdf\\__tests__\\layout-engine.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[373,376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[373,376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { describe, it, expect } from 'vitest';\r\nimport { LayoutEngine } from '../layout-engine';\r\nimport { PDF_CONFIG } from '../template-config';\r\nimport type { SectionBlock } from '../types';\r\n\r\ndescribe('LayoutEngine', () => {\r\n    const engine = new LayoutEngine(PDF_CONFIG.visual);\r\n\r\n    const createSection = (id: string, height: number, itemsCount = 1, canSplit: any = 'none'): SectionBlock => ({\r\n        id,\r\n        type: 'custom',\r\n        title: `Section ${id}`,\r\n        items: new Array(itemsCount).fill({ name: 'Item' }),\r\n        isVisible: true,\r\n        estimatedHeight: height,\r\n        canSplit\r\n    });\r\n\r\n    it('should place small sections on the first page', () => {\r\n        const sections = [\r\n            createSection('1', 100),\r\n            createSection('2', 100)\r\n        ];\r\n        const pages = engine.paginate(sections);\r\n\r\n        expect(pages.length).toBe(1);\r\n        expect(pages[0].sections.length).toBe(2);\r\n    });\r\n\r\n    it('should move large section to next page if it does not fit', () => {\r\n        // Page height ~1123. Margins+Header+Footer ~230. Usable ~890.\r\n        const sections = [\r\n            createSection('1', 800), // Fits\r\n            createSection('2', 200)  // Should overflow (800+200 > 890)\r\n        ];\r\n        const pages = engine.paginate(sections);\r\n\r\n        expect(pages.length).toBe(2);\r\n        expect(pages[0].sections[0].id).toBe('1');\r\n        expect(pages[1].sections[0].id).toBe('2');\r\n    });\r\n\r\n    it('should split section by item', () => {\r\n        // Section with 10 items, total height 1000 (100 per item)\r\n        // Usable space ~890.\r\n        const section = createSection('split', 1000, 10, 'byItem');\r\n        const pages = engine.paginate([section]);\r\n\r\n        expect(pages.length).toBe(2);\r\n        // Page 1 should have some items\r\n        expect(pages[0].sections[0].items.length).toBeGreaterThan(0);\r\n        // Page 2 should have the rest\r\n        expect(pages[1].sections[0].items.length).toBeGreaterThan(0);\r\n\r\n        const totalItems = pages[0].sections[0].items.length + pages[1].sections[0].items.length;\r\n        expect(totalItems).toBe(10);\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\pdf\\layout-engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\pdf\\template-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\pdf\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport type PDFVariant = 'visual' | 'ats' | 'swiss';\r\n\r\nexport type SectionType =\r\n    | 'profile'\r\n    | 'experience'\r\n    | 'education'\r\n    | 'skills'\r\n    | 'languages'\r\n    | 'interests'\r\n    | 'projects'\r\n    | 'custom';\r\n\r\nexport type SplitStrategy = 'none' | 'byItem' | 'byGroup';\r\n\r\nexport interface SectionBlock {\r\n    id: string;\r\n    type: SectionType;\r\n    title: string;\r\n    items: any[]; // The actual data items (e.g. Experience[])\r\n    isVisible: boolean;\r\n    // Layout hints\r\n    estimatedHeight?: number; // Calculated at runtime\r\n    canSplit: SplitStrategy;\r\n}\r\n\r\nexport interface PageHeader {\r\n    variant: PDFVariant;\r\n    pageNumber: number;\r\n    totalPages: number;\r\n    title?: string; // e.g. \"Tanguy BLOT - CV\"\r\n}\r\n\r\nexport interface PageFooter {\r\n    variant: PDFVariant;\r\n    pageNumber: number;\r\n    totalPages: number;\r\n    text?: string; // e.g. \"Generated with Swiss CV Builder\"\r\n}\r\n\r\nexport interface PageDefinition {\r\n    id: string;\r\n    index: number;\r\n    sections: SectionBlock[];\r\n    header: PageHeader;\r\n    footer: PageFooter;\r\n    // Layout info\r\n    marginTop: number;\r\n    marginBottom: number;\r\n    contentHeight: number; // Used height\r\n    accentColor?: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\plugins\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[169,172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[169,172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport type PluginEventType =\r\n    | 'USER_REGISTERED'\r\n    | 'CV_CREATED'\r\n    | 'SUBSCRIPTION_UPGRADED'\r\n    | 'PAYMENT_FAILED';\r\n\r\nexport interface PluginEvent<T = any> {\r\n    type: PluginEventType;\r\n    payload: T;\r\n    timestamp: Date;\r\n}\r\n\r\nexport interface PluginManifest {\r\n    id: string;\r\n    name: string;\r\n    version: string;\r\n    description: string;\r\n    author: string;\r\n    permissions: string[];\r\n}\r\n\r\nexport interface Plugin {\r\n    manifest: PluginManifest;\r\n    onInit(): Promise<void>;\r\n    onEvent(event: PluginEvent): Promise<void>;\r\n    onShutdown(): Promise<void>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\scv\\mapper.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":237,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7575,7578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7575,7578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9759,9762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9759,9762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":321,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":321,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10753,10756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10753,10756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":406,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":406,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13907,13910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13907,13910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport type { CVProfile, Experience, Education } from '../entities/cv';\r\nimport type { ScvDocument, ScvBlock, ScvTheme } from './types';\r\nimport { PDF_ICONS } from '../../infrastructure/pdf/infinity/icons';\r\n\r\nconst translations = {\r\n    en: {\r\n        summary: 'Professional Summary',\r\n        experience: 'Experience',\r\n        education: 'Education',\r\n        skills: 'Skills',\r\n        languages: 'Languages',\r\n        contact: 'Contact'\r\n    },\r\n    fr: {\r\n        summary: 'Profil / R├®sum├®',\r\n        experience: 'Exp├®rience Professionnelle',\r\n        education: 'Formation & Dipl├┤mes',\r\n        skills: 'Comp├®tences Techniques',\r\n        languages: 'Langues',\r\n        contact: 'Contact'\r\n    },\r\n    de: {\r\n        summary: 'Profil / Zusammenfassung',\r\n        experience: 'Berufserfahrung',\r\n        education: 'Ausbildung',\r\n        skills: 'F├ñhigkeiten',\r\n        languages: 'Sprachen',\r\n        contact: 'Kontakt'\r\n    },\r\n    it: {\r\n        summary: 'Profilo / Riepilogo',\r\n        experience: 'Esperienza Professionale',\r\n        education: 'Istruzione',\r\n        skills: 'Competenze',\r\n        languages: 'Lingue',\r\n        contact: 'Contatto'\r\n    }\r\n};\r\n\r\nconst TAILWIND_COLORS = {\r\n    slate: {\r\n        50: '#f8fafc',\r\n        100: '#f1f5f9',\r\n        200: '#e2e8f0',\r\n        300: '#cbd5e1',\r\n        400: '#94a3b8',\r\n        500: '#64748b',\r\n        600: '#475569',\r\n        700: '#334155',\r\n        800: '#1e293b',\r\n        900: '#0f172a',\r\n    },\r\n    white: '#ffffff',\r\n};\r\n\r\nexport function mapProfileToScv(profile: CVProfile, language: string = 'en'): ScvDocument {\r\n    const t = translations[language as keyof typeof translations] || translations.en;\r\n\r\n    const theme: ScvTheme = {\r\n        primaryColor: profile.metadata.accentColor || '#000000',\r\n        secondaryColor: TAILWIND_COLORS.slate[500],\r\n    };\r\n\r\n    // 1. Header (Full Width)\r\n    const header = createHeader(profile, theme);\r\n\r\n    // 2. Contact Bar (Full Width)\r\n    const contactBar = createContactBar(profile, theme);\r\n\r\n    // 3. Main Content (Two Columns)\r\n    const leftColumn = createLeftColumn(profile, theme, t);\r\n    const rightColumn = createRightColumn(profile, theme, t);\r\n\r\n    const mainGrid: ScvBlock = {\r\n        id: 'main-grid',\r\n        type: 'container',\r\n        layout: {\r\n            flexDirection: 'row',\r\n            gap: 48, // Match web gap-12 (48px)\r\n        },\r\n        styles: {\r\n            padding: [40, 40, 40, 40],\r\n            flexWrap: 'nowrap',\r\n        },\r\n        children: [leftColumn, rightColumn],\r\n    };\r\n\r\n    return {\r\n        meta: {\r\n            title: `${profile.personal.firstName} ${profile.personal.lastName} - CV`,\r\n            author: 'Swiss CV Builder',\r\n        },\r\n        theme,\r\n        blocks: [header, contactBar, mainGrid],\r\n    };\r\n}\r\n\r\nfunction createHeader(profile: CVProfile, theme: ScvTheme): ScvBlock {\r\n    const { personal } = profile;\r\n\r\n    // 1. Profile Picture Column (Left)\r\n    const photoBlock: ScvBlock = {\r\n        id: 'header-photo',\r\n        type: 'container',\r\n        styles: {\r\n            width: '25%',\r\n            display: 'flex',\r\n            paddingRight: 0,\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n        },\r\n        children: [\r\n            {\r\n                id: 'photo-img',\r\n                type: 'image',\r\n                src: personal.photoUrl || `https://ui-avatars.com/api/?name=${personal.firstName}+${personal.lastName}&background=random&color=fff`,\r\n                styles: {\r\n                    width: 144,\r\n                    height: 144,\r\n                    borderRadius: 72,\r\n                    border: '4px solid rgba(255,255,255,0.3)',\r\n                    backgroundColor: '#ffffff',\r\n                }\r\n            }\r\n        ]\r\n    };\r\n\r\n    // 2. Text Info Column (Right)\r\n    const infoBlock: ScvBlock = {\r\n        id: 'header-info',\r\n        type: 'container',\r\n        styles: {\r\n            width: '75%',\r\n            display: 'flex',\r\n            paddingLeft: 10,\r\n        },\r\n        layout: {\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n        },\r\n        children: [\r\n            {\r\n                id: 'header-name',\r\n                type: 'text',\r\n                content: `${personal.firstName} ${personal.lastName}`.toUpperCase(),\r\n                styles: {\r\n                    color: '#FFFFFF',\r\n                    fontSize: 36,\r\n                    fontWeight: 'bold',\r\n                    lineHeight: 0.9,\r\n                    marginBottom: 8,\r\n                    fontFamily: 'Helvetica',\r\n                },\r\n            },\r\n            {\r\n                id: 'header-title',\r\n                type: 'text',\r\n                content: personal.title.toUpperCase(),\r\n                styles: {\r\n                    color: 'rgba(255,255,255,0.9)',\r\n                    fontSize: 18,\r\n                    fontWeight: 'medium',\r\n                    marginBottom: 16,\r\n                    fontFamily: 'Helvetica',\r\n                    letterSpacing: 1,\r\n                },\r\n            },\r\n            // Meta Info\r\n            {\r\n                id: 'header-meta',\r\n                type: 'container',\r\n                layout: {\r\n                    flexDirection: 'row',\r\n                    gap: 24,\r\n                    alignItems: 'center',\r\n                },\r\n                styles: {\r\n                    flexWrap: 'wrap',\r\n                },\r\n                children: ([\r\n                    personal.birthDate ? {\r\n                        id: 'meta-birth',\r\n                        type: 'text',\r\n                        content: personal.birthDate,\r\n                        styles: { color: 'rgba(255,255,255,0.8)', fontSize: 10, fontWeight: 'medium' }\r\n                    } : null,\r\n                    personal.nationality ? {\r\n                        id: 'meta-nat',\r\n                        type: 'text',\r\n                        content: personal.nationality,\r\n                        styles: { color: 'rgba(255,255,255,0.8)', fontSize: 10, fontWeight: 'medium' }\r\n                    } : null,\r\n                    personal.permit ? {\r\n                        id: 'meta-permit',\r\n                        type: 'container',\r\n                        styles: {\r\n                            backgroundColor: 'rgba(255,255,255,0.2)',\r\n                            padding: [2, 8, 2, 8],\r\n                            borderRadius: 4,\r\n                        },\r\n                        children: [{\r\n                            id: 'meta-permit-text',\r\n                            type: 'text',\r\n                            content: personal.permit,\r\n                            styles: { color: '#FFFFFF', fontSize: 10, lineHeight: 1 }\r\n                        }]\r\n                    } : null\r\n                ] as (ScvBlock | null)[]).filter((b): b is ScvBlock => b !== null)\r\n            }\r\n        ]\r\n    };\r\n\r\n    return {\r\n        id: 'header',\r\n        type: 'container',\r\n        styles: {\r\n            backgroundColor: theme.primaryColor,\r\n            padding: [40, 40, 40, 40],\r\n            color: '#FFFFFF',\r\n        },\r\n        layout: {\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            gap: 32,\r\n        },\r\n        children: [photoBlock, infoBlock]\r\n    };\r\n}\r\n\r\nfunction createContactBar(profile: CVProfile, theme: ScvTheme): ScvBlock {\r\n    const { contact, mobility } = profile.personal;\r\n\r\n    const items: ScvBlock[] = [];\r\n\r\n    // Helper to create contact item\r\n    const createItem = (id: string, iconShapes: any[], text: string): ScvBlock => ({\r\n        id,\r\n        type: 'container',\r\n        layout: { flexDirection: 'row', alignItems: 'center', gap: 10 },\r\n        styles: {},\r\n        children: [\r\n            {\r\n                id: `${id}-icon-bg`,\r\n                type: 'container',\r\n                styles: {\r\n                    width: 24,\r\n                    height: 24,\r\n                    borderRadius: 12,\r\n                    backgroundColor: '#FFFFFF',\r\n                    border: `1px solid ${TAILWIND_COLORS.slate[200]}`,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    padding: 0,\r\n                },\r\n                children: [{\r\n                    id: `${id}-icon`,\r\n                    type: 'svg',\r\n                    shapes: iconShapes,\r\n                    viewBox: \"0 0 24 24\",\r\n                    styles: { width: 14, height: 14, color: theme.primaryColor }\r\n                }]\r\n            },\r\n            {\r\n                id: `${id}-text`,\r\n                type: 'text',\r\n                content: text,\r\n                styles: { fontSize: 10, color: TAILWIND_COLORS.slate[600], fontWeight: 'bold' }\r\n            }\r\n        ]\r\n    });\r\n\r\n    if (contact.address) items.push(createItem('contact-address', PDF_ICONS.mapPin, contact.address));\r\n    if (mobility) items.push(createItem('contact-mobility', PDF_ICONS.globe, mobility));\r\n    if (contact.phone) items.push(createItem('contact-phone', PDF_ICONS.phone, contact.phone));\r\n    if (contact.email) items.push(createItem('contact-email', PDF_ICONS.mail, contact.email));\r\n\r\n    return {\r\n        id: 'contact-bar',\r\n        type: 'container',\r\n        styles: {\r\n            backgroundColor: TAILWIND_COLORS.slate[50],\r\n            padding: [24, 40, 24, 40],\r\n            borderBottom: `1px solid ${TAILWIND_COLORS.slate[200]}`,\r\n            flexWrap: 'wrap',\r\n        },\r\n        layout: {\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            gap: 32,\r\n        },\r\n        children: items\r\n    };\r\n}\r\n\r\nfunction createLeftColumn(profile: CVProfile, theme: ScvTheme, t: any): ScvBlock {\r\n    return {\r\n        id: 'left-col',\r\n        type: 'container',\r\n        layout: {\r\n            width: '62%', // Reduced from 66% to avoid overflow with gap\r\n            flexDirection: 'column',\r\n            gap: 40,\r\n        },\r\n        children: [\r\n            createSection(t.summary, [\r\n                {\r\n                    id: 'summary-text',\r\n                    type: 'text',\r\n                    content: profile.summary,\r\n                    styles: { fontSize: 10, lineHeight: 1.6, color: TAILWIND_COLORS.slate[600], textAlign: 'justify' },\r\n                }\r\n            ], theme, PDF_ICONS.briefcase),\r\n            createSection(t.experience, profile.experiences.map(exp => createExperienceBlock(exp, theme)), theme, PDF_ICONS.award),\r\n            createSection(t.education, profile.educations.map(edu => createEducationBlock(edu)), theme, PDF_ICONS.graduationCap),\r\n        ],\r\n    };\r\n}\r\n\r\nfunction createRightColumn(profile: CVProfile, theme: ScvTheme, t: any): ScvBlock {\r\n    const blocks: ScvBlock[] = [];\r\n\r\n    // Skills\r\n    if (profile.skills.length > 0) {\r\n        blocks.push(createBoxedSection(\r\n            'skills',\r\n            t.skills,\r\n            profile.skills.map(skill => ({\r\n                id: `skill-${skill}`,\r\n                type: 'container',\r\n                layout: { flexDirection: 'row', alignItems: 'center', gap: 10 },\r\n                styles: { marginBottom: 12 },\r\n                children: [\r\n                    {\r\n                        id: `skill-dot-${skill}`,\r\n                        type: 'container',\r\n                        styles: { width: 6, height: 6, borderRadius: 3, backgroundColor: theme.primaryColor }\r\n                    },\r\n                    {\r\n                        id: `skill-text-${skill}`,\r\n                        type: 'text',\r\n                        content: skill,\r\n                        styles: { fontSize: 10, color: TAILWIND_COLORS.slate[700], fontWeight: 'bold' }\r\n                    }\r\n                ]\r\n            }))\r\n        ));\r\n    }\r\n\r\n    // Languages\r\n    if (profile.languages.length > 0) {\r\n        blocks.push(createBoxedSection(\r\n            'languages',\r\n            t.languages,\r\n            profile.languages.map((lang, i) => ({\r\n                id: `lang-${i}`,\r\n                type: 'container',\r\n                styles: { marginBottom: 20 },\r\n                children: [\r\n                    {\r\n                        id: `lang-name-${i}`,\r\n                        type: 'text',\r\n                        content: `${lang.name} - ${lang.level}`,\r\n                        styles: { fontSize: 10, fontWeight: 'bold', color: TAILWIND_COLORS.slate[700], marginBottom: 6 }\r\n                    },\r\n                    // Progress Bar Background\r\n                    {\r\n                        id: `lang-bar-bg-${i}`,\r\n                        type: 'container',\r\n                        styles: {\r\n                            width: '100%',\r\n                            height: 6,\r\n                            backgroundColor: TAILWIND_COLORS.slate[200],\r\n                            borderRadius: 3,\r\n                        },\r\n                        children: [\r\n                            // Progress Bar Fill\r\n                            {\r\n                                id: `lang-bar-fill-${i}`,\r\n                                type: 'container',\r\n                                styles: {\r\n                                    width: i === 0 ? '100%' : '65%',\r\n                                    height: 6,\r\n                                    backgroundColor: theme.primaryColor,\r\n                                    borderRadius: 3,\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            }))\r\n        ));\r\n    }\r\n\r\n    return {\r\n        id: 'right-col',\r\n        type: 'container',\r\n        styles: {\r\n            width: '30%', // Reduced from 33% to avoid overflow\r\n        },\r\n        children: blocks,\r\n    };\r\n}\r\n\r\nfunction createSection(title: string, children: ScvBlock[], theme: ScvTheme, iconShapes?: any[]): ScvBlock {\r\n    return {\r\n        id: `section-${title.toLowerCase()}`,\r\n        type: 'container',\r\n        layout: { flexDirection: 'column', gap: 10 },\r\n        children: [\r\n            {\r\n                id: `section-header-${title.toLowerCase()}`,\r\n                type: 'container',\r\n                layout: { flexDirection: 'row', alignItems: 'center', gap: 8 },\r\n                styles: {\r\n                    borderBottom: `2px solid ${TAILWIND_COLORS.slate[100]}`,\r\n                    paddingBottom: 8,\r\n                    marginBottom: 8,\r\n                },\r\n                children: [\r\n                    iconShapes ? {\r\n                        id: `icon-bg-${title}`,\r\n                        type: 'container',\r\n                        styles: {\r\n                            backgroundColor: TAILWIND_COLORS.slate[100],\r\n                            padding: 4,\r\n                            borderRadius: 4,\r\n                        },\r\n                        children: [{\r\n                            id: `icon-${title}`,\r\n                            type: 'svg',\r\n                            shapes: iconShapes,\r\n                            styles: { width: 14, height: 14, color: theme.primaryColor },\r\n                            viewBox: \"0 0 24 24\"\r\n                        }]\r\n                    } : { id: 'no-icon', type: 'container' },\r\n                    {\r\n                        id: `section-title-${title.toLowerCase()}`,\r\n                        type: 'text',\r\n                        content: title.toUpperCase(),\r\n                        styles: {\r\n                            fontSize: 12,\r\n                            color: TAILWIND_COLORS.slate[900],\r\n                            fontWeight: 'bold',\r\n                            fontFamily: 'Helvetica',\r\n                            letterSpacing: 1, // tracking-widest\r\n                        },\r\n                    }\r\n                ]\r\n            },\r\n            ...children,\r\n        ],\r\n    };\r\n}\r\n\r\nfunction createBoxedSection(idPrefix: string, title: string, content: ScvBlock[]): ScvBlock {\r\n    return {\r\n        id: `section-${idPrefix}`,\r\n        type: 'container',\r\n        layout: {\r\n            flexDirection: 'column',\r\n            gap: 10,\r\n        },\r\n        styles: {\r\n            backgroundColor: TAILWIND_COLORS.slate[50],\r\n            padding: [20, 20, 20, 20],\r\n            borderRadius: 12,\r\n            border: `1px solid ${TAILWIND_COLORS.slate[100]}`,\r\n            marginBottom: 20,\r\n        },\r\n        children: [\r\n            {\r\n                id: `heading-${idPrefix}`,\r\n                type: 'text',\r\n                content: title.toUpperCase(),\r\n                styles: {\r\n                    fontSize: 10,\r\n                    fontWeight: 'bold',\r\n                    color: TAILWIND_COLORS.slate[900],\r\n                    borderBottom: `1px solid ${TAILWIND_COLORS.slate[200]}`,\r\n                    paddingBottom: 8,\r\n                    marginBottom: 10,\r\n                    fontFamily: 'Helvetica',\r\n                    letterSpacing: 1,\r\n                },\r\n            },\r\n            ...content,\r\n        ],\r\n    };\r\n}\r\n\r\nfunction createExperienceBlock(exp: Experience, theme: ScvTheme): ScvBlock {\r\n    return {\r\n        id: `exp-${exp.id}`,\r\n        type: 'container',\r\n        styles: {\r\n            position: 'relative',\r\n            paddingLeft: 24, // Space for the line\r\n            paddingBottom: 24,\r\n            borderLeft: `2px solid ${TAILWIND_COLORS.slate[100]}`, // Continuous line effect\r\n            marginLeft: 8, // Offset for the dot to hang out\r\n        },\r\n        children: [\r\n            // Dot (Absolute Positioned)\r\n            {\r\n                id: `dot-${exp.id}`,\r\n                type: 'container',\r\n                styles: {\r\n                    position: 'absolute',\r\n                    left: -6, // Center on the 2px border: -5 (half width) - 1 (half border) = -6\r\n                    top: 0,\r\n                    width: 10,\r\n                    height: 10,\r\n                    borderRadius: 5,\r\n                    backgroundColor: theme.primaryColor,\r\n                    border: '2px solid #FFFFFF',\r\n                }\r\n            },\r\n            // Content\r\n            {\r\n                id: `content-${exp.id}`,\r\n                type: 'container',\r\n                layout: { flexDirection: 'column', gap: 4 },\r\n                children: [\r\n                    {\r\n                        id: `exp-header-${exp.id}`,\r\n                        type: 'container',\r\n                        layout: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'baseline' },\r\n                        children: [\r\n                            {\r\n                                id: `exp-role-${exp.id}`,\r\n                                type: 'text',\r\n                                content: exp.role,\r\n                                styles: { fontSize: 12, fontWeight: 'bold', fontFamily: 'Helvetica', color: TAILWIND_COLORS.slate[800] },\r\n                            },\r\n                            {\r\n                                id: `exp-date-${exp.id}`,\r\n                                type: 'text',\r\n                                content: exp.dateRange?.displayString || exp.dates,\r\n                                styles: {\r\n                                    fontSize: 10,\r\n                                    color: TAILWIND_COLORS.slate[500],\r\n                                    fontWeight: 'bold',\r\n                                    backgroundColor: TAILWIND_COLORS.slate[100],\r\n                                    padding: [2, 8, 2, 8],\r\n                                    borderRadius: 10,\r\n                                },\r\n                            },\r\n                        ]\r\n                    },\r\n                    {\r\n                        id: `exp-company-${exp.id}`,\r\n                        type: 'text',\r\n                        content: `${exp.company}${exp.location ? ' ÔÇó ' + exp.location : ''}`.toUpperCase(),\r\n                        styles: { fontSize: 10, color: TAILWIND_COLORS.slate[500], fontWeight: 'bold', marginBottom: 4 },\r\n                    },\r\n                    {\r\n                        id: `exp-desc-${exp.id}`,\r\n                        type: 'list',\r\n                        children: exp.tasks.map((task, i) => ({\r\n                            id: `task-${exp.id}-${i}`,\r\n                            type: 'listItem',\r\n                            content: task,\r\n                            styles: { fontSize: 10, lineHeight: 1.5, color: TAILWIND_COLORS.slate[600] }\r\n                        }))\r\n                    },\r\n                ],\r\n            }\r\n        ],\r\n    };\r\n}\r\n\r\nfunction createEducationBlock(edu: Education): ScvBlock {\r\n    return {\r\n        id: `edu-${edu.id}`,\r\n        type: 'container',\r\n        layout: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'flex-start' },\r\n        styles: {\r\n            marginBottom: 15,\r\n        },\r\n        children: [\r\n            {\r\n                id: `edu-info-${edu.id}`,\r\n                type: 'container',\r\n                layout: { flexDirection: 'column', gap: 2 },\r\n                styles: { width: '80%' },\r\n                children: [\r\n                    {\r\n                        id: `edu-degree-${edu.id}`,\r\n                        type: 'text',\r\n                        content: edu.degree,\r\n                        styles: { fontSize: 11, fontWeight: 'bold', fontFamily: 'Helvetica', color: TAILWIND_COLORS.slate[800] },\r\n                    },\r\n                    {\r\n                        id: `edu-school-${edu.id}`,\r\n                        type: 'text',\r\n                        content: `${edu.school} ${edu.description ? 'ÔÇö ' + edu.description : ''}`,\r\n                        styles: { fontSize: 10, color: TAILWIND_COLORS.slate[500], fontWeight: 'medium' },\r\n                    },\r\n                ]\r\n            },\r\n            {\r\n                id: `edu-year-${edu.id}`,\r\n                type: 'text',\r\n                content: edu.year,\r\n                styles: {\r\n                    fontSize: 10,\r\n                    color: TAILWIND_COLORS.slate[400],\r\n                    fontWeight: 'bold',\r\n                    backgroundColor: TAILWIND_COLORS.slate[50],\r\n                    padding: [2, 6, 2, 6],\r\n                    borderRadius: 4,\r\n                },\r\n            },\r\n        ],\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\scv\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\adaptive\\adaptive-engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\adaptive\\device-detector.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai-client.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\core\\tfidf.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\core\\tfidf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\core\\tokenizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\core\\vector-math.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\core\\vector-math.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\ai\\nano-brain.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[170,173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[170,173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[946,949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[946,949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport class NanoBrainService {\r\n    private worker: Worker | null = null;\r\n    private pendingRequests: Map<string, (response: any) => void> = new Map();\r\n\r\n    constructor() {\r\n        if (typeof window !== 'undefined') {\r\n            this.worker = new Worker(new URL('../../../worker/ai.worker.ts', import.meta.url), {\r\n                type: 'module'\r\n            });\r\n\r\n            this.worker.onmessage = (e) => {\r\n                const { id, payload, type } = e.data;\r\n                const resolver = this.pendingRequests.get(id);\r\n                if (resolver) {\r\n                    if (type === 'error') {\r\n                        console.error('NanoBrain Error:', payload);\r\n                    }\r\n                    resolver(payload);\r\n                    this.pendingRequests.delete(id);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    private request<T>(type: string, payload: any): Promise<T> {\r\n        if (!this.worker) return Promise.resolve({} as T);\r\n\r\n        return new Promise((resolve) => {\r\n            const id = uuidv4();\r\n            this.pendingRequests.set(id, resolve);\r\n            this.worker!.postMessage({ type, id, payload });\r\n\r\n            // Timeout safety\r\n            setTimeout(() => {\r\n                if (this.pendingRequests.has(id)) {\r\n                    this.pendingRequests.delete(id);\r\n                    resolve({} as T); // Resolve empty on timeout\r\n                }\r\n            }, 5000);\r\n        });\r\n    }\r\n\r\n    async analyzeRelevance(cvText: string, jobText: string): Promise<{ similarity: number }> {\r\n        return this.request('analyze_relevance', { cvText, jobText });\r\n    }\r\n\r\n    async suggestKeywords(text: string): Promise<{ keywords: string[], match: string }> {\r\n        return this.request('suggest_keywords', { text });\r\n    }\r\n\r\n    async analyzeComplexity(text: string): Promise<{ score: number, level: 'compact' | 'comfortable' | 'spacious' }> {\r\n        return this.request('analyze_complexity', { text });\r\n    }\r\n\r\n    terminate() {\r\n        this.worker?.terminate();\r\n        this.worker = null;\r\n    }\r\n}\r\n\r\nexport const nanoBrain = new NanoBrainService();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\auto-scaler.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\auto-scaler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\demo-data\\demo-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\demo-data\\demo-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\intelligence\\user-behavior-tracker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\layout-solver.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-knowledge\\engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-knowledge\\pattern-learner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-knowledge\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-learning\\dataset.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-learning\\knowledge-engine.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":3,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[61,64],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[61,64],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport class KnowledgeEngine {\r\n    suggest(text: string): any[] {\r\n        // Mock implementation for now\r\n        if (!text) return [];\r\n        const suggestions = [];\r\n        if (text.length < 50) {\r\n            suggestions.push({\r\n                id: 'short-summary',\r\n                type: 'improvement',\r\n                text: 'Expand your summary',\r\n                reason: 'A longer summary provides more context.'\r\n            });\r\n        }\r\n        return suggestions;\r\n    }\r\n\r\n    learn(text: string, score: number): void {\r\n        // Mock implementation\r\n        console.log('Learning from text:', text.substring(0, 20) + '...', 'Score:', score);\r\n    }\r\n}\r\n\r\nexport const knowledgeEngine = new KnowledgeEngine();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\local-learning\\local-memory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\scoring\\rules\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[417,420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[417,420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[501,504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[501,504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport type { ScoringRule, ScoringContext, RuleResult } from '../scoring-types';\r\nimport { ACTION_VERBS_EN, ACTION_VERBS_FR, WEAK_WORDS_EN, WEAK_WORDS_FR } from '../../../../data/dictionaries/action-verbs';\r\n\r\n// --- Helper to extract text ---\r\nconst extractText = (context: ScoringContext): string => {\r\n    const { profile } = context;\r\n    let text = profile.summary || '';\r\n    profile.experiences?.forEach((e: any) => {\r\n        text += ` ${e.role} ${e.company}`;\r\n        e.tasks?.forEach((t: any) => text += ` ${t}`);\r\n    });\r\n    return text.toLowerCase();\r\n};\r\n\r\n// --- Rule 1: Content Completeness ---\r\nexport class ContentCompletenessRule implements ScoringRule {\r\n    name = 'Completeness';\r\n\r\n    evaluate(context: ScoringContext): RuleResult {\r\n        const { profile, language } = context;\r\n        let score = 0;\r\n        const maxScore = 40;\r\n        const suggestions = [];\r\n\r\n        if (profile.personal?.firstName && profile.personal?.lastName) score += 5;\r\n        else suggestions.push({ message: language === 'fr' ? 'Nom manquant' : 'Missing name', type: 'error' as const });\r\n\r\n        if (profile.personal?.contact?.email) score += 5;\r\n        else suggestions.push({ message: language === 'fr' ? 'Email manquant' : 'Missing email', type: 'error' as const });\r\n\r\n        if (profile.summary && profile.summary.length > 20) score += 10;\r\n        else suggestions.push({ message: language === 'fr' ? 'R├®sum├® trop court' : 'Summary too short', type: 'improvement' as const });\r\n\r\n        if (profile.experiences && profile.experiences.length > 0) score += 10;\r\n        else suggestions.push({ message: language === 'fr' ? 'Aucune exp├®rience' : 'No experience listed', type: 'error' as const });\r\n\r\n        if (profile.educations && profile.educations.length > 0) score += 5;\r\n        if (profile.skills && profile.skills.length > 0) score += 5;\r\n\r\n        return {\r\n            score,\r\n            maxScore,\r\n            suggestions,\r\n            impactSegment: { segment: 'Completeness', score: (score / maxScore) * 100 }\r\n        };\r\n    }\r\n}\r\n\r\n// --- Rule 2: Action Verbs & Language Power ---\r\nexport class ActionVerbsRule implements ScoringRule {\r\n    name = 'Impact Language';\r\n\r\n    evaluate(context: ScoringContext): RuleResult {\r\n        const { language } = context;\r\n        const text = extractText(context);\r\n        const words = text.split(/\\s+/);\r\n\r\n        const strongVerbs = language === 'fr' ? ACTION_VERBS_FR : ACTION_VERBS_EN;\r\n        const weakWords = language === 'fr' ? WEAK_WORDS_FR : WEAK_WORDS_EN;\r\n\r\n        let strongCount = 0;\r\n        let weakCount = 0;\r\n\r\n        words.forEach(word => {\r\n            // Simple stemming could be added here, but direct match is a start\r\n            if (strongVerbs.has(word)) strongCount++;\r\n            // Check for weak phrases (simplified to single words for now, or multi-word check)\r\n            if (weakWords.has(word)) weakCount++;\r\n        });\r\n\r\n        // Score Calculation\r\n        // Target: 5+ strong verbs for max score\r\n        const score = Math.min(30, strongCount * 6);\r\n        const maxScore = 30;\r\n        const suggestions = [];\r\n\r\n        if (strongCount < 3) {\r\n            suggestions.push({\r\n                message: language === 'fr'\r\n                    ? 'Utilisez plus de verbes d\\'action (ex: g├®r├®, dirig├®)'\r\n                    : 'Use more action verbs (e.g. led, managed)',\r\n                type: 'improvement' as const\r\n            });\r\n        }\r\n\r\n        if (weakCount > 2) {\r\n            suggestions.push({\r\n                message: language === 'fr'\r\n                    ? '├ëvitez le langage passif (ex: aid├®, particip├®)'\r\n                    : 'Avoid passive language (e.g. helped, assisted)',\r\n                type: 'improvement' as const\r\n            });\r\n        }\r\n\r\n        return {\r\n            score,\r\n            maxScore,\r\n            suggestions,\r\n            impactSegment: { segment: 'Action Verbs', score: Math.min(100, strongCount * 20) }\r\n        };\r\n    }\r\n}\r\n\r\n// --- Rule 3: Quantifiable Metrics ---\r\nexport class MetricsRule implements ScoringRule {\r\n    name = 'Metrics';\r\n\r\n    evaluate(context: ScoringContext): RuleResult {\r\n        const { language } = context;\r\n        const text = extractText(context);\r\n\r\n        // Match numbers, percentages, currency\r\n        const metricsMatches = text.match(/\\d+%|\\$\\d+|\\d+k|\\d+\\s?million|\\d+\\s?m|\\d+\\s?chf|\\d+\\s?Ôé¼/g);\r\n        const count = metricsMatches ? metricsMatches.length : 0;\r\n\r\n        const score = Math.min(30, count * 10);\r\n        const maxScore = 30;\r\n        const suggestions = [];\r\n\r\n        if (count < 2) {\r\n            suggestions.push({\r\n                message: language === 'fr'\r\n                    ? 'Ajoutez des chiffres concrets (%, Ôé¼, r├®sultats)'\r\n                    : 'Add concrete metrics (%, $, results)',\r\n                type: 'improvement' as const\r\n            });\r\n        }\r\n\r\n        return {\r\n            score,\r\n            maxScore,\r\n            suggestions,\r\n            impactSegment: { segment: 'Metrics', score: Math.min(100, count * 33) }\r\n        };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\scoring\\scoring-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\semantic-analyzer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\system\\insights-log.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\services\\system\\self-refiner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\domain\\templates\\TemplateEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\ai\\backend-ai-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\ai\\gemini-client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1791,1794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1791,1794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport type { AIClient } from '../../domain/services/ai-client.interface';\r\n\r\nexport class GeminiClient implements AIClient {\r\n    private apiKey: string;\r\n    private baseUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent';\r\n\r\n    constructor(apiKey: string) {\r\n        this.apiKey = apiKey;\r\n    }\r\n\r\n    async generateContent(prompt: string): Promise<string> {\r\n        if (!this.apiKey) {\r\n            throw new Error('API Key is missing');\r\n        }\r\n\r\n        const maxRetries = 3;\r\n        let attempt = 0;\r\n        let delay = 1000;\r\n\r\n        while (attempt < maxRetries) {\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}?key=${this.apiKey}`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        contents: [{ parts: [{ text: prompt }] }],\r\n                    }),\r\n                });\r\n\r\n                if (response.status === 429 || response.status >= 500) {\r\n                    // Retryable errors\r\n                    throw new Error(`Retryable error: ${response.status}`);\r\n                }\r\n\r\n                if (!response.ok) {\r\n                    const errorData = await response.json().catch(() => ({}));\r\n                    throw new Error(`Gemini API Error: ${response.status} - ${JSON.stringify(errorData)}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\r\n\r\n                if (!text) {\r\n                    throw new Error('Empty response from Gemini');\r\n                }\r\n\r\n                return text;\r\n            } catch (error: any) {\r\n                attempt++;\r\n                console.warn(`Gemini Request Failed (Attempt ${attempt}/${maxRetries}):`, error.message);\r\n\r\n                if (attempt >= maxRetries) {\r\n                    console.error('Max retries reached. Failing.');\r\n                    throw error;\r\n                }\r\n\r\n                // Exponential backoff\r\n                await new Promise(resolve => setTimeout(resolve, delay));\r\n                delay *= 2;\r\n            }\r\n        }\r\n\r\n        throw new Error('Unexpected error in GeminiClient');\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\api\\api-client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[791,794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[791,794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[995,998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[995,998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport class ApiClient {\r\n    private static baseUrl = '/api';\r\n\r\n    private static async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\r\n        const url = `${this.baseUrl}${endpoint}`;\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            ...options.headers,\r\n        };\r\n\r\n        const response = await fetch(url, { ...options, headers });\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n            throw new Error(data.error || data.message || 'API Request Failed');\r\n        }\r\n\r\n        return data as T;\r\n    }\r\n\r\n    static async get<T>(endpoint: string): Promise<T> {\r\n        return this.request<T>(endpoint, { method: 'GET' });\r\n    }\r\n\r\n    static async post<T>(endpoint: string, body: any): Promise<T> {\r\n        return this.request<T>(endpoint, {\r\n            method: 'POST',\r\n            body: JSON.stringify(body),\r\n        });\r\n    }\r\n\r\n    static async put<T>(endpoint: string, body: any): Promise<T> {\r\n        return this.request<T>(endpoint, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(body),\r\n        });\r\n    }\r\n\r\n    static async delete<T>(endpoint: string): Promise<T> {\r\n        return this.request<T>(endpoint, { method: 'DELETE' });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\events\\event-bus.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19,22],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19,22],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\ntype Handler<T = any> = (event: T) => void;\r\n\r\nclass EventBus {\r\n    private handlers: Map<string, Handler[]> = new Map();\r\n\r\n    on<T>(type: string, handler: Handler<T>): void {\r\n        if (!this.handlers.has(type)) {\r\n            this.handlers.set(type, []);\r\n        }\r\n        this.handlers.get(type)?.push(handler);\r\n    }\r\n\r\n    off<T>(type: string, handler: Handler<T>): void {\r\n        const handlers = this.handlers.get(type);\r\n        if (handlers) {\r\n            this.handlers.set(type, handlers.filter(h => h !== handler));\r\n        }\r\n    }\r\n\r\n    emit<T>(type: string, event: T): void {\r\n        const handlers = this.handlers.get(type);\r\n        if (handlers) {\r\n            handlers.forEach(handler => handler(event));\r\n        }\r\n    }\r\n}\r\n\r\nexport const eventBus = new EventBus();\r\n\r\n// Define known events for type safety\r\nexport const AppEvents = {\r\n    NOTIFICATION: 'APP:NOTIFICATION',\r\n    AI_ANALYSIS_COMPLETE: 'AI:ANALYSIS_COMPLETE',\r\n    PAYMENT_SUCCESS: 'PAYMENT:SUCCESS',\r\n} as const;\r\n\r\nexport type AppEvents = typeof AppEvents[keyof typeof AppEvents];\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\monitoring\\system-monitor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1242,1245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1242,1245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1329,1332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1329,1332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":41,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { systemEventBus } from '../../domain/events/event-bus';\r\n\r\nexport class SystemMonitor {\r\n    private static instance: SystemMonitor;\r\n    private metrics: Map<string, number[]> = new Map();\r\n\r\n    private constructor() {\r\n        this.setupObservers();\r\n    }\r\n\r\n    static getInstance(): SystemMonitor {\r\n        if (!SystemMonitor.instance) {\r\n            SystemMonitor.instance = new SystemMonitor();\r\n        }\r\n        return SystemMonitor.instance;\r\n    }\r\n\r\n    getMetrics(): { type: string; value: number; timestamp: number }[] {\r\n        const result: { type: string; value: number; timestamp: number }[] = [];\r\n        this.metrics.forEach((values, key) => {\r\n            values.forEach(v => {\r\n                result.push({ type: key, value: v, timestamp: Date.now() }); // Timestamp is approximated here as we didn't store it\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n\r\n    private setupObservers() {\r\n        // Monitor Layout Shifts (if supported)\r\n        if (typeof PerformanceObserver !== 'undefined') {\r\n            try {\r\n                const observer = new PerformanceObserver((list) => {\r\n                    for (const entry of list.getEntries()) {\r\n                        if (!(entry as any).hadRecentInput) {\r\n                            this.recordMetric('cls', (entry as any).value);\r\n                        }\r\n                    }\r\n                });\r\n                observer.observe({ type: 'layout-shift', buffered: true });\r\n            } catch (e) {\r\n                console.warn('Layout Shift API not supported');\r\n            }\r\n        }\r\n    }\r\n\r\n    recordMetric(name: string, value: number) {\r\n        if (!this.metrics.has(name)) {\r\n            this.metrics.set(name, []);\r\n        }\r\n        this.metrics.get(name)!.push(value);\r\n\r\n        systemEventBus.publish('PERFORMANCE_METRIC', { name, value });\r\n\r\n        // Log significant deviations (Self-Awareness Lite)\r\n        if (value > 100 && name === 'render_time') {\r\n            console.warn(`[SystemMonitor] High render time detected: ${value.toFixed(2)}ms`);\r\n        }\r\n    }\r\n\r\n    measure<T>(name: string, fn: () => T): T {\r\n        const start = performance.now();\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            const duration = performance.now() - start;\r\n            this.recordMetric(name, duration);\r\n        }\r\n    }\r\n}\r\n\r\nexport const monitor = SystemMonitor.getInstance();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\html2pdf-adapter.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":8,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":8,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[251,264],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":23,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":23,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[817,830],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport interface PDFGenerator {\r\n    generate(element: HTMLElement, filename: string): Promise<void>;\r\n}\r\n\r\nexport class Html2PdfAdapter implements PDFGenerator {\r\n    async generate(element: HTMLElement, filename: string): Promise<void> {\r\n        // @ts-ignore\r\n        if (typeof window !== 'undefined' && window.html2pdf) {\r\n            const opt = {\r\n                margin: 0,\r\n                filename: filename,\r\n                image: { type: 'jpeg', quality: 0.98 },\r\n                html2canvas: {\r\n                    scale: 2,\r\n                    useCORS: true,\r\n                    scrollY: 0,\r\n                    windowWidth: 794, // A4 width in px at 96 DPI (approx)\r\n                },\r\n                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },\r\n            };\r\n\r\n            // @ts-ignore\r\n            await window.html2pdf().set(opt).from(element).save();\r\n        } else {\r\n            console.error('html2pdf not loaded');\r\n            throw new Error('PDF library not ready');\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\infinity\\InfinityRenderer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3084,3087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3084,3087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3311,3314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3311,3314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3401,3404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3401,3404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5053,5056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5053,5056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5108,5111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5108,5111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6696,6699],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6696,6699],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6749,6752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6749,6752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { Document, Page, View, Text, Image, Link, Svg, Path, Circle, Rect, Line, Polyline, StyleSheet } from '@react-pdf/renderer';\r\nimport type { ScvDocument, ScvBlock, ScvStyle } from '../../../domain/scv/types';\r\n\r\n// Standard fonts are available by default.\r\n// No need to register Helvetica manually unless using a custom version.\r\n\r\ninterface InfinityDocumentProps {\r\n    scv: ScvDocument;\r\n}\r\n\r\nexport const InfinityDocument: React.FC<InfinityDocumentProps> = ({ scv }) => {\r\n    return (\r\n        <Document\r\n            title={scv.meta.title}\r\n            author={scv.meta.author}\r\n        >\r\n            <Page size=\"A4\" style={styles.page}>\r\n                {scv.blocks.map((block) => (\r\n                    <BlockRenderer key={block.id} block={block} />\r\n                ))}\r\n            </Page>\r\n        </Document>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    page: {\r\n        padding: 30,\r\n        fontFamily: 'Helvetica',\r\n        backgroundColor: '#FFFFFF',\r\n    },\r\n});\r\n\r\nconst BlockRenderer: React.FC<{ block: ScvBlock }> = ({ block }) => {\r\n    const combinedStyle = {\r\n        ...mapStyles(block.styles),\r\n        ...mapLayout(block.layout),\r\n    };\r\n\r\n    switch (block.type) {\r\n        case 'container':\r\n            return (\r\n                <View style={combinedStyle}>\r\n                    {block.children?.map((child) => (\r\n                        <BlockRenderer key={child.id} block={child} />\r\n                    ))}\r\n                </View>\r\n            );\r\n        case 'text':\r\n        case 'heading':\r\n            return (\r\n                <Text style={combinedStyle}>\r\n                    {block.content}\r\n                </Text>\r\n            );\r\n        case 'image':\r\n            if (!block.src) return null;\r\n            return <Image src={block.src} style={combinedStyle} />;\r\n        case 'link':\r\n            return (\r\n                <Link src={block.href || '#'} style={combinedStyle}>\r\n                    {block.content}\r\n                </Link>\r\n            );\r\n        case 'list':\r\n            return (\r\n                <View style={combinedStyle}>\r\n                    {block.children?.map((child) => (\r\n                        <BlockRenderer key={child.id} block={child} />\r\n                    ))}\r\n                </View>\r\n            );\r\n        case 'listItem':\r\n            return (\r\n                <View style={{ flexDirection: 'row', ...combinedStyle }}>\r\n                    <Text style={{ marginRight: 5 }}>ÔÇó</Text>\r\n                    <View>\r\n                        {block.children?.map((child) => (\r\n                            <BlockRenderer key={child.id} block={child} />\r\n                        )) || <Text>{block.content}</Text>}\r\n                    </View>\r\n                </View>\r\n            );\r\n        case 'svg':\r\n            if (block.shapes) {\r\n                return (\r\n                    <Svg viewBox={block.viewBox || \"0 0 24 24\"} style={combinedStyle}>\r\n                        {block.shapes.map((shape, i) => {\r\n                            const commonStyle: any = {\r\n                                stroke: shape.stroke || combinedStyle.color || '#000000',\r\n                                strokeWidth: shape.strokeWidth || 2,\r\n                                strokeLinecap: (shape as any).strokeLinecap || 'round',\r\n                                strokeLinejoin: (shape as any).strokeLinejoin || 'round',\r\n                            };\r\n\r\n                            // Handle fill safely as it's not on all shapes\r\n                            if ('fill' in shape) {\r\n                                commonStyle.fill = shape.fill || 'none';\r\n                            } else {\r\n                                commonStyle.fill = 'none';\r\n                            }\r\n\r\n                            switch (shape.type) {\r\n                                case 'path':\r\n                                    return <Path key={i} d={shape.d} {...commonStyle} />;\r\n                                case 'circle':\r\n                                    return <Circle key={i} cx={shape.cx} cy={shape.cy} r={shape.r} {...commonStyle} />;\r\n                                case 'rect':\r\n                                    return <Rect key={i} x={shape.x} y={shape.y} width={shape.width} height={shape.height} rx={shape.rx} ry={shape.ry} {...commonStyle} />;\r\n                                case 'line':\r\n                                    return <Line key={i} x1={shape.x1} y1={shape.y1} x2={shape.x2} y2={shape.y2} {...commonStyle} />;\r\n                                case 'polyline':\r\n                                    return <Polyline key={i} points={shape.points} {...commonStyle} />;\r\n                                default:\r\n                                    return null;\r\n                            }\r\n                        })}\r\n                    </Svg>\r\n                );\r\n            }\r\n            return null;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\nfunction mapStyles(scvStyle?: ScvStyle): any {\r\n    if (!scvStyle) return {};\r\n    const style: any = { ...scvStyle };\r\n\r\n    if (scvStyle.flexWrap) {\r\n        style.flexWrap = scvStyle.flexWrap;\r\n    }\r\n\r\n    // Map specific props if needed, but most match React Native styles\r\n    // Handle array padding/margin if present (though types.ts defines them as number | array)\r\n    if (Array.isArray(scvStyle.padding)) {\r\n        style.paddingTop = scvStyle.padding[0];\r\n        style.paddingRight = scvStyle.padding[1];\r\n        style.paddingBottom = scvStyle.padding[2];\r\n        style.paddingLeft = scvStyle.padding[3];\r\n        delete style.padding;\r\n    }\r\n    if (Array.isArray(scvStyle.margin)) {\r\n        style.marginTop = scvStyle.margin[0];\r\n        style.marginRight = scvStyle.margin[1];\r\n        style.marginBottom = scvStyle.margin[2];\r\n        style.marginLeft = scvStyle.margin[3];\r\n        delete style.margin;\r\n    }\r\n\r\n    if (scvStyle.border) {\r\n        const parts = scvStyle.border.split(' ');\r\n        if (parts.length >= 3) {\r\n            style.borderWidth = parseFloat(parts[0]);\r\n            style.borderStyle = parts[1];\r\n            style.borderColor = parts.slice(2).join(' ');\r\n        }\r\n        delete style.border;\r\n    }\r\n\r\n    if (scvStyle.borderBottom) {\r\n        const parts = scvStyle.borderBottom.split(' ');\r\n        if (parts.length >= 3) {\r\n            style.borderBottomWidth = parseFloat(parts[0]);\r\n            style.borderBottomStyle = parts[1];\r\n            style.borderBottomColor = parts.slice(2).join(' ');\r\n        }\r\n        delete style.borderBottom;\r\n    }\r\n\r\n    return style;\r\n}\r\n\r\nfunction mapLayout(layout?: ScvBlock['layout']): any {\r\n    if (!layout) return {};\r\n    const style: any = { ...layout };\r\n\r\n    if (Array.isArray(layout.padding)) {\r\n        style.paddingTop = layout.padding[0];\r\n        style.paddingRight = layout.padding[1];\r\n        style.paddingBottom = layout.padding[2];\r\n        style.paddingLeft = layout.padding[3];\r\n        delete style.padding;\r\n    }\r\n\r\n    return style;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\infinity\\icons.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\infinity\\infinity-service.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\page-renderer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\pdf\\pdf-service.tsx","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":108,"column":63,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":108,"endColumn":64,"suggestions":[{"messageId":"removeEscape","fix":{"range":[4601,4602],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[4601,4601],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":175,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":175,"endColumn":72}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { jsPDF } from 'jspdf';\r\n// import React from 'react'; // Not needed with react-jsx\r\nimport { createRoot } from 'react-dom/client';\r\nimport type { CVProfile } from '../../domain/entities/cv';\r\nimport type { PDFVariant, SectionBlock } from '../../domain/pdf/types';\r\nimport { PDF_CONFIG } from '../../domain/pdf/template-config';\r\nimport { LayoutEngine } from '../../domain/pdf/layout-engine';\r\nimport { PdfPageTemplate } from '../../presentation/pdf/PdfPageTemplate';\r\nimport { PageRenderer } from './page-renderer';\r\n\r\nexport class PDFService {\r\n    static async generate(profile: CVProfile, variant: PDFVariant = 'visual', language: string = 'en'): Promise<void> {\r\n        // 1. Extract Config Explicitly (State Agnostic)\r\n        const { accentColor, fontFamily } = profile.metadata;\r\n        const config = PDF_CONFIG[variant];\r\n\r\n        console.log('PDF Generation Config:', { variant, accentColor, fontFamily, config, language });\r\n\r\n        // 2. Calculate Layout\r\n        const allSections = this.mapProfileToSections(profile, language);\r\n\r\n        // Split into Main Content and Sidebar\r\n        // Sidebar: Skills, Languages (future)\r\n        // Main: Profile, Experience, Education\r\n        const sidebarSections = allSections.filter(s => s.id === 'skills');\r\n        const mainSections = allSections.filter(s => s.id !== 'skills');\r\n\r\n        const engine = new LayoutEngine(config, accentColor);\r\n        const pages = engine.paginate(mainSections);\r\n\r\n        // 3. Mount React Components to DOM (Hidden)\r\n        const container = document.createElement('div');\r\n        container.style.position = 'absolute';\r\n        container.style.top = '-10000px';\r\n        container.style.left = '-10000px';\r\n\r\n        // CRITICAL: Force A4 dimensions and reset transforms\r\n        container.style.width = '794px'; // A4 @ 96 DPI\r\n        container.style.minWidth = '794px';\r\n        container.style.height = '1123px'; // A4 @ 96 DPI\r\n        container.style.overflow = 'hidden';\r\n        container.style.transform = 'none';\r\n        container.style.zoom = '1';\r\n\r\n        document.body.appendChild(container);\r\n\r\n        try {\r\n            const root = createRoot(container);\r\n\r\n            await new Promise<void>((resolve) => {\r\n                root.render(\r\n                    <div id=\"pdf-root\" style={{ width: '794px', margin: 0, padding: 0 }}>\r\n                        <style>\r\n                            {`\r\n                                * {\r\n                                    font-family: '${fontFamily}', sans-serif !important;\r\n                                }\r\n                            `}\r\n                        </style>\r\n                        {pages.map(page => (\r\n                            <PdfPageTemplate\r\n                                key={page.id}\r\n                                page={{\r\n                                    ...page,\r\n                                    accentColor: accentColor || config.colors.primary,\r\n                                }}\r\n                                fontFamily={fontFamily}\r\n                                sidebarData={page.index === 0 ? sidebarSections : undefined} // Pass sidebar only to first page for now\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                );\r\n                setTimeout(resolve, 500);\r\n            });\r\n\r\n            // Wait for fonts\r\n            await document.fonts.ready;\r\n            await this.waitForResources(container);\r\n\r\n            // 4. Render to PDF\r\n            const pdf = new jsPDF({\r\n                orientation: 'portrait',\r\n                unit: 'mm',\r\n                format: 'a4'\r\n            });\r\n\r\n            const pageElements = container.querySelectorAll('.pdf-page');\r\n\r\n            for (let i = 0; i < pageElements.length; i++) {\r\n                const pageEl = pageElements[i] as HTMLElement;\r\n\r\n                // Add new page if not first\r\n                if (i > 0) pdf.addPage();\r\n\r\n                // Render\r\n                const scale = variant === 'visual' ? 3 : 2; // Higher quality for visual\r\n                const dataUrl = await PageRenderer.renderToImage(pageEl, scale);\r\n\r\n                // Add to PDF\r\n                const mmWidth = 210;\r\n                const mmHeight = 297;\r\n                pdf.addImage(dataUrl, 'PNG', 0, 0, mmWidth, mmHeight, undefined, 'FAST');\r\n            }\r\n\r\n            // 5. Save\r\n            const filename = `CV_${profile.personal.lastName}_${profile.personal.firstName}_${variant}.pdf`;\r\n            const safeFilename = filename.replace(/[^a-z0-9_\\-\\.]/gi, '_');\r\n            pdf.save(safeFilename);\r\n\r\n        } catch (error) {\r\n            console.error('PDF Generation failed', error);\r\n            throw error;\r\n        } finally {\r\n            // Cleanup\r\n            document.body.removeChild(container);\r\n        }\r\n    }\r\n\r\n    private static mapProfileToSections(profile: CVProfile, language: string = 'en'): SectionBlock[] {\r\n        const sections: SectionBlock[] = [];\r\n\r\n        // Profile / Personal Info\r\n        sections.push({\r\n            id: 'personal',\r\n            type: 'profile',\r\n            title: language === 'fr' ? 'Profil' : 'Profile',\r\n            items: [profile.personal, profile.summary],\r\n            isVisible: true,\r\n            canSplit: 'none',\r\n            estimatedHeight: 250 // Estimate\r\n        });\r\n\r\n        // Experience\r\n        if (profile.experiences.length > 0) {\r\n            sections.push({\r\n                id: 'experience',\r\n                type: 'experience',\r\n                title: language === 'fr' ? 'Exp├®rience' : 'Experience',\r\n                items: profile.experiences.map(exp => ({\r\n                    id: exp.id,\r\n                    role: exp.role,\r\n                    company: exp.company,\r\n                    dates: exp.dates,\r\n                    location: exp.location,\r\n                    tasks: exp.tasks || []\r\n                })),\r\n                isVisible: true,\r\n                canSplit: 'byItem',\r\n                // More accurate estimate: 40px header + items\r\n                estimatedHeight: 40 + profile.experiences.reduce((acc, exp) => {\r\n                    // Base item height (role + company + dates) ~ 50px\r\n                    // Tasks: ~20px per task line\r\n                    const tasksHeight = (exp.tasks || []).length * 20;\r\n                    return acc + 50 + tasksHeight + 20; // +20 padding\r\n                }, 0)\r\n            });\r\n        }\r\n\r\n        // Education\r\n        if (profile.educations.length > 0) {\r\n            sections.push({\r\n                id: 'education',\r\n                type: 'education',\r\n                title: language === 'fr' ? 'Formation' : 'Education',\r\n                items: profile.educations.map(edu => ({\r\n                    id: edu.id,\r\n                    degree: edu.degree,\r\n                    school: edu.school,\r\n                    year: edu.year,\r\n                    description: edu.description\r\n                })),\r\n                isVisible: true,\r\n                canSplit: 'byItem',\r\n                estimatedHeight: 40 + profile.educations.reduce((acc, _) => {\r\n                    return acc + 60;\r\n                }, 0)\r\n            });\r\n        }\r\n\r\n        // Skills\r\n        if (profile.skills.length > 0) {\r\n            sections.push({\r\n                id: 'skills',\r\n                type: 'skills',\r\n                title: language === 'fr' ? 'Comp├®tences' : 'Skills',\r\n                items: profile.skills,\r\n                isVisible: true,\r\n                canSplit: 'byGroup',\r\n                estimatedHeight: 150\r\n            });\r\n        }\r\n\r\n        return sections;\r\n    }\r\n\r\n    private static async waitForResources(container: HTMLElement) {\r\n        const images = container.getElementsByTagName('img');\r\n        const promises = Array.from(images).map(img => {\r\n            if (img.complete) return Promise.resolve();\r\n            return new Promise(resolve => {\r\n                img.onload = resolve;\r\n                img.onerror = resolve;\r\n            });\r\n        });\r\n        await Promise.all(promises);\r\n\r\n        // Font loading check\r\n        if (document.fonts) {\r\n            await document.fonts.ready;\r\n        }\r\n\r\n        // Extra safety buffer\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\infrastructure\\storage\\knowledge-memory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\AtlasStatus.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":56,"column":39,"nodeType":"MemberExpression","endLine":56,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":58,"column":5,"nodeType":"MemberExpression","endLine":58,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ATLAS Status Indicator\r\n * \r\n * Google Docs-style sync status indicator\r\n * Shows real-time cloud sync state\r\n */\r\n\r\nimport React from 'react';\r\nimport { CloudOff, Check, Loader } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useAtlasStatus } from '../../application/store/v2/cv-store-v2';\r\n\r\nexport const AtlasStatus: React.FC = () => {\r\n    const atlas = useAtlasStatus();\r\n\r\n    // Don't show anything in idle state\r\n    if (atlas.syncStatus === 'idle') {\r\n        return null;\r\n    }\r\n\r\n    const getStatusConfig = () => {\r\n        switch (atlas.syncStatus) {\r\n            case 'saving':\r\n                return {\r\n                    icon: Loader,\r\n                    text: 'Sauvegarde...',\r\n                    color: 'text-blue-600',\r\n                    bgColor: 'bg-blue-50',\r\n                    borderColor: 'border-blue-200',\r\n                    animate: true\r\n                };\r\n            case 'synced':\r\n                return {\r\n                    icon: Check,\r\n                    text: 'Enregistr├®',\r\n                    color: 'text-green-600',\r\n                    bgColor: 'bg-green-50',\r\n                    borderColor: 'border-green-200',\r\n                    animate: false\r\n                };\r\n            case 'error':\r\n                return {\r\n                    icon: CloudOff,\r\n                    text: atlas.syncError || 'Hors ligne',\r\n                    color: 'text-red-600',\r\n                    bgColor: 'bg-red-50',\r\n                    borderColor: 'border-red-200',\r\n                    animate: false\r\n                };\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    // Auto-hide \"Synced\" status after 3 seconds\r\n    const [isVisible, setIsVisible] = React.useState(true);\r\n\r\n    React.useEffect(() => {\r\n        if (atlas.syncStatus === 'synced') {\r\n            const timer = setTimeout(() => setIsVisible(false), 3000);\r\n            return () => clearTimeout(timer);\r\n        } else {\r\n            setIsVisible(true);\r\n        }\r\n    }, [atlas.syncStatus, atlas.lastSyncTime]);\r\n\r\n    const config = getStatusConfig();\r\n\r\n    if (!config || !isVisible) return null;\r\n\r\n    const Icon = config.icon;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0, y: -10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                className={`\r\n                    flex items-center gap-2 px-3 py-1.5 rounded-lg\r\n                    border ${config.borderColor} ${config.bgColor}\r\n                `}\r\n            >\r\n                <Icon\r\n                    size={14}\r\n                    className={`${config.color} ${config.animate ? 'animate-spin' : ''}`}\r\n                />\r\n                <span className={`text-xs font-medium ${config.color}`}>\r\n                    {config.text}\r\n                </span>\r\n\r\n                {/* Last sync time (for synced state) */}\r\n                {atlas.syncStatus === 'synced' && atlas.lastSyncTime && (\r\n                    <span className=\"text-[10px] text-gray-500 ml-1\">\r\n                        {new Date(atlas.lastSyncTime).toLocaleTimeString('fr-FR', {\r\n                            hour: '2-digit',\r\n                            minute: '2-digit'\r\n                        })}\r\n                    </span>\r\n                )}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\CVCardStack.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleNext'. Either include it or remove the dependency array.","line":63,"column":8,"nodeType":"ArrayExpression","endLine":63,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [activePage, handleNext, pages.length]","fix":{"range":[1863,1889],"text":"[activePage, handleNext, pages.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Card Stack Component - Premium Multi-Page Display\r\n * \r\n * Features:\r\n * - Staggered card deck effect (like playing cards)\r\n * - Desktop-optimized navigation (keyboard + mouse wheel)\r\n * - Spring physics animations\r\n * - Proper z-index stacking (no transparency bleed)\r\n * - Glass morphism + depth shadows\r\n * - Independent scroll container\r\n * - Mobile cross-page drag navigation (EdgeDropZones)\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { EdgeDropZones } from './EdgeDropZones';\r\n\r\ninterface CVCardStackProps {\r\n    pages: React.ReactNode[];\r\n    isDragging?: boolean; // From parent DndContext\r\n}\r\n\r\n\r\n\r\nexport const CVCardStack: React.FC<CVCardStackProps> = ({ pages, isDragging = false }) => {\r\n    const [activePage, setActivePage] = useState(0);\r\n\r\n\r\n    // Auto-scale calculation to fit CV in viewport (less aggressive)\r\n\r\n\r\n    // Zoom controls\r\n\r\n\r\n    // Combined scale: auto-scale * user zoom\r\n    // No internal scaling - rely on parent\r\n    const finalScale = 1;\r\n\r\n\r\n    const handlePrevious = () => {\r\n        setActivePage((prev) => Math.max(0, prev - 1));\r\n    };\r\n\r\n    const handleNext = () => {\r\n        setActivePage((prev) => Math.min(pages.length - 1, prev + 1));\r\n    };\r\n\r\n    // Keyboard navigation\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.key === 'ArrowLeft') {\r\n                e.preventDefault();\r\n                handlePrevious();\r\n            } else if (e.key === 'ArrowRight') {\r\n                e.preventDefault();\r\n                handleNext();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [activePage, pages.length]);\r\n\r\n    return (\r\n        <>\r\n            {/* Mobile Cross-Page Drag Navigation */}\r\n            <EdgeDropZones\r\n                isDragging={isDragging}\r\n                onPreviousPage={handlePrevious}\r\n                onNextPage={handleNext}\r\n                canGoPrevious={activePage > 0}\r\n                canGoNext={activePage < pages.length - 1}\r\n            />\r\n\r\n            {/* Zoom controls handled by parent */}\r\n\r\n\r\n            <div\r\n                className=\"relative mx-auto pb-32\"\r\n                style={{\r\n                    maxWidth: '210mm',\r\n                    transform: `scale(${finalScale})`,\r\n                    transformOrigin: 'top center',\r\n                    transition: 'transform 0.3s ease-out',\r\n                    // Anti-blur optimizations\r\n                    filter: 'contrast(1.05)', // Sharpen text slightly\r\n                    WebkitFontSmoothing: 'subpixel-antialiased',\r\n                    MozOsxFontSmoothing: 'grayscale',\r\n                    transformStyle: 'preserve-3d',\r\n                    willChange: 'transform',\r\n                }}\r\n            >\r\n                {/* Card Stack Container - Auto-scaled to fit viewport */}\r\n                <div\r\n                    className=\"relative\"\r\n                    style={{\r\n                        width: '210mm',\r\n                        minHeight: '297mm',\r\n                        height: '297mm',\r\n                        perspective: '2000px'\r\n                    }}\r\n                >\r\n                    {pages.map((page, index) => {\r\n                        const isActive = index === activePage;\r\n                        const isBehind = index > activePage;\r\n                        const offset = index - activePage;\r\n\r\n                        // Calculate stacking transformations\r\n                        const scale = isActive ? 1 : 1 - Math.abs(offset) * 0.04;\r\n                        const yOffset = isBehind ? offset * 15 : 0;\r\n                        const zOffset = isBehind ? -offset * 100 : 0;\r\n\r\n                        // FIXED: Proper z-index and opacity\r\n                        const zIndex = pages.length - Math.abs(offset);\r\n                        const opacity = Math.abs(offset) > 1 ? 0 : 1; // Fully hide cards beyond 1 offset\r\n\r\n                        return (\r\n                            <motion.div\r\n                                key={index}\r\n                                className=\"absolute top-0 left-0\"\r\n                                style={{\r\n                                    width: '210mm',\r\n                                    transformStyle: 'preserve-3d',\r\n                                    pointerEvents: isActive ? 'auto' : 'none',\r\n                                    zIndex, // Proper stacking\r\n                                }}\r\n                                animate={{\r\n                                    scale,\r\n                                    y: yOffset,\r\n                                    z: zOffset,\r\n                                    opacity,\r\n                                    rotateX: isBehind ? 1.5 : 0,\r\n                                }}\r\n                                transition={{\r\n                                    type: 'spring',\r\n                                    stiffness: 280,\r\n                                    damping: 32,\r\n                                }}\r\n                            >\r\n                                {/* Card Container with OPAQUE background */}\r\n                                <div\r\n                                    className={`\r\n                                    bg-white rounded-xl overflow-hidden\r\n                                    ${isActive\r\n                                            ? 'shadow-2xl ring-2 ring-indigo-500/30'\r\n                                            : 'shadow-lg'\r\n                                        }\r\n                                `}\r\n                                    style={{\r\n                                        width: '210mm',\r\n                                        minHeight: '297mm',\r\n                                        backgroundColor: '#ffffff', // FORCE opaque background\r\n                                        boxShadow: isActive\r\n                                            ? '0 25px 50px -12px rgba(99, 102, 241, 0.25), 0 0 15px rgba(99, 102, 241, 0.1)'\r\n                                            : '0 10px 30px -10px rgba(0, 0, 0, 0.2)',\r\n                                    }}\r\n                                >\r\n                                    {page}\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                {/* Navigation Controls (only if multiple pages) */}\r\n                {pages.length > 1 && (\r\n                    <>\r\n                        {/* Page Indicator Dots */}\r\n                        <div className=\"absolute -bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-2\">\r\n                            {pages.map((_, index) => (\r\n                                <button\r\n                                    key={index}\r\n                                    onClick={() => setActivePage(index)}\r\n                                    className={`\r\n                                    h-2 rounded-full transition-all duration-300\r\n                                    ${index === activePage\r\n                                            ? 'w-8 bg-indigo-600'\r\n                                            : 'w-2 bg-slate-300 hover:bg-slate-400'\r\n                                        }\r\n                                `}\r\n                                    title={`Page ${index + 1}`}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Navigation Arrows */}\r\n                        <AnimatePresence>\r\n                            {activePage > 0 && (\r\n                                <motion.button\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: 20 }}\r\n                                    onClick={handlePrevious}\r\n                                    className=\"\r\n                                    absolute -left-20 top-1/2 -translate-y-1/2\r\n                                    w-12 h-12 rounded-full\r\n                                    bg-white shadow-lg\r\n                                    flex items-center justify-center\r\n                                    text-slate-600 hover:text-indigo-600\r\n                                    hover:shadow-xl hover:scale-110\r\n                                    transition-all duration-200\r\n                                \"\r\n                                    title=\"Page pr├®c├®dente (ÔåÉ ou clic)\"\r\n                                >\r\n                                    <ChevronLeft size={24} />\r\n                                </motion.button>\r\n                            )}\r\n                        </AnimatePresence>\r\n\r\n                        <AnimatePresence>\r\n                            {activePage < pages.length - 1 && (\r\n                                <motion.button\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    exit={{ opacity: 0, x: -20 }}\r\n                                    onClick={handleNext}\r\n                                    className=\"\r\n                                    absolute -right-20 top-1/2 -translate-y-1/2\r\n                                    w-12 h-12 rounded-full\r\n                                    bg-white shadow-lg\r\n                                    flex items-center justify-center\r\n                                    text-slate-600 hover:text-indigo-600\r\n                                    hover:shadow-xl hover:scale-110\r\n                                    transition-all duration-200\r\n                                \"\r\n                                    title=\"Page suivante (ÔåÆ ou clic)\"\r\n                                >\r\n                                    <ChevronRight size={24} />\r\n                                </motion.button>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </>\r\n                )}\r\n\r\n                {/* Page Counter Badge */}\r\n                {pages.length > 1 && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"\r\n                        absolute top-4 right-4\r\n                        px-3 py-1.5 rounded-full\r\n                        bg-indigo-600 text-white text-xs font-bold\r\n                        shadow-lg z-10\r\n                    \"\r\n                    >\r\n                        Page {activePage + 1} / {pages.length}\r\n                    </motion.div>\r\n                )}\r\n\r\n\r\n                {/* Desktop Hints */}\r\n                {pages.length > 1 && (\r\n                    <div className=\"absolute -bottom-20 left-1/2 -translate-x-1/2 text-xs text-slate-400 text-center\">\r\n                        Pages: ÔåÉ ÔåÆ | Scroll: Ôåæ Ôåô ou molette\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\CVRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\CircularProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\EdgeDropZones.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\EdgeDropZones.tsx:65:13\n  63 |     useEffect(() => {\n  64 |         if (!isDragging) {\n> 65 |             setHoveredEdge(null);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  66 |             setProgress(0);\n  67 |             if (hoverTimerRef.current) clearTimeout(hoverTimerRef.current);\n  68 |             if (progressIntervalRef.current) clearInterval(progressIntervalRef.current);","line":65,"column":13,"nodeType":null,"endLine":65,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * EdgeDropZones - Mobile Cross-Page Drag Navigation\r\n * \r\n * Creates invisible drop zones on screen edges that trigger page navigation\r\n * when the user drags an element over them for > 500ms.\r\n * \r\n * Features:\r\n * - Left/Right edge detection (60px wide)\r\n * - 500ms debounce timer\r\n * - Haptic feedback on page switch\r\n * - Visual arrow indicators during drag\r\n * - Mobile-only activation\r\n */\r\n\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\ninterface EdgeDropZonesProps {\r\n    isDragging: boolean;\r\n    onPreviousPage: () => void;\r\n    onNextPage: () => void;\r\n    canGoPrevious: boolean;\r\n    canGoNext: boolean;\r\n}\r\n\r\n// Mobile detection\r\nconst isMobileDevice = (): boolean => {\r\n    if (typeof window === 'undefined') return false;\r\n    return window.matchMedia('(pointer: coarse)').matches || window.innerWidth < 768;\r\n};\r\n\r\nexport const EdgeDropZones: React.FC<EdgeDropZonesProps> = ({\r\n    isDragging,\r\n    onPreviousPage,\r\n    onNextPage,\r\n    canGoPrevious,\r\n    canGoNext,\r\n}) => {\r\n    const [isMobile, setIsMobile] = useState(false);\r\n    const [hoveredEdge, setHoveredEdge] = useState<'left' | 'right' | null>(null);\r\n    const [progress, setProgress] = useState(0);\r\n    const hoverTimerRef = useRef<number | null>(null);\r\n    const progressIntervalRef = useRef<number | null>(null);\r\n\r\n    // Check for mobile on mount and resize\r\n    useEffect(() => {\r\n        const checkMobile = () => setIsMobile(isMobileDevice());\r\n        checkMobile();\r\n        window.addEventListener('resize', checkMobile);\r\n        return () => window.removeEventListener('resize', checkMobile);\r\n    }, []);\r\n\r\n    // Cleanup timers on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (hoverTimerRef.current) clearTimeout(hoverTimerRef.current);\r\n            if (progressIntervalRef.current) clearInterval(progressIntervalRef.current);\r\n        };\r\n    }, []);\r\n\r\n    // Reset state when not dragging\r\n    useEffect(() => {\r\n        if (!isDragging) {\r\n            setHoveredEdge(null);\r\n            setProgress(0);\r\n            if (hoverTimerRef.current) clearTimeout(hoverTimerRef.current);\r\n            if (progressIntervalRef.current) clearInterval(progressIntervalRef.current);\r\n        }\r\n    }, [isDragging]);\r\n\r\n    // Handle edge hover with debounce\r\n    const handleEdgeEnter = (direction: 'left' | 'right') => {\r\n        if ((direction === 'left' && !canGoPrevious) || (direction === 'right' && !canGoNext)) {\r\n            return; // Can't navigate in this direction\r\n        }\r\n\r\n        setHoveredEdge(direction);\r\n        setProgress(0);\r\n\r\n        // Progress animation (0-100 in 500ms)\r\n        let currentProgress = 0;\r\n        progressIntervalRef.current = window.setInterval(() => {\r\n            currentProgress += 2; // 100/50 = 2% per 10ms\r\n            setProgress(Math.min(currentProgress, 100));\r\n        }, 10);\r\n\r\n        // Trigger page switch after 500ms\r\n        hoverTimerRef.current = window.setTimeout(() => {\r\n            // Haptic feedback\r\n            if (navigator.vibrate) {\r\n                navigator.vibrate(50);\r\n            }\r\n\r\n            // Navigate\r\n            if (direction === 'right') {\r\n                onNextPage();\r\n            } else {\r\n                onPreviousPage();\r\n            }\r\n\r\n            // Reset\r\n            setHoveredEdge(null);\r\n            setProgress(0);\r\n            if (progressIntervalRef.current) clearInterval(progressIntervalRef.current);\r\n        }, 500);\r\n    };\r\n\r\n    const handleEdgeLeave = () => {\r\n        setHoveredEdge(null);\r\n        setProgress(0);\r\n        if (hoverTimerRef.current) {\r\n            clearTimeout(hoverTimerRef.current);\r\n            hoverTimerRef.current = null;\r\n        }\r\n        if (progressIntervalRef.current) {\r\n            clearInterval(progressIntervalRef.current);\r\n            progressIntervalRef.current = null;\r\n        }\r\n    };\r\n\r\n    // Only show on mobile during drag\r\n    if (!isMobile || !isDragging) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {/* Left Edge Zone */}\r\n            {canGoPrevious && (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"fixed left-0 top-0 bottom-0 z-[9999] flex items-center justify-center\"\r\n                    style={{ width: '60px' }}\r\n                    onPointerEnter={() => handleEdgeEnter('left')}\r\n                    onPointerLeave={handleEdgeLeave}\r\n                    onTouchStart={() => handleEdgeEnter('left')}\r\n                    onTouchEnd={handleEdgeLeave}\r\n                >\r\n                    {/* Visual indicator */}\r\n                    <div\r\n                        className={`\r\n                            w-12 h-24 rounded-r-2xl flex items-center justify-center\r\n                            transition-all duration-200\r\n                            ${hoveredEdge === 'left'\r\n                                ? 'bg-indigo-500/40 backdrop-blur-sm'\r\n                                : 'bg-slate-900/20'\r\n                            }\r\n                        `}\r\n                    >\r\n                        <ChevronLeft\r\n                            size={32}\r\n                            className={`\r\n                                transition-colors duration-200\r\n                                ${hoveredEdge === 'left' ? 'text-white' : 'text-white/50'}\r\n                            `}\r\n                        />\r\n\r\n                        {/* Progress ring */}\r\n                        {hoveredEdge === 'left' && (\r\n                            <svg\r\n                                className=\"absolute w-10 h-10\"\r\n                                viewBox=\"0 0 36 36\"\r\n                            >\r\n                                <circle\r\n                                    className=\"stroke-white/30\"\r\n                                    strokeWidth=\"3\"\r\n                                    fill=\"transparent\"\r\n                                    r=\"16\"\r\n                                    cx=\"18\"\r\n                                    cy=\"18\"\r\n                                />\r\n                                <circle\r\n                                    className=\"stroke-white transition-all duration-100\"\r\n                                    strokeWidth=\"3\"\r\n                                    strokeLinecap=\"round\"\r\n                                    fill=\"transparent\"\r\n                                    r=\"16\"\r\n                                    cx=\"18\"\r\n                                    cy=\"18\"\r\n                                    strokeDasharray={`${progress} 100`}\r\n                                    transform=\"rotate(-90 18 18)\"\r\n                                />\r\n                            </svg>\r\n                        )}\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n\r\n            {/* Right Edge Zone */}\r\n            {canGoNext && (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"fixed right-0 top-0 bottom-0 z-[9999] flex items-center justify-center\"\r\n                    style={{ width: '60px' }}\r\n                    onPointerEnter={() => handleEdgeEnter('right')}\r\n                    onPointerLeave={handleEdgeLeave}\r\n                    onTouchStart={() => handleEdgeEnter('right')}\r\n                    onTouchEnd={handleEdgeLeave}\r\n                >\r\n                    {/* Visual indicator */}\r\n                    <div\r\n                        className={`\r\n                            w-12 h-24 rounded-l-2xl flex items-center justify-center\r\n                            transition-all duration-200\r\n                            ${hoveredEdge === 'right'\r\n                                ? 'bg-indigo-500/40 backdrop-blur-sm'\r\n                                : 'bg-slate-900/20'\r\n                            }\r\n                        `}\r\n                    >\r\n                        <ChevronRight\r\n                            size={32}\r\n                            className={`\r\n                                transition-colors duration-200\r\n                                ${hoveredEdge === 'right' ? 'text-white' : 'text-white/50'}\r\n                            `}\r\n                        />\r\n\r\n                        {/* Progress ring */}\r\n                        {hoveredEdge === 'right' && (\r\n                            <svg\r\n                                className=\"absolute w-10 h-10\"\r\n                                viewBox=\"0 0 36 36\"\r\n                            >\r\n                                <circle\r\n                                    className=\"stroke-white/30\"\r\n                                    strokeWidth=\"3\"\r\n                                    fill=\"transparent\"\r\n                                    r=\"16\"\r\n                                    cx=\"18\"\r\n                                    cy=\"18\"\r\n                                />\r\n                                <circle\r\n                                    className=\"stroke-white transition-all duration-100\"\r\n                                    strokeWidth=\"3\"\r\n                                    strokeLinecap=\"round\"\r\n                                    fill=\"transparent\"\r\n                                    r=\"16\"\r\n                                    cx=\"18\"\r\n                                    cy=\"18\"\r\n                                    strokeDasharray={`${progress} 100`}\r\n                                    transform=\"rotate(-90 18 18)\"\r\n                                />\r\n                            </svg>\r\n                        )}\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default EdgeDropZones;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\LiquidTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[401,404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[401,404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface LiquidTabProps {\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    id: string; // Unique key for AnimatePresence\r\n}\r\n\r\nconst variants = {\r\n    initial: { opacity: 0, x: 20, scale: 0.98 },\r\n    animate: { opacity: 1, x: 0, scale: 1 },\r\n    exit: { opacity: 0, x: -20, scale: 0.98 }\r\n};\r\n\r\nconst transition: any = {\r\n    type: \"spring\",\r\n    stiffness: 300,\r\n    damping: 30\r\n};\r\n\r\nexport const LiquidTab: React.FC<LiquidTabProps> = ({ children, className, id }) => {\r\n    return (\r\n        <motion.div\r\n            key={id}\r\n            initial=\"initial\"\r\n            animate=\"animate\"\r\n            exit=\"exit\"\r\n            variants={variants}\r\n            transition={transition}\r\n            className={`h-full w-full ${className || ''}`}\r\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\SmartReviewToast.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":14,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":14,"endColumn":33},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":21,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":21,"endColumn":35}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Star, X } from 'lucide-react';\r\nimport { useSmartReview } from '../../application/hooks/useGate';\r\nimport { create } from 'zustand';\r\n\r\n// Store for managing review toast visibility\r\ninterface ReviewToastState {\r\n    isVisible: boolean;\r\n    showToast: () => void;\r\n    hideToast: () => void;\r\n}\r\n\r\nexport const useReviewToastStore = create<ReviewToastState>((set) => ({\r\n    isVisible: false,\r\n    showToast: () => set({ isVisible: true }),\r\n    hideToast: () => set({ isVisible: false })\r\n}));\r\n\r\n// Hook to trigger review toast after save\r\nexport const useSmartReviewTrigger = () => {\r\n    const { incrementSaveCount, shouldShowReviewPrompt, markAsRated } = useSmartReview();\r\n    const { showToast, hideToast } = useReviewToastStore();\r\n\r\n    const onSave = () => {\r\n        incrementSaveCount();\r\n\r\n        // Check if we should show review prompt 3 seconds after save\r\n        if (shouldShowReviewPrompt()) {\r\n            setTimeout(() => {\r\n                showToast();\r\n            }, 3000);\r\n        }\r\n    };\r\n\r\n    return { onSave, markAsRated, hideToast };\r\n};\r\n\r\n// The Smart Review Toast component\r\nexport const SmartReviewToast: React.FC = () => {\r\n    const { isVisible, hideToast } = useReviewToastStore();\r\n    const { markAsRated } = useSmartReview();\r\n\r\n    // Auto-hide after 8 seconds\r\n    useEffect(() => {\r\n        if (isVisible) {\r\n            const timer = setTimeout(() => {\r\n                hideToast();\r\n            }, 8000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [isVisible, hideToast]);\r\n\r\n    const handleRate = () => {\r\n        markAsRated();\r\n        hideToast();\r\n        // Open rating page\r\n        window.open('https://www.trustpilot.com/review/nexal.ch', '_blank');\r\n    };\r\n\r\n    const handleDismiss = () => {\r\n        hideToast();\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isVisible && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 50, x: 20 }}\r\n                    animate={{ opacity: 1, y: 0, x: 0 }}\r\n                    exit={{ opacity: 0, y: 20, scale: 0.9 }}\r\n                    transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\r\n                    className=\"fixed bottom-6 right-6 z-[90] max-w-sm\"\r\n                >\r\n                    <div className=\"relative bg-gradient-to-br from-slate-800 via-slate-800 to-purple-900/30 rounded-2xl border border-white/10 shadow-2xl p-5 backdrop-blur-xl\">\r\n                        {/* Close button */}\r\n                        <button\r\n                            onClick={handleDismiss}\r\n                            className=\"absolute top-3 right-3 p-1 text-slate-500 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                        >\r\n                            <X size={14} />\r\n                        </button>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"flex items-start gap-4\">\r\n                            {/* Icon */}\r\n                            <div className=\"flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-amber-400/20 to-orange-400/20 border border-amber-400/30 flex items-center justify-center\">\r\n                                <Star className=\"text-amber-400\" size={24} fill=\"currentColor\" />\r\n                            </div>\r\n\r\n                            {/* Text */}\r\n                            <div className=\"flex-1 pr-4\">\r\n                                <h4 className=\"text-white font-semibold mb-1\">\r\n                                    Satisfait ?\r\n                                </h4>\r\n                                <p className=\"text-slate-400 text-sm mb-3\">\r\n                                    Votre avis nous aide ├á am├®liorer Nexal\r\n                                </p>\r\n\r\n                                {/* CTA */}\r\n                                <motion.button\r\n                                    whileHover={{ scale: 1.02 }}\r\n                                    whileTap={{ scale: 0.98 }}\r\n                                    onClick={handleRate}\r\n                                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white text-sm font-medium rounded-lg shadow-lg transition-all\"\r\n                                >\r\n                                    <Star size={14} fill=\"currentColor\" />\r\n                                    Notez-nous Ô¡É\r\n                                </motion.button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Decorative gradient */}\r\n                        <div className=\"absolute -bottom-1 -right-1 w-24 h-24 bg-amber-500/10 rounded-full blur-2xl pointer-events-none\" />\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default SmartReviewToast;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\ToastContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\WizardProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\atomic-editor\\EditableField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3979,3982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3979,3982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Editable Field Component\r\n * \r\n * Self-contained wrapper that makes any content editable.\r\n * NO data-* attributes needed - all logic is encapsulated.\r\n * \r\n * TELEKINESIS: Mode-aware - blocks editing in structure mode\r\n * \r\n * @example\r\n * <EditableField path=\"personal.firstName\" label=\"First Name\" required>\r\n *   {(value) => <h1 className=\"text-5xl\">{value}</h1>}\r\n * </EditableField>\r\n */\r\n\r\nimport React, { useState, useCallback } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useFieldValue, useUpdateField, useMode } from '../../../application/store/v2';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { EditorOverlay } from './EditorOverlay';\r\nimport type { ValidationRule } from './validators';\r\n\r\n// ============================================================================\r\n// PROPS INTERFACE\r\n// ============================================================================\r\n\r\ninterface EditableFieldProps<T = string> {\r\n    /**\r\n     * Path to the field in the CV profile\r\n     * e.g., \"personal.firstName\" or \"experiences.0.role\"\r\n     */\r\n    path: string;\r\n\r\n    /**\r\n     * Label to show in the editor overlay\r\n     */\r\n    label: string;\r\n\r\n    /**\r\n     * Placeholder text for empty fields\r\n     */\r\n    placeholder?: string;\r\n\r\n    /**\r\n     * Validation rules\r\n     */\r\n    validation?: ValidationRule;\r\n\r\n    /**\r\n     * Use multiline textarea for long text\r\n     */\r\n    multiline?: boolean;\r\n\r\n    /**\r\n     * Enable AI enhancement (Prometheus)\r\n     */\r\n    aiEnabled?: boolean;\r\n\r\n    /**\r\n     * Transform value before saving (e.g., trim, uppercase)\r\n     */\r\n    transform?: (value: T) => T;\r\n\r\n    /**\r\n     * Render function - receives current value\r\n     */\r\n    children: (value: T) => React.ReactNode;\r\n\r\n    /**\r\n     * Optional className for the wrapper\r\n     */\r\n    className?: string;\r\n\r\n    /**\r\n     * Disable editing\r\n     */\r\n    disabled?: boolean;\r\n}\r\n\r\n// ============================================================================\r\n// COMPONENT\r\n// ============================================================================\r\n\r\nexport function EditableField<T = string>({\r\n    path,\r\n    label,\r\n    placeholder = '',\r\n    validation,\r\n    multiline = false,\r\n    aiEnabled = false,\r\n    transform,\r\n    children,\r\n    className,\r\n    disabled = false\r\n}: EditableFieldProps<T>) {\r\n    // State\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editorPosition, setEditorPosition] = useState({ x: 0, y: 0 });\r\n\r\n    // Store hooks\r\n    const value = useFieldValue<T>(path);\r\n    const updateField = useUpdateField();\r\n    const mode = useMode(); // TELEKINESIS - Mode awareness\r\n    const location = useLocation();\r\n    const { setFocusMode } = useSettingsStore();\r\n\r\n    // Block editing on templates page\r\n    const isOnTemplatesPage = location.pathname === '/templates';\r\n\r\n    // ========================================\r\n    // HANDLERS\r\n    // ========================================\r\n\r\n    /**\r\n     * Handle double click - open editor overlay\r\n     * DISCIPLINE: Block editing in structure mode\r\n     */\r\n    const handleDoubleClick = useCallback((e: React.MouseEvent) => {\r\n        // TELEKINESIS - Prevent editing when arranging layout\r\n        if (mode === 'structure') return;\r\n\r\n        // Prevent editing on templates page\r\n        if (isOnTemplatesPage) return;\r\n\r\n        if (disabled) return;\r\n\r\n        e.stopPropagation();\r\n\r\n        // Calculate position for overlay\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        setEditorPosition({\r\n            x: rect.left,\r\n            y: rect.bottom + 8\r\n        });\r\n\r\n        setIsEditing(true);\r\n        setFocusMode(true); // Auto-hide sidebar\r\n    }, [disabled, mode, isOnTemplatesPage, setFocusMode]);\r\n\r\n    /**\r\n     * Handle save\r\n     */\r\n    const handleSave = useCallback((newValue: string) => {\r\n        let processedValue: any = newValue;\r\n\r\n        // Apply transform if provided\r\n        if (transform) {\r\n            processedValue = transform(processedValue as T);\r\n        }\r\n\r\n        // Update store\r\n        updateField(path, processedValue);\r\n\r\n        // Close editor\r\n        setIsEditing(false);\r\n    }, [path, updateField, transform]);\r\n\r\n    /**\r\n     * Handle AI enhancement (Project Prometheus)\r\n     */\r\n    const handleAIEnhance = useCallback(async (currentValue: string): Promise<string> => {\r\n        // Import AIService dynamically to avoid circular deps\r\n        const { AIService } = await import('../../../application/services/ai-service');\r\n        const { BackendAIClient } = await import('../../../infrastructure/ai/backend-ai-client');\r\n\r\n        // Create AI client and service\r\n        const aiClient = new BackendAIClient();\r\n        const aiService = new AIService(aiClient);\r\n\r\n        // Improve text with context from label\r\n        const improved = await aiService.improveText(currentValue, label);\r\n        return improved;\r\n    }, [label]);\r\n\r\n    /**\r\n     * Handle cancel\r\n     */\r\n    const handleCancel = useCallback(() => {\r\n        setIsEditing(false);\r\n    }, []);\r\n\r\n    // ========================================\r\n    // RENDER\r\n    // ========================================\r\n\r\n    // Display value (use placeholder if empty)\r\n    const displayValue = (value || placeholder) as T;\r\n    const isEmpty = !value || (typeof value === 'string' && value.trim() === '');\r\n\r\n    return (\r\n        <>\r\n            {/* Editable wrapper */}\r\n            <div\r\n                onDoubleClick={handleDoubleClick}\r\n                className={`\r\n                    ${className || ''}\r\n                    ${!disabled && !isOnTemplatesPage ? 'cursor-pointer transition-all duration-200' : ''}\r\n                    ${!disabled && !isOnTemplatesPage ? 'hover:outline hover:outline-2 hover:outline-purple-400/40 hover:outline-offset-2 hover:bg-purple-50/30 hover:rounded' : ''}\r\n                    ${isEmpty ? 'min-h-[1.5em] min-w-[80px]' : ''}\r\n                `}\r\n                title={!disabled && !isOnTemplatesPage ? 'Double-click to edit' : undefined}\r\n            >\r\n                {isEmpty ? (\r\n                    <span className=\"text-gray-400 italic text-sm\">\r\n                        [Ajouter {label}]\r\n                    </span>\r\n                ) : (\r\n                    children(displayValue)\r\n                )}\r\n            </div>\r\n\r\n            {/* Editor overlay */}\r\n            <EditorOverlay\r\n                isOpen={isEditing}\r\n                position={editorPosition}\r\n                value={String(value || '')}\r\n                label={label}\r\n                placeholder={placeholder}\r\n                multiline={multiline}\r\n                validation={validation}\r\n                aiEnabled={aiEnabled}\r\n                onSave={handleSave}\r\n                onCancel={handleCancel}\r\n                onAIEnhance={aiEnabled ? handleAIEnhance : undefined}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\n// ============================================================================\r\n// PRESET VARIANTS (Convenience wrappers)\r\n// ============================================================================\r\n\r\n/**\r\n * Editable text field (single line)\r\n */\r\nexport const EditableText: React.FC<Omit<EditableFieldProps<string>, 'multiline'>> = (props) => (\r\n    <EditableField {...props} multiline={false} />\r\n);\r\n\r\n/**\r\n * Editable textarea field (multiline)\r\n */\r\nexport const EditableTextarea: React.FC<Omit<EditableFieldProps<string>, 'multiline'>> = (props) => (\r\n    <EditableField {...props} multiline={true} />\r\n);\r\n\r\n/**\r\n * Editable email field (with validation)\r\n */\r\nexport const EditableEmail: React.FC<Omit<EditableFieldProps<string>, 'validation'>> = (props) => (\r\n    <EditableField\r\n        {...props}\r\n        validation={{ required: true, email: true }}\r\n    />\r\n);\r\n\r\n/**\r\n * Editable phone field (with validation)\r\n */\r\nexport const EditablePhone: React.FC<Omit<EditableFieldProps<string>, 'validation'>> = (props) => (\r\n    <EditableField\r\n        {...props}\r\n        validation={{ phone: true }}\r\n    />\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\atomic-editor\\EditableImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\atomic-editor\\EditorOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\atomic-editor\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\atomic-editor\\validators.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[373,376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[373,376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[789,792],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[789,792],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\+.","line":93,"column":35,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":93,"endColumn":36,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2627,2628],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2627,2627],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\(.","line":93,"column":37,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":93,"endColumn":38,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2629,2630],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2629,2629],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":93,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":93,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2631,2632],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2631,2631],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3733,3736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3733,3736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Engine v2 - Field Validators\r\n * \r\n * Validation logic for CV fields.\r\n * Each validator is a pure function that returns true if valid.\r\n */\r\n\r\nexport interface ValidationRule {\r\n    required?: boolean;\r\n    minLength?: number;\r\n    maxLength?: number;\r\n    pattern?: RegExp;\r\n    email?: boolean;\r\n    phone?: boolean;\r\n    url?: boolean;\r\n    custom?: (value: any) => boolean | string; // Return string for error message\r\n}\r\n\r\nexport interface ValidationResult {\r\n    isValid: boolean;\r\n    error?: string;\r\n}\r\n\r\n// ============================================================================\r\n// BASIC VALIDATORS\r\n// ============================================================================\r\n\r\n/**\r\n * Validate required field\r\n */\r\nexport function validateRequired(value: any): ValidationResult {\r\n    const isValid = value !== undefined && value !== null && value !== '';\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : 'This field is required'\r\n    };\r\n}\r\n\r\n/**\r\n * Validate minimum length\r\n */\r\nexport function validateMinLength(value: string, minLength: number): ValidationResult {\r\n    const isValid = !value || value.length >= minLength;\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : `Minimum ${minLength} characters required`\r\n    };\r\n}\r\n\r\n/**\r\n * Validate maximum length\r\n */\r\nexport function validateMaxLength(value: string, maxLength: number): ValidationResult {\r\n    const isValid = !value || value.length <= maxLength;\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : `Maximum ${maxLength} characters allowed`\r\n    };\r\n}\r\n\r\n/**\r\n * Validate pattern (RegExp)\r\n */\r\nexport function validatePattern(value: string, pattern: RegExp): ValidationResult {\r\n    const isValid = !value || pattern.test(value);\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : 'Invalid format'\r\n    };\r\n}\r\n\r\n// ============================================================================\r\n// SPECIFIC VALIDATORS\r\n// ============================================================================\r\n\r\n/**\r\n * Validate email address\r\n */\r\nexport function validateEmail(value: string): ValidationResult {\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    const isValid = !value || emailPattern.test(value);\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : 'Invalid email address'\r\n    };\r\n}\r\n\r\n/**\r\n * Validate phone number (flexible format)\r\n */\r\nexport function validatePhone(value: string): ValidationResult {\r\n    // Accepts: +1234567890, (123) 456-7890, 123-456-7890, etc.\r\n    const phonePattern = /^[\\d\\s\\-\\+\\(\\)]+$/;\r\n    const isValid = !value || (phonePattern.test(value) && value.replace(/\\D/g, '').length >= 10);\r\n    return {\r\n        isValid,\r\n        error: isValid ? undefined : 'Invalid phone number'\r\n    };\r\n}\r\n\r\n/**\r\n * Validate URL\r\n */\r\nexport function validateUrl(value: string): ValidationResult {\r\n    try {\r\n        if (!value) return { isValid: true };\r\n        new URL(value);\r\n        return { isValid: true };\r\n    } catch {\r\n        return {\r\n            isValid: false,\r\n            error: 'Invalid URL format'\r\n        };\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// COMPOSITE VALIDATOR\r\n// ============================================================================\r\n\r\n/**\r\n * Validate a value against multiple rules\r\n * \r\n * @param value - The value to validate\r\n * @param rules - Validation rules to apply\r\n * @returns Validation result with first error encountered\r\n * \r\n * @example\r\n * const result = validateField('john@example.com', {\r\n *   required: true,\r\n *   email: true\r\n * });\r\n */\r\nexport function validateField(value: any, rules: ValidationRule): ValidationResult {\r\n    // Required check\r\n    if (rules.required) {\r\n        const result = validateRequired(value);\r\n        if (!result.isValid) return result;\r\n    }\r\n\r\n    // If value is empty and not required, it's valid\r\n    if (!value && !rules.required) {\r\n        return { isValid: true };\r\n    }\r\n\r\n    // String length checks\r\n    if (typeof value === 'string') {\r\n        if (rules.minLength) {\r\n            const result = validateMinLength(value, rules.minLength);\r\n            if (!result.isValid) return result;\r\n        }\r\n\r\n        if (rules.maxLength) {\r\n            const result = validateMaxLength(value, rules.maxLength);\r\n            if (!result.isValid) return result;\r\n        }\r\n\r\n        // Pattern check\r\n        if (rules.pattern) {\r\n            const result = validatePattern(value, rules.pattern);\r\n            if (!result.isValid) return result;\r\n        }\r\n\r\n        // Email check\r\n        if (rules.email) {\r\n            const result = validateEmail(value);\r\n            if (!result.isValid) return result;\r\n        }\r\n\r\n        // Phone check\r\n        if (rules.phone) {\r\n            const result = validatePhone(value);\r\n            if (!result.isValid) return result;\r\n        }\r\n\r\n        // URL check\r\n        if (rules.url) {\r\n            const result = validateUrl(value);\r\n            if (!result.isValid) return result;\r\n        }\r\n    }\r\n\r\n    // Custom validator\r\n    if (rules.custom) {\r\n        const customResult = rules.custom(value);\r\n        if (typeof customResult === 'string') {\r\n            return { isValid: false, error: customResult };\r\n        }\r\n        if (!customResult) {\r\n            return { isValid: false, error: 'Validation failed' };\r\n        }\r\n    }\r\n\r\n    return { isValid: true };\r\n}\r\n\r\n// ============================================================================\r\n// PRESETS\r\n// ============================================================================\r\n\r\n/**\r\n * Common validation presets for CV fields\r\n */\r\nexport const ValidationPresets = {\r\n    firstName: {\r\n        required: true,\r\n        minLength: 2,\r\n        maxLength: 50\r\n    },\r\n    lastName: {\r\n        required: true,\r\n        minLength: 2,\r\n        maxLength: 50\r\n    },\r\n    title: {\r\n        required: true,\r\n        minLength: 5,\r\n        maxLength: 100\r\n    },\r\n    email: {\r\n        required: true,\r\n        email: true\r\n    },\r\n    phone: {\r\n        phone: true\r\n    },\r\n    url: {\r\n        url: true\r\n    },\r\n    summary: {\r\n        minLength: 50,\r\n        maxLength: 500\r\n    },\r\n    role: {\r\n        required: true,\r\n        minLength: 3,\r\n        maxLength: 100\r\n    },\r\n    company: {\r\n        required: true,\r\n        minLength: 2,\r\n        maxLength: 100\r\n    },\r\n    degree: {\r\n        required: true,\r\n        minLength: 5,\r\n        maxLength: 100\r\n    },\r\n    school: {\r\n        required: true,\r\n        minLength: 3,\r\n        maxLength: 100\r\n    }\r\n} as const;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\lego\\DraggableBlock.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onReorder' is defined but never used.","line":32,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * DRAGGABLE BLOCK - Premium Drag & Drop with \"The Juice\"\r\n * \r\n * Component wrapper qui ajoute les capacit├®s de drag & drop premium:\r\n * - Ghost element qui suit le curseur\r\n * - Drop zone preview avec indicateur visuel\r\n * - Physics-based animations (spring)\r\n * - Real-time shift des autres blocs\r\n * \r\n * \"The Juice\" = Experience utilisateur extraordinaire\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, Reorder, useDragControls } from 'framer-motion';\r\nimport { GripVertical } from 'lucide-react';\r\nimport { useMode } from '../../../application/store/v2';\r\nimport { systemEventBus } from '../../../domain/events/event-bus';\r\n\r\ninterface DraggableBlockProps {\r\n    id: string;\r\n    index: number;\r\n    type: 'section' | 'item';\r\n    children: React.ReactNode;\r\n    onReorder?: (startIndex: number, endIndex: number) => void;\r\n}\r\n\r\nexport const DraggableBlock: React.FC<DraggableBlockProps> = ({\r\n    id,\r\n    index,\r\n    type,\r\n    children,\r\n    onReorder\r\n}) => {\r\n    const mode = useMode();\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const dragControls = useDragControls();\r\n\r\n    const isStructureMode = mode === 'structure';\r\n\r\n    const handleDragStart = () => {\r\n        setIsDragging(true);\r\n        // Publish event to Event Bus\r\n        systemEventBus.publish('DRAG_START', {\r\n            blockId: id,\r\n            type,\r\n            index\r\n        });\r\n    };\r\n\r\n    const handleDragEnd = () => {\r\n        setIsDragging(false);\r\n        // Publish event to Event Bus\r\n        systemEventBus.publish('DRAG_END', {\r\n            blockId: id,\r\n            type,\r\n            index\r\n        });\r\n    };\r\n\r\n    if (!isStructureMode) {\r\n        // Mode ├®dition/mod├¿le: rendu normal sans drag\r\n        return <div>{children}</div>;\r\n    }\r\n\r\n    return (\r\n        <Reorder.Item\r\n            value={id}\r\n            id={id}\r\n            dragListener={false}\r\n            dragControls={dragControls}\r\n            onDragStart={handleDragStart}\r\n            onDragEnd={handleDragEnd}\r\n            className={`\r\n                relative group\r\n                ${type === 'section'\r\n                    ? 'border-2 border-dashed border-indigo-300/50 rounded-lg p-4 mb-4 bg-white/50'\r\n                    : 'border-2 border-dashed border-purple-300/50 rounded-lg p-3 mb-3 bg-white/50'\r\n                }\r\n                ${isDragging\r\n                    ? 'opacity-50 scale-105 shadow-2xl z-50'\r\n                    : 'hover:border-indigo-500 hover:shadow-lg hover:shadow-indigo-500/20'\r\n                }\r\n                transition-all duration-200\r\n            `}\r\n            whileHover={{ scale: 1.01, y: -2 }}\r\n            whileDrag={{\r\n                scale: 1.05,\r\n                rotate: 2,\r\n                boxShadow: '0 25px 50px -12px rgba(99, 102, 241, 0.5)',\r\n                zIndex: 9999\r\n            }}\r\n            transition={{\r\n                type: 'spring',\r\n                stiffness: 500,\r\n                damping: 25\r\n            }}\r\n        >\r\n            {/* Drag Handle */}\r\n            <div\r\n                onPointerDown={(e) => dragControls.start(e)}\r\n                className={`\r\n                    absolute left-2 top-2 cursor-grab active:cursor-grabbing\r\n                    p-1 rounded hover:bg-indigo-100/50 transition-colors\r\n                    ${isDragging ? 'opacity-0' : 'opacity-0 group-hover:opacity-100'}\r\n                `}\r\n                title=\"Glisser pour r├®organiser\"\r\n            >\r\n                <GripVertical size={20} className=\"text-indigo-600\" />\r\n            </div>\r\n\r\n            {/* Block Label (visible en mode structure) */}\r\n            <div className=\"absolute top-2 right-2 text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                {type === 'section' ? '­ƒôª Section' : '­ƒôØ Item'}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className={isDragging ? 'pointer-events-none' : ''}>\r\n                {children}\r\n            </div>\r\n\r\n            {/* Drop Zone Indicator (appears when dragging over) */}\r\n            {isDragging && (\r\n                <motion.div\r\n                    className=\"absolute -bottom-2 left-0 right-0 h-1 bg-blue-500 rounded-full shadow-lg shadow-blue-500/50\"\r\n                    initial={{ scaleX: 0 }}\r\n                    animate={{ scaleX: 1 }}\r\n                    exit={{ scaleX: 0 }}\r\n                    transition={{ duration: 0.2 }}\r\n                />\r\n            )}\r\n        </Reorder.Item>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\lego\\ModeToggleButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\lego\\SortableItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\lego\\SortableList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\lego\\SortableSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isSorting' is assigned a value but never used.","line":40,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'overIndex' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is assigned a value but never used.","line":42,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":14}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * REFACTORED v3 - Drop Indicator with Magnetic Snap\r\n * \r\n * NEW FEATURES:\r\n * - Visual drop line indicator showing exactly where item will land\r\n * - Entire card is drop zone (pointer-events fix)\r\n * - Clear magnetic snap effect\r\n */\r\n\r\nimport React from 'react';\r\nimport { useSortable } from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\nimport { GripVertical } from 'lucide-react';\r\nimport type { CVMode } from '../../../application/store/v2/cv-store-v2.types';\r\n\r\ninterface SortableSectionProps {\r\n    id: string;\r\n    mode: CVMode;\r\n    header: React.ReactNode;\r\n    children: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const SortableSection: React.FC<SortableSectionProps> = ({\r\n    id,\r\n    mode,\r\n    header,\r\n    children,\r\n    className = ''\r\n}) => {\r\n    const {\r\n        attributes,\r\n        listeners,\r\n        setNodeRef,\r\n        setActivatorNodeRef,\r\n        transform,\r\n        transition,\r\n        isDragging,\r\n        isOver,\r\n        isSorting,\r\n        overIndex,\r\n        index\r\n    } = useSortable({ id });\r\n\r\n    const style = {\r\n        transform: CSS.Translate.toString(transform),\r\n        transition: transition || undefined,\r\n    };\r\n\r\n    // Edition mode - normal rendering\r\n    if (mode === 'edition') {\r\n        return (\r\n            <div className={className}>\r\n                {header}\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Calculate if we should show the drop indicator\r\n    const showDropIndicator = mode === 'structure' && isOver && !isDragging;\r\n\r\n    // Structure mode with full drag & drop\r\n    return (\r\n        <div className=\"relative\">\r\n            {/* DROP INDICATOR - Shows ABOVE when hovering */}\r\n            {showDropIndicator && (\r\n                <div className=\"absolute -top-3 left-0 right-0 z-50 flex items-center justify-center\">\r\n                    <div className=\"w-full h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent rounded-full animate-pulse shadow-lg shadow-indigo-500/50\" />\r\n                    <div className=\"absolute left-1/2 -translate-x-1/2 -top-2 px-3 py-1 bg-indigo-500 text-white text-xs font-bold rounded-full shadow-lg\">\r\n                        Placer ici\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div\r\n                ref={setNodeRef}\r\n                style={style}\r\n                className={`\r\n                    relative\r\n                    ${className}\r\n                    ${isDragging ? 'opacity-20 scale-95' : 'opacity-100 scale-100'}\r\n                    ${isOver && !isDragging ? 'scale-102 -translate-y-2' : ''}\r\n                    ${mode === 'structure' ? 'border-2 border-dashed border-indigo-300/50 rounded-lg p-4 mb-6' : ''}\r\n                    ${mode === 'structure' ? 'hover:border-indigo-400 hover:shadow-lg hover:shadow-indigo-500/20' : ''}\r\n                    ${mode === 'structure' ? 'bg-white/80 backdrop-blur-sm' : ''}\r\n                    transition-all duration-300 ease-out\r\n                `}\r\n            >\r\n                {/* DRAG HANDLE - Initiates drag */}\r\n                <div\r\n                    ref={setActivatorNodeRef}\r\n                    className={`\r\n                        ${mode === 'structure' ? 'cursor-grab active:cursor-grabbing' : 'cursor-default'}\r\n                        ${mode === 'structure' ? 'hover:bg-indigo-50 rounded-md p-2 -m-2 mb-2' : ''}\r\n                        transition-all duration-200\r\n                        flex items-center gap-3\r\n                        relative z-10\r\n                    `}\r\n                    {...attributes}\r\n                    {...listeners}\r\n                    onMouseDown={(e) => {\r\n                        if (mode === 'structure') {\r\n                            e.stopPropagation();\r\n                        }\r\n                    }}\r\n                >\r\n                    {mode === 'structure' && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <GripVertical\r\n                                size={20}\r\n                                className=\"text-indigo-500 opacity-70 hover:opacity-100 transition-opacity\"\r\n                                strokeWidth={2.5}\r\n                            />\r\n                            <div className=\"flex flex-col gap-1\">\r\n                                <div className=\"w-1 h-1 bg-indigo-400 rounded-full\" />\r\n                                <div className=\"w-1 h-1 bg-indigo-400 rounded-full\" />\r\n                                <div className=\"w-1 h-1 bg-indigo-400 rounded-full\" />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex-1 font-medium\">\r\n                        {header}\r\n                    </div>\r\n\r\n                    {mode === 'structure' && (\r\n                        <div className=\"text-xs text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            Glisser\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* BODY - pointer-events enabled for child dragging */}\r\n                <div\r\n                    className={`\r\n                        mt-2\r\n                    `}\r\n                >\r\n                    {children}\r\n                </div>\r\n\r\n                {/* Glow effect when hovering */}\r\n                {mode === 'structure' && isOver && !isDragging && (\r\n                    <div className=\"absolute inset-0 rounded-lg bg-gradient-to-br from-indigo-500/10 to-purple-500/10 pointer-events-none\" />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\modals\\ShareModal.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":16,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":16,"endColumn":32},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\modals\\ShareModal.tsx:41:13\n  39 |             const uniqueId = `${profile.id || 'cv'}-${Date.now().toString(36)}`;\n  40 |             const link = `${window.location.origin}/cv/${uniqueId}`;\n> 41 |             setShareLink(link);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  42 |\n  43 |             // Set expiry for free users (24h from now)\n  44 |             if (!hasPermanentAccess) {","line":41,"column":13,"nodeType":null,"endLine":41,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Link2, Copy, Check, Clock, Crown, ExternalLink } from 'lucide-react';\r\nimport { useGate, useUpsellModalStore } from '../../../application/hooks/useGate';\r\nimport { useCVStore } from '../../../application/store/cv-store';\r\nimport { cn } from '../../design-system/atoms/Button';\r\nimport { create } from 'zustand';\r\n\r\n// Store for ShareModal visibility\r\ninterface ShareModalState {\r\n    isOpen: boolean;\r\n    openModal: () => void;\r\n    closeModal: () => void;\r\n}\r\n\r\nexport const useShareModalStore = create<ShareModalState>((set) => ({\r\n    isOpen: false,\r\n    openModal: () => set({ isOpen: true }),\r\n    closeModal: () => set({ isOpen: false })\r\n}));\r\n\r\nexport const ShareModal: React.FC = () => {\r\n    const { isOpen, closeModal } = useShareModalStore();\r\n    const { openModal: openUpsellModal } = useUpsellModalStore();\r\n    const gate = useGate();\r\n    const { profile } = useCVStore();\r\n\r\n    const [shareLink, setShareLink] = useState('');\r\n    const [copied, setCopied] = useState(false);\r\n    const [expiryTime, setExpiryTime] = useState<Date | null>(null);\r\n\r\n    // Check if user has permanent link access\r\n    const { allowed: hasPermanentAccess } = gate.checkGate('PUBLISH_LINK');\r\n\r\n    // Generate share link on open\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            // Generate a unique share link\r\n            const uniqueId = `${profile.id || 'cv'}-${Date.now().toString(36)}`;\r\n            const link = `${window.location.origin}/cv/${uniqueId}`;\r\n            setShareLink(link);\r\n\r\n            // Set expiry for free users (24h from now)\r\n            if (!hasPermanentAccess) {\r\n                const expiry = new Date();\r\n                expiry.setHours(expiry.getHours() + 24);\r\n                setExpiryTime(expiry);\r\n            } else {\r\n                setExpiryTime(null);\r\n            }\r\n        }\r\n    }, [isOpen, profile.id, hasPermanentAccess]);\r\n\r\n    // Copy to clipboard\r\n    const handleCopy = async () => {\r\n        await navigator.clipboard.writeText(shareLink);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    // Trigger upsell for permanent link\r\n    const handleUnlockPermanent = () => {\r\n        openUpsellModal('publish_link');\r\n    };\r\n\r\n    // Calculate remaining time\r\n    const getRemainingTime = () => {\r\n        if (!expiryTime) return null;\r\n        const now = new Date();\r\n        const diff = expiryTime.getTime() - now.getTime();\r\n        const hours = Math.floor(diff / (1000 * 60 * 60));\r\n        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n        return `${hours}h ${minutes}min`;\r\n    };\r\n\r\n    // Close on escape\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') closeModal();\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener('keydown', handleEscape);\r\n        }\r\n\r\n        return () => document.removeEventListener('keydown', handleEscape);\r\n    }, [isOpen, closeModal]);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\"\r\n                >\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\r\n                        onClick={closeModal}\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        transition={{ type: \"spring\", stiffness: 400, damping: 30 }}\r\n                        className=\"relative w-full max-w-md bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl border border-white/10 shadow-2xl overflow-hidden\"\r\n                    >\r\n                        {/* Close button */}\r\n                        <button\r\n                            onClick={closeModal}\r\n                            className=\"absolute top-4 right-4 p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors z-10\"\r\n                        >\r\n                            <X size={18} />\r\n                        </button>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"p-6\">\r\n                            {/* Header */}\r\n                            <div className=\"flex items-center gap-3 mb-6\">\r\n                                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-indigo-500/30 flex items-center justify-center\">\r\n                                    <Link2 className=\"text-indigo-400\" size={24} />\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-bold text-white\">\r\n                                        Partager votre CV\r\n                                    </h2>\r\n                                    <p className=\"text-sm text-slate-400\">\r\n                                        Obtenez un lien public pour partager\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Demo Badge for Free Users */}\r\n                            {!hasPermanentAccess && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, y: -10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"mb-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-2 text-amber-400 text-sm font-medium\">\r\n                                        <Clock size={16} />\r\n                                        <span>Mode D├®mo - Expire dans {getRemainingTime() || '24h'}</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-amber-400/70 mt-1\">\r\n                                        Le lien sera d├®sactiv├® apr├¿s 24 heures\r\n                                    </p>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Permanent Link Badge */}\r\n                            {hasPermanentAccess && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, y: -10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"mb-4 p-3 bg-emerald-500/10 border border-emerald-500/30 rounded-xl\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-2 text-emerald-400 text-sm font-medium\">\r\n                                        <Crown size={16} />\r\n                                        <span>Lien Permanent Activ├®</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-emerald-400/70 mt-1\">\r\n                                        Ce lien n'expire jamais\r\n                                    </p>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Share Link Input */}\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"text-xs font-medium text-slate-400 mb-2 block\">\r\n                                    Votre lien de partage\r\n                                </label>\r\n                                <div className=\"flex gap-2\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={shareLink}\r\n                                        readOnly\r\n                                        className=\"flex-1 px-3 py-2.5 bg-slate-800/50 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500/50\"\r\n                                    />\r\n                                    <motion.button\r\n                                        whileHover={{ scale: 1.02 }}\r\n                                        whileTap={{ scale: 0.98 }}\r\n                                        onClick={handleCopy}\r\n                                        className={cn(\r\n                                            \"px-4 py-2.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2\",\r\n                                            copied\r\n                                                ? \"bg-emerald-600 text-white\"\r\n                                                : \"bg-indigo-600 hover:bg-indigo-500 text-white\"\r\n                                        )}\r\n                                    >\r\n                                        {copied ? (\r\n                                            <>\r\n                                                <Check size={16} />\r\n                                                Copi├®!\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                <Copy size={16} />\r\n                                                Copier\r\n                                            </>\r\n                                        )}\r\n                                    </motion.button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Open Link Button */}\r\n                            <a\r\n                                href={shareLink}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex items-center justify-center gap-2 w-full px-4 py-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg text-sm font-medium transition-colors mb-4\"\r\n                            >\r\n                                <ExternalLink size={16} />\r\n                                Ouvrir dans un nouvel onglet\r\n                            </a>\r\n\r\n                            {/* Unlock Permanent Link CTA (Free Users) */}\r\n                            {!hasPermanentAccess && (\r\n                                <motion.button\r\n                                    whileHover={{ scale: 1.01 }}\r\n                                    whileTap={{ scale: 0.99 }}\r\n                                    onClick={handleUnlockPermanent}\r\n                                    className=\"w-full px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white rounded-xl font-semibold text-sm shadow-lg flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <Crown size={18} />\r\n                                    Activer le lien permanent\r\n                                </motion.button>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default ShareModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\modals\\SubscriptionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\sidebar\\SmartSidebar.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\components\\sidebar\\SmartSidebar.tsx:127:9\n  125 |     // Close mobile menu on route change\n  126 |     useEffect(() => {\n> 127 |         setMobileMenuOpen(false);\n      |         ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  128 |     }, [location.pathname]);\n  129 |\n  130 |     // Close mobile menu on escape key","line":127,"column":9,"nodeType":null,"endLine":127,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * SMART SIDEBAR - Ultra-Modern Collapsible Navigation\r\n * \r\n * Premium sidebar with glass morphism, smooth animations, and mode-aware routing.\r\n * \r\n * Features:\r\n * - Mobile: Hidden by default, hamburger menu toggle, overlay drawer\r\n * - Desktop Collapsed: 80px width (icons only)\r\n * - Desktop Expanded: 280px width (icons + labels)\r\n * - Spring-based animations (framer-motion)\r\n * - Glass morphism backdrop\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    LayoutDashboard,\r\n    Edit3,\r\n    Box,\r\n    Palette,\r\n    Sparkles,\r\n    Settings,\r\n    Wand2,\r\n    Menu,\r\n    X\r\n} from 'lucide-react';\r\nimport { useMode, useSetMode } from '../../../application/store/v2';\r\nimport type { CVMode } from '../../../application/store/v2';\r\nimport { GlassStyles } from '../../design-system/tokens';\r\nimport { useIsMobile } from '../../hooks/useMediaQuery';\r\n\r\ninterface NavItem {\r\n    id: string;\r\n    label: string;\r\n    icon: React.ElementType;\r\n    path?: string;\r\n    mode?: CVMode;\r\n    action?: string;\r\n    gradient: string;\r\n    description: string;\r\n    section: 'pages' | 'tools' | 'quickaccess';\r\n}\r\n\r\nconst NAV_ITEMS: NavItem[] = [\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ QUICK ACCESS (Most Important) ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    {\r\n        id: 'wizard',\r\n        label: 'Wizard',\r\n        icon: Wand2,\r\n        path: '/wizard',\r\n        gradient: 'from-indigo-500 to-blue-500',\r\n        description: 'Assistant guid├® - Le plus facile',\r\n        section: 'quickaccess'\r\n    },\r\n\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ PAGES ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    {\r\n        id: 'dashboard',\r\n        label: 'Dashboard',\r\n        icon: LayoutDashboard,\r\n        path: '/',\r\n        gradient: 'from-blue-500 to-cyan-500',\r\n        description: 'Vue d\\'ensemble',\r\n        section: 'pages'\r\n    },\r\n    {\r\n        id: 'templates',\r\n        label: 'Templates',\r\n        icon: Palette,\r\n        path: '/templates',\r\n        gradient: 'from-purple-500 to-pink-500',\r\n        description: 'Galerie de mod├¿les',\r\n        section: 'pages'\r\n    },\r\n    {\r\n        id: 'settings',\r\n        label: 'Param├¿tres',\r\n        icon: Settings,\r\n        action: 'openSettings',\r\n        gradient: 'from-slate-500 to-gray-500',\r\n        description: 'Configuration',\r\n        section: 'pages'\r\n    },\r\n\r\n    {\r\n        id: 'editor',\r\n        label: '├ëditeur',\r\n        icon: Edit3,\r\n        mode: 'edition',\r\n        gradient: 'from-green-500 to-emerald-500',\r\n        description: 'Mode ├®dition',\r\n        section: 'tools'\r\n    },\r\n    {\r\n        id: 'structure',\r\n        label: 'Structure',\r\n        icon: Box,\r\n        mode: 'structure',\r\n        gradient: 'from-violet-500 to-purple-500',\r\n        description: 'R├®organiser les sections',\r\n        section: 'tools'\r\n    },\r\n    {\r\n        id: 'ai',\r\n        label: 'IA',\r\n        icon: Sparkles,\r\n        mode: 'ai',\r\n        gradient: 'from-amber-500 to-orange-500',\r\n        description: 'Optimisation intelligente',\r\n        section: 'tools'\r\n    }\r\n];\r\n\r\nexport const SmartSidebar: React.FC = () => {\r\n    const isMobile = useIsMobile();\r\n    const [isExpanded, setExpanded] = useState(false);\r\n    const [isMobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n    const [hoveredItem, setHoveredItem] = useState<string | null>(null);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const currentMode = useMode();\r\n    const setMode = useSetMode();\r\n\r\n    // Close mobile menu on route change\r\n    useEffect(() => {\r\n        setMobileMenuOpen(false);\r\n    }, [location.pathname]);\r\n\r\n    // Close mobile menu on escape key\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') setMobileMenuOpen(false);\r\n        };\r\n        window.addEventListener('keydown', handleEscape);\r\n        return () => window.removeEventListener('keydown', handleEscape);\r\n    }, []);\r\n\r\n    const handleItemClick = (item: NavItem) => {\r\n        if (item.action === 'openSettings') {\r\n            window.dispatchEvent(new CustomEvent('OPEN_SETTINGS_MODAL'));\r\n        } else if (item.path) {\r\n            navigate(item.path);\r\n        } else if (item.mode) {\r\n            setMode(item.mode);\r\n        }\r\n        // Close mobile menu after clicking\r\n        if (isMobile) setMobileMenuOpen(false);\r\n    };\r\n\r\n    const isActive = (item: NavItem): boolean => {\r\n        if (item.path) {\r\n            return location.pathname === item.path;\r\n        }\r\n        if (item.mode) {\r\n            return currentMode === item.mode;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const isOnTemplatesPage = location.pathname === '/templates';\r\n\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    // MOBILE: Hamburger Menu + Overlay Drawer\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    if (isMobile) {\r\n        return (\r\n            <>\r\n                {/* Hamburger Button - Fixed top-left */}\r\n                <button\r\n                    onClick={() => setMobileMenuOpen(true)}\r\n                    className=\"fixed top-4 left-4 z-50 p-3 bg-slate-900/80 backdrop-blur-lg rounded-xl border border-white/10 text-white shadow-xl\"\r\n                    aria-label=\"Open menu\"\r\n                >\r\n                    <Menu size={24} />\r\n                </button>\r\n\r\n                {/* Overlay backdrop */}\r\n                <AnimatePresence>\r\n                    {isMobileMenuOpen && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            transition={{ duration: 0.2 }}\r\n                            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\r\n                            onClick={() => setMobileMenuOpen(false)}\r\n                        />\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Mobile Drawer */}\r\n                <AnimatePresence>\r\n                    {isMobileMenuOpen && (\r\n                        <motion.div\r\n                            initial={{ x: '-100%' }}\r\n                            animate={{ x: 0 }}\r\n                            exit={{ x: '-100%' }}\r\n                            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\r\n                            className={`fixed top-0 left-0 h-full w-72 z-50 flex flex-col pt-6 pb-6 ${GlassStyles.panel}`}\r\n                        >\r\n                            {/* Header with Close Button */}\r\n                            <div className=\"px-6 mb-6 flex items-center justify-between\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold shadow-lg\">\r\n                                        CV\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"font-bold text-xl bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent\">\r\n                                            Nexal\r\n                                        </span>\r\n                                        <span className=\"text-xs text-slate-400\">AI-Powered</span>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => setMobileMenuOpen(false)}\r\n                                    className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors\"\r\n                                    aria-label=\"Close menu\"\r\n                                >\r\n                                    <X size={24} />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Navigation Items */}\r\n                            <nav className=\"px-3 space-y-1 flex-1 overflow-y-auto\">\r\n                                {NAV_ITEMS.map((item, index) => {\r\n                                    const Icon = item.icon;\r\n                                    const active = isActive(item);\r\n                                    const prevItem = index > 0 ? NAV_ITEMS[index - 1] : null;\r\n                                    const showSeparator = prevItem && prevItem.section !== item.section;\r\n\r\n                                    if (isOnTemplatesPage && item.section === 'tools') return null;\r\n\r\n                                    return (\r\n                                        <React.Fragment key={item.id}>\r\n                                            {showSeparator && (\r\n                                                <div className=\"py-3\">\r\n                                                    <div className=\"h-px bg-gradient-to-r from-transparent via-slate-500 to-transparent\" />\r\n                                                    <div className=\"mt-2 text-[10px] font-bold tracking-wider text-slate-400 uppercase px-4\">\r\n                                                        {item.section === 'tools' ? 'Outils CV' : ''}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <button\r\n                                                onClick={() => handleItemClick(item)}\r\n                                                className={`\r\n                                                    w-full flex items-center gap-4 px-4 py-3.5 rounded-xl\r\n                                                    transition-all duration-200\r\n                                                    ${active\r\n                                                        ? 'bg-gradient-to-r ' + item.gradient + ' text-white shadow-lg'\r\n                                                        : 'text-slate-300 hover:bg-white/10 hover:text-white'\r\n                                                    }\r\n                                                `}\r\n                                            >\r\n                                                <Icon size={22} strokeWidth={active ? 2.5 : 2} />\r\n                                                <div className=\"flex-1 text-left\">\r\n                                                    <div className=\"font-semibold text-sm\">{item.label}</div>\r\n                                                    <div className={`text-xs ${active ? 'text-white/80' : 'text-slate-400'}`}>\r\n                                                        {item.description}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </button>\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </nav>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </>\r\n        );\r\n    }\r\n\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    // DESKTOP: Normal Sidebar with Hover Expand\r\n    // ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n    return (\r\n        <motion.div\r\n            onMouseEnter={() => setExpanded(true)}\r\n            onMouseLeave={() => setExpanded(false)}\r\n            initial={{ width: 80 }}\r\n            animate={{ width: isExpanded ? 280 : 80 }}\r\n            transition={{ type: 'spring', stiffness: 300, damping: 30 }}\r\n            className={`h-screen flex flex-col pt-10 pb-6 sticky top-0 left-0 z-50 ${GlassStyles.panel}`}\r\n        >\r\n            {/* Logo */}\r\n            <div className=\"px-6 mb-8\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {isExpanded ? (\r\n                        <motion.div\r\n                            key=\"expanded\"\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            transition={{ duration: 0.2 }}\r\n                            className=\"flex items-center gap-3\"\r\n                        >\r\n                            <div className=\"w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold shadow-lg\">\r\n                                CV\r\n                            </div>\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"font-bold text-xl bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent\">\r\n                                    Nexal\r\n                                </span>\r\n                                <span className=\"text-xs text-slate-400\">AI-Powered</span>\r\n                            </div>\r\n                        </motion.div>\r\n                    ) : (\r\n                        <motion.div\r\n                            key=\"collapsed\"\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold shadow-lg mx-auto\"\r\n                        >\r\n                            CV\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Navigation Items */}\r\n            <nav className=\"relative mt-4 px-3 space-y-1 flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 hover:scrollbar-thumb-white/20 scrollbar-track-transparent\">\r\n                {NAV_ITEMS.map((item, index) => {\r\n                    const Icon = item.icon;\r\n                    const active = isActive(item);\r\n                    const prevItem = index > 0 ? NAV_ITEMS[index - 1] : null;\r\n                    const showSeparator = prevItem && prevItem.section !== item.section;\r\n\r\n                    return (\r\n                        <React.Fragment key={item.id}>\r\n                            {showSeparator && (\r\n                                <div className=\"py-3\">\r\n                                    <div className=\"h-px bg-gradient-to-r from-transparent via-slate-200 to-transparent\" />\r\n                                    <motion.div\r\n                                        className=\"mt-2 text-[10px] font-bold tracking-wider text-slate-400 uppercase\"\r\n                                        initial={{ opacity: 0 }}\r\n                                        animate={{ opacity: isExpanded ? 1 : 0 }}\r\n                                        transition={{ duration: 0.2 }}\r\n                                    >\r\n                                        {item.section === 'tools' ? 'Outils CV' : ''}\r\n                                    </motion.div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {isOnTemplatesPage && item.section === 'tools' ? null : (\r\n                                <motion.button\r\n                                    onClick={() => handleItemClick(item)}\r\n                                    onMouseEnter={() => setHoveredItem(item.id)}\r\n                                    onMouseLeave={() => setHoveredItem(null)}\r\n                                    className={`\r\n                                    relative w-full flex items-center gap-4 px-4 py-3 rounded-xl\r\n                                    transition-all duration-200 group\r\n                                    ${active\r\n                                            ? 'bg-gradient-to-r ' + item.gradient + ' text-white shadow-lg'\r\n                                            : 'text-slate-400 hover:bg-white/10 hover:text-white'\r\n                                        }\r\n                                `}\r\n                                    whileHover={{ scale: 1.02, x: 2 }}\r\n                                    whileTap={{ scale: 0.98 }}\r\n                                >\r\n                                    <motion.div\r\n                                        className=\"flex-shrink-0\"\r\n                                        animate={{\r\n                                            rotate: hoveredItem === item.id ? [0, -10, 10, 0] : 0\r\n                                        }}\r\n                                        transition={{ duration: 0.3 }}\r\n                                    >\r\n                                        <Icon size={22} strokeWidth={active ? 2.5 : 2} />\r\n                                    </motion.div>\r\n\r\n                                    <AnimatePresence>\r\n                                        {isExpanded && (\r\n                                            <motion.div\r\n                                                className=\"flex-1 text-left\"\r\n                                                initial={{ opacity: 0, x: -10 }}\r\n                                                animate={{ opacity: 1, x: 0 }}\r\n                                                exit={{ opacity: 0, x: -10 }}\r\n                                                transition={{ duration: 0.2, delay: 0.05 }}\r\n                                            >\r\n                                                <div className={`font-semibold text-sm ${active ? 'text-white' : 'text-slate-200 group-hover:text-white'}`}>\r\n                                                    {item.label}\r\n                                                </div>\r\n                                                <div className={`text-xs ${active ? 'text-white/80' : 'text-slate-400 group-hover:text-slate-300'}`}>\r\n                                                    {item.description}\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        )}\r\n                                    </AnimatePresence>\r\n\r\n                                    {active && (\r\n                                        <motion.div\r\n                                            className=\"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-l-full\"\r\n                                            layoutId=\"activeIndicator\"\r\n                                            transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n                                        />\r\n                                    )}\r\n\r\n                                    {!isExpanded && hoveredItem === item.id && (\r\n                                        <motion.div\r\n                                            className=\"absolute left-full ml-4 px-3 py-2 bg-slate-900 text-white text-sm font-medium rounded-lg shadow-xl pointer-events-none whitespace-nowrap z-50\"\r\n                                            initial={{ opacity: 0, x: -10 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: -10 }}\r\n                                        >\r\n                                            {item.label}\r\n                                            <div className=\"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1 w-2 h-2 bg-slate-900 rotate-45\" />\r\n                                        </motion.div>\r\n                                    )}\r\n                                </motion.button>\r\n                            )}\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </nav>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\components\\TemplateConfigurator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used.","line":15,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":25},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":54,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":54,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9273,9276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9273,9276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":217,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9379,9382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9379,9382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10480,10483],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10480,10483],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":237,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10589,10592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10589,10592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11861,11864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11861,11864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":258,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11973,11976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11973,11976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":379,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":379,"endColumn":31}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Template Configurator\r\n * \r\n * Filter-based template selection system with:\r\n * - ATS compatibility toggle\r\n * - Style selector (minimal, classic, bold, creative)\r\n * - Font type (serif, sans, mono)\r\n * - Icons toggle\r\n * - Color scheme picker\r\n * - Industry filter\r\n * \r\n * Shows matching templates in real-time\r\n */\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Filter, Check, Sparkles, FileText, Briefcase, Palette, Type, Grid3X3 } from 'lucide-react';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport interface TemplateFilters {\r\n    atsCompatible: boolean | null;  // null = any\r\n    style: ('minimal' | 'classic' | 'bold' | 'creative')[];\r\n    fontType: ('serif' | 'sans' | 'mono')[];\r\n    hasIcons: boolean | null;\r\n    colorScheme: ('neutral' | 'vibrant' | 'professional')[];\r\n    industry: string[];\r\n}\r\n\r\nexport interface TemplateAttributes {\r\n    atsCompatible: boolean;\r\n    hasIcons: boolean;\r\n    style: 'minimal' | 'classic' | 'bold' | 'creative';\r\n    fontType: 'serif' | 'sans' | 'mono';\r\n    colorScheme: 'neutral' | 'vibrant' | 'professional';\r\n    layout: 'single-column' | 'two-column' | 'sidebar';\r\n    industry: string[];\r\n}\r\n\r\ninterface TemplateConfiguratorProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onFiltersChange: (filters: TemplateFilters) => void;\r\n    currentFilters: TemplateFilters;\r\n    matchCount: number;\r\n}\r\n\r\n// ============================================================================\r\n// DEFAULT FILTERS\r\n// ============================================================================\r\n\r\nexport const DEFAULT_FILTERS: TemplateFilters = {\r\n    atsCompatible: null,\r\n    style: [],\r\n    fontType: [],\r\n    hasIcons: null,\r\n    colorScheme: [],\r\n    industry: []\r\n};\r\n\r\n// ============================================================================\r\n// FILTER OPTIONS\r\n// ============================================================================\r\n\r\nconst STYLE_OPTIONS = [\r\n    { value: 'minimal', label: 'Minimal', icon: 'Ôù»' },\r\n    { value: 'classic', label: 'Classique', icon: 'Ôûó' },\r\n    { value: 'bold', label: 'Bold', icon: 'Ôùå' },\r\n    { value: 'creative', label: 'Cr├®atif', icon: 'Ôÿà' }\r\n];\r\n\r\nconst FONT_OPTIONS = [\r\n    { value: 'sans', label: 'Sans-Serif', preview: 'Aa' },\r\n    { value: 'serif', label: 'Serif', preview: 'Aa' },\r\n    { value: 'mono', label: 'Mono', preview: 'Aa' }\r\n];\r\n\r\nconst COLOR_OPTIONS = [\r\n    { value: 'neutral', label: 'Neutre', colors: ['#374151', '#6b7280'] },\r\n    { value: 'professional', label: 'Pro', colors: ['#1e40af', '#1e3a5f'] },\r\n    { value: 'vibrant', label: 'Vibrant', colors: ['#8b5cf6', '#ec4899'] }\r\n];\r\n\r\nconst INDUSTRY_OPTIONS = [\r\n    { value: 'tech', label: 'Tech' },\r\n    { value: 'finance', label: 'Finance' },\r\n    { value: 'creative', label: 'Cr├®atif' },\r\n    { value: 'legal', label: 'Juridique' },\r\n    { value: 'healthcare', label: 'Sant├®' },\r\n    { value: 'consulting', label: 'Conseil' },\r\n    { value: 'marketing', label: 'Marketing' },\r\n    { value: 'engineering', label: 'Ing├®nierie' }\r\n];\r\n\r\n// ============================================================================\r\n// COMPONENT\r\n// ============================================================================\r\n\r\nexport const TemplateConfigurator: React.FC<TemplateConfiguratorProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    onFiltersChange,\r\n    currentFilters,\r\n    matchCount\r\n}) => {\r\n    const toggleArrayFilter = <T extends string>(\r\n        key: keyof TemplateFilters,\r\n        value: T\r\n    ) => {\r\n        const current = currentFilters[key] as T[];\r\n        const updated = current.includes(value)\r\n            ? current.filter(v => v !== value)\r\n            : [...current, value];\r\n        onFiltersChange({ ...currentFilters, [key]: updated });\r\n    };\r\n\r\n    const toggleBooleanFilter = (key: 'atsCompatible' | 'hasIcons', value: boolean) => {\r\n        const current = currentFilters[key];\r\n        const updated = current === value ? null : value;\r\n        onFiltersChange({ ...currentFilters, [key]: updated });\r\n    };\r\n\r\n    const resetFilters = () => {\r\n        onFiltersChange(DEFAULT_FILTERS);\r\n    };\r\n\r\n    const activeFilterCount = useMemo(() => {\r\n        let count = 0;\r\n        if (currentFilters.atsCompatible !== null) count++;\r\n        if (currentFilters.hasIcons !== null) count++;\r\n        if (currentFilters.style.length > 0) count++;\r\n        if (currentFilters.fontType.length > 0) count++;\r\n        if (currentFilters.colorScheme.length > 0) count++;\r\n        if (currentFilters.industry.length > 0) count++;\r\n        return count;\r\n    }, [currentFilters]);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div\r\n                    className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    onClick={onClose}\r\n                >\r\n                    {/* Backdrop */}\r\n                    <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        className=\"relative bg-slate-900 rounded-2xl shadow-2xl border border-white/10 w-full max-w-2xl max-h-[85vh] overflow-hidden\"\r\n                        initial={{ scale: 0.9, y: 20 }}\r\n                        animate={{ scale: 1, y: 0 }}\r\n                        exit={{ scale: 0.9, y: 20 }}\r\n                        onClick={e => e.stopPropagation()}\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"flex items-center justify-between px-6 py-4 border-b border-white/10\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-purple-500/20 rounded-lg\">\r\n                                    <Filter size={20} className=\"text-purple-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-lg font-bold text-white\">Configurateur de Template</h2>\r\n                                    <p className=\"text-sm text-slate-400\">\r\n                                        {matchCount} template{matchCount !== 1 ? 's' : ''} correspondant{matchCount !== 1 ? 's' : ''}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\r\n                            >\r\n                                <X size={20} className=\"text-slate-400\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"p-6 space-y-6 overflow-y-auto max-h-[60vh]\">\r\n                            {/* ATS Toggle */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <FileText size={16} className=\"text-green-400\" />\r\n                                    <span>Compatibilit├® ATS</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <FilterButton\r\n                                        active={currentFilters.atsCompatible === true}\r\n                                        onClick={() => toggleBooleanFilter('atsCompatible', true)}\r\n                                    >\r\n                                        <Check size={14} /> Compatible ATS\r\n                                    </FilterButton>\r\n                                    <FilterButton\r\n                                        active={currentFilters.atsCompatible === false}\r\n                                        onClick={() => toggleBooleanFilter('atsCompatible', false)}\r\n                                    >\r\n                                        <Sparkles size={14} /> Design avant tout\r\n                                    </FilterButton>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Style */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <Palette size={16} className=\"text-blue-400\" />\r\n                                    <span>Style</span>\r\n                                </div>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {STYLE_OPTIONS.map(opt => (\r\n                                        <FilterButton\r\n                                            key={opt.value}\r\n                                            active={currentFilters.style.includes(opt.value as any)}\r\n                                            onClick={() => toggleArrayFilter('style', opt.value as any)}\r\n                                        >\r\n                                            <span className=\"text-lg mr-1\">{opt.icon}</span>\r\n                                            {opt.label}\r\n                                        </FilterButton>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Font Type */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <Type size={16} className=\"text-amber-400\" />\r\n                                    <span>Police</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    {FONT_OPTIONS.map(opt => (\r\n                                        <FilterButton\r\n                                            key={opt.value}\r\n                                            active={currentFilters.fontType.includes(opt.value as any)}\r\n                                            onClick={() => toggleArrayFilter('fontType', opt.value as any)}\r\n                                            className={opt.value === 'serif' ? 'font-serif' : opt.value === 'mono' ? 'font-mono' : ''}\r\n                                        >\r\n                                            <span className=\"text-lg font-bold mr-1\">{opt.preview}</span>\r\n                                            {opt.label}\r\n                                        </FilterButton>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Color Scheme */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <Grid3X3 size={16} className=\"text-pink-400\" />\r\n                                    <span>Palette de couleurs</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    {COLOR_OPTIONS.map(opt => (\r\n                                        <FilterButton\r\n                                            key={opt.value}\r\n                                            active={currentFilters.colorScheme.includes(opt.value as any)}\r\n                                            onClick={() => toggleArrayFilter('colorScheme', opt.value as any)}\r\n                                        >\r\n                                            <div className=\"flex gap-1 mr-2\">\r\n                                                {opt.colors.map((c, i) => (\r\n                                                    <div\r\n                                                        key={i}\r\n                                                        className=\"w-3 h-3 rounded-full\"\r\n                                                        style={{ backgroundColor: c }}\r\n                                                    />\r\n                                                ))}\r\n                                            </div>\r\n                                            {opt.label}\r\n                                        </FilterButton>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Icons Toggle */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <Sparkles size={16} className=\"text-cyan-400\" />\r\n                                    <span>Ic├┤nes</span>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <FilterButton\r\n                                        active={currentFilters.hasIcons === true}\r\n                                        onClick={() => toggleBooleanFilter('hasIcons', true)}\r\n                                    >\r\n                                        Ô£ô Avec ic├┤nes\r\n                                    </FilterButton>\r\n                                    <FilterButton\r\n                                        active={currentFilters.hasIcons === false}\r\n                                        onClick={() => toggleBooleanFilter('hasIcons', false)}\r\n                                    >\r\n                                        Ô£ò Sans ic├┤nes\r\n                                    </FilterButton>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Industry */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center gap-2 text-white font-semibold\">\r\n                                    <Briefcase size={16} className=\"text-emerald-400\" />\r\n                                    <span>Secteur</span>\r\n                                </div>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {INDUSTRY_OPTIONS.map(opt => (\r\n                                        <FilterButton\r\n                                            key={opt.value}\r\n                                            active={currentFilters.industry.includes(opt.value)}\r\n                                            onClick={() => toggleArrayFilter('industry', opt.value)}\r\n                                            size=\"sm\"\r\n                                        >\r\n                                            {opt.label}\r\n                                        </FilterButton>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"flex items-center justify-between px-6 py-4 border-t border-white/10 bg-slate-900/50\">\r\n                            <button\r\n                                onClick={resetFilters}\r\n                                className=\"text-sm text-slate-400 hover:text-white transition-colors\"\r\n                            >\r\n                                R├®initialiser {activeFilterCount > 0 && `(${activeFilterCount})`}\r\n                            </button>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg hover:shadow-purple-500/25 transition-all\"\r\n                            >\r\n                                Voir {matchCount} r├®sultat{matchCount !== 1 ? 's' : ''}\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// FILTER BUTTON COMPONENT\r\n// ============================================================================\r\n\r\ninterface FilterButtonProps {\r\n    active: boolean;\r\n    onClick: () => void;\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    size?: 'sm' | 'md';\r\n}\r\n\r\nconst FilterButton: React.FC<FilterButtonProps> = ({\r\n    active,\r\n    onClick,\r\n    children,\r\n    className = '',\r\n    size = 'md'\r\n}) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`\r\n            flex items-center gap-1 rounded-lg border transition-all\r\n            ${size === 'sm' ? 'px-3 py-1.5 text-xs' : 'px-4 py-2 text-sm'}\r\n            ${active\r\n                ? 'bg-purple-500/30 border-purple-400 text-purple-200'\r\n                : 'bg-white/5 border-white/10 text-slate-300 hover:border-white/20 hover:bg-white/10'\r\n            }\r\n            ${className}\r\n        `}\r\n    >\r\n        {children}\r\n    </button>\r\n);\r\n\r\n// ============================================================================\r\n// FILTER UTILITY FUNCTION\r\n// ============================================================================\r\n\r\nexport function matchesFilters(\r\n    attributes: TemplateAttributes | undefined,\r\n    filters: TemplateFilters\r\n): boolean {\r\n    if (!attributes) return true; // Legacy templates without attributes match all\r\n\r\n    // ATS check\r\n    if (filters.atsCompatible !== null && attributes.atsCompatible !== filters.atsCompatible) {\r\n        return false;\r\n    }\r\n\r\n    // Icons check\r\n    if (filters.hasIcons !== null && attributes.hasIcons !== filters.hasIcons) {\r\n        return false;\r\n    }\r\n\r\n    // Style check\r\n    if (filters.style.length > 0 && !filters.style.includes(attributes.style)) {\r\n        return false;\r\n    }\r\n\r\n    // Font check\r\n    if (filters.fontType.length > 0 && !filters.fontType.includes(attributes.fontType)) {\r\n        return false;\r\n    }\r\n\r\n    // Color scheme check\r\n    if (filters.colorScheme.length > 0 && !filters.colorScheme.includes(attributes.colorScheme)) {\r\n        return false;\r\n    }\r\n\r\n    // Industry check\r\n    if (filters.industry.length > 0) {\r\n        const hasMatch = filters.industry.some(ind => attributes.industry.includes(ind));\r\n        if (!hasMatch) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport default TemplateConfigurator;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\core\\BaseTemplateLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used.","line":15,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":15,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used.","line":15,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'language' is assigned a value but never used.","line":208,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":208,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":365,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":365,"endColumn":16},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":366,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":366,"endColumn":17},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":367,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":367,"endColumn":16},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":368,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":368,"endColumn":17},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":369,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":369,"endColumn":18},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":370,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":370,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":371,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":371,"endColumn":19},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":372,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":372,"endColumn":20},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":373,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":373,"endColumn":19},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":374,"column":5,"nodeType":"Identifier","messageId":"namedExport","endLine":374,"endColumn":21}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * BaseTemplateLayout - CORE A4 CV Engine\r\n * \r\n * THE SINGLE SOURCE OF TRUTH for all CV templates.\r\n * \r\n * Features:\r\n * - Pixel-perfect A4 (210mm x 297mm)\r\n * - Automatic multi-page splitting\r\n * - JSON-LD Schema.org metadata for ATS\r\n * - Safe zones (15mm margins)\r\n * - Print-optimized CSS\r\n * - Zero visual bugs guarantee\r\n */\r\n\r\nimport React, { useRef, useEffect, useState, useMemo } from 'react';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// CONSTANTS - A4 DIMENSIONS (96 DPI)\r\n// ============================================================================\r\n\r\nconst MM_TO_PX = 3.7795275591; // 1mm = 3.78px at 96 DPI\r\nconst A4_WIDTH_MM = 210;\r\nconst A4_HEIGHT_MM = 297;\r\nconst A4_WIDTH_PX = Math.round(A4_WIDTH_MM * MM_TO_PX);  // 794px\r\nconst A4_HEIGHT_PX = Math.round(A4_HEIGHT_MM * MM_TO_PX); // 1123px\r\n\r\n// Safe zones (printer margins)\r\nconst MARGIN_TOP_MM = 15;\r\nconst MARGIN_BOTTOM_MM = 15;\r\nconst MARGIN_LEFT_MM = 20;\r\nconst MARGIN_RIGHT_MM = 20;\r\n\r\nconst CONTENT_HEIGHT_PX = Math.round((A4_HEIGHT_MM - MARGIN_TOP_MM - MARGIN_BOTTOM_MM) * MM_TO_PX);\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport interface BaseTemplateLayoutProps {\r\n    profile: CVProfile;\r\n    language?: 'en' | 'fr';\r\n\r\n    // Template customization\r\n    accentColor?: string;\r\n    fontFamily?: 'sans' | 'serif' | 'mono';\r\n    density?: 'comfortable' | 'compact' | 'dense';\r\n\r\n    // Render slots\r\n    renderHeader: (props: HeaderRenderProps) => React.ReactNode;\r\n    renderMiniHeader: (props: MiniHeaderRenderProps) => React.ReactNode;\r\n    renderSection: (props: SectionRenderProps) => React.ReactNode;\r\n\r\n    // Section order\r\n    sectionOrder?: string[];\r\n\r\n    // Mode\r\n    mode?: 'view' | 'edit' | 'print';\r\n}\r\n\r\nexport interface HeaderRenderProps {\r\n    profile: CVProfile;\r\n    accentColor: string;\r\n}\r\n\r\nexport interface MiniHeaderRenderProps {\r\n    profile: CVProfile;\r\n    pageNumber: number;\r\n    accentColor: string;\r\n}\r\n\r\nexport interface SectionRenderProps {\r\n    sectionId: string;\r\n    profile: CVProfile;\r\n    accentColor: string;\r\n    isFirstPage: boolean;\r\n}\r\n\r\ninterface PageContent {\r\n    pageIndex: number;\r\n    sectionIds: string[];\r\n    isFirstPage: boolean;\r\n}\r\n\r\n// ============================================================================\r\n// JSON-LD GENERATOR (ATS Metadata)\r\n// ============================================================================\r\n\r\nfunction generateJsonLd(profile: CVProfile): string {\r\n    const jsonLd = {\r\n        \"@context\": \"https://schema.org\",\r\n        \"@type\": \"Person\",\r\n        \"name\": `${profile.personal.firstName} ${profile.personal.lastName}`,\r\n        \"jobTitle\": profile.personal.title,\r\n        \"email\": profile.personal.contact.email,\r\n        \"telephone\": profile.personal.contact.phone,\r\n        \"address\": {\r\n            \"@type\": \"PostalAddress\",\r\n            \"streetAddress\": profile.personal.contact.address\r\n        },\r\n        \"knowsAbout\": profile.skills,\r\n        \"knowsLanguage\": profile.languages.map(l => l.name),\r\n        \"hasOccupation\": profile.experiences.map(exp => ({\r\n            \"@type\": \"Occupation\",\r\n            \"name\": exp.role,\r\n            \"occupationLocation\": {\r\n                \"@type\": \"Organization\",\r\n                \"name\": exp.company\r\n            },\r\n            \"description\": exp.tasks.join('. ')\r\n        })),\r\n        \"alumniOf\": profile.educations.map(edu => ({\r\n            \"@type\": \"EducationalOrganization\",\r\n            \"name\": edu.school\r\n        }))\r\n    };\r\n\r\n    return JSON.stringify(jsonLd);\r\n}\r\n\r\n// ============================================================================\r\n// SECTION HEIGHT ESTIMATOR\r\n// ============================================================================\r\n\r\nconst SECTION_HEIGHTS: Record<string, (profile: CVProfile) => number> = {\r\n    summary: (p) => p.summary ? Math.min(120, 40 + Math.ceil(p.summary.length / 80) * 22) : 0,\r\n    experience: (p) => {\r\n        if (p.experiences.length === 0) return 0;\r\n        return 50 + p.experiences.reduce((acc, exp) => {\r\n            const baseHeight = 70; // Role + company + dates\r\n            const tasksHeight = (exp.tasks?.length || 0) * 24;\r\n            return acc + baseHeight + tasksHeight + 20; // 20px gap\r\n        }, 0);\r\n    },\r\n    education: (p) => {\r\n        if (p.educations.length === 0) return 0;\r\n        return 50 + p.educations.length * 60;\r\n    },\r\n    skills: (p) => {\r\n        if (p.skills.length === 0) return 0;\r\n        const rows = Math.ceil(p.skills.length / 4);\r\n        return 50 + rows * 35;\r\n    },\r\n    languages: (p) => {\r\n        if (p.languages.length === 0) return 0;\r\n        return 50 + p.languages.length * 30;\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// PAGINATION ENGINE\r\n// ============================================================================\r\n\r\nfunction paginateSections(\r\n    profile: CVProfile,\r\n    sectionOrder: string[],\r\n    headerHeight: number = 200,\r\n    miniHeaderHeight: number = 60\r\n): PageContent[] {\r\n    const pages: PageContent[] = [];\r\n    let currentPage: PageContent = { pageIndex: 0, sectionIds: [], isFirstPage: true };\r\n    let currentHeight = headerHeight; // First page has full header\r\n\r\n    const maxHeight = CONTENT_HEIGHT_PX;\r\n\r\n    for (const sectionId of sectionOrder) {\r\n        const estimateHeight = SECTION_HEIGHTS[sectionId];\r\n        if (!estimateHeight) continue;\r\n\r\n        const sectionHeight = estimateHeight(profile);\r\n        if (sectionHeight === 0) continue; // Skip empty sections\r\n\r\n        // Check if section fits on current page\r\n        if (currentHeight + sectionHeight > maxHeight && currentPage.sectionIds.length > 0) {\r\n            // Start new page\r\n            pages.push(currentPage);\r\n            currentPage = {\r\n                pageIndex: pages.length,\r\n                sectionIds: [sectionId],\r\n                isFirstPage: false\r\n            };\r\n            currentHeight = miniHeaderHeight + sectionHeight;\r\n        } else {\r\n            currentPage.sectionIds.push(sectionId);\r\n            currentHeight += sectionHeight;\r\n        }\r\n    }\r\n\r\n    // Add last page\r\n    if (currentPage.sectionIds.length > 0) {\r\n        pages.push(currentPage);\r\n    }\r\n\r\n    // Fallback: at least one page\r\n    if (pages.length === 0) {\r\n        pages.push({ pageIndex: 0, sectionIds: sectionOrder, isFirstPage: true });\r\n    }\r\n\r\n    return pages;\r\n}\r\n\r\n// ============================================================================\r\n// BASE TEMPLATE LAYOUT COMPONENT\r\n// ============================================================================\r\n\r\nexport const BaseTemplateLayout: React.FC<BaseTemplateLayoutProps> = ({\r\n    profile,\r\n    language = 'fr',\r\n    accentColor = '#1e40af',\r\n    fontFamily = 'sans',\r\n    density = 'comfortable',\r\n    renderHeader,\r\n    renderMiniHeader,\r\n    renderSection,\r\n    sectionOrder = ['summary', 'experience', 'education', 'skills', 'languages'],\r\n    mode = 'view'\r\n}) => {\r\n    // Generate pages\r\n    const pages = useMemo(() =>\r\n        paginateSections(profile, sectionOrder),\r\n        [profile, sectionOrder]\r\n    );\r\n\r\n    // Density styles\r\n    const densityStyles = useMemo(() => ({\r\n        fontSize: density === 'dense' ? '11px' : density === 'compact' ? '12px' : '14px',\r\n        lineHeight: density === 'dense' ? '1.3' : density === 'compact' ? '1.4' : '1.5',\r\n        sectionGap: density === 'dense' ? '16px' : density === 'compact' ? '20px' : '28px',\r\n    }), [density]);\r\n\r\n    // Font family\r\n    const fontFamilyStyle = useMemo(() => {\r\n        switch (fontFamily) {\r\n            case 'serif': return \"'Times New Roman', Georgia, serif\";\r\n            case 'mono': return \"'Courier New', monospace\";\r\n            default: return \"'Inter', 'Arial', sans-serif\";\r\n        }\r\n    }, [fontFamily]);\r\n\r\n    return (\r\n        <>\r\n            {/* JSON-LD Metadata for ATS (invisible) */}\r\n            <script\r\n                type=\"application/ld+json\"\r\n                dangerouslySetInnerHTML={{ __html: generateJsonLd(profile) }}\r\n            />\r\n\r\n            {/* Pages Container */}\r\n            <div\r\n                className=\"base-template-container\"\r\n                style={{\r\n                    fontFamily: fontFamilyStyle,\r\n                    fontSize: densityStyles.fontSize,\r\n                    lineHeight: densityStyles.lineHeight,\r\n                    color: '#1f2937',\r\n                    WebkitFontSmoothing: 'antialiased',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: mode !== 'print' ? '40px' : '0',\r\n                    alignItems: 'center',\r\n                }}\r\n            >\r\n                {pages.map((page, idx) => (\r\n                    <div\r\n                        key={page.pageIndex}\r\n                        className=\"cv-page\"\r\n                        style={{\r\n                            width: `${A4_WIDTH_MM}mm`,\r\n                            height: `${A4_HEIGHT_MM}mm`,\r\n                            minHeight: `${A4_HEIGHT_MM}mm`,\r\n                            maxHeight: `${A4_HEIGHT_MM}mm`,\r\n                            padding: `${MARGIN_TOP_MM}mm ${MARGIN_RIGHT_MM}mm ${MARGIN_BOTTOM_MM}mm ${MARGIN_LEFT_MM}mm`,\r\n                            backgroundColor: 'white',\r\n                            boxSizing: 'border-box',\r\n                            overflow: 'hidden',\r\n                            position: 'relative',\r\n                            boxShadow: mode !== 'print' ? '0 4px 20px rgba(0,0,0,0.15)' : 'none',\r\n                            borderRadius: mode !== 'print' ? '8px' : '0',\r\n                            pageBreakAfter: idx < pages.length - 1 ? 'always' : 'auto',\r\n                            pageBreakInside: 'avoid',\r\n                            flexShrink: 0,\r\n                        }}\r\n                    >\r\n                        {/* Header */}\r\n                        {page.isFirstPage ? (\r\n                            renderHeader({ profile, accentColor })\r\n                        ) : (\r\n                            renderMiniHeader({ profile, pageNumber: page.pageIndex + 1, accentColor })\r\n                        )}\r\n\r\n                        {/* Sections */}\r\n                        <div\r\n                            className=\"cv-sections\"\r\n                            style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                gap: densityStyles.sectionGap,\r\n                                marginTop: page.isFirstPage ? '24px' : '16px'\r\n                            }}\r\n                        >\r\n                            {page.sectionIds.map(sectionId => (\r\n                                <div key={sectionId} className={`cv-section cv-section-${sectionId}`}>\r\n                                    {renderSection({\r\n                                        sectionId,\r\n                                        profile,\r\n                                        accentColor,\r\n                                        isFirstPage: page.isFirstPage\r\n                                    })}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Page Number (bottom right) */}\r\n                        {pages.length > 1 && (\r\n                            <div\r\n                                style={{\r\n                                    position: 'absolute',\r\n                                    bottom: '10mm',\r\n                                    right: '15mm',\r\n                                    fontSize: '10px',\r\n                                    color: '#9ca3af'\r\n                                }}\r\n                            >\r\n                                {page.pageIndex + 1} / {pages.length}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Print Styles */}\r\n            <style>{`\r\n                @media print {\r\n                    .base-template-container {\r\n                        margin: 0;\r\n                        padding: 0;\r\n                    }\r\n                    .cv-page {\r\n                        margin: 0 !important;\r\n                        box-shadow: none !important;\r\n                        page-break-after: always;\r\n                        page-break-inside: avoid;\r\n                    }\r\n                    .cv-page:last-child {\r\n                        page-break-after: auto;\r\n                    }\r\n                }\r\n                \r\n                @page {\r\n                    size: A4;\r\n                    margin: 0;\r\n                }\r\n            `}</style>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default BaseTemplateLayout;\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\nexport {\r\n    A4_WIDTH_MM,\r\n    A4_HEIGHT_MM,\r\n    A4_WIDTH_PX,\r\n    A4_HEIGHT_PX,\r\n    MARGIN_TOP_MM,\r\n    MARGIN_BOTTOM_MM,\r\n    MARGIN_LEFT_MM,\r\n    MARGIN_RIGHT_MM,\r\n    generateJsonLd,\r\n    paginateSections\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\factory\\DynamicTemplateRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\factory\\TemplateFactory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2227,2230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2227,2230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CV Templates Registry\r\n * \r\n * Central registry of all available CV templates.\r\n * Used by TemplateGallery for the carousel.\r\n */\r\n\r\nimport React from 'react';\r\n\r\n// ATS-First Templates (Batch 1)\r\nimport { ATSClassicTemplate, ATSClassicMeta } from './templates/ATSClassicTemplate';\r\nimport { ATSModernTemplate, ATSModernMeta } from './templates/ATSModernTemplate';\r\nimport { ATSMinimalTemplate, ATSMinimalMeta } from './templates/ATSMinimalTemplate';\r\n\r\n// Business Templates (Batch 2)\r\nimport { SwissExecutiveTemplate, SwissExecutiveMeta } from './templates/SwissExecutiveTemplate';\r\nimport { ConsultantTemplate, ConsultantMeta } from './templates/ConsultantTemplate';\r\nimport { BankerTemplate, BankerMeta } from './templates/BankerTemplate';\r\nimport { LegalTemplate, LegalMeta } from './templates/LegalTemplate';\r\n\r\n// Creative & Tech Templates (Batch 3)\r\nimport { CreativePortfolioTemplate, CreativePortfolioMeta } from './templates/CreativePortfolioTemplate';\r\nimport { DevStackTemplate, DevStackMeta } from './templates/DevStackTemplate';\r\nimport { StartupFounderTemplate, StartupFounderMeta } from './templates/StartupFounderTemplate';\r\n\r\n// Specialized Templates (Batch 4)\r\nimport { HealthcareProTemplate, HealthcareProMeta } from './templates/HealthcareProTemplate';\r\nimport { AcademicCVTemplate, AcademicCVMeta } from './templates/AcademicCVTemplate';\r\n\r\n// Legacy V2 Templates (keeping for backwards compatibility)\r\nimport ModernTemplateV2 from '../layouts/templates/v2/ModernTemplate.v2';\r\nimport { ClassicTemplate } from '../layouts/templates/v2/ClassicTemplate';\r\nimport { ExecutiveTemplate } from '../layouts/templates/v2/ExecutiveTemplate';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport interface TemplateMetadata {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    category: 'ats-first' | 'business' | 'creative' | 'tech' | 'specialized' | 'legacy';\r\n    tags: string[];\r\n    thumbnail?: string;\r\n    isPremium?: boolean;\r\n    isNew?: boolean;\r\n}\r\n\r\nexport interface TemplateEntry {\r\n    meta: TemplateMetadata;\r\n    component: React.ComponentType<any>;\r\n}\r\n\r\n// ============================================================================\r\n// TEMPLATE REGISTRY\r\n// ============================================================================\r\n\r\nexport const TEMPLATE_REGISTRY: Record<string, TemplateEntry> = {\r\n    // ========== ATS-FIRST (Batch 1) ==========\r\n    'ats-classic': {\r\n        meta: { ...ATSClassicMeta, category: 'ats-first' as const },\r\n        component: ATSClassicTemplate\r\n    },\r\n    'ats-modern': {\r\n        meta: { ...ATSModernMeta, category: 'ats-first' as const },\r\n        component: ATSModernTemplate\r\n    },\r\n    'ats-minimal': {\r\n        meta: { ...ATSMinimalMeta, category: 'ats-first' as const },\r\n        component: ATSMinimalTemplate\r\n    },\r\n\r\n    // ========== BUSINESS (Batch 2) ==========\r\n    'swiss-executive': {\r\n        meta: { ...SwissExecutiveMeta, category: 'business' as const, isNew: true },\r\n        component: SwissExecutiveTemplate\r\n    },\r\n    'consultant': {\r\n        meta: { ...ConsultantMeta, category: 'business' as const, isNew: true },\r\n        component: ConsultantTemplate\r\n    },\r\n    'banker': {\r\n        meta: { ...BankerMeta, category: 'business' as const, isNew: true },\r\n        component: BankerTemplate\r\n    },\r\n    'legal': {\r\n        meta: { ...LegalMeta, category: 'business' as const, isNew: true },\r\n        component: LegalTemplate\r\n    },\r\n\r\n    // ========== CREATIVE & TECH (Batch 3) ==========\r\n    'creative-portfolio': {\r\n        meta: { ...CreativePortfolioMeta, category: 'creative' as const, isNew: true },\r\n        component: CreativePortfolioTemplate\r\n    },\r\n    'devstack': {\r\n        meta: { ...DevStackMeta, category: 'tech' as const, isNew: true },\r\n        component: DevStackTemplate\r\n    },\r\n    'startup-founder': {\r\n        meta: { ...StartupFounderMeta, category: 'creative' as const, isNew: true },\r\n        component: StartupFounderTemplate\r\n    },\r\n\r\n    // ========== SPECIALIZED (Batch 4) ==========\r\n    'healthcare-pro': {\r\n        meta: { ...HealthcareProMeta, category: 'specialized' as const, isNew: true },\r\n        component: HealthcareProTemplate\r\n    },\r\n    'academic-cv': {\r\n        meta: { ...AcademicCVMeta, category: 'specialized' as const, isNew: true },\r\n        component: AcademicCVTemplate\r\n    },\r\n\r\n    // ========== LEGACY V2 ==========\r\n    'modern': {\r\n        meta: {\r\n            id: 'modern',\r\n            name: 'Modern Swiss',\r\n            description: 'Elegant Swiss design with gradient header',\r\n            category: 'legacy',\r\n            tags: ['modern', 'swiss', 'elegant'],\r\n            isPremium: true\r\n        },\r\n        component: ModernTemplateV2\r\n    },\r\n    'classic': {\r\n        meta: {\r\n            id: 'classic',\r\n            name: 'Classic',\r\n            description: 'Traditional professional layout',\r\n            category: 'legacy',\r\n            tags: ['classic', 'traditional', 'professional']\r\n        },\r\n        component: ClassicTemplate\r\n    },\r\n    'executive': {\r\n        meta: {\r\n            id: 'executive',\r\n            name: 'Executive',\r\n            description: 'Premium executive-level template',\r\n            category: 'legacy',\r\n            tags: ['executive', 'premium', 'senior'],\r\n            isPremium: true\r\n        },\r\n        component: ExecutiveTemplate\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// HELPER FUNCTIONS\r\n// ============================================================================\r\n\r\n/**\r\n * Get template by ID\r\n */\r\nexport function getTemplateById(id: string): TemplateEntry | undefined {\r\n    return TEMPLATE_REGISTRY[id];\r\n}\r\n\r\n/**\r\n * Get all templates\r\n */\r\nexport function getAllTemplates(): TemplateEntry[] {\r\n    return Object.values(TEMPLATE_REGISTRY);\r\n}\r\n\r\n/**\r\n * Get templates by category\r\n */\r\nexport function getTemplatesByCategory(category: TemplateMetadata['category']): TemplateEntry[] {\r\n    return Object.values(TEMPLATE_REGISTRY).filter(t => t.meta.category === category);\r\n}\r\n\r\n/**\r\n * Get recommended order for display (ATS first, then others)\r\n */\r\nexport function getTemplatesInOrder(): TemplateEntry[] {\r\n    const order = ['ats-first', 'business', 'creative', 'specialized', 'legacy'];\r\n    return getAllTemplates().sort((a, b) => {\r\n        return order.indexOf(a.meta.category) - order.indexOf(b.meta.category);\r\n    });\r\n}\r\n\r\n/**\r\n * Get new templates (marked with isNew)\r\n */\r\nexport function getNewTemplates(): TemplateEntry[] {\r\n    return getAllTemplates().filter(t => t.meta.isNew);\r\n}\r\n\r\n// ============================================================================\r\n// DEFAULT EXPORT\r\n// ============================================================================\r\n\r\nexport default TEMPLATE_REGISTRY;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\sections\\ATSSections.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_pageNumber' is defined but never used.","line":581,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ATS Section Components\r\n * \r\n * Modular, reusable sections for ATS-First templates.\r\n * Each section is a standalone component with:\r\n * - ATS-safe markup (no complex CSS)\r\n * - Overflow protection\r\n * - Consistent styling\r\n */\r\n\r\nimport React from 'react';\r\nimport type { CVProfile, Experience, Education, Language } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// SHARED TYPES\r\n// ============================================================================\r\n\r\ninterface SectionProps {\r\n    accentColor?: string;\r\n    fontWeight?: 'normal' | 'bold';\r\n}\r\n\r\n// ============================================================================\r\n// SECTION HEADER (ATS-Safe)\r\n// ============================================================================\r\n\r\ninterface SectionHeaderProps {\r\n    title: string;\r\n    accentColor?: string;\r\n    variant?: 'underline' | 'background' | 'simple';\r\n}\r\n\r\nexport const ATSSectionHeader: React.FC<SectionHeaderProps> = ({\r\n    title,\r\n    accentColor = '#1e40af',\r\n    variant = 'underline'\r\n}) => {\r\n    if (variant === 'background') {\r\n        return (\r\n            <h2 style={{\r\n                fontSize: '13px',\r\n                fontWeight: 700,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '1px',\r\n                color: 'white',\r\n                backgroundColor: accentColor,\r\n                padding: '6px 12px',\r\n                marginBottom: '12px'\r\n            }}>\r\n                {title}\r\n            </h2>\r\n        );\r\n    }\r\n\r\n    if (variant === 'simple') {\r\n        return (\r\n            <h2 style={{\r\n                fontSize: '14px',\r\n                fontWeight: 700,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#111827',\r\n                marginBottom: '10px'\r\n            }}>\r\n                {title}\r\n            </h2>\r\n        );\r\n    }\r\n\r\n    // Default: underline\r\n    return (\r\n        <h2 style={{\r\n            fontSize: '13px',\r\n            fontWeight: 700,\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '1px',\r\n            color: '#111827',\r\n            borderBottom: `2px solid ${accentColor}`,\r\n            paddingBottom: '6px',\r\n            marginBottom: '12px'\r\n        }}>\r\n            {title}\r\n        </h2>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// SUMMARY SECTION\r\n// ============================================================================\r\n\r\ninterface SummarySectionProps extends SectionProps {\r\n    summary: string;\r\n    showHeader?: boolean;\r\n}\r\n\r\nexport const ATSSummarySection: React.FC<SummarySectionProps> = ({\r\n    summary,\r\n    accentColor = '#1e40af',\r\n    showHeader = true\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section>\r\n            {showHeader && <ATSSectionHeader title=\"Profil\" accentColor={accentColor} />}\r\n            <p style={{\r\n                fontSize: 'inherit',\r\n                lineHeight: 'inherit',\r\n                color: '#374151',\r\n                textAlign: 'justify',\r\n                margin: 0\r\n            }}>\r\n                {summary}\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// EXPERIENCE SECTION\r\n// ============================================================================\r\n\r\ninterface ExperienceSectionProps extends SectionProps {\r\n    experiences: Experience[];\r\n    labels?: { experience: string };\r\n}\r\n\r\nexport const ATSExperienceSection: React.FC<ExperienceSectionProps> = ({\r\n    experiences,\r\n    accentColor = '#1e40af',\r\n    labels = { experience: 'Exp├®rience Professionnelle' }\r\n}) => {\r\n    if (!experiences || experiences.length === 0) return null;\r\n\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader title={labels.experience} accentColor={accentColor} />\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                {experiences.map((exp) => (\r\n                    <div key={exp.id}>\r\n                        {/* Role & Company Row */}\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'baseline',\r\n                            flexWrap: 'wrap',\r\n                            gap: '8px',\r\n                            marginBottom: '4px'\r\n                        }}>\r\n                            <div>\r\n                                <span style={{\r\n                                    fontWeight: 700,\r\n                                    color: '#111827',\r\n                                    fontSize: '14px'\r\n                                }}>\r\n                                    {exp.role}\r\n                                </span>\r\n                                <span style={{\r\n                                    color: accentColor,\r\n                                    fontWeight: 600,\r\n                                    marginLeft: '8px',\r\n                                    fontSize: '13px'\r\n                                }}>\r\n                                    {exp.company}\r\n                                </span>\r\n                                {exp.location && (\r\n                                    <span style={{\r\n                                        color: '#6b7280',\r\n                                        marginLeft: '8px',\r\n                                        fontSize: '12px'\r\n                                    }}>\r\n                                        {exp.location}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <span style={{\r\n                                color: '#6b7280',\r\n                                fontSize: '12px',\r\n                                fontStyle: 'italic',\r\n                                whiteSpace: 'nowrap'\r\n                            }}>\r\n                                {exp.dates}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Tasks */}\r\n                        {exp.tasks && exp.tasks.length > 0 && (\r\n                            <ul style={{\r\n                                margin: '6px 0 0 0',\r\n                                paddingLeft: '20px',\r\n                                listStyleType: 'disc'\r\n                            }}>\r\n                                {exp.tasks.map((task, taskIdx) => (\r\n                                    <li\r\n                                        key={taskIdx}\r\n                                        style={{\r\n                                            color: '#374151',\r\n                                            marginBottom: '3px',\r\n                                            fontSize: '13px',\r\n                                            lineHeight: '1.5'\r\n                                        }}\r\n                                    >\r\n                                        {task}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// EDUCATION SECTION\r\n// ============================================================================\r\n\r\ninterface EducationSectionProps extends SectionProps {\r\n    educations: Education[];\r\n    labels?: { education: string };\r\n}\r\n\r\nexport const ATSEducationSection: React.FC<EducationSectionProps> = ({\r\n    educations,\r\n    accentColor = '#1e40af',\r\n    labels = { education: 'Formation' }\r\n}) => {\r\n    if (!educations || educations.length === 0) return null;\r\n\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader title={labels.education} accentColor={accentColor} />\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n                {educations.map((edu) => (\r\n                    <div key={edu.id} style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'baseline',\r\n                        flexWrap: 'wrap',\r\n                        gap: '8px'\r\n                    }}>\r\n                        <div>\r\n                            <span style={{ fontWeight: 700, color: '#111827' }}>\r\n                                {edu.degree}\r\n                            </span>\r\n                            <span style={{\r\n                                color: accentColor,\r\n                                marginLeft: '8px',\r\n                                fontWeight: 500\r\n                            }}>\r\n                                {edu.school}\r\n                            </span>\r\n                        </div>\r\n                        <span style={{\r\n                            color: '#6b7280',\r\n                            fontSize: '12px',\r\n                            fontStyle: 'italic'\r\n                        }}>\r\n                            {edu.year}\r\n                        </span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// SKILLS SECTION (No overflow - flex wrap)\r\n// ============================================================================\r\n\r\ninterface SkillsSectionProps extends SectionProps {\r\n    skills: string[];\r\n    variant?: 'pills' | 'list' | 'inline';\r\n    labels?: { skills: string };\r\n}\r\n\r\nexport const ATSSkillsSection: React.FC<SkillsSectionProps> = ({\r\n    skills,\r\n    accentColor = '#1e40af',\r\n    variant = 'pills',\r\n    labels = { skills: 'Comp├®tences' }\r\n}) => {\r\n    if (!skills || skills.length === 0) return null;\r\n\r\n    if (variant === 'list') {\r\n        return (\r\n            <section>\r\n                <ATSSectionHeader title={labels.skills} accentColor={accentColor} />\r\n                <ul style={{\r\n                    margin: 0,\r\n                    paddingLeft: '20px',\r\n                    columns: skills.length > 8 ? 2 : 1,\r\n                    columnGap: '24px'\r\n                }}>\r\n                    {skills.map((skill, idx) => (\r\n                        <li key={idx} style={{\r\n                            color: '#374151',\r\n                            marginBottom: '4px',\r\n                            fontSize: '13px'\r\n                        }}>\r\n                            {skill}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n        );\r\n    }\r\n\r\n    if (variant === 'inline') {\r\n        return (\r\n            <section>\r\n                <ATSSectionHeader title={labels.skills} accentColor={accentColor} />\r\n                <p style={{ margin: 0, color: '#374151', lineHeight: 1.6 }}>\r\n                    {skills.join(' ÔÇó ')}\r\n                </p>\r\n            </section>\r\n        );\r\n    }\r\n\r\n    // Default: pills (with safe wrapping)\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader title={labels.skills} accentColor={accentColor} />\r\n            <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: '8px',\r\n                maxWidth: '100%'\r\n            }}>\r\n                {skills.map((skill, idx) => (\r\n                    <span\r\n                        key={idx}\r\n                        style={{\r\n                            display: 'inline-block',\r\n                            padding: '4px 12px',\r\n                            backgroundColor: `${accentColor}15`,\r\n                            color: accentColor,\r\n                            borderRadius: '4px',\r\n                            fontSize: '12px',\r\n                            fontWeight: 500,\r\n                            whiteSpace: 'nowrap'\r\n                        }}\r\n                    >\r\n                        {skill}\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// LANGUAGES SECTION\r\n// ============================================================================\r\n\r\ninterface LanguagesSectionProps extends SectionProps {\r\n    languages: Language[];\r\n    variant?: 'bars' | 'text' | 'inline';\r\n    labels?: { languages: string };\r\n}\r\n\r\nconst LEVEL_TO_PERCENT: Record<string, number> = {\r\n    'Native': 100,\r\n    'Natif': 100,\r\n    'Langue maternelle': 100,\r\n    'Fluent': 90,\r\n    'Courant': 90,\r\n    'Professional': 80,\r\n    'Professionnel': 80,\r\n    'B2': 70,\r\n    'Intermediate': 60,\r\n    'Interm├®diaire': 60,\r\n    'B1': 60,\r\n    'Basic': 40,\r\n    'D├®butant': 40,\r\n    'A2': 40,\r\n    'A1': 20\r\n};\r\n\r\nexport const ATSLanguagesSection: React.FC<LanguagesSectionProps> = ({\r\n    languages,\r\n    accentColor = '#1e40af',\r\n    variant = 'text',\r\n    labels = { languages: 'Langues' }\r\n}) => {\r\n    if (!languages || languages.length === 0) return null;\r\n\r\n    if (variant === 'bars') {\r\n        return (\r\n            <section>\r\n                <ATSSectionHeader title={labels.languages} accentColor={accentColor} />\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                    {languages.map((lang, idx) => {\r\n                        const percent = LEVEL_TO_PERCENT[lang.level] || 50;\r\n                        return (\r\n                            <div key={idx}>\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    marginBottom: '4px'\r\n                                }}>\r\n                                    <span style={{ fontWeight: 600, color: '#111827', fontSize: '13px' }}>\r\n                                        {lang.name}\r\n                                    </span>\r\n                                    <span style={{ color: '#6b7280', fontSize: '12px' }}>\r\n                                        {lang.level}\r\n                                    </span>\r\n                                </div>\r\n                                <div style={{\r\n                                    width: '100%',\r\n                                    height: '6px',\r\n                                    backgroundColor: '#e5e7eb',\r\n                                    borderRadius: '3px',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    <div style={{\r\n                                        width: `${percent}%`,\r\n                                        height: '100%',\r\n                                        backgroundColor: accentColor,\r\n                                        borderRadius: '3px'\r\n                                    }} />\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n\r\n    if (variant === 'inline') {\r\n        return (\r\n            <section>\r\n                <ATSSectionHeader title={labels.languages} accentColor={accentColor} />\r\n                <p style={{ margin: 0, color: '#374151' }}>\r\n                    {languages.map(l => `${l.name} (${l.level})`).join(' ÔÇó ')}\r\n                </p>\r\n            </section>\r\n        );\r\n    }\r\n\r\n    // Default: text list\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader title={labels.languages} accentColor={accentColor} />\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\r\n                {languages.map((lang, idx) => (\r\n                    <div key={idx} style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <span style={{ fontWeight: 600, color: '#111827', fontSize: '13px' }}>\r\n                            {lang.name}\r\n                        </span>\r\n                        <span style={{\r\n                            color: '#6b7280',\r\n                            fontSize: '12px',\r\n                            fontStyle: 'italic'\r\n                        }}>\r\n                            {lang.level}\r\n                        </span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// CONTACT HEADER\r\n// ============================================================================\r\n\r\ninterface ContactHeaderProps {\r\n    profile: CVProfile;\r\n    accentColor?: string;\r\n    variant?: 'centered' | 'left' | 'split';\r\n}\r\n\r\nexport const ATSContactHeader: React.FC<ContactHeaderProps> = ({\r\n    profile,\r\n    accentColor = '#1e40af',\r\n    variant = 'centered'\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    const contactItems = [\r\n        personal.contact.email,\r\n        personal.contact.phone,\r\n        personal.contact.address\r\n    ].filter(Boolean);\r\n\r\n    return (\r\n        <header style={{ marginBottom: '20px' }}>\r\n            {/* Name */}\r\n            <h1 style={{\r\n                fontSize: '28px',\r\n                fontWeight: 700,\r\n                color: '#111827',\r\n                margin: '0 0 4px 0',\r\n                textAlign: variant === 'centered' ? 'center' : 'left',\r\n                letterSpacing: '-0.5px'\r\n            }}>\r\n                {personal.firstName} {personal.lastName}\r\n            </h1>\r\n\r\n            {/* Title */}\r\n            <h2 style={{\r\n                fontSize: '16px',\r\n                fontWeight: 500,\r\n                color: accentColor,\r\n                margin: '0 0 12px 0',\r\n                textAlign: variant === 'centered' ? 'center' : 'left'\r\n            }}>\r\n                {personal.title}\r\n            </h2>\r\n\r\n            {/* Contact Info */}\r\n            <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: '12px',\r\n                justifyContent: variant === 'centered' ? 'center' : 'flex-start',\r\n                fontSize: '12px',\r\n                color: '#4b5563'\r\n            }}>\r\n                {contactItems.map((item, idx) => (\r\n                    <span key={idx}>\r\n                        {item}\r\n                        {idx < contactItems.length - 1 && (\r\n                            <span style={{ marginLeft: '12px', color: '#d1d5db' }}>|</span>\r\n                        )}\r\n                    </span>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Personal Info (optional) */}\r\n            {(personal.birthDate || personal.nationality || personal.permit) && (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexWrap: 'wrap',\r\n                    gap: '12px',\r\n                    justifyContent: variant === 'centered' ? 'center' : 'flex-start',\r\n                    fontSize: '11px',\r\n                    color: '#6b7280',\r\n                    marginTop: '6px'\r\n                }}>\r\n                    {personal.birthDate && <span>{personal.birthDate}</span>}\r\n                    {personal.nationality && <span>{personal.nationality}</span>}\r\n                    {personal.permit && (\r\n                        <span style={{\r\n                            backgroundColor: `${accentColor}20`,\r\n                            color: accentColor,\r\n                            padding: '2px 8px',\r\n                            borderRadius: '3px',\r\n                            fontWeight: 500\r\n                        }}>\r\n                            {personal.permit}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// MINI HEADER (Page 2+)\r\n// ============================================================================\r\n\r\ninterface MiniHeaderProps {\r\n    profile: CVProfile;\r\n    pageNumber: number;\r\n    accentColor?: string;\r\n}\r\n\r\nexport const ATSMiniHeader: React.FC<MiniHeaderProps> = ({\r\n    profile,\r\n    pageNumber: _pageNumber,\r\n    accentColor = '#1e40af'\r\n}) => {\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            borderBottom: `2px solid ${accentColor}`,\r\n            paddingBottom: '8px',\r\n            marginBottom: '16px'\r\n        }}>\r\n            <span style={{ fontWeight: 700, color: '#111827', fontSize: '14px' }}>\r\n                {profile.personal.firstName} {profile.personal.lastName}\r\n            </span>\r\n            <span style={{ color: '#6b7280', fontSize: '12px', fontStyle: 'italic' }}>\r\n                ÔÇö Suite\r\n            </span>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\ATSClassicTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":32,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":32,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ATS Classic Template\r\n * \r\n * THE MOST ATS-COMPATIBLE TEMPLATE\r\n * \r\n * Features:\r\n * - Times New Roman (most ATS-friendly font)\r\n * - Single column layout\r\n * - Black & white only\r\n * - Zero graphics/icons\r\n * - Maximum text density\r\n * - 100% parsing rate guaranteed\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSContactHeader,\r\n    ATSMiniHeader,\r\n    ATSSummarySection,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const ATSClassicMeta = {\r\n    id: 'ats-classic',\r\n    name: 'ATS Classic',\r\n    description: 'Maximum ATS compatibility. Times New Roman, single column, zero graphics.',\r\n    category: 'ats-first',\r\n    tags: ['ats', 'classic', 'traditional', 'safe'],\r\n    thumbnail: '/templates/ats-classic.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience Professionnelle',\r\n    education: 'Formation',\r\n    skills: 'Comp├®tences',\r\n    languages: 'Langues',\r\n    summary: 'Profil'\r\n};\r\n\r\nconst LABELS_EN = {\r\n    experience: 'Professional Experience',\r\n    education: 'Education',\r\n    skills: 'Skills',\r\n    languages: 'Languages',\r\n    summary: 'Profile'\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface ATSClassicTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const ATSClassicTemplate: React.FC<ATSClassicTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = language === 'fr' ? LABELS_FR : LABELS_EN;\r\n\r\n    // Pure black accent for maximum ATS compatibility\r\n    const accentColor = '#000000';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"serif\" // Times New Roman\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            // Header Renderer\r\n            renderHeader={({ profile }) => (\r\n                <ATSContactHeader\r\n                    profile={profile}\r\n                    accentColor={accentColor}\r\n                    variant=\"centered\"\r\n                />\r\n            )}\r\n\r\n            // Mini Header Renderer (Page 2+)\r\n            renderMiniHeader={({ profile, pageNumber }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            // Section Renderer\r\n            renderSection={({ sectionId, profile }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ATSSummarySection\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\" // Simple list for ATS\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\" // Text only for ATS\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ATSClassicTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\ATSMinimalTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ATS Minimal Template\r\n * \r\n * ULTRA-MINIMALIST ATS TEMPLATE\r\n * \r\n * Features:\r\n * - Maximum content density\r\n * - Compact spacing\r\n * - Simple section headers\r\n * - Inline skills (no pills)\r\n * - Perfect for senior profiles with lots of content\r\n * - Fits more on one page\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const ATSMinimalMeta = {\r\n    id: 'ats-minimal',\r\n    name: 'ATS Minimal',\r\n    description: 'Ultra-compact design. Maximum content on minimum pages. Perfect for senior profiles.',\r\n    category: 'ats-first',\r\n    tags: ['ats', 'minimal', 'compact', 'senior'],\r\n    thumbnail: '/templates/ats-minimal.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'EXP├ëRIENCE',\r\n    education: 'FORMATION',\r\n    skills: 'COMP├ëTENCES',\r\n    languages: 'LANGUES',\r\n    summary: 'PROFIL'\r\n};\r\n\r\nconst LABELS_EN = {\r\n    experience: 'EXPERIENCE',\r\n    education: 'EDUCATION',\r\n    skills: 'SKILLS',\r\n    languages: 'LANGUAGES',\r\n    summary: 'PROFILE'\r\n};\r\n\r\n// ============================================================================\r\n// COMPACT HEADER\r\n// ============================================================================\r\n\r\nconst CompactHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    const contactLine = [\r\n        personal.contact.email,\r\n        personal.contact.phone,\r\n        personal.contact.address\r\n    ].filter(Boolean).join(' | ');\r\n\r\n    return (\r\n        <header style={{ marginBottom: '16px' }}>\r\n            {/* Name & Title on same line */}\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'baseline',\r\n                gap: '12px',\r\n                marginBottom: '8px',\r\n                flexWrap: 'wrap'\r\n            }}>\r\n                <h1 style={{\r\n                    fontSize: '22px',\r\n                    fontWeight: 700,\r\n                    color: '#111827',\r\n                    margin: 0,\r\n                    letterSpacing: '-0.3px'\r\n                }}>\r\n                    {personal.firstName} {personal.lastName}\r\n                </h1>\r\n                <span style={{\r\n                    fontSize: '14px',\r\n                    color: accentColor,\r\n                    fontWeight: 500\r\n                }}>\r\n                    {personal.title}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Contact - Single line */}\r\n            <div style={{\r\n                fontSize: '11px',\r\n                color: '#4b5563',\r\n                borderBottom: `1px solid ${accentColor}`,\r\n                paddingBottom: '8px'\r\n            }}>\r\n                {contactLine}\r\n                {(personal.birthDate || personal.nationality || personal.permit) && (\r\n                    <span style={{ marginLeft: '12px' }}>\r\n                        {[personal.birthDate, personal.nationality, personal.permit].filter(Boolean).join(' | ')}\r\n                    </span>\r\n                )}\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// COMPACT MINI HEADER\r\n// ============================================================================\r\n\r\nconst CompactMiniHeader: React.FC<{ profile: CVProfile; pageNumber: number; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    return (\r\n        <div style={{\r\n            fontSize: '11px',\r\n            color: '#6b7280',\r\n            borderBottom: `1px solid ${accentColor}`,\r\n            paddingBottom: '6px',\r\n            marginBottom: '12px',\r\n            display: 'flex',\r\n            justifyContent: 'space-between'\r\n        }}>\r\n            <span>{profile.personal.firstName} {profile.personal.lastName}</span>\r\n            <span>Suite</span>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface ATSMinimalTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const ATSMinimalTemplate: React.FC<ATSMinimalTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = language === 'fr' ? LABELS_FR : LABELS_EN;\r\n\r\n    // Subtle gray accent for ultra-minimal look\r\n    const accentColor = '#374151';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\"\r\n            density=\"dense\" // Maximum density\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            // Compact Header\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <CompactHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            // Compact Mini Header\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <CompactMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            // Section Renderer - All using simple variant\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return profile.summary ? (\r\n                            <section>\r\n                                <ATSSectionHeader\r\n                                    title={labels.summary}\r\n                                    accentColor={accentColor}\r\n                                    variant=\"simple\"\r\n                                />\r\n                                <p style={{\r\n                                    fontSize: '12px',\r\n                                    lineHeight: '1.4',\r\n                                    color: '#374151',\r\n                                    margin: 0\r\n                                }}>\r\n                                    {profile.summary}\r\n                                </p>\r\n                            </section>\r\n                        ) : null;\r\n\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"inline\" // Compact inline format\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"inline\" // Compact inline format\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ATSMinimalTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\ATSModernTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":32,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":32,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ATS Modern Template\r\n * \r\n * CLEAN MODERN ATS TEMPLATE\r\n * \r\n * Features:\r\n * - Arial/Inter font (modern, ATS-safe)\r\n * - Single column layout\r\n * - Subtle blue accent color\r\n * - Minimal graphics (underlines only)\r\n * - Skill pills with light backgrounds\r\n * - Professional modern look\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSContactHeader,\r\n    ATSMiniHeader,\r\n    ATSSummarySection,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const ATSModernMeta = {\r\n    id: 'ats-modern',\r\n    name: 'ATS Modern',\r\n    description: 'Clean modern design with excellent ATS compatibility. Subtle blue accent.',\r\n    category: 'ats-first',\r\n    tags: ['ats', 'modern', 'clean', 'professional'],\r\n    thumbnail: '/templates/ats-modern.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience Professionnelle',\r\n    education: 'Formation',\r\n    skills: 'Comp├®tences',\r\n    languages: 'Langues',\r\n    summary: 'Profil'\r\n};\r\n\r\nconst LABELS_EN = {\r\n    experience: 'Professional Experience',\r\n    education: 'Education',\r\n    skills: 'Skills',\r\n    languages: 'Languages',\r\n    summary: 'Profile'\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface ATSModernTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const ATSModernTemplate: React.FC<ATSModernTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = language === 'fr' ? LABELS_FR : LABELS_EN;\r\n\r\n    // Modern blue accent\r\n    const accentColor = profile.metadata?.accentColor || '#2563eb';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\" // Inter/Arial\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            // Header Renderer\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <ATSContactHeader\r\n                    profile={profile}\r\n                    accentColor={accentColor}\r\n                    variant=\"centered\"\r\n                />\r\n            )}\r\n\r\n            // Mini Header Renderer (Page 2+)\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            // Section Renderer\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ATSSummarySection\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"pills\" // Modern pills look\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ATSModernTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\AcademicCVTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ATSSectionHeader' is defined but never used.","line":23,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":32,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":32,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Academic CV Template\r\n * \r\n * ACADEMIC/RESEARCH TEMPLATE\r\n * \r\n * Features:\r\n * - Traditional academic formatting\r\n * - Serif typography\r\n * - Publications & research focus\r\n * - Credential emphasis\r\n * - Perfect for professors, researchers, academics\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSSummarySection,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const AcademicCVMeta = {\r\n    id: 'academic-cv',\r\n    name: 'Academic CV',\r\n    description: 'Traditional format for academics and researchers.',\r\n    category: 'specialized',\r\n    tags: ['academic', 'research', 'professor', 'serif', 'traditional'],\r\n    thumbnail: '/templates/academic-cv.png',\r\n    attributes: {\r\n        atsCompatible: true,\r\n        hasIcons: false,\r\n        style: 'classic' as const,\r\n        fontType: 'serif' as const,\r\n        colorScheme: 'neutral' as const,\r\n        layout: 'single-column' as const,\r\n        industry: ['education', 'research']\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Positions Acad├®miques',\r\n    education: 'Formation',\r\n    skills: 'Domaines de Recherche',\r\n    languages: 'Langues',\r\n    summary: 'R├®sum├®'\r\n};\r\n\r\n// ============================================================================\r\n// ACADEMIC HEADER\r\n// ============================================================================\r\n\r\nconst AcademicHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    return (\r\n        <header style={{\r\n            textAlign: 'center',\r\n            marginBottom: '32px',\r\n            paddingBottom: '24px',\r\n            borderBottom: '2px solid #e5e7eb'\r\n        }}>\r\n            <h1 style={{\r\n                fontSize: '28px',\r\n                fontWeight: 400,\r\n                color: '#111827',\r\n                margin: 0,\r\n                fontFamily: \"'Times New Roman', Georgia, serif\"\r\n            }}>\r\n                {personal.firstName} {personal.lastName}\r\n                {personal.permit && (\r\n                    <span style={{ fontSize: '16px', color: '#6b7280' }}>, {personal.permit}</span>\r\n                )}\r\n            </h1>\r\n            <h2 style={{\r\n                fontSize: '16px',\r\n                fontWeight: 400,\r\n                color: accentColor,\r\n                margin: '8px 0 0 0',\r\n                fontStyle: 'italic'\r\n            }}>\r\n                {personal.title}\r\n            </h2>\r\n\r\n            <div style={{\r\n                marginTop: '16px',\r\n                fontSize: '13px',\r\n                color: '#4b5563'\r\n            }}>\r\n                <div>{personal.contact.address}</div>\r\n                <div style={{ marginTop: '4px' }}>\r\n                    {personal.contact.email} | {personal.contact.phone}\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface AcademicCVTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const AcademicCVTemplate: React.FC<AcademicCVTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Deep blue academic accent\r\n    const accentColor = profile.metadata?.accentColor || '#1e3a5f';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"serif\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'education', 'experience', 'skills', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <AcademicHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ATSSummarySection\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default AcademicCVTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\BankerTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Banker Template\r\n * \r\n * CONSERVATIVE BANKING TEMPLATE\r\n * \r\n * Features:\r\n * - Conservative, formal design\r\n * - Navy/gold color scheme\r\n * - Structured with clear hierarchy\r\n * - Emphasis on credentials\r\n * - Perfect for finance, banking, wealth management\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const BankerMeta = {\r\n    id: 'banker',\r\n    name: 'Private Banker',\r\n    description: 'Conservative formal design for banking and finance.',\r\n    category: 'business',\r\n    tags: ['banker', 'finance', 'conservative', 'formal'],\r\n    thumbnail: '/templates/banker.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience Professionnelle',\r\n    education: 'Formation & Certifications',\r\n    skills: 'Comp├®tences Techniques',\r\n    languages: 'Langues',\r\n    summary: 'Profil'\r\n};\r\n\r\n// ============================================================================\r\n// BANKER HEADER\r\n// ============================================================================\r\n\r\nconst BankerHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    // Gold accent for banking\r\n    const goldAccent = '#b8860b';\r\n\r\n    return (\r\n        <header style={{\r\n            backgroundColor: accentColor,\r\n            margin: '-15mm -20mm 24px -20mm',\r\n            padding: '20mm 20mm 16px 20mm',\r\n            color: 'white'\r\n        }}>\r\n            <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'flex-end'\r\n            }}>\r\n                <div>\r\n                    <h1 style={{\r\n                        fontSize: '32px',\r\n                        fontWeight: 400,\r\n                        margin: 0,\r\n                        letterSpacing: '1px'\r\n                    }}>\r\n                        {personal.firstName} <strong>{personal.lastName}</strong>\r\n                    </h1>\r\n                    <h2 style={{\r\n                        fontSize: '16px',\r\n                        fontWeight: 400,\r\n                        margin: '6px 0 0 0',\r\n                        color: goldAccent\r\n                    }}>\r\n                        {personal.title}\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Credentials badge */}\r\n                {personal.permit && (\r\n                    <div style={{\r\n                        backgroundColor: goldAccent,\r\n                        color: accentColor,\r\n                        padding: '6px 16px',\r\n                        fontSize: '11px',\r\n                        fontWeight: 700,\r\n                        letterSpacing: '0.5px'\r\n                    }}>\r\n                        {personal.permit}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Contact bar */}\r\n            <div style={{\r\n                marginTop: '16px',\r\n                paddingTop: '12px',\r\n                borderTop: `1px solid rgba(255,255,255,0.2)`,\r\n                display: 'flex',\r\n                gap: '24px',\r\n                fontSize: '11px',\r\n                color: 'rgba(255,255,255,0.9)'\r\n            }}>\r\n                <span>{personal.contact.email}</span>\r\n                <span>{personal.contact.phone}</span>\r\n                <span>{personal.contact.address}</span>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// BANKER SUMMARY\r\n// ============================================================================\r\n\r\nconst BankerSummary: React.FC<{ summary: string; accentColor: string }> = ({\r\n    summary,\r\n    accentColor\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader\r\n                title={LABELS_FR.summary}\r\n                accentColor={accentColor}\r\n                variant=\"simple\"\r\n            />\r\n            <p style={{\r\n                fontSize: '13px',\r\n                lineHeight: '1.6',\r\n                color: '#374151',\r\n                margin: 0,\r\n                paddingLeft: '16px',\r\n                borderLeft: `3px solid #b8860b`\r\n            }}>\r\n                {summary}\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface BankerTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const BankerTemplate: React.FC<BankerTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Dark navy for banking\r\n    const accentColor = profile.metadata?.accentColor || '#1e2a3a';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"serif\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <BankerHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <BankerSummary\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default BankerTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\ConsultantTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CVProfile' is defined but never used.","line":26,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":24},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":32,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":32,"endColumn":28}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Consultant Template\r\n * \r\n * PROFESSIONAL CONSULTANT TEMPLATE\r\n * \r\n * Features:\r\n * - Clean structured layout\r\n * - Skills matrix/table format\r\n * - Teal/emerald accent\r\n * - Focus on expertise areas\r\n * - Perfect for consultants, auditors, advisors\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSContactHeader,\r\n    ATSMiniHeader,\r\n    ATSSummarySection,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const ConsultantMeta = {\r\n    id: 'consultant',\r\n    name: 'Consultant Pro',\r\n    description: 'Clean structured layout for consultants and advisors.',\r\n    category: 'business',\r\n    tags: ['consultant', 'professional', 'structured', 'clean'],\r\n    thumbnail: '/templates/consultant.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Missions & Exp├®riences',\r\n    education: 'Formation',\r\n    skills: 'Domaines d\\'Expertise',\r\n    languages: 'Langues',\r\n    summary: 'Profil Consultant'\r\n};\r\n\r\n// ============================================================================\r\n// CONSULTANT SKILLS GRID\r\n// ============================================================================\r\n\r\nconst ConsultantSkillsGrid: React.FC<{\r\n    skills: string[];\r\n    accentColor: string;\r\n}> = ({ skills, accentColor }) => {\r\n    if (!skills || skills.length === 0) return null;\r\n\r\n    // Group skills into rows of 3\r\n    const rows: string[][] = [];\r\n    for (let i = 0; i < skills.length; i += 3) {\r\n        rows.push(skills.slice(i, i + 3));\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            <ATSSectionHeader\r\n                title={LABELS_FR.skills}\r\n                accentColor={accentColor}\r\n                variant=\"background\"\r\n            />\r\n            <table style={{\r\n                width: '100%',\r\n                borderCollapse: 'collapse',\r\n                fontSize: '12px'\r\n            }}>\r\n                <tbody>\r\n                    {rows.map((row, rowIdx) => (\r\n                        <tr key={rowIdx}>\r\n                            {row.map((skill, cellIdx) => (\r\n                                <td\r\n                                    key={cellIdx}\r\n                                    style={{\r\n                                        padding: '8px 12px',\r\n                                        border: '1px solid #e5e7eb',\r\n                                        backgroundColor: rowIdx % 2 === 0 ? '#f9fafb' : 'white',\r\n                                        width: '33.33%'\r\n                                    }}\r\n                                >\r\n                                    <span style={{\r\n                                        color: accentColor,\r\n                                        fontWeight: 500\r\n                                    }}>ÔÇó</span> {skill}\r\n                                </td>\r\n                            ))}\r\n                            {/* Fill empty cells */}\r\n                            {row.length < 3 && [...Array(3 - row.length)].map((_, i) => (\r\n                                <td\r\n                                    key={`empty-${i}`}\r\n                                    style={{\r\n                                        padding: '8px 12px',\r\n                                        border: '1px solid #e5e7eb',\r\n                                        backgroundColor: rowIdx % 2 === 0 ? '#f9fafb' : 'white',\r\n                                        width: '33.33%'\r\n                                    }}\r\n                                />\r\n                            ))}\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface ConsultantTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const ConsultantTemplate: React.FC<ConsultantTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Teal accent for consultant\r\n    const accentColor = profile.metadata?.accentColor || '#0d9488';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\"\r\n            density=\"compact\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'skills', 'experience', 'education', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <ATSContactHeader\r\n                    profile={profile}\r\n                    accentColor={accentColor}\r\n                    variant=\"left\"\r\n                />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ATSSummarySection\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ConsultantSkillsGrid\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"inline\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ConsultantTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\CreativePortfolioTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ATSSectionHeader' is defined but never used.","line":21,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":30,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":30,"endColumn":35}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Creative Portfolio Template\r\n * \r\n * BOLD CREATIVE TEMPLATE (Replacement for broken CreativeBold)\r\n * \r\n * Features:\r\n * - Full-width accent header with gradient\r\n * - Bold typography with modern fonts\r\n * - Skills as visual tags\r\n * - Timeline-style experience\r\n * - Perfect for designers, marketers, creatives\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const CreativePortfolioMeta = {\r\n    id: 'creative-portfolio',\r\n    name: 'Creative Portfolio',\r\n    description: 'Bold gradient design for creatives and designers.',\r\n    category: 'creative',\r\n    tags: ['creative', 'bold', 'gradient', 'designer', 'modern'],\r\n    thumbnail: '/templates/creative-portfolio.png',\r\n    // Filter attributes for configurator\r\n    attributes: {\r\n        atsCompatible: false,\r\n        hasIcons: false,\r\n        style: 'bold',\r\n        fontType: 'sans',\r\n        colorScheme: 'vibrant',\r\n        layout: 'single-column',\r\n        industry: ['creative', 'marketing', 'design']\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience',\r\n    education: 'Formation',\r\n    skills: 'Comp├®tences',\r\n    languages: 'Langues',\r\n    summary: '├Ç Propos'\r\n};\r\n\r\n// ============================================================================\r\n// CREATIVE HEADER\r\n// ============================================================================\r\n\r\nconst CreativeHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    // Gradient colors based on accent\r\n    const gradientEnd = adjustColor(accentColor, 40);\r\n\r\n    return (\r\n        <header style={{\r\n            background: `linear-gradient(135deg, ${accentColor} 0%, ${gradientEnd} 100%)`,\r\n            margin: '-15mm -20mm 24px -20mm',\r\n            padding: '20mm 20mm 24px 20mm',\r\n            color: 'white',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n        }}>\r\n            {/* Decorative circles */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: '-50px',\r\n                right: '-50px',\r\n                width: '200px',\r\n                height: '200px',\r\n                borderRadius: '50%',\r\n                background: 'rgba(255,255,255,0.1)',\r\n                pointerEvents: 'none'\r\n            }} />\r\n            <div style={{\r\n                position: 'absolute',\r\n                bottom: '-30px',\r\n                left: '30%',\r\n                width: '100px',\r\n                height: '100px',\r\n                borderRadius: '50%',\r\n                background: 'rgba(255,255,255,0.05)',\r\n                pointerEvents: 'none'\r\n            }} />\r\n\r\n            {/* Content */}\r\n            <div style={{ position: 'relative', zIndex: 1 }}>\r\n                <h1 style={{\r\n                    fontSize: '42px',\r\n                    fontWeight: 800,\r\n                    margin: 0,\r\n                    letterSpacing: '-1px',\r\n                    lineHeight: 1.1\r\n                }}>\r\n                    {personal.firstName}<br />\r\n                    <span style={{ fontWeight: 300 }}>{personal.lastName}</span>\r\n                </h1>\r\n                <h2 style={{\r\n                    fontSize: '18px',\r\n                    fontWeight: 500,\r\n                    margin: '12px 0 0 0',\r\n                    opacity: 0.9,\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '3px'\r\n                }}>\r\n                    {personal.title}\r\n                </h2>\r\n\r\n                {/* Contact bar */}\r\n                <div style={{\r\n                    marginTop: '20px',\r\n                    display: 'flex',\r\n                    flexWrap: 'wrap',\r\n                    gap: '16px',\r\n                    fontSize: '12px',\r\n                    opacity: 0.9\r\n                }}>\r\n                    {personal.contact.email && <span>{personal.contact.email}</span>}\r\n                    {personal.contact.phone && <span>ÔÇó {personal.contact.phone}</span>}\r\n                    {personal.contact.address && <span>ÔÇó {personal.contact.address}</span>}\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// Helper to adjust color brightness\r\nfunction adjustColor(hex: string, percent: number): string {\r\n    const num = parseInt(hex.replace('#', ''), 16);\r\n    const amt = Math.round(2.55 * percent);\r\n    const R = Math.min(255, (num >> 16) + amt);\r\n    const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);\r\n    const B = Math.min(255, (num & 0x0000FF) + amt);\r\n    return `#${(1 << 24 | R << 16 | G << 8 | B).toString(16).slice(1)}`;\r\n}\r\n\r\n// ============================================================================\r\n// CREATIVE SUMMARY\r\n// ============================================================================\r\n\r\nconst CreativeSummary: React.FC<{ summary: string; accentColor: string }> = ({\r\n    summary,\r\n    accentColor\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section>\r\n            <h3 style={{\r\n                fontSize: '20px',\r\n                fontWeight: 700,\r\n                color: accentColor,\r\n                marginBottom: '12px',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '2px'\r\n            }}>\r\n                {LABELS_FR.summary}\r\n            </h3>\r\n            <p style={{\r\n                fontSize: '14px',\r\n                lineHeight: '1.8',\r\n                color: '#374151',\r\n                margin: 0\r\n            }}>\r\n                {summary}\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// CREATIVE SKILLS\r\n// ============================================================================\r\n\r\nconst CreativeSkills: React.FC<{ skills: string[]; accentColor: string }> = ({\r\n    skills,\r\n    accentColor\r\n}) => {\r\n    if (!skills || skills.length === 0) return null;\r\n\r\n    return (\r\n        <section>\r\n            <h3 style={{\r\n                fontSize: '20px',\r\n                fontWeight: 700,\r\n                color: accentColor,\r\n                marginBottom: '12px',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '2px'\r\n            }}>\r\n                {LABELS_FR.skills}\r\n            </h3>\r\n            <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: '10px'\r\n            }}>\r\n                {skills.map((skill, idx) => (\r\n                    <span\r\n                        key={idx}\r\n                        style={{\r\n                            padding: '8px 16px',\r\n                            backgroundColor: accentColor,\r\n                            color: 'white',\r\n                            borderRadius: '25px',\r\n                            fontSize: '12px',\r\n                            fontWeight: 600\r\n                        }}\r\n                    >\r\n                        {skill}\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface CreativePortfolioTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const CreativePortfolioTemplate: React.FC<CreativePortfolioTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Vibrant purple accent\r\n    const accentColor = profile.metadata?.accentColor || '#8b5cf6';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'skills', 'experience', 'education', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <CreativeHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <CreativeSummary\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <CreativeSkills\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"bars\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default CreativePortfolioTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\DevStackTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ATSSectionHeader' is defined but never used.","line":21,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":30,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":30,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'accentColor' is defined but never used.","line":66,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'accentColor' is defined but never used.","line":126,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":126,"endColumn":16}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * DevStack Template\r\n * \r\n * TECH/DEVELOPER TEMPLATE\r\n * \r\n * Features:\r\n * - Code-inspired monospace accents\r\n * - Dark theme option\r\n * - Tech skill tags with categories\r\n * - GitHub-like timeline\r\n * - Perfect for developers, engineers, tech\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const DevStackMeta = {\r\n    id: 'devstack',\r\n    name: 'DevStack',\r\n    description: 'Tech-inspired design for developers and engineers.',\r\n    category: 'tech',\r\n    tags: ['tech', 'developer', 'modern', 'monospace', 'minimal'],\r\n    thumbnail: '/templates/devstack.png',\r\n    attributes: {\r\n        atsCompatible: true,\r\n        hasIcons: false,\r\n        style: 'minimal' as const,\r\n        fontType: 'mono' as const,\r\n        colorScheme: 'neutral' as const,\r\n        layout: 'single-column' as const,\r\n        industry: ['tech', 'engineering']\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: '// Exp├®rience',\r\n    education: '// Formation',\r\n    skills: '// Stack',\r\n    languages: '// Langues',\r\n    summary: '// About'\r\n};\r\n\r\n// ============================================================================\r\n// DEV HEADER\r\n// ============================================================================\r\n\r\nconst DevHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    return (\r\n        <header style={{ marginBottom: '24px' }}>\r\n            <div style={{\r\n                fontFamily: \"'JetBrains Mono', 'Fira Code', monospace\",\r\n                backgroundColor: '#1e1e1e',\r\n                color: '#d4d4d4',\r\n                padding: '20px',\r\n                borderRadius: '8px',\r\n                margin: '-15mm -20mm 24px -20mm',\r\n                paddingTop: '20mm',\r\n                paddingLeft: '20mm',\r\n                paddingRight: '20mm'\r\n            }}>\r\n                <div style={{ marginBottom: '8px' }}>\r\n                    <span style={{ color: '#569cd6' }}>const</span>{' '}\r\n                    <span style={{ color: '#4ec9b0' }}>developer</span>{' '}\r\n                    <span style={{ color: '#d4d4d4' }}>=</span>{' '}\r\n                    <span style={{ color: '#ce9178' }}>{'{'}</span>\r\n                </div>\r\n                <div style={{ paddingLeft: '20px' }}>\r\n                    <div>\r\n                        <span style={{ color: '#9cdcfe' }}>name</span>\r\n                        <span style={{ color: '#d4d4d4' }}>:</span>{' '}\r\n                        <span style={{ color: '#ce9178' }}>\"{personal.firstName} {personal.lastName}\"</span>\r\n                        <span style={{ color: '#d4d4d4' }}>,</span>\r\n                    </div>\r\n                    <div>\r\n                        <span style={{ color: '#9cdcfe' }}>role</span>\r\n                        <span style={{ color: '#d4d4d4' }}>:</span>{' '}\r\n                        <span style={{ color: '#ce9178' }}>\"{personal.title}\"</span>\r\n                        <span style={{ color: '#d4d4d4' }}>,</span>\r\n                    </div>\r\n                    <div>\r\n                        <span style={{ color: '#9cdcfe' }}>email</span>\r\n                        <span style={{ color: '#d4d4d4' }}>:</span>{' '}\r\n                        <span style={{ color: '#ce9178' }}>\"{personal.contact.email}\"</span>\r\n                        <span style={{ color: '#d4d4d4' }}>,</span>\r\n                    </div>\r\n                    <div>\r\n                        <span style={{ color: '#9cdcfe' }}>location</span>\r\n                        <span style={{ color: '#d4d4d4' }}>:</span>{' '}\r\n                        <span style={{ color: '#ce9178' }}>\"{personal.contact.address}\"</span>\r\n                    </div>\r\n                </div>\r\n                <div style={{ color: '#ce9178' }}>{'};'}</div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// DEV SKILLS\r\n// ============================================================================\r\n\r\nconst DevSkills: React.FC<{ skills: string[]; accentColor: string }> = ({\r\n    skills,\r\n    accentColor\r\n}) => {\r\n    if (!skills || skills.length === 0) return null;\r\n\r\n    return (\r\n        <section>\r\n            <h3 style={{\r\n                fontFamily: \"'JetBrains Mono', monospace\",\r\n                fontSize: '14px',\r\n                color: '#6a9955',\r\n                marginBottom: '12px'\r\n            }}>\r\n                {LABELS_FR.skills}\r\n            </h3>\r\n            <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: '8px'\r\n            }}>\r\n                {skills.map((skill, idx) => (\r\n                    <span\r\n                        key={idx}\r\n                        style={{\r\n                            fontFamily: \"'JetBrains Mono', monospace\",\r\n                            padding: '4px 12px',\r\n                            backgroundColor: '#2d2d2d',\r\n                            color: '#4ec9b0',\r\n                            borderRadius: '4px',\r\n                            fontSize: '11px',\r\n                            border: '1px solid #404040'\r\n                        }}\r\n                    >\r\n                        {skill}\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// DEV SUMMARY\r\n// ============================================================================\r\n\r\nconst DevSummary: React.FC<{ summary: string }> = ({ summary }) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section>\r\n            <h3 style={{\r\n                fontFamily: \"'JetBrains Mono', monospace\",\r\n                fontSize: '14px',\r\n                color: '#6a9955',\r\n                marginBottom: '8px'\r\n            }}>\r\n                {LABELS_FR.summary}\r\n            </h3>\r\n            <p style={{\r\n                fontSize: '13px',\r\n                lineHeight: '1.6',\r\n                color: '#4b5563'\r\n            }}>\r\n                {summary}\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface DevStackTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const DevStackTemplate: React.FC<DevStackTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    const accentColor = profile.metadata?.accentColor || '#4ec9b0';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"mono\"\r\n            density=\"compact\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'skills', 'experience', 'education', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <DevHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return <DevSummary summary={profile.summary} />;\r\n                    case 'skills':\r\n                        return <DevSkills skills={profile.skills} accentColor={accentColor} />;\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"inline\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default DevStackTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\HealthcareProTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Healthcare Pro Template\r\n * \r\n * MEDICAL/HEALTHCARE TEMPLATE\r\n * \r\n * Features:\r\n * - Clean professional design\r\n * - Light blue medical accent\r\n * - Credentials emphasis\r\n * - Clear hierarchy\r\n * - Perfect for doctors, nurses, healthcare\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSContactHeader,\r\n    ATSMiniHeader,\r\n    ATSSummarySection,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const HealthcareProMeta = {\r\n    id: 'healthcare-pro',\r\n    name: 'Healthcare Pro',\r\n    description: 'Clean professional design for healthcare workers.',\r\n    category: 'specialized',\r\n    tags: ['healthcare', 'medical', 'professional', 'clean', 'ats'],\r\n    thumbnail: '/templates/healthcare-pro.png',\r\n    attributes: {\r\n        atsCompatible: true,\r\n        hasIcons: false,\r\n        style: 'classic' as const,\r\n        fontType: 'sans' as const,\r\n        colorScheme: 'professional' as const,\r\n        layout: 'single-column' as const,\r\n        industry: ['healthcare']\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience Clinique',\r\n    education: 'Formation & Certifications',\r\n    skills: 'Comp├®tences',\r\n    languages: 'Langues',\r\n    summary: 'Profil'\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface HealthcareProTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const HealthcareProTemplate: React.FC<HealthcareProTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Medical blue accent\r\n    const accentColor = profile.metadata?.accentColor || '#0891b2';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <ATSContactHeader\r\n                    profile={profile}\r\n                    accentColor={accentColor}\r\n                    variant=\"centered\"\r\n                />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ATSSummarySection\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default HealthcareProTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\LegalTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ATSSectionHeader' is defined but never used.","line":22,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Legal Template\r\n * \r\n * FORMAL LEGAL TEMPLATE\r\n * \r\n * Features:\r\n * - Ultra-formal structure\r\n * - Burgundy/maroon accent\r\n * - Emphasis on credentials & bar admissions\r\n * - Traditional serif typography\r\n * - Perfect for lawyers, legal counsel, compliance\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const LegalMeta = {\r\n    id: 'legal',\r\n    name: 'Legal Counsel',\r\n    description: 'Ultra-formal template for legal professionals.',\r\n    category: 'business',\r\n    tags: ['legal', 'lawyer', 'formal', 'traditional'],\r\n    thumbnail: '/templates/legal.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Exp├®rience Juridique',\r\n    education: 'Formation & Admissions',\r\n    skills: 'Domaines de Pratique',\r\n    languages: 'Langues',\r\n    summary: 'Profil'\r\n};\r\n\r\n// ============================================================================\r\n// LEGAL HEADER\r\n// ============================================================================\r\n\r\nconst LegalHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    return (\r\n        <header style={{ marginBottom: '24px' }}>\r\n            {/* Formal name block */}\r\n            <div style={{\r\n                textAlign: 'center',\r\n                borderTop: `2px solid ${accentColor}`,\r\n                borderBottom: `2px solid ${accentColor}`,\r\n                padding: '16px 0',\r\n                marginBottom: '16px'\r\n            }}>\r\n                <h1 style={{\r\n                    fontSize: '28px',\r\n                    fontWeight: 400,\r\n                    color: '#111827',\r\n                    margin: 0,\r\n                    letterSpacing: '3px',\r\n                    textTransform: 'uppercase'\r\n                }}>\r\n                    {personal.firstName} {personal.lastName}\r\n                </h1>\r\n                <h2 style={{\r\n                    fontSize: '14px',\r\n                    fontWeight: 400,\r\n                    color: accentColor,\r\n                    margin: '8px 0 0 0',\r\n                    letterSpacing: '2px',\r\n                    textTransform: 'uppercase'\r\n                }}>\r\n                    {personal.title}\r\n                </h2>\r\n            </div>\r\n\r\n            {/* Contact info - centered and formal */}\r\n            <div style={{\r\n                textAlign: 'center',\r\n                fontSize: '11px',\r\n                color: '#4b5563',\r\n                lineHeight: '1.8'\r\n            }}>\r\n                <div>{personal.contact.address}</div>\r\n                <div>\r\n                    {personal.contact.phone} | {personal.contact.email}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Credentials */}\r\n            {(personal.nationality || personal.permit) && (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    gap: '16px',\r\n                    marginTop: '12px',\r\n                    fontSize: '10px',\r\n                    color: '#6b7280'\r\n                }}>\r\n                    {personal.nationality && <span>Nationalit├®: {personal.nationality}</span>}\r\n                    {personal.permit && (\r\n                        <span style={{\r\n                            color: accentColor,\r\n                            fontWeight: 600\r\n                        }}>\r\n                            {personal.permit}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// LEGAL SUMMARY\r\n// ============================================================================\r\n\r\nconst LegalSummary: React.FC<{ summary: string; accentColor: string }> = ({\r\n    summary,\r\n    accentColor\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section>\r\n            <h3 style={{\r\n                fontSize: '12px',\r\n                fontWeight: 700,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '2px',\r\n                color: accentColor,\r\n                textAlign: 'center',\r\n                marginBottom: '12px'\r\n            }}>\r\n                {LABELS_FR.summary}\r\n            </h3>\r\n            <p style={{\r\n                fontSize: '12px',\r\n                lineHeight: '1.7',\r\n                color: '#374151',\r\n                margin: 0,\r\n                textAlign: 'justify'\r\n            }}>\r\n                {summary}\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface LegalTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const LegalTemplate: React.FC<LegalTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Burgundy for legal\r\n    const accentColor = profile.metadata?.accentColor || '#7c2d12';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"serif\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <LegalHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <LegalSummary\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default LegalTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\StartupFounderTemplate.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":30,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":30,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'accentColor' is defined but never used.","line":130,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Startup Founder Template\r\n * \r\n * ENTREPRENEUR/STARTUP TEMPLATE\r\n * \r\n * Features:\r\n * - Bold statement header\r\n * - Metrics-focused design\r\n * - Achievement highlights\r\n * - Modern gradient accents\r\n * - Perfect for founders, entrepreneurs, innovators\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const StartupFounderMeta = {\r\n    id: 'startup-founder',\r\n    name: 'Startup Founder',\r\n    description: 'Bold design for entrepreneurs and founders.',\r\n    category: 'creative',\r\n    tags: ['startup', 'founder', 'entrepreneur', 'bold', 'modern'],\r\n    thumbnail: '/templates/startup-founder.png',\r\n    attributes: {\r\n        atsCompatible: false,\r\n        hasIcons: false,\r\n        style: 'bold' as const,\r\n        fontType: 'sans' as const,\r\n        colorScheme: 'vibrant' as const,\r\n        layout: 'single-column' as const,\r\n        industry: ['tech', 'consulting']\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Track Record',\r\n    education: 'Formation',\r\n    skills: 'Expertise',\r\n    languages: 'Langues'\r\n};\r\n\r\n// ============================================================================\r\n// FOUNDER HEADER\r\n// ============================================================================\r\n\r\nconst FounderHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    return (\r\n        <header style={{\r\n            marginBottom: '28px',\r\n            textAlign: 'center'\r\n        }}>\r\n            <h1 style={{\r\n                fontSize: '48px',\r\n                fontWeight: 900,\r\n                background: `linear-gradient(135deg, ${accentColor} 0%, #ec4899 100%)`,\r\n                WebkitBackgroundClip: 'text',\r\n                WebkitTextFillColor: 'transparent',\r\n                backgroundClip: 'text',\r\n                margin: 0,\r\n                lineHeight: 1.1\r\n            }}>\r\n                {personal.firstName} {personal.lastName}\r\n            </h1>\r\n            <h2 style={{\r\n                fontSize: '20px',\r\n                fontWeight: 600,\r\n                color: '#374151',\r\n                margin: '12px 0',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '4px'\r\n            }}>\r\n                {personal.title}\r\n            </h2>\r\n\r\n            {/* Contact row */}\r\n            <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                gap: '24px',\r\n                marginTop: '16px',\r\n                fontSize: '13px',\r\n                color: '#6b7280'\r\n            }}>\r\n                <span>{personal.contact.email}</span>\r\n                <span>ÔÇó</span>\r\n                <span>{personal.contact.phone}</span>\r\n                <span>ÔÇó</span>\r\n                <span>{personal.contact.address}</span>\r\n            </div>\r\n\r\n            {/* Decorative line */}\r\n            <div style={{\r\n                marginTop: '20px',\r\n                height: '4px',\r\n                background: `linear-gradient(90deg, transparent 0%, ${accentColor} 50%, transparent 100%)`,\r\n                borderRadius: '2px'\r\n            }} />\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// FOUNDER SUMMARY\r\n// ============================================================================\r\n\r\nconst FounderSummary: React.FC<{ summary: string; accentColor: string }> = ({\r\n    summary,\r\n    accentColor\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section style={{\r\n            textAlign: 'center',\r\n            padding: '20px',\r\n            backgroundColor: '#f9fafb',\r\n            borderRadius: '12px',\r\n            marginBottom: '8px'\r\n        }}>\r\n            <p style={{\r\n                fontSize: '16px',\r\n                lineHeight: '1.8',\r\n                color: '#374151',\r\n                fontStyle: 'italic',\r\n                margin: 0\r\n            }}>\r\n                \"{summary}\"\r\n            </p>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface StartupFounderTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const StartupFounderTemplate: React.FC<StartupFounderTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    const accentColor = profile.metadata?.accentColor || '#f59e0b';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"sans\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'skills', 'education', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <FounderHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <FounderSummary\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"pills\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"inline\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default StartupFounderTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\cv-templates\\templates\\SwissExecutiveTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ATSSectionHeader' is defined but never used.","line":22,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":32}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Swiss Executive Template\r\n * \r\n * PREMIUM EXECUTIVE TEMPLATE\r\n * \r\n * Features:\r\n * - Elegant serif typography\r\n * - Dark navy accent\r\n * - Gold/amber highlights\r\n * - Sophisticated header with timeline\r\n * - Perfect for C-level, Directors, Senior Management\r\n */\r\n\r\nimport React from 'react';\r\nimport { BaseTemplateLayout } from '../core/BaseTemplateLayout';\r\nimport {\r\n    ATSMiniHeader,\r\n    ATSExperienceSection,\r\n    ATSEducationSection,\r\n    ATSSkillsSection,\r\n    ATSLanguagesSection,\r\n    ATSSectionHeader\r\n} from '../sections/ATSSections';\r\nimport { useProfile } from '../../../application/store/v2';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\n\r\n// ============================================================================\r\n// TEMPLATE METADATA\r\n// ============================================================================\r\n\r\nexport const SwissExecutiveMeta = {\r\n    id: 'swiss-executive',\r\n    name: 'Swiss Executive',\r\n    description: 'Premium template for executives and senior management.',\r\n    category: 'business',\r\n    tags: ['executive', 'premium', 'serif', 'elegant'],\r\n    thumbnail: '/templates/swiss-executive.png'\r\n};\r\n\r\n// ============================================================================\r\n// LABELS\r\n// ============================================================================\r\n\r\nconst LABELS_FR = {\r\n    experience: 'Parcours Professionnel',\r\n    education: 'Formation',\r\n    skills: 'Expertise',\r\n    languages: 'Langues',\r\n    summary: 'R├®sum├® Ex├®cutif'\r\n};\r\n\r\n// ============================================================================\r\n// EXECUTIVE HEADER\r\n// ============================================================================\r\n\r\nconst ExecutiveHeader: React.FC<{ profile: CVProfile; accentColor: string }> = ({\r\n    profile,\r\n    accentColor\r\n}) => {\r\n    const { personal } = profile;\r\n\r\n    return (\r\n        <header style={{ marginBottom: '28px' }}>\r\n            {/* Name with elegant styling */}\r\n            <div style={{\r\n                borderBottom: `3px solid ${accentColor}`,\r\n                paddingBottom: '16px',\r\n                marginBottom: '16px'\r\n            }}>\r\n                <h1 style={{\r\n                    fontSize: '36px',\r\n                    fontWeight: 400,\r\n                    color: '#111827',\r\n                    margin: 0,\r\n                    letterSpacing: '2px',\r\n                    textTransform: 'uppercase'\r\n                }}>\r\n                    {personal.firstName} <strong style={{ fontWeight: 700 }}>{personal.lastName}</strong>\r\n                </h1>\r\n                <h2 style={{\r\n                    fontSize: '18px',\r\n                    fontWeight: 400,\r\n                    color: accentColor,\r\n                    margin: '8px 0 0 0',\r\n                    letterSpacing: '1px'\r\n                }}>\r\n                    {personal.title}\r\n                </h2>\r\n            </div>\r\n\r\n            {/* Contact in elegant format */}\r\n            <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(3, 1fr)',\r\n                gap: '16px',\r\n                fontSize: '12px',\r\n                color: '#4b5563'\r\n            }}>\r\n                <div>\r\n                    <div style={{ fontWeight: 600, color: '#111827', marginBottom: '2px' }}>Email</div>\r\n                    {personal.contact.email}\r\n                </div>\r\n                <div>\r\n                    <div style={{ fontWeight: 600, color: '#111827', marginBottom: '2px' }}>T├®l├®phone</div>\r\n                    {personal.contact.phone}\r\n                </div>\r\n                <div>\r\n                    <div style={{ fontWeight: 600, color: '#111827', marginBottom: '2px' }}>Localisation</div>\r\n                    {personal.contact.address}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Personal Info Row */}\r\n            {(personal.nationality || personal.permit) && (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    gap: '24px',\r\n                    marginTop: '12px',\r\n                    fontSize: '11px',\r\n                    color: '#6b7280'\r\n                }}>\r\n                    {personal.nationality && (\r\n                        <span>Nationalit├®: <strong>{personal.nationality}</strong></span>\r\n                    )}\r\n                    {personal.permit && (\r\n                        <span style={{\r\n                            backgroundColor: `${accentColor}15`,\r\n                            color: accentColor,\r\n                            padding: '2px 10px',\r\n                            borderRadius: '2px',\r\n                            fontWeight: 600\r\n                        }}>\r\n                            {personal.permit}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </header>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// EXECUTIVE SUMMARY\r\n// ============================================================================\r\n\r\nconst ExecutiveSummary: React.FC<{ summary: string; accentColor: string }> = ({\r\n    summary,\r\n    accentColor\r\n}) => {\r\n    if (!summary) return null;\r\n\r\n    return (\r\n        <section style={{ marginBottom: '4px' }}>\r\n            <div style={{\r\n                borderLeft: `4px solid ${accentColor}`,\r\n                paddingLeft: '20px',\r\n                fontStyle: 'italic',\r\n                color: '#374151',\r\n                fontSize: '13px',\r\n                lineHeight: '1.7'\r\n            }}>\r\n                {summary}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// TEMPLATE COMPONENT\r\n// ============================================================================\r\n\r\ninterface SwissExecutiveTemplateProps {\r\n    language?: 'en' | 'fr';\r\n    forceMode?: 'edition' | 'structure' | 'modele';\r\n}\r\n\r\nexport const SwissExecutiveTemplate: React.FC<SwissExecutiveTemplateProps> = ({\r\n    language = 'fr',\r\n    forceMode\r\n}) => {\r\n    const profile = useProfile();\r\n    const labels = LABELS_FR;\r\n\r\n    // Navy blue executive accent\r\n    const accentColor = profile.metadata?.accentColor || '#1e3a5f';\r\n\r\n    return (\r\n        <BaseTemplateLayout\r\n            profile={profile}\r\n            language={language}\r\n            accentColor={accentColor}\r\n            fontFamily=\"serif\"\r\n            density=\"comfortable\"\r\n            mode={forceMode === 'modele' ? 'print' : 'view'}\r\n            sectionOrder={['summary', 'experience', 'education', 'skills', 'languages']}\r\n\r\n            renderHeader={({ profile, accentColor }) => (\r\n                <ExecutiveHeader profile={profile} accentColor={accentColor} />\r\n            )}\r\n\r\n            renderMiniHeader={({ profile, pageNumber, accentColor }) => (\r\n                <ATSMiniHeader\r\n                    profile={profile}\r\n                    pageNumber={pageNumber}\r\n                    accentColor={accentColor}\r\n                />\r\n            )}\r\n\r\n            renderSection={({ sectionId, profile, accentColor }) => {\r\n                switch (sectionId) {\r\n                    case 'summary':\r\n                        return (\r\n                            <ExecutiveSummary\r\n                                summary={profile.summary}\r\n                                accentColor={accentColor}\r\n                            />\r\n                        );\r\n                    case 'experience':\r\n                        return (\r\n                            <ATSExperienceSection\r\n                                experiences={profile.experiences}\r\n                                accentColor={accentColor}\r\n                                labels={{ experience: labels.experience }}\r\n                            />\r\n                        );\r\n                    case 'education':\r\n                        return (\r\n                            <ATSEducationSection\r\n                                educations={profile.educations}\r\n                                accentColor={accentColor}\r\n                                labels={{ education: labels.education }}\r\n                            />\r\n                        );\r\n                    case 'skills':\r\n                        return (\r\n                            <ATSSkillsSection\r\n                                skills={profile.skills}\r\n                                accentColor={accentColor}\r\n                                variant=\"list\"\r\n                                labels={{ skills: labels.skills }}\r\n                            />\r\n                        );\r\n                    case 'languages':\r\n                        return (\r\n                            <ATSLanguagesSection\r\n                                languages={profile.languages}\r\n                                accentColor={accentColor}\r\n                                variant=\"text\"\r\n                                labels={{ languages: labels.languages }}\r\n                            />\r\n                        );\r\n                    default:\r\n                        return null;\r\n                }\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default SwissExecutiveTemplate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\atoms\\Button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { clsx, type ClassValue } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\r\n    size?: 'sm' | 'md' | 'lg';\r\n    isLoading?: boolean;\r\n    leftIcon?: React.ReactNode;\r\n    rightIcon?: React.ReactNode;\r\n}\r\n\r\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant = 'primary', size = 'md', isLoading, leftIcon, rightIcon, children, disabled, ...props }, ref) => {\r\n\r\n        const variants = {\r\n            primary: 'bg-brand-600 text-white hover:bg-brand-700 shadow-sm shadow-brand-500/20',\r\n            secondary: 'bg-surface-800 text-white hover:bg-surface-900 shadow-sm',\r\n            outline: 'border border-surface-300 bg-white text-surface-700 hover:bg-surface-50',\r\n            ghost: 'text-surface-600 hover:bg-surface-100 hover:text-surface-900',\r\n            danger: 'bg-red-600 text-white hover:bg-red-700 shadow-sm',\r\n        };\r\n\r\n        const sizes = {\r\n            sm: 'h-8 px-3 text-xs',\r\n            md: 'h-10 px-4 text-sm',\r\n            lg: 'h-12 px-6 text-base',\r\n        };\r\n\r\n        return (\r\n            <button\r\n                ref={ref}\r\n                disabled={disabled || isLoading}\r\n                className={cn(\r\n                    'inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 disabled:pointer-events-none disabled:opacity-50',\r\n                    variants[variant],\r\n                    sizes[size],\r\n                    className\r\n                )}\r\n                {...props}\r\n            >\r\n                {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                {!isLoading && leftIcon && <span className=\"mr-2\">{leftIcon}</span>}\r\n                {children}\r\n                {!isLoading && rightIcon && <span className=\"ml-2\">{rightIcon}</span>}\r\n            </button>\r\n        );\r\n    }\r\n);\r\n\r\nButton.displayName = 'Button';\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\atoms\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\atoms\\Input.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useId\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":17,"column":31,"nodeType":"MemberExpression","endLine":17,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { cn } from './Button';\r\n\r\ninterface InputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'> {\r\n    label?: string;\r\n    error?: string;\r\n    onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n    debounceTime?: number;\r\n    maxLength?: number;\r\n    variant?: 'default' | 'glass';\r\n    required?: boolean;\r\n    icon?: React.ReactNode;\r\n}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, label, error, id, value, onChange, debounceTime = 300, maxLength, variant = 'default', required, icon, ...props }, ref) => {\r\n        const inputId = id || React.useId();\r\n        const [localValue, setLocalValue] = useState<string | number | readonly string[] | undefined>(value);\r\n        const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n        useEffect(() => {\r\n            setLocalValue(value);\r\n        }, [value]);\r\n\r\n        const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n            const newValue = e.target.value;\r\n            setLocalValue(newValue);\r\n\r\n            if (debounceTime > 0) {\r\n                if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n                timeoutRef.current = setTimeout(() => {\r\n                    if (onChange) onChange(e);\r\n                }, debounceTime);\r\n            } else {\r\n                if (onChange) onChange(e);\r\n            }\r\n        };\r\n\r\n        const currentLength = typeof localValue === 'string' ? localValue.length : 0;\r\n        const isNearLimit = maxLength && currentLength > maxLength * 0.9;\r\n\r\n        const variants = {\r\n            default: \"bg-white border-surface-300 text-surface-900 focus:border-brand-500 focus:ring-brand-500\",\r\n            glass: \"glass-input\"\r\n        };\r\n\r\n        return (\r\n            <div className=\"w-full space-y-1.5\">\r\n                <div className=\"flex justify-between items-baseline\">\r\n                    {label && (\r\n                        <label htmlFor={inputId} className={cn(\r\n                            \"block text-xs font-semibold ml-1\",\r\n                            variant === 'glass' ? \"text-slate-300\" : \"text-surface-700\"\r\n                        )}>\r\n                            {label} {required && <span className=\"text-red-500\">*</span>}\r\n                        </label>\r\n                    )}\r\n                    {maxLength && (\r\n                        <span className={cn(\"text-[10px] font-medium\", isNearLimit ? \"text-amber-600\" : (variant === 'glass' ? \"text-surface-400\" : \"text-surface-400\"))}>\r\n                            {currentLength}/{maxLength}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                <div className=\"relative\">\r\n                    {icon && (\r\n                        <div className={cn(\r\n                            \"absolute left-3 top-1/2 -translate-y-1/2\",\r\n                            variant === 'glass' ? \"text-surface-400\" : \"text-surface-400\"\r\n                        )}>\r\n                            {icon}\r\n                        </div>\r\n                    )}\r\n                    <input\r\n                        id={inputId}\r\n                        ref={ref}\r\n                        value={localValue}\r\n                        onChange={handleChange}\r\n                        maxLength={maxLength}\r\n                        className={cn(\r\n                            \"w-full rounded-lg px-3 py-2 text-sm outline-none transition-all duration-200\",\r\n                            icon ? \"pl-10\" : \"\",\r\n                            variants[variant],\r\n                            error ? \"border-red-500 focus:border-red-500 focus:ring-red-500\" : \"\",\r\n                            className\r\n                        )}\r\n                        {...props}\r\n                    />\r\n                </div>\r\n                {error && <p className=\"text-xs text-red-500 font-medium\">{error}</p>}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nInput.displayName = 'Input';\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\atoms\\TextArea.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onAiImprove' is defined but never used.","line":17,"column":103,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":114},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useId\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":18,"column":31,"nodeType":"MemberExpression","endLine":18,"endColumn":42},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useGate\" is called in function \"handleAiImprove\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":47,"column":26,"nodeType":"Identifier","endLine":47,"endColumn":33}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { cn } from './Button';\r\n\r\ninterface TextAreaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'onChange'> {\r\n    label?: string;\r\n    error?: string;\r\n    onChange?: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n    debounceTime?: number;\r\n    maxLength?: number;\r\n    enableAI?: boolean;\r\n    onAiImprove?: (newValue: string) => void;\r\n    variant?: 'default' | 'glass';\r\n}\r\n\r\nexport const TextArea = React.forwardRef<HTMLTextAreaElement, TextAreaProps>(\r\n    ({ className, label, error, id, value, onChange, debounceTime = 300, maxLength, enableAI = false, onAiImprove, variant = 'default', ...props }, ref) => {\r\n        const inputId = id || React.useId();\r\n        const [localValue, setLocalValue] = useState<string | number | readonly string[] | undefined>(value);\r\n        const [isImproving, setIsImproving] = useState(false);\r\n        const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n        // Sync local value when prop value changes\r\n        useEffect(() => {\r\n            setLocalValue(value);\r\n        }, [value]);\r\n\r\n        const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n            const newValue = e.target.value;\r\n            setLocalValue(newValue);\r\n\r\n            if (debounceTime > 0) {\r\n                if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n                timeoutRef.current = setTimeout(() => {\r\n                    if (onChange) onChange(e);\r\n                }, debounceTime);\r\n            } else {\r\n                if (onChange) onChange(e);\r\n            }\r\n        };\r\n\r\n        const handleAiImprove = async () => {\r\n            if (!localValue || typeof localValue !== 'string') return;\r\n\r\n            // GATE: Check AI trial status\r\n            const { useGate } = await import('../../../application/hooks/useGate');\r\n            const gate = useGate();\r\n            const { allowed, triggerUpsell } = gate.checkGate('AI_GENERATION');\r\n\r\n            if (!allowed) {\r\n                triggerUpsell();\r\n                return;\r\n            }\r\n\r\n            setIsImproving(true);\r\n            try {\r\n                // Consume AI trial BEFORE making the request\r\n                gate.consumeAITrial();\r\n\r\n                // Dynamic import to avoid circular dependencies or server-side issues\r\n                const { geminiService } = await import('../../../application/services/ai/GeminiService');\r\n                const improvedText = await geminiService.improveText(localValue, label || 'CV Section');\r\n\r\n                setLocalValue(improvedText);\r\n\r\n                // Trigger onChange with new value\r\n                if (onChange) {\r\n                    const event = {\r\n                        target: { value: improvedText },\r\n                        currentTarget: { value: improvedText }\r\n                    } as React.ChangeEvent<HTMLTextAreaElement>;\r\n                    onChange(event);\r\n                }\r\n            } catch (err) {\r\n                console.error('AI Improvement failed', err);\r\n                // Optional: Add toast notification here\r\n            } finally {\r\n                setIsImproving(false);\r\n            }\r\n        };\r\n\r\n        const currentLength = typeof localValue === 'string' ? localValue.length : 0;\r\n        const isNearLimit = maxLength && currentLength > maxLength * 0.9;\r\n\r\n        const baseStyles = 'flex min-h-[80px] w-full rounded-md border px-3 py-2 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50';\r\n\r\n        const variants = {\r\n            default: 'border-surface-300 bg-white placeholder:text-surface-400 focus-visible:ring-brand-500 text-surface-900',\r\n            glass: 'glass-input',\r\n        };\r\n\r\n        return (\r\n            <div className=\"w-full space-y-1.5\">\r\n                <div className=\"flex justify-between items-baseline\">\r\n                    {label && (\r\n                        <label htmlFor={inputId} className={cn(\"block text-xs font-semibold\", variant === 'glass' ? \"text-slate-200\" : \"text-slate-600\")}>\r\n                            {label}\r\n                        </label>\r\n                    )}\r\n                    <div className=\"flex items-center gap-2\">\r\n                        {enableAI && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleAiImprove}\r\n                                disabled={isImproving || !localValue}\r\n                                className={cn(\r\n                                    \"text-[10px] font-medium flex items-center gap-1 transition-colors disabled:opacity-50\",\r\n                                    variant === 'glass' ? \"text-indigo-300 hover:text-indigo-200\" : \"text-indigo-600 hover:text-indigo-700\"\r\n                                )}\r\n                            >\r\n                                {isImproving ? (\r\n                                    <>\r\n                                        <span className=\"animate-spin\">Ô£¿</span> Improving...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <span>Ô£¿</span> Improve with AI\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        )}\r\n                        {maxLength && (\r\n                            <span className={cn(\"text-[10px] font-medium\", isNearLimit ? \"text-amber-600\" : (variant === 'glass' ? \"text-slate-400\" : \"text-slate-400\"))}>\r\n                                {currentLength}/{maxLength}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <textarea\r\n                    id={inputId}\r\n                    ref={ref}\r\n                    value={localValue}\r\n                    onChange={handleChange}\r\n                    maxLength={maxLength}\r\n                    className={cn(\r\n                        baseStyles,\r\n                        variants[variant],\r\n                        error && 'border-red-500 focus-visible:ring-red-500',\r\n                        isImproving && 'animate-pulse bg-indigo-50',\r\n                        className\r\n                    )}\r\n                    {...props}\r\n                />\r\n                {error && <p className=\"text-xs text-red-500 font-medium\">{error}</p>}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nTextArea.displayName = 'TextArea';\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\molecules\\SectionHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\design-system\\tokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\AdminDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Eye' is defined but never used.","line":14,"column":84,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":87},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1495,1498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1495,1498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2833,2836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2833,2836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":303,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":303,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":316,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":316,"endColumn":21}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   TABLEAU DE BORD ADMIN - ├ëDITION DEEP SPACE (LIEN NEURONAL)\r\n *   Interface Strat├®gique pour la Surveillance du PANTH├ëON\r\n * \r\n *   \"Connect├® au Panth├®on. Nous voyons ce que les dieux voient.\"\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n */\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Shield, Sun, Network, Clock, Database, Terminal, Activity, AlertTriangle, Eye } from 'lucide-react';\r\nimport { QuarantineModal } from './QuarantineModal';\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// TYPES\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\ntype AgentStatus = 'IDLE' | 'WORKING' | 'ERROR' | 'OFFLINE' | 'ACTIVE' | 'AWAKENING' | 'DORMANT' | 'COMPROMISED' | 'DECEASED';\r\n\r\ninterface Agent {\r\n    id: string;\r\n    name: string;\r\n    icon: React.ComponentType<{ size?: number; className?: string }>;\r\n    color: string;\r\n    glowColor: string;\r\n    status: AgentStatus;\r\n    lastAction: string;\r\n    capacity?: number;\r\n}\r\n\r\ninterface LogEntry {\r\n    id: string;\r\n    timestamp: Date;\r\n    agent: string;\r\n    message: string;\r\n    type: 'info' | 'success' | 'warning' | 'error';\r\n}\r\n\r\ninterface KairosReport {\r\n    scanDate: Date;\r\n    filesScanned: number;\r\n    orphansFound: number;\r\n    deadFiles: any[];\r\n    totalWasteBytes: number;\r\n}\r\n\r\ninterface SystemPulse {\r\n    olympus: {\r\n        status: string;\r\n        uptime: string;\r\n        consciousness: boolean;\r\n    };\r\n    agents: Array<{\r\n        id: string;\r\n        name: string;\r\n        status: AgentStatus;\r\n        lastAction: string;\r\n        capacity: number;\r\n        lastHeartbeat: Date;\r\n    }>;\r\n    logs: LogEntry[];\r\n    kairosReport: KairosReport | null;\r\n}\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// HOOKS\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nconst useSystemPulse = () => {\r\n    const [pulse, setPulse] = useState<SystemPulse | null>(null);\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchPulse = async () => {\r\n        try {\r\n            const response = await fetch('/api/system/pulse');\r\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setPulse(data.data);\r\n                setIsConnected(true);\r\n                setError(null);\r\n            } else {\r\n                throw new Error(data.error || 'Erreur inconnue');\r\n            }\r\n        } catch (err: any) {\r\n            console.error('[LIEN NEURONAL] Connexion ├®chou├®e:', err);\r\n            setError(err.message);\r\n            setIsConnected(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPulse();\r\n        const interval = setInterval(fetchPulse, 2000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    return { pulse, isConnected, error, refetch: fetchPulse };\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// MAPPING\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nconst agentIconMap: Record<string, {\r\n    icon: React.ComponentType<{ size?: number; className?: string }>;\r\n    color: string;\r\n    glowColor: string;\r\n}> = {\r\n    'aegis': { icon: Shield, color: 'text-purple-400', glowColor: 'shadow-purple-500/50' },\r\n    'helios': { icon: Sun, color: 'text-amber-400', glowColor: 'shadow-amber-500/50' },\r\n    'nexus': { icon: Network, color: 'text-cyan-400', glowColor: 'shadow-cyan-500/50' },\r\n    'kairos': { icon: Clock, color: 'text-emerald-400', glowColor: 'shadow-emerald-500/50' },\r\n    'atlas': { icon: Database, color: 'text-blue-400', glowColor: 'shadow-blue-500/50' }\r\n};\r\n\r\nconst statusConfig: Record<string, { label: string; color: string; bg: string }> = {\r\n    'IDLE': { label: 'En veille', color: 'text-green-400', bg: 'bg-green-500/20' },\r\n    'ACTIVE': { label: 'Actif', color: 'text-green-400', bg: 'bg-green-500/20' },\r\n    'WORKING': { label: 'En cours', color: 'text-blue-400', bg: 'bg-blue-500/20' },\r\n    'AWAKENING': { label: '├ëveil', color: 'text-yellow-400', bg: 'bg-yellow-500/20' },\r\n    'ERROR': { label: 'Erreur', color: 'text-red-400', bg: 'bg-red-500/20' },\r\n    'COMPROMISED': { label: 'Compromis', color: 'text-red-400', bg: 'bg-red-500/20' },\r\n    'OFFLINE': { label: 'Hors ligne', color: 'text-gray-400', bg: 'bg-gray-500/20' },\r\n    'DORMANT': { label: 'Dormant', color: 'text-gray-400', bg: 'bg-gray-500/20' },\r\n    'DECEASED': { label: 'D├®c├®d├®', color: 'text-red-600', bg: 'bg-red-600/20' }\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// COMPOSANTS\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nconst AgentCard: React.FC<{ agent: Agent; onShowReport?: () => void; hasAlert?: boolean }> = ({ agent, onShowReport, hasAlert }) => {\r\n    const Icon = agent.icon;\r\n    const config = statusConfig[agent.status] || statusConfig.IDLE;\r\n\r\n    return (\r\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"relative group\">\r\n            <div className={`bg-white/5 border ${hasAlert ? 'border-orange-500/50' : 'border-white/10'} backdrop-blur-md rounded-2xl p-6 hover:bg-white/10 transition-all duration-300`}>\r\n                <div className={`absolute inset-0 rounded-2xl bg-gradient-to-br from-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${agent.glowColor} blur-xl`} />\r\n\r\n                <div className=\"relative\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className={`p-3 rounded-xl bg-white/5 ${agent.color}`}>\r\n                                <Icon size={24} />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-lg font-bold text-white\">{agent.name}</h3>\r\n                                <p className=\"text-xs text-slate-400\">Gardien Neural</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <motion.div\r\n                            animate={agent.status === 'WORKING' ? { scale: [1, 1.1, 1], transition: { duration: 1.5, repeat: Infinity } } : {}}\r\n                            className={`px-3 py-1 rounded-full ${config.bg} ${config.color} text-xs font-semibold flex items-center gap-2`}\r\n                        >\r\n                            <div className={`w-2 h-2 rounded-full ${config.color.replace('text', 'bg')} ${agent.status === 'WORKING' ? 'animate-pulse' : ''}`} />\r\n                            {config.label}\r\n                        </motion.div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4\">\r\n                        <p className=\"text-xs text-slate-500 mb-1\">├ëtat Mental</p>\r\n                        <p className=\"text-sm text-slate-300 font-mono\">{agent.lastAction}</p>\r\n                    </div>\r\n\r\n                    {agent.capacity !== undefined && (\r\n                        <div className=\"mt-4\">\r\n                            <p className=\"text-xs text-slate-500 mb-2\">Capacit├® Op├®rationnelle</p>\r\n                            <div className=\"w-full bg-white/5 rounded-full h-2\">\r\n                                <motion.div initial={{ width: 0 }} animate={{ width: `${agent.capacity}%` }}\r\n                                    className=\"bg-gradient-to-r from-purple-500 to-cyan-500 h-2 rounded-full\" />\r\n                            </div>\r\n                            <p className=\"text-xs text-slate-400 mt-1\">{agent.capacity}%</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* KAIROS Alert Button */}\r\n                    {agent.id === 'kairos' && hasAlert && onShowReport && (\r\n                        <div className=\"mt-4\">\r\n                            <button\r\n                                onClick={onShowReport}\r\n                                className=\"w-full px-4 py-2 bg-orange-600/20 hover:bg-orange-600/30 border border-orange-500/50 rounded-lg text-orange-400 text-sm font-semibold flex items-center justify-center gap-2 transition-colors\"\r\n                            >\r\n                                <AlertTriangle size={16} />\r\n                                Voir le Rapport\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"mt-4 pt-4 border-t border-white/5\">\r\n                        <div className=\"flex items-center gap-2 text-xs text-slate-400\">\r\n                            <Activity size={12} className={agent.status === 'WORKING' ? 'animate-pulse' : ''} />\r\n                            <span>Lien neural : {agent.status === 'OFFLINE' || agent.status === 'DORMANT' ? 'D├®connect├®' : 'Actif'}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst NeuralFeed: React.FC<{ logs: LogEntry[] }> = ({ logs }) => {\r\n    const terminalRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (terminalRef.current) {\r\n            terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\r\n        }\r\n    }, [logs]);\r\n\r\n    const getLogColor = (type: LogEntry['type']) => {\r\n        switch (type) {\r\n            case 'success': return 'text-green-400';\r\n            case 'error': return 'text-red-400';\r\n            case 'warning': return 'text-yellow-400';\r\n            default: return 'text-cyan-400';\r\n        }\r\n    };\r\n\r\n    const getLogEmoji = (type: LogEntry['type']) => {\r\n        switch (type) {\r\n            case 'success': return 'Ô£à';\r\n            case 'error': return 'ÔØî';\r\n            case 'warning': return 'ÔÜá´©Å';\r\n            default: return 'Ôä╣´©Å';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white/5 border border-white/10 backdrop-blur-md rounded-2xl overflow-hidden\">\r\n            <div className=\"bg-white/5 border-b border-white/10 px-6 py-4 flex items-center gap-3\">\r\n                <Terminal size={20} className=\"text-cyan-400\" />\r\n                <h3 className=\"text-lg font-bold text-white\">Flux Neuronal</h3>\r\n                <div className=\"ml-auto flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\r\n                    <span className=\"text-xs text-slate-400\">En direct</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div ref={terminalRef} className=\"h-96 overflow-y-auto font-mono text-sm p-4 space-y-1\" style={{ scrollbarWidth: 'thin' }}>\r\n                {logs.length === 0 ? (\r\n                    <div className=\"flex items-center justify-center h-full text-slate-600\">\r\n                        En attente d'activit├® neuronale...\r\n                    </div>\r\n                ) : (\r\n                    <AnimatePresence initial={false}>\r\n                        {logs.map((log) => (\r\n                            <motion.div key={log.id} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0 }}\r\n                                className=\"flex items-start gap-3 hover:bg-white/5 px-2 py-1 rounded transition-colors\">\r\n                                <span className=\"text-slate-600 text-xs shrink-0 mt-0.5\">\r\n                                    {new Date(log.timestamp).toLocaleTimeString('fr-FR', { hour12: false })}\r\n                                </span>\r\n                                <span className=\"text-purple-400 font-bold shrink-0 min-w-[80px]\">[{log.agent}]</span>\r\n                                <span className=\"shrink-0\">{getLogEmoji(log.type)}</span>\r\n                                <span className={`${getLogColor(log.type)} flex-1 break-words`}>{log.message}</span>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// COMPOSANT PRINCIPAL\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nexport const AdminDashboard: React.FC = () => {\r\n    const { pulse, isConnected, error, refetch } = useSystemPulse();\r\n    const [showQuarantine, setShowQuarantine] = useState(false);\r\n\r\n    const agents: Agent[] = pulse?.agents.map(agent => ({\r\n        ...agent,\r\n        icon: agentIconMap[agent.id]?.icon || Shield,\r\n        color: agentIconMap[agent.id]?.color || 'text-white',\r\n        glowColor: agentIconMap[agent.id]?.glowColor || 'shadow-white/50'\r\n    })) || [];\r\n\r\n    const logs: LogEntry[] = pulse?.logs || [];\r\n    const kairosReport = pulse?.kairosReport;\r\n    const hasKairosAlert = kairosReport && kairosReport.orphansFound > 0;\r\n\r\n    const handlePurge = async (files?: string[]) => {\r\n        try {\r\n            const response = await fetch('/api/system/kairos/purge', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ files })\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                alert(`Ô£à ${data.data.purged} fichiers purg├®s avec succ├¿s !`);\r\n                refetch();\r\n            }\r\n        } catch (err) {\r\n            alert('ÔØî Erreur lors de la purge');\r\n        }\r\n    };\r\n\r\n    const handleRescan = async () => {\r\n        try {\r\n            const response = await fetch('/api/system/kairos/rescan', { method: 'POST' });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                alert('Ô£à Re-scan termin├® !');\r\n                refetch();\r\n            }\r\n        } catch (err) {\r\n            alert('ÔØî Erreur lors du re-scan');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-950 text-slate-200 p-6\">\r\n            <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} className=\"mb-8\">\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/50\">\r\n                        <Activity className=\"text-white\" size={24} />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-bold text-white\">Centre de Contr├┤le PANTH├ëON</h1>\r\n                        <p className=\"text-slate-400 mt-1 flex items-center gap-2\">\r\n                            <span className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />\r\n                            {isConnected ? 'Lien Neural : ACTIF' : 'Lien Neural : D├ëCONNECT├ë'}\r\n                            {error && <span className=\"text-red-400 text-xs ml-2\">({error})</span>}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {error && !isConnected && (\r\n                <div className=\"mb-6 bg-red-500/10 border border-red-500/20 rounded-xl p-4\">\r\n                    <p className=\"text-red-400 text-sm\">ÔÜá´©Å Impossible de se connecter au Noyau OLYMPUS. V├®rifiez le serveur backend.</p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"space-y-6\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\">\r\n                        <Shield size={20} className=\"text-purple-400\" />\r\n                        L'Escouade\r\n                        {pulse && (\r\n                            <span className=\"text-xs text-slate-500 ml-auto\">\r\n                                Olympus : {pulse.olympus.status} ÔÇó Temps de veille : {pulse.olympus.uptime}\r\n                            </span>\r\n                        )}\r\n                    </h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                        {agents.length > 0 ? (\r\n                            agents.map((agent) => (\r\n                                <AgentCard\r\n                                    key={agent.id}\r\n                                    agent={agent}\r\n                                    onShowReport={agent.id === 'kairos' ? () => setShowQuarantine(true) : undefined}\r\n                                    hasAlert={agent.id === 'kairos' && hasKairosAlert}\r\n                                />\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"col-span-4 text-center py-12 text-slate-600\">En attente des donn├®es d'agents...</div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\">\r\n                        <Terminal size={20} className=\"text-cyan-400\" />\r\n                        Activit├® Neuronale\r\n                        <span className=\"text-xs text-slate-500 ml-auto\">{logs.length} messages</span>\r\n                    </h2>\r\n                    <NeuralFeed logs={logs} />\r\n                </div>\r\n            </div>\r\n\r\n            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.5 }} className=\"mt-8 text-center\">\r\n                <p className=\"text-xs text-slate-600\">\r\n                    ­ƒîî {pulse?.olympus.consciousness ? 'OLYMPUS CONSCIENT' : 'OLYMPUS DORMANT'} ÔÇó Noyau Neural : {isConnected ? 'SYNCHRONIS├ë' : 'D├ëSYNCHRONIS├ë'}\r\n                </p>\r\n            </motion.div>\r\n\r\n            {/* Quarantine Modal */}\r\n            <QuarantineModal\r\n                isOpen={showQuarantine}\r\n                onClose={() => setShowQuarantine(false)}\r\n                report={kairosReport}\r\n                onPurge={handlePurge}\r\n                onRescan={handleRescan}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\AgentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\HealthPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used.","line":7,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":7,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":36}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * HealthPanel - Agent Monitoring Dashboard\r\n * \r\n * Grid of agent cards with real-time status updates.\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { RefreshCw } from 'lucide-react';\r\nimport { AgentCard } from './AgentCard';\r\nimport type { AgentState } from '../../../../server/agents/base-agent';\r\n\r\ninterface HealthPanelProps {\r\n    agents: AgentState[];\r\n    onTriggerAgent: (agentId: string) => void;\r\n    onRefresh: () => void;\r\n    isLoading?: boolean;\r\n}\r\n\r\nexport const HealthPanel: React.FC<HealthPanelProps> = ({\r\n    agents,\r\n    onTriggerAgent,\r\n    onRefresh,\r\n    isLoading = false\r\n}) => {\r\n    // Summary statistics\r\n    const summary = {\r\n        total: agents.length,\r\n        idle: agents.filter(a => a.status === 'IDLE').length,\r\n        working: agents.filter(a => a.status === 'WORKING').length,\r\n        error: agents.filter(a => a.status === 'ERROR').length,\r\n        offline: agents.filter(a => a.status === 'OFFLINE').length\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Agent Health Panel</h2>\r\n                    <p className=\"text-gray-600 mt-1\">\r\n                        Real-time monitoring of all AEGIS agents\r\n                    </p>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={onRefresh}\r\n                    disabled={isLoading}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-all\"\r\n                >\r\n                    <RefreshCw\r\n                        size={16}\r\n                        className={isLoading ? 'animate-spin' : ''}\r\n                    />\r\n                    Refresh\r\n                </button>\r\n            </div>\r\n\r\n            {/* Summary Stats */}\r\n            <div className=\"grid grid-cols-5 gap-4\">\r\n                <div className=\"bg-white rounded-lg shadow p-4 border border-gray-200\">\r\n                    <div className=\"text-2xl font-bold text-gray-900\">{summary.total}</div>\r\n                    <div className=\"text-sm text-gray-600\">Total Agents</div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-lg shadow p-4 border border-green-200\">\r\n                    <div className=\"text-2xl font-bold text-green-600\">{summary.idle}</div>\r\n                    <div className=\"text-sm text-gray-600\">Idle</div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-lg shadow p-4 border border-blue-200\">\r\n                    <div className=\"text-2xl font-bold text-blue-600\">{summary.working}</div>\r\n                    <div className=\"text-sm text-gray-600\">Working</div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-lg shadow p-4 border border-red-200\">\r\n                    <div className=\"text-2xl font-bold text-red-600\">{summary.error}</div>\r\n                    <div className=\"text-sm text-gray-600\">Errors</div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-lg shadow p-4 border border-gray-300\">\r\n                    <div className=\"text-2xl font-bold text-gray-600\">{summary.offline}</div>\r\n                    <div className=\"text-sm text-gray-600\">Offline</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Agent Cards Grid */}\r\n            {agents.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-white rounded-xl shadow border border-gray-200\">\r\n                    <div className=\"text-gray-400 text-lg\">No agents registered</div>\r\n                    <p className=\"text-gray-500 text-sm mt-2\">\r\n                        Agents will appear here once they are initialized\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <motion.div\r\n                    className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\r\n                    layout\r\n                >\r\n                    {agents.map((agent) => (\r\n                        <AgentCard\r\n                            key={agent.id}\r\n                            agent={agent}\r\n                            onTrigger={onTriggerAgent}\r\n                        />\r\n                    ))}\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\QuarantineModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\TerminalFeed.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Filter' is defined but never used.","line":9,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TerminalFeed - Live Agent Log Feed\r\n * \r\n * Real-time terminal displaying aggregated logs from all agents.\r\n */\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Terminal, Filter, Download } from 'lucide-react';\r\nimport type { LogType } from '../../../../server/agents/base-agent';\r\n\r\ninterface LogEntry {\r\n    agentId: string;\r\n    agentName: string;\r\n    message: string;\r\n    timestamp: Date;\r\n    type: LogType;\r\n}\r\n\r\ninterface TerminalFeedProps {\r\n    logs: LogEntry[];\r\n    onClear?: () => void;\r\n}\r\n\r\nconst logTypeColors = {\r\n    info: 'text-blue-400',\r\n    success: 'text-green-400',\r\n    warning: 'text-yellow-400',\r\n    error: 'text-red-400'\r\n};\r\n\r\nconst logTypeEmoji = {\r\n    info: 'Ôä╣´©Å',\r\n    success: 'Ô£à',\r\n    warning: 'ÔÜá´©Å',\r\n    error: 'ÔØî'\r\n};\r\n\r\nexport const TerminalFeed: React.FC<TerminalFeedProps> = ({ logs, onClear }) => {\r\n    const terminalRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Auto-scroll to bottom when new logs arrive\r\n    useEffect(() => {\r\n        if (terminalRef.current) {\r\n            terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\r\n        }\r\n    }, [logs]);\r\n\r\n    const formatTime = (date: Date) => {\r\n        return new Date(date).toLocaleTimeString('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            second: '2-digit',\r\n            hour12: false\r\n        });\r\n    };\r\n\r\n    const exportLogs = () => {\r\n        const text = logs.map(log =>\r\n            `[${formatTime(log.timestamp)}] [${log.agentName}] ${log.message}`\r\n        ).join('\\n');\r\n\r\n        const blob = new Blob([text], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `aegis-logs-${Date.now()}.txt`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-gray-900 rounded-xl shadow-2xl overflow-hidden border border-gray-700\">\r\n            {/* Header */}\r\n            <div className=\"bg-gray-800 px-6 py-4 flex items-center justify-between border-b border-gray-700\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <Terminal size={20} className=\"text-purple-400\" />\r\n                    <h3 className=\"text-lg font-bold text-white\">Live Agent Feed</h3>\r\n                    <span className=\"text-xs text-gray-400\">\r\n                        ({logs.length} entries)\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        onClick={exportLogs}\r\n                        className=\"px-3 py-1.5 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-all text-sm flex items-center gap-2\"\r\n                    >\r\n                        <Download size={14} />\r\n                        Export\r\n                    </button>\r\n                    <button\r\n                        onClick={onClear}\r\n                        className=\"px-3 py-1.5 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-all text-sm\"\r\n                    >\r\n                        Clear\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Terminal Content */}\r\n            <div\r\n                ref={terminalRef}\r\n                className=\"h-96 overflow-y-auto font-mono text-sm p-4 space-y-1 bg-gray-900\"\r\n                style={{ scrollbarWidth: 'thin' }}\r\n            >\r\n                {logs.length === 0 ? (\r\n                    <div className=\"text-gray-500 text-center py-12\">\r\n                        No logs yet. Agents will report here in real-time.\r\n                    </div>\r\n                ) : (\r\n                    <AnimatePresence initial={false}>\r\n                        {logs.map((log, index) => (\r\n                            <motion.div\r\n                                key={`${log.timestamp}-${index}`}\r\n                                initial={{ opacity: 0, x: -20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"flex items-start gap-3 py-1 hover:bg-gray-800/50 px-2 rounded transition-colors\"\r\n                            >\r\n                                {/* Timestamp */}\r\n                                <span className=\"text-gray-500 shrink-0\">\r\n                                    {formatTime(log.timestamp)}\r\n                                </span>\r\n\r\n                                {/* Agent Name */}\r\n                                <span className=\"text-purple-400 font-semibold shrink-0 min-w-[120px]\">\r\n                                    [{log.agentName}]\r\n                                </span>\r\n\r\n                                {/* Emoji */}\r\n                                <span className=\"shrink-0\">\r\n                                    {logTypeEmoji[log.type]}\r\n                                </span>\r\n\r\n                                {/* Message */}\r\n                                <span className={`${logTypeColors[log.type]} flex-1`}>\r\n                                    {log.message}\r\n                                </span>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"bg-gray-800 px-6 py-2 border-t border-gray-700\">\r\n                <div className=\"text-xs text-gray-500 flex items-center gap-2\">\r\n                    <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n                    Live feed active\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\admin\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\auth\\AuthModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\auth\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\auth\\RegisterPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\auth\\UserDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\EditorSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5744,5747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5744,5747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useUIStore } from '../../../application/store/ui-store';\r\nimport { cn } from '../../design-system/atoms/Button';\r\nimport { User, Briefcase, GraduationCap, Wrench, FileText, TrendingUp, ChevronDown, ChevronUp } from 'lucide-react';\r\nimport { PersonalTab } from './tabs/PersonalTab';\r\nimport { ExperienceTab } from './tabs/ExperienceTab';\r\nimport { EducationTab } from './tabs/EducationTab';\r\nimport { SkillsTab } from './tabs/SkillsTab';\r\nimport { CoverLetterTab } from './tabs/CoverLetterTab';\r\nimport { CriticTab } from './tabs/CriticTab';\r\nimport { SystemInsightsTab } from '../system/SystemInsightsTab';\r\nimport { GlassStyles } from '../../design-system/tokens';\r\n\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { useTranslation } from '../../hooks/useTranslation';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport const EditorSidebar: React.FC = React.memo(() => {\r\n    const { activeTab, setActiveTab } = useUIStore();\r\n    const { isMobileMode } = useSettingsStore();\r\n    const { t } = useTranslation();\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const collapseTimeout = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const ALL_TABS = [\r\n        { id: 'personal', label: t('tabs.personal'), icon: User },\r\n        { id: 'experience', label: t('tabs.experience'), icon: Briefcase },\r\n        { id: 'education', label: t('tabs.education'), icon: GraduationCap },\r\n        { id: 'skills', label: t('tabs.skills'), icon: Wrench },\r\n        { id: 'letter', label: t('tabs.letter'), icon: FileText },\r\n        { id: 'critic', label: t('tabs.review'), icon: TrendingUp },\r\n    ] as const;\r\n\r\n    // Get visible tabs: show 2 by default, expand to all 6 on hover\r\n    const getVisibleTabs = () => {\r\n        if (isExpanded) return ALL_TABS;\r\n\r\n        const defaultTabs = ALL_TABS.slice(0, 2);\r\n        const activeTabIndex = ALL_TABS.findIndex(tab => tab.id === activeTab);\r\n\r\n        if (activeTabIndex < 2) {\r\n            return defaultTabs;\r\n        }\r\n\r\n        return [defaultTabs[0], ALL_TABS[activeTabIndex]];\r\n    };\r\n\r\n    const visibleTabs = getVisibleTabs();\r\n    const hasHiddenTabs = !isExpanded && ALL_TABS.length > 2;\r\n\r\n    // Smooth expand/collapse with delay on exit\r\n    const handleMouseEnter = () => {\r\n        if (collapseTimeout.current) {\r\n            clearTimeout(collapseTimeout.current);\r\n            collapseTimeout.current = null;\r\n        }\r\n        setIsExpanded(true);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        // Delay collapse for smoother UX\r\n        collapseTimeout.current = setTimeout(() => {\r\n            setIsExpanded(false);\r\n        }, 300);\r\n    };\r\n\r\n    // Cleanup timeout on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (collapseTimeout.current) {\r\n                clearTimeout(collapseTimeout.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className={cn(\"flex flex-col h-full w-full lg:min-w-[450px] lg:max-w-[550px] shrink-0 text-slate-100 rounded-xl border border-white/10 overflow-hidden\", GlassStyles.panel)}>\r\n            {/* Tabs Header - Collapsible with smooth transitions */}\r\n            <div\r\n                className=\"border-b border-white/10 sticky top-0 z-10 p-2 bg-slate-900/80 backdrop-blur-md\"\r\n                onMouseEnter={handleMouseEnter}\r\n                onMouseLeave={handleMouseLeave}\r\n            >\r\n                <motion.div\r\n                    className={cn(\r\n                        \"grid gap-1.5\",\r\n                        isExpanded ? \"grid-cols-3\" : \"grid-cols-2\",\r\n                        isMobileMode ? \"grid-cols-2\" : \"\"\r\n                    )}\r\n                    layout\r\n                    transition={{\r\n                        layout: {\r\n                            type: \"spring\",\r\n                            stiffness: 400,\r\n                            damping: 35,\r\n                            mass: 0.8\r\n                        }\r\n                    }}\r\n                >\r\n                    <AnimatePresence mode=\"popLayout\">\r\n                        {(isExpanded ? ALL_TABS : visibleTabs).map((tab, index) => {\r\n                            const Icon = tab.icon;\r\n                            const isActive = activeTab === tab.id;\r\n                            return (\r\n                                <motion.button\r\n                                    key={tab.id}\r\n                                    layout\r\n                                    initial={{ opacity: 0, scale: 0.9, y: -5 }}\r\n                                    animate={{\r\n                                        opacity: 1,\r\n                                        scale: 1,\r\n                                        y: 0,\r\n                                        transition: {\r\n                                            type: \"spring\",\r\n                                            stiffness: 500,\r\n                                            damping: 30,\r\n                                            delay: isExpanded ? index * 0.03 : 0\r\n                                        }\r\n                                    }}\r\n                                    exit={{\r\n                                        opacity: 0,\r\n                                        scale: 0.9,\r\n                                        y: -5,\r\n                                        transition: {\r\n                                            duration: 0.15,\r\n                                            ease: \"easeOut\"\r\n                                        }\r\n                                    }}\r\n                                    onClick={() => setActiveTab(tab.id as any)}\r\n                                    className={cn(\r\n                                        'flex flex-col items-center gap-1.5 py-2.5 px-2 rounded-lg text-[11px] font-medium transition-colors duration-200',\r\n                                        isActive\r\n                                            ? 'text-white bg-white/10 shadow-lg border border-white/20'\r\n                                            : 'text-slate-400 hover:bg-white/5 hover:text-white'\r\n                                    )}\r\n                                >\r\n                                    <Icon size={isMobileMode ? 20 : 18} />\r\n                                    <span className=\"whitespace-nowrap\">{tab.label}</span>\r\n                                </motion.button>\r\n                            );\r\n                        })}\r\n                    </AnimatePresence>\r\n                </motion.div>\r\n\r\n                {/* Expand indicator - smooth transition */}\r\n                <AnimatePresence>\r\n                    {hasHiddenTabs && (\r\n                        <motion.div\r\n                            className=\"flex justify-center mt-1.5\"\r\n                            initial={{ opacity: 0, height: 0 }}\r\n                            animate={{ opacity: 1, height: 'auto' }}\r\n                            exit={{ opacity: 0, height: 0 }}\r\n                            transition={{ duration: 0.2, ease: \"easeInOut\" }}\r\n                        >\r\n                            <div className=\"flex items-center gap-1 text-[10px] text-slate-500\">\r\n                                {isExpanded ? (\r\n                                    <ChevronUp size={12} className=\"animate-pulse\" />\r\n                                ) : (\r\n                                    <>\r\n                                        <ChevronDown size={12} />\r\n                                        <span>+{ALL_TABS.length - 2} menus</span>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-4 custom-scrollbar bg-transparent\">\r\n                {activeTab === 'personal' && <PersonalTab />}\r\n                {activeTab === 'experience' && <ExperienceTab />}\r\n                {activeTab === 'education' && <EducationTab />}\r\n                {activeTab === 'skills' && <SkillsTab />}\r\n                {activeTab === 'letter' && <CoverLetterTab />}\r\n                {activeTab === 'critic' && <CriticTab />}\r\n                {activeTab === 'system' && <SystemInsightsTab />}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\InlineEditorOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\MagicParticles.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setParticles' is assigned a value but never used.","line":18,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface Particle {\r\n    id: string;\r\n    x: number;\r\n    y: number;\r\n    size: number;\r\n    rotation: number;\r\n}\r\n\r\ninterface MagicParticlesProps {\r\n    cursor: { x: number; y: number };\r\n    accentColor?: string;\r\n}\r\n\r\nexport const MagicParticles: React.FC<MagicParticlesProps> = ({ cursor, accentColor = '#8b5cf6' }) => {\r\n    const [particles, setParticles] = useState<Particle[]>([]);\r\n\r\n    useEffect(() => {\r\n        // Throttle particle creation to improve performance\r\n        const now = Date.now();\r\n        if (now % 100 !== 0) return; // Simple throttle\r\n\r\n        const interval = setInterval(() => {\r\n            // ... (keep existing logic but maybe reduce frequency or particle count)\r\n        }, 100); // Increased interval from 50ms to 100ms\r\n\r\n        return () => clearInterval(interval);\r\n    }, [cursor.x, cursor.y]);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 pointer-events-none z-40\">\r\n            <AnimatePresence>\r\n                {particles.map((particle) => (\r\n                    <motion.div\r\n                        key={particle.id}\r\n                        initial={{ opacity: 1, scale: 0 }}\r\n                        animate={{\r\n                            opacity: 0,\r\n                            scale: 1,\r\n                            rotate: particle.rotation + 180\r\n                        }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.8, ease: 'easeOut' }}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            left: particle.x,\r\n                            top: particle.y,\r\n                            width: particle.size,\r\n                            height: particle.size\r\n                        }}\r\n                    >\r\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path\r\n                                d=\"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z\"\r\n                                fill={accentColor}\r\n                                opacity=\"0.8\"\r\n                            />\r\n                            <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"white\" opacity=\"0.9\" />\r\n                        </svg>\r\n                    </motion.div>\r\n                ))}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\MobileEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\SmartDensityController.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\components\\LanguageEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'removeLanguage' is assigned a value but never used.","line":25,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * LanguageEditor - CRUD Component for CV Languages\r\n * \r\n * Allows adding, editing, and removing languages with proficiency levels.\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { useCVStoreV2 } from '../../../../application/store/v2';\r\nimport { Input } from '../../../design-system/atoms/Input';\r\nimport { Button } from '../../../design-system/atoms/Button';\r\nimport { Plus, X, Globe } from 'lucide-react';\r\n\r\nconst PROFICIENCY_LEVELS = [\r\n    { value: 'native', label: 'Langue maternelle' },\r\n    { value: 'fluent', label: 'Courant (C1-C2)' },\r\n    { value: 'advanced', label: 'Avanc├® (B2)' },\r\n    { value: 'intermediate', label: 'Interm├®diaire (B1)' },\r\n    { value: 'basic', label: 'Notions (A1-A2)' },\r\n];\r\n\r\nexport const LanguageEditor: React.FC = () => {\r\n    const profile = useCVStoreV2((state) => state.profile);\r\n    const updateField = useCVStoreV2((state) => state.updateField);\r\n    const addLanguage = useCVStoreV2((state) => state.addLanguage);\r\n    const removeLanguage = useCVStoreV2((state) => state.removeLanguage);\r\n\r\n    const [newLanguage, setNewLanguage] = useState('');\r\n    const [newLevel, setNewLevel] = useState('fluent');\r\n\r\n    if (!profile || !profile.languages) {\r\n        return <div className=\"p-4 text-slate-400\">Chargement...</div>;\r\n    }\r\n\r\n    const handleAdd = () => {\r\n        if (!newLanguage.trim()) return;\r\n        addLanguage({ name: newLanguage.trim(), level: getLevelLabel(newLevel) });\r\n        setNewLanguage('');\r\n        setNewLevel('fluent');\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            handleAdd();\r\n        }\r\n    };\r\n\r\n    const getLevelLabel = (value: string): string => {\r\n        const level = PROFICIENCY_LEVELS.find(l => l.value === value);\r\n        return level ? level.label : value;\r\n    };\r\n\r\n    const handleRemove = (index: number) => {\r\n        // Use updateField to remove by filtering the array\r\n        const updatedLanguages = profile.languages.filter((_, i) => i !== index);\r\n        updateField('languages', updatedLanguages);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Add Language Form */}\r\n            <div className=\"flex gap-2\">\r\n                <div className=\"flex-1\">\r\n                    <Input\r\n                        value={newLanguage}\r\n                        onChange={(e) => setNewLanguage(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        placeholder=\"Ex: Fran├ºais, Anglais, Allemand...\"\r\n                        variant=\"glass\"\r\n                    />\r\n                </div>\r\n                <select\r\n                    value={newLevel}\r\n                    onChange={(e) => setNewLevel(e.target.value)}\r\n                    className=\"glass-input px-3 py-2 rounded-lg text-sm bg-slate-900/50 text-slate-200 border border-white/10 focus:border-brand-500 outline-none\"\r\n                >\r\n                    {PROFICIENCY_LEVELS.map((level) => (\r\n                        <option key={level.value} value={level.value} className=\"bg-slate-900\">\r\n                            {level.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <Button\r\n                    onClick={handleAdd}\r\n                    leftIcon={<Plus size={16} />}\r\n                    className=\"bg-brand-600 hover:bg-brand-700 text-white shrink-0\"\r\n                >\r\n                    Ajouter\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Languages List */}\r\n            <div className=\"space-y-2\">\r\n                {profile.languages.length === 0 ? (\r\n                    <div className=\"text-center py-6 text-slate-400 text-sm\">\r\n                        <Globe size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                        <p>Aucune langue ajout├®e</p>\r\n                        <p className=\"text-xs mt-1\">Ajoutez vos comp├®tences linguistiques ci-dessus</p>\r\n                    </div>\r\n                ) : (\r\n                    profile.languages.map((lang, index) => (\r\n                        <div\r\n                            key={index}\r\n                            className=\"flex items-center justify-between bg-white/5 border border-white/10 rounded-lg px-4 py-3 group hover:bg-white/10 transition-colors\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Globe size={16} className=\"text-slate-400\" />\r\n                                <div>\r\n                                    <span className=\"text-slate-200 font-medium\">{lang.name}</span>\r\n                                    <span className=\"text-slate-400 text-sm ml-2\">ÔÇö {lang.level}</span>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => handleRemove(index)}\r\n                                className=\"text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                title=\"Supprimer\"\r\n                            >\r\n                                <X size={16} />\r\n                            </button>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\CVImportTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2859,2862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2859,2862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2875,2878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2875,2878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3158,3161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3158,3161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useCVStoreV2 } from '../../../../application/store/v2';\r\nimport { useSettingsStore } from '../../../../application/store/settings-store';\r\nimport { useAuthStore } from '../../../../application/store/auth-store';\r\nimport { AIService } from '../../../../application/services/ai-service';\r\nimport { GeminiClient } from '../../../../infrastructure/ai/gemini-client';\r\nimport { BackendAIClient } from '../../../../infrastructure/ai/backend-ai-client';\r\nimport { Button } from '../../../design-system/atoms/Button';\r\nimport { Card } from '../../../design-system/atoms/Card';\r\nimport { Sparkles, AlertTriangle } from 'lucide-react';\r\nimport { t } from '../../../../data/translations';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const CVImportTab: React.FC = () => {\r\n    const [apiKey, setApiKey] = useState('');\r\n    const [cvText, setCvText] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [usage, setUsage] = useState<{ usage: number, limit: number | string, isPro: boolean } | null>(null);\r\n\r\n    const updateField = useCVStoreV2((state) => state.updateField);\r\n    const { language } = useSettingsStore();\r\n    const { isAuthenticated } = useAuthStore();\r\n    const navigate = useNavigate();\r\n    const txt = t[language].aiSection;\r\n\r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            fetchUsage();\r\n        }\r\n    }, [isAuthenticated]);\r\n\r\n    const fetchUsage = async () => {\r\n        try {\r\n            const res = await fetch('/api/ai/usage');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setUsage(data);\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to fetch usage', e);\r\n        }\r\n    };\r\n\r\n    const handleAnalyze = async () => {\r\n        if (!isAuthenticated && !apiKey) {\r\n            setError(language === 'fr' ? 'Veuillez fournir une cl├® API.' : 'Please provide an API key.');\r\n            return;\r\n        }\r\n\r\n        if (!cvText) {\r\n            setError(language === 'fr' ? 'Veuillez fournir le texte du CV.' : 'Please provide the CV text.');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            let client;\r\n            if (isAuthenticated) {\r\n                client = new BackendAIClient();\r\n            } else {\r\n                client = new GeminiClient(apiKey);\r\n            }\r\n\r\n            const service = new AIService(client);\r\n            const result = await service.analyzeCV(cvText, language === 'fr' ? 'Suisse' : 'Swiss');\r\n\r\n            if (result) {\r\n                // V2: Bulk update entire profile\r\n                Object.keys(result).forEach((key) => {\r\n                    updateField(key as any, (result as any)[key]);\r\n                });\r\n                if (isAuthenticated) fetchUsage();\r\n            } else {\r\n                setError(language === 'fr' ? \"L'IA n'a pas pu analyser le CV correctement.\" : \"AI could not analyze the CV correctly.\");\r\n            }\r\n        } catch (err: any) {\r\n            setError(err.message || (language === 'fr' ? 'Une erreur est survenue.' : 'An error occurred.'));\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <Card className=\"bg-indigo-50 border-indigo-100\">\r\n                <div className=\"flex items-center gap-2 mb-2 text-indigo-800 font-bold\">\r\n                    <Sparkles size={18} />\r\n                    <h3>{txt.title}</h3>\r\n                </div>\r\n                <p className=\"text-xs text-indigo-600 mb-4\">\r\n                    {txt.desc}\r\n                </p>\r\n\r\n                {isAuthenticated && usage && (\r\n                    <div className=\"mb-4 p-3 bg-white rounded border border-indigo-100\">\r\n                        <div className=\"flex justify-between items-center mb-2\">\r\n                            <span className=\"text-xs font-bold text-slate-700\">\r\n                                {usage.isPro ? 'Pro Plan: Unlimited' : `Free Quota: ${usage.usage} / ${usage.limit}`}\r\n                            </span>\r\n                            {!usage.isPro && (\r\n                                <Button size=\"sm\" variant=\"outline\" onClick={() => navigate('/settings')} className=\"h-6 text-xs\">\r\n                                    Upgrade\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                        {!usage.isPro && typeof usage.limit === 'number' && (\r\n                            <div className=\"w-full bg-slate-200 rounded-full h-2\">\r\n                                <div\r\n                                    className={`h-2 rounded-full ${usage.usage >= usage.limit ? 'bg-red-500' : 'bg-indigo-500'}`}\r\n                                    style={{ width: `${Math.min((usage.usage / usage.limit) * 100, 100)}%` }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-100 border border-red-200 text-red-700 p-3 rounded mb-3 text-xs flex items-center gap-2\">\r\n                        <AlertTriangle size={16} /> {error}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"space-y-3\">\r\n                    {!isAuthenticated && (\r\n                        <div>\r\n                            <label className=\"block text-xs font-bold text-slate-600 mb-1\">{txt.apiKeyLabel}</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={apiKey}\r\n                                onChange={(e) => setApiKey(e.target.value)}\r\n                                className=\"w-full p-2 border rounded text-xs\"\r\n                                placeholder=\"AIzaSy...\"\r\n                            />\r\n                            <p className=\"text-[10px] text-slate-400 mt-1\">\r\n                                Sign in to use our AI without your own key.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-slate-600 mb-1\">{txt.pasteLabel}</label>\r\n                        <textarea\r\n                            value={cvText}\r\n                            onChange={(e) => setCvText(e.target.value)}\r\n                            className=\"w-full p-2 border rounded text-xs h-40\"\r\n                            placeholder=\"...\"\r\n                        />\r\n                    </div>\r\n\r\n                    <Button\r\n                        onClick={handleAnalyze}\r\n                        isLoading={isLoading}\r\n                        className=\"w-full\"\r\n                        leftIcon={<Sparkles size={16} />}\r\n                        disabled={isAuthenticated && !usage?.isPro && typeof usage?.limit === 'number' && usage.usage >= usage.limit}\r\n                    >\r\n                        {isAuthenticated && !usage?.isPro && typeof usage?.limit === 'number' && usage.usage >= usage.limit\r\n                            ? 'Quota Exceeded'\r\n                            : txt.analyzeBtn}\r\n                    </Button>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\CoverLetterTab.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":29,"column":29,"nodeType":"Identifier","endLine":29,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":30,"column":45,"nodeType":"Identifier","endLine":30,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":33,"column":29,"nodeType":"Identifier","endLine":33,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":35,"column":51,"nodeType":"Identifier","endLine":35,"endColumn":59},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":36,"column":41,"nodeType":"Identifier","endLine":36,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":37,"column":31,"nodeType":"Identifier","endLine":37,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":40,"column":37,"nodeType":"Identifier","endLine":40,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":41,"column":35,"nodeType":"Identifier","endLine":41,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":42,"column":47,"nodeType":"Identifier","endLine":42,"endColumn":55},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":44,"column":5,"nodeType":"MemberExpression","endLine":44,"endColumn":20},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":105,"column":37,"nodeType":"Identifier","endLine":105,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"React.useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":152,"column":5,"nodeType":"MemberExpression","endLine":152,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'handleSave'. Either include it or remove the dependency array.","line":160,"column":8,"nodeType":"ArrayExpression","endLine":160,"endColumn":42,"suggestions":[{"desc":"Update the dependencies array to be: [editorContent, jobTitle, company, handleSave]","fix":{"range":[6202,6236],"text":"[editorContent, jobTitle, company, handleSave]"}}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { useCVStoreV2 } from '../../../../application/store/v2';\r\nimport { AIService } from '../../../../application/services/ai-service';\r\nimport { GeminiClient } from '../../../../infrastructure/ai/gemini-client';\r\nimport { LetterGenerator } from '../../../../domain/motivation-letter/letter-generator';\r\nimport { Button } from '../../../design-system/atoms/Button';\r\nimport { Card } from '../../../design-system/atoms/Card';\r\nimport * as Lucide from 'lucide-react';\r\nimport { useToastStore } from '../../../../application/store/toast-store';\r\nimport { useAuthStore } from '../../../../application/store/auth-store';\r\nimport { BackendAIClient } from '../../../../infrastructure/ai/backend-ai-client';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport type { Letter } from '../../../../domain/entities/cv';\r\nimport { useTranslation } from '../../../hooks/useTranslation';\r\n\r\nexport const CoverLetterTab: React.FC = () => {\r\n    const { t, language } = useTranslation();\r\n    const profile = useCVStoreV2((state) => state.profile);\r\n    const updateField = useCVStoreV2((state) => state.updateField);\r\n    const { addToast } = useToastStore();\r\n    const { isAuthenticated } = useAuthStore();\r\n\r\n    if (!profile || !profile.personal) {\r\n        return <div className=\"p-4 text-slate-400\">Chargement...</div>;\r\n    }\r\n\r\n    // View State: 'list' | 'editor'\r\n    const [view, setView] = useState<'list' | 'editor'>('list');\r\n    const [activeLetter, setActiveLetter] = useState<Letter | null>(null);\r\n\r\n    // Editor State\r\n    const [mode, setMode] = useState<'offline' | 'online'>('offline');\r\n    // API key removed - now using import.meta.env.VITE_GEMINI_API_KEY\r\n    const [isOnlineLoading, setIsOnlineLoading] = useState(false);\r\n    const [targetLang, setTargetLang] = useState<'fr' | 'en'>(language);\r\n    const [usage, setUsage] = useState<{ usage: number, limit: number | string, isPro: boolean } | null>(null);\r\n\r\n    // Form State\r\n    const [jobTitle, setJobTitle] = useState('');\r\n    const [company, setCompany] = useState('');\r\n    const [editorContent, setEditorContent] = useState('');\r\n\r\n    React.useEffect(() => {\r\n        if (isAuthenticated) {\r\n            fetchUsage();\r\n        }\r\n    }, [isAuthenticated]);\r\n\r\n    const txt = {\r\n        newLetter: t('letterGen.newLetter') || 'New Letter',\r\n        emptyState: t('letterGen.emptyState') || 'No letters yet',\r\n        edit: t('letterGen.edit') || 'Edit',\r\n        delete: t('letterGen.delete') || 'Delete',\r\n        optimize: t('letterGen.optimize') || 'Optimize',\r\n        back: t('letterGen.back') || 'Back',\r\n        save: t('actions.save'),\r\n        offline: t('letterGen.offline') || 'Offline',\r\n        online: t('letterGen.online') || 'Online',\r\n        jobTitle: t('letterGen.jobTitle') || 'Job Title',\r\n        company: t('letterGen.company') || 'Company',\r\n        targetLang: t('letterGen.targetLang') || 'Target Language',\r\n        generate: t('letterGen.generate') || 'Generate',\r\n        errorJob: t('letterGen.errorJob') || 'Job title required',\r\n        saved: t('letterGen.saved') || 'Saved',\r\n        deleted: t('letterGen.deleted') || 'Deleted',\r\n        generated: t('letterGen.generated') || 'Generated',\r\n        errorGen: t('letterGen.errorGen') || 'Generation failed',\r\n        startNew: t('letterGen.startNew') || 'Start a New Letter',\r\n        placeholder: t('letterGen.placeholder') || 'Start typing your letter here...',\r\n    };\r\n    const commonTxt = {\r\n        tabs: { letter: t('tabs.letter') },\r\n        download: t('actions.download'),\r\n        aiSection: { errorApiKey: t('aiSection.errorApiKey') || 'API Key required' }\r\n    };\r\n\r\n    const fetchUsage = async () => {\r\n        try {\r\n            const res = await fetch('/api/ai/usage');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setUsage(data);\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to fetch usage', e);\r\n        }\r\n    };\r\n\r\n    const openEditor = (letter?: Letter) => {\r\n        if (letter) {\r\n            setActiveLetter(letter);\r\n            setJobTitle(letter.targetJob || '');\r\n            setCompany(letter.targetCompany || '');\r\n            setEditorContent(letter.content);\r\n        } else {\r\n            setActiveLetter(null);\r\n            setJobTitle(profile.personal.title || '');\r\n            setCompany('');\r\n            setEditorContent('');\r\n        }\r\n        setView('editor');\r\n    };\r\n\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    const handleSave = async (silent = false) => {\r\n        if (!jobTitle) {\r\n            if (!silent) addToast(txt.errorJob, 'error');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        if (!silent) await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n        const letter: Letter = {\r\n            id: activeLetter?.id || uuidv4(),\r\n            title: `${jobTitle} @ ${company || 'Unknown'}`,\r\n            content: editorContent,\r\n            lastUpdated: Date.now(),\r\n            targetJob: jobTitle,\r\n            targetCompany: company\r\n        };\r\n\r\n        // V2: Update letters array\r\n        const letters = profile.letters || [];\r\n        const existingIndex = letters.findIndex(l => l.id === letter.id);\r\n\r\n        if (existingIndex >= 0) {\r\n            updateField(`letters.${existingIndex}`, letter);\r\n        } else {\r\n            updateField('letters', [...letters, letter]);\r\n        }\r\n\r\n        setActiveLetter(letter);\r\n        setIsSaving(false);\r\n        if (!silent) {\r\n            addToast(txt.saved, 'success');\r\n            setView('list');\r\n        }\r\n    };\r\n\r\n    const handleDelete = (id: string) => {\r\n        if (confirm('Are you sure?')) {\r\n            const updatedLetters = (profile.letters || []).filter(l => l.id !== id);\r\n            updateField('letters', updatedLetters);\r\n            addToast(txt.deleted, 'success');\r\n        }\r\n    };\r\n\r\n    // Auto-save effect\r\n    React.useEffect(() => {\r\n        if (!editorContent || !jobTitle) return;\r\n\r\n        const timer = setTimeout(() => {\r\n            handleSave(true);\r\n        }, 2000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [editorContent, jobTitle, company]);\r\n\r\n    const handleDownload = (letter: Letter) => {\r\n        const element = document.createElement(\"a\");\r\n        const file = new Blob([letter.content], { type: 'text/plain' });\r\n        element.href = URL.createObjectURL(file);\r\n        element.download = `Cover_Letter_${letter.targetJob || 'Job'}.txt`;\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n    const handleOptimize = (letter: Letter) => {\r\n        addToast(`Optimization for \"${letter.title}\" coming soon!`, 'info');\r\n    };\r\n\r\n    // --- Generators ---\r\n    const generateOnline = async () => {\r\n        // Use environment variable for API key\r\n        const envApiKey = import.meta.env.VITE_GEMINI_API_KEY;\r\n        if (!isAuthenticated && !envApiKey) {\r\n            addToast('Cl├® API manquante. Ajoutez VITE_GEMINI_API_KEY dans .env', 'error');\r\n            return;\r\n        }\r\n        setIsOnlineLoading(true);\r\n        try {\r\n            let client;\r\n            if (isAuthenticated) {\r\n                client = new BackendAIClient();\r\n            } else {\r\n                client = new GeminiClient(envApiKey);\r\n            }\r\n            const service = new AIService(client);\r\n            const contextProfile = { ...profile };\r\n            const text = await service.writeCoverLetter(contextProfile, targetLang === 'fr' ? 'Fran├ºais' : 'English');\r\n            setEditorContent(text);\r\n            if (isAuthenticated) fetchUsage();\r\n            addToast(txt.generated, 'success');\r\n        } catch (error) {\r\n            console.error(error);\r\n            addToast(txt.errorGen, 'error');\r\n        } finally {\r\n            setIsOnlineLoading(false);\r\n        }\r\n    };\r\n\r\n    const generateOffline = () => {\r\n        try {\r\n            const result = LetterGenerator.generate({\r\n                jobTitle: jobTitle || 'Position',\r\n                companyName: company || 'Company',\r\n                language: targetLang,\r\n                tone: 'professional',\r\n                candidateName: `${profile.personal.firstName} ${profile.personal.lastName}`,\r\n                candidateSkills: profile.skills || []\r\n            });\r\n            setEditorContent(result.content);\r\n            addToast(txt.generated, 'success');\r\n        } catch (e) {\r\n            console.error(e);\r\n            addToast(txt.errorGen, 'error');\r\n        }\r\n    };\r\n\r\n    // --- Render ---\r\n    if (view === 'list') {\r\n        return (\r\n            <div className=\"h-full flex flex-col bg-transparent\">\r\n                <div className=\"p-4 border-b border-white/10 bg-transparent flex justify-between items-center\">\r\n                    <h3 className=\"font-bold text-slate-200 flex items-center gap-2\">\r\n                        <Lucide.FileText size={18} className=\"text-brand-400\" />\r\n                        {commonTxt.tabs.letter}\r\n                    </h3>\r\n                    <Button size=\"sm\" onClick={() => openEditor()} leftIcon={<Lucide.Plus size={14} />} className=\"bg-brand-600 hover:bg-brand-700 text-white\">\r\n                        {txt.newLetter}\r\n                    </Button>\r\n                </div>\r\n                <div className=\"p-4 space-y-3 overflow-y-auto flex-1 pb-20\">\r\n                    {!profile.letters || profile.letters.length === 0 ? (\r\n                        <div className=\"text-center py-12 px-4 text-slate-400 flex flex-col items-center justify-center h-full\">\r\n                            <div className=\"bg-white/5 p-4 rounded-full mb-4 border border-white/10\">\r\n                                <Lucide.PenTool size={32} className=\"text-brand-400\" />\r\n                            </div>\r\n                            <h4 className=\"text-lg font-bold text-slate-200 mb-2\">{txt.emptyState}</h4>\r\n                            <p className=\"text-sm text-slate-400 mb-6 max-w-xs mx-auto\">\r\n                                Create a tailored cover letter for your next job application in seconds.\r\n                            </p>\r\n                            <Button onClick={() => openEditor()} leftIcon={<Lucide.Plus size={16} />} className=\"bg-brand-600 hover:bg-brand-700 text-white\">\r\n                                {txt.startNew}\r\n                            </Button>\r\n                        </div>\r\n                    ) : (\r\n                        profile.letters.map(letter => (\r\n                            <div key={letter.id} className=\"glass-card p-4 rounded-lg group\">\r\n                                <div className=\"flex justify-between items-start mb-2\">\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-slate-200\">{letter.title}</h4>\r\n                                        <p className=\"text-xs text-slate-400\">\r\n                                            {new Date(letter.lastUpdated).toLocaleDateString()}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity\">\r\n                                        <button onClick={() => openEditor(letter)} className=\"p-1.5 text-slate-400 hover:text-brand-400 rounded hover:bg-white/5\" title={txt.edit}>\r\n                                            <Lucide.Edit3 size={14} />\r\n                                        </button>\r\n                                        <button onClick={() => handleDownload(letter)} className=\"p-1.5 text-slate-400 hover:text-green-400 rounded hover:bg-white/5\" title={commonTxt.download}>\r\n                                            <Lucide.Download size={14} />\r\n                                        </button>\r\n                                        <button onClick={() => handleDelete(letter.id)} className=\"p-1.5 text-slate-400 hover:text-red-400 rounded hover:bg-white/5\" title={txt.delete}>\r\n                                            <Lucide.Trash2 size={14} />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <p className=\"text-xs text-slate-300 line-clamp-2 font-serif italic\">\r\n                                    {letter.content.substring(0, 100)}...\r\n                                </p>\r\n                                <div className=\"mt-2 pt-2 border-t border-white/10 flex justify-end\">\r\n                                    <button onClick={() => handleOptimize(letter)} className=\"text-xs text-brand-400 hover:text-brand-300 font-medium flex items-center gap-1\">\r\n                                        <Lucide.Sparkles size={12} />\r\n                                        {txt.optimize}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col bg-transparent\">\r\n            {/* Header */}\r\n            <div className=\"p-3 border-b border-white/10 bg-transparent flex justify-between items-center\">\r\n                <button onClick={() => setView('list')} className=\"text-slate-400 hover:text-white flex items-center gap-1 text-sm font-medium\">\r\n                    <Lucide.ChevronLeft size={14} />\r\n                    {txt.back}\r\n                </button>\r\n                <div className=\"flex bg-white/5 p-1 rounded-lg border border-white/10\">\r\n                    <button\r\n                        onClick={() => setMode('offline')}\r\n                        className={`px-3 py-1.5 text-xs font-medium rounded-md flex items-center gap-1.5 transition-all ${mode === 'offline' ? 'bg-white/10 text-brand-300 shadow-sm' : 'text-slate-400 hover:text-slate-200'}`}\r\n                    >\r\n                        <Lucide.WifiOff size={12} /> {txt.offline}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setMode('online')}\r\n                        className={`px-3 py-1.5 text-xs font-medium rounded-md flex items-center gap-1.5 transition-all ${mode === 'online' ? 'bg-white/10 text-emerald-400 shadow-sm' : 'text-slate-400 hover:text-slate-200'}`}\r\n                    >\r\n                        <Lucide.Wifi size={12} /> {txt.online}\r\n                    </button>\r\n                </div>\r\n                <Button size=\"sm\" onClick={() => handleSave(false)} disabled={isSaving} className=\"bg-brand-600 hover:bg-brand-700 text-white\">\r\n                    {isSaving ? 'Saving...' : txt.save}\r\n                </Button>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                {/* Inputs */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"block text-xs font-semibold text-slate-300 mb-1\">{txt.jobTitle}</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"glass-input w-full p-2 rounded text-sm outline-none\"\r\n                            value={jobTitle}\r\n                            onChange={e => setJobTitle(e.target.value)}\r\n                            placeholder=\"e.g. Software Engineer\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-xs font-semibold text-slate-300 mb-1\">{txt.company}</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"glass-input w-full p-2 rounded text-sm outline-none\"\r\n                            value={company}\r\n                            onChange={e => setCompany(e.target.value)}\r\n                            placeholder=\"e.g. Tech Corp\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Language Selector */}\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                    <span className=\"text-xs font-medium text-slate-400\">{txt.targetLang}:</span>\r\n                    <div className=\"flex gap-1\">\r\n                        <button\r\n                            onClick={() => setTargetLang('fr')}\r\n                            className={`px-2 py-1 text-xs rounded border ${targetLang === 'fr' ? 'bg-brand-900/50 border-brand-500/50 text-brand-300' : 'bg-white/5 border-white/10 text-slate-400'}`}\r\n                        >\r\n                            FR\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setTargetLang('en')}\r\n                            className={`px-2 py-1 text-xs rounded border ${targetLang === 'en' ? 'bg-brand-900/50 border-brand-500/50 text-brand-300' : 'bg-white/5 border-white/10 text-slate-400'}`}\r\n                        >\r\n                            EN\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Generator Controls */}\r\n                {mode === 'online' ? (\r\n                    <Card className=\"p-3 bg-emerald-900/20 border-emerald-500/30\">\r\n                        {isAuthenticated && usage && (\r\n                            <div className=\"mb-3 text-xs\">\r\n                                <div className=\"flex justify-between items-center mb-1\">\r\n                                    <span className=\"font-medium text-emerald-400\">\r\n                                        {usage.isPro ? 'Pro Plan: Unlimited' : `Free Quota: ${usage.usage} / ${usage.limit}`}\r\n                                    </span>\r\n                                </div>\r\n                                {!usage.isPro && typeof usage.limit === 'number' && (\r\n                                    <div className=\"w-full bg-emerald-900/50 rounded-full h-1.5\">\r\n                                        <div\r\n                                            className={`h-1.5 rounded-full ${usage.usage >= usage.limit ? 'bg-red-500' : 'bg-emerald-500'}`}\r\n                                            style={{ width: `${Math.min((usage.usage / usage.limit) * 100, 100)}%` }}\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                        {/* API input removed - uses VITE_GEMINI_API_KEY env variable */}\r\n                        <Button\r\n                            size=\"sm\"\r\n                            onClick={generateOnline}\r\n                            isLoading={isOnlineLoading}\r\n                            className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white\"\r\n                            leftIcon={<Lucide.Sparkles size={14} />}\r\n                            disabled={isAuthenticated && !usage?.isPro && typeof usage?.limit === 'number' && usage.usage >= usage.limit}\r\n                        >\r\n                            {isAuthenticated && !usage?.isPro && typeof usage?.limit === 'number' && usage.usage >= usage.limit\r\n                                ? 'Quota Exceeded'\r\n                                : txt.generate}\r\n                        </Button>\r\n                    </Card>\r\n                ) : (\r\n                    <Button\r\n                        onClick={generateOffline}\r\n                        className=\"w-full bg-brand-600 hover:bg-brand-700 text-white\"\r\n                        leftIcon={<Lucide.Sparkles size={16} />}\r\n                    >\r\n                        {txt.generate}\r\n                    </Button>\r\n                )}\r\n\r\n                {/* Editor */}\r\n                <div className=\"relative\">\r\n                    <textarea\r\n                        className=\"glass-input w-full h-96 p-4 text-sm rounded-lg outline-none leading-relaxed font-serif text-slate-200 resize-none\"\r\n                        value={editorContent}\r\n                        onChange={(e) => setEditorContent(e.target.value)}\r\n                        placeholder={txt.placeholder}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\CriticTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\EducationTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\ExperienceTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\PersonalTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\editor\\tabs\\SkillsTab.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":17,"column":37,"nodeType":"Identifier","endLine":17,"endColumn":45}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { useCVStoreV2 } from '../../../../application/store/v2';\r\nimport { Input } from '../../../design-system/atoms/Input';\r\nimport { Button } from '../../../design-system/atoms/Button';\r\nimport { Card } from '../../../design-system/atoms/Card';\r\nimport { Plus, X } from 'lucide-react';\r\nimport { LanguageEditor } from '../components/LanguageEditor';\r\n\r\nexport const SkillsTab: React.FC = () => {\r\n    const profile = useCVStoreV2((state) => state.profile);\r\n    const updateField = useCVStoreV2((state) => state.updateField);\r\n\r\n    if (!profile || !profile.skills) {\r\n        return <div className=\"p-4 text-slate-400\">Chargement...</div>;\r\n    }\r\n    const [newSkill, setNewSkill] = useState('');\r\n\r\n    const addSkill = () => {\r\n        if (!newSkill.trim()) return;\r\n        updateField('skills', [...profile.skills, newSkill.trim()]);\r\n        setNewSkill('');\r\n    };\r\n\r\n    const removeSkill = (index: number) => {\r\n        const updatedSkills = profile.skills.filter((_, i) => i !== index);\r\n        updateField('skills', updatedSkills);\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            addSkill();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <Card variant=\"glass\">\r\n                <h3 className=\"text-sm font-bold text-slate-200 mb-4\">Comp├®tences Techniques</h3>\r\n\r\n                <div className=\"flex gap-2 mb-4\">\r\n                    <Input\r\n                        value={newSkill}\r\n                        onChange={(e) => setNewSkill(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        placeholder=\"Ex: React, TypeScript, Gestion de projet...\"\r\n                        variant=\"glass\"\r\n                    />\r\n                    <Button onClick={addSkill} leftIcon={<Plus size={16} />} className=\"bg-brand-600 hover:bg-brand-700 text-white\">\r\n                        Ajouter\r\n                    </Button>\r\n                </div>\r\n\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                    {profile.skills.map((skill, index) => (\r\n                        <div\r\n                            key={index}\r\n                            className=\"bg-white/10 border border-white/10 text-slate-200 text-sm px-3 py-1 rounded-full flex items-center gap-2\"\r\n                        >\r\n                            {skill}\r\n                            <button\r\n                                onClick={() => removeSkill(index)}\r\n                                className=\"text-slate-400 hover:text-red-400\"\r\n                            >\r\n                                <X size={14} />\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </Card>\r\n\r\n            <Card variant=\"glass\">\r\n                <h3 className=\"text-sm font-bold text-slate-200 mb-4\">Langues</h3>\r\n                <LanguageEditor />\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\interactive-resume\\InteractiveResume.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\preview\\CVPresentationLayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\preview\\FocusModeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\preview\\PreviewPane.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleInlineDoubleClick' is assigned a value but never used.","line":149,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":34},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleDownload'. Either include it or remove the dependency array.","line":276,"column":8,"nodeType":"ArrayExpression","endLine":276,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [profile, language, handleDownload]","fix":{"range":[10779,10798],"text":"[profile, language, handleDownload]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useCallback, useEffect } from 'react';\r\nimport { CVRenderer } from '../../components/CVRenderer';\r\nimport { useUIStore } from '../../../application/store/ui-store';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { useCVStore } from '../../../application/store/cv-store';\r\nimport { useToastStore } from '../../../application/store/toast-store';\r\nimport { Button } from '../../design-system/atoms/Button';\r\nimport { Download, Loader2 } from 'lucide-react';\r\nimport { t } from '../../../data/translations';\r\nimport { usePageDetection } from '../../hooks/usePageDetection';\r\nimport { useInlineEditor } from '../../hooks/useInlineEditor';\r\nimport { useRippleEffect } from '../../hooks/useRippleEffect';\r\nimport { InlineEditorOverlay } from '../editor/InlineEditorOverlay';\r\nimport { MagicParticles } from '../editor/MagicParticles';\r\n\r\ninterface PreviewPaneProps {\r\n    hideToolbar?: boolean;\r\n    scale?: number;\r\n}\r\n\r\nexport const PreviewPane: React.FC<PreviewPaneProps> = ({\r\n    hideToolbar,\r\n    scale = 1,\r\n}) => {\r\n    const cvRef = useRef<HTMLDivElement>(null);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const photoInputRef = useRef<HTMLInputElement>(null);\r\n    const { isGeneratingPDF, setGeneratingPDF } = useUIStore();\r\n    const { language } = useSettingsStore();\r\n    const { addToast } = useToastStore();\r\n    const profile = useCVStore(state => state.profile);\r\n    const { updateProfile } = useCVStore();\r\n\r\n    // Mobile detection\r\n    const [isMobile, setIsMobile] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n        checkMobile();\r\n        window.addEventListener('resize', checkMobile);\r\n        return () => window.removeEventListener('resize', checkMobile);\r\n    }, []);\r\n\r\n    // Determine final zoom\r\n    const finalZoom = isMobile ? 1 : scale;\r\n\r\n    // Mobile zoom & pan\r\n    const [mobileZoom, setMobileZoom] = useState(1);\r\n    const [panPosition, setPanPosition] = useState({ x: 0, y: 0 });\r\n    const [zoomCenter, setZoomCenter] = useState({ x: 0, y: 0 });\r\n    const [initialDistance, setInitialDistance] = useState(0);\r\n    const [lastTouchPos, setLastTouchPos] = useState({ x: 0, y: 0 });\r\n    const [isInteracting, setIsInteracting] = useState(false);\r\n    const [isPinching, setIsPinching] = useState(false);\r\n    const [lastTapTime, setLastTapTime] = useState(0);\r\n    const [lastTapTarget, setLastTapTarget] = useState<EventTarget | null>(null);\r\n\r\n    // Magic inline editing state\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [cursorPos, setCursorPos] = useState({ x: 0, y: 0 });\r\n    const [isScrolling, setIsScrolling] = useState(false);\r\n    const scrollTimeout = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    // Detect scrolling to disable particles\r\n    useEffect(() => {\r\n        const handleScroll = () => {\r\n            setIsScrolling(true);\r\n            if (scrollTimeout.current) clearTimeout(scrollTimeout.current);\r\n            scrollTimeout.current = setTimeout(() => {\r\n                setIsScrolling(false);\r\n            }, 150);\r\n        };\r\n\r\n        const scrollContainer = document.querySelector('.visible-scrollbar');\r\n        if (scrollContainer) {\r\n            scrollContainer.addEventListener('scroll', handleScroll, { passive: true });\r\n        }\r\n\r\n        return () => {\r\n            if (scrollContainer) {\r\n                scrollContainer.removeEventListener('scroll', handleScroll);\r\n            }\r\n            if (scrollTimeout.current) clearTimeout(scrollTimeout.current);\r\n        };\r\n    }, []);\r\n\r\n    usePageDetection(cvRef, [profile]);\r\n    const { openEditor } = useInlineEditor();\r\n    const { ripples, triggerRipple, removeRipple } = useRippleEffect();\r\n\r\n    const txt = t[language];\r\n\r\n    const handleDownload = async () => {\r\n        setGeneratingPDF(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/puppeteer-pdf/generate', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ profile, language }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('PDF generation failed');\r\n            }\r\n\r\n            const blob = await response.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${profile.personal?.firstName || 'CV'}_${profile.personal?.lastName || ''}_CV.pdf`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            window.URL.revokeObjectURL(url);\r\n            document.body.removeChild(a);\r\n\r\n            addToast('­ƒôä PDF downloaded!', 'success');\r\n        } catch (error) {\r\n            console.error('PDF generation error:', error);\r\n            addToast('ÔØî PDF generation failed', 'error');\r\n        } finally {\r\n            setGeneratingPDF(false);\r\n        }\r\n    };\r\n\r\n    const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const photoUrl = event.target?.result as string;\r\n            const updatedProfile = { ...profile, personal: { ...profile.personal, photoUrl } };\r\n            updateProfile(updatedProfile);\r\n            addToast('Ô£¿ Photo updated!', 'success');\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    const handlePhotoClick = (e: React.MouseEvent) => {\r\n        const target = e.target as HTMLElement;\r\n        if (target.closest('[data-photo-zone=\"true\"]')) {\r\n            e.stopPropagation();\r\n            photoInputRef.current?.click();\r\n        }\r\n    };\r\n\r\n    // MAGIC INLINE EDITING - Double-click handler\r\n    const handleInlineDoubleClick = useCallback((e: React.MouseEvent<HTMLElement>) => {\r\n        const target = e.target as HTMLElement;\r\n        const editableEl = target.closest('[data-inline-edit]') as HTMLElement;\r\n\r\n        if (!editableEl) return;\r\n\r\n        const fieldKey = editableEl.getAttribute('data-inline-edit') || '';\r\n        const label = editableEl.getAttribute('data-inline-label') || '';\r\n        const required = editableEl.getAttribute('data-inline-required') === 'true';\r\n        const removable = editableEl.getAttribute('data-inline-removable') === 'true';\r\n        const placeholderLabel = editableEl.getAttribute('data-inline-placeholder') || '';\r\n        const removeWarning = editableEl.getAttribute('data-inline-remove-warning') || '';\r\n        const currentValue = editableEl.textContent || '';\r\n\r\n        const rect = editableEl.getBoundingClientRect();\r\n        const position = {\r\n            x: rect.left,\r\n            y: rect.bottom + 8\r\n        };\r\n\r\n        openEditor({\r\n            fieldKey,\r\n            label,\r\n            required,\r\n            removable,\r\n            placeholderLabel,\r\n            removeWarning\r\n        }, currentValue, position);\r\n    }, [openEditor]);\r\n\r\n    // Mobile pinch zoom helpers\r\n    const getDistance = (touch1: React.Touch, touch2: React.Touch) => {\r\n        const dx = touch1.clientX - touch2.clientX;\r\n        const dy = touch1.clientY - touch2.clientY;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    };\r\n\r\n    const getMidpoint = (touch1: React.Touch, touch2: React.Touch) => {\r\n        return {\r\n            x: (touch1.clientX + touch2.clientX) / 2,\r\n            y: (touch1.clientY + touch2.clientY) / 2\r\n        };\r\n    };\r\n\r\n    const handleTouchStart = useCallback((e: React.TouchEvent) => {\r\n        if (e.touches.length === 2) {\r\n            const distance = getDistance(e.touches[0], e.touches[1]);\r\n            const midpoint = getMidpoint(e.touches[0], e.touches[1]);\r\n            setInitialDistance(distance);\r\n            setZoomCenter(midpoint);\r\n            setIsInteracting(true);\r\n            setIsPinching(true);\r\n        } else if (e.touches.length === 1) {\r\n            setLastTouchPos({\r\n                x: e.touches[0].clientX,\r\n                y: e.touches[0].clientY\r\n            });\r\n            setIsInteracting(true);\r\n            setIsPinching(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleTouchMove = useCallback((e: React.TouchEvent) => {\r\n        if (isInteracting) {\r\n            e.preventDefault();\r\n        }\r\n\r\n        if (e.touches.length === 2 && initialDistance > 0) {\r\n            const currentDistance = getDistance(e.touches[0], e.touches[1]);\r\n            const scale = currentDistance / initialDistance;\r\n            const newZoom = Math.max(0.8, Math.min(2.5, mobileZoom * scale));\r\n\r\n            const midpoint = getMidpoint(e.touches[0], e.touches[1]);\r\n            const deltaX = midpoint.x - zoomCenter.x;\r\n            const deltaY = midpoint.y - zoomCenter.y;\r\n\r\n            setPanPosition(prev => ({\r\n                x: prev.x + deltaX * 0.5,\r\n                y: prev.y + deltaY * 0.5\r\n            }));\r\n\r\n            setMobileZoom(newZoom);\r\n            setInitialDistance(currentDistance);\r\n            setZoomCenter(midpoint);\r\n        } else if (e.touches.length === 1 && !isPinching && isInteracting) {\r\n            const deltaX = e.touches[0].clientX - lastTouchPos.x;\r\n            const deltaY = e.touches[0].clientY - lastTouchPos.y;\r\n\r\n            setPanPosition(prev => ({\r\n                x: prev.x + deltaX,\r\n                y: prev.y + deltaY\r\n            }));\r\n\r\n            setLastTouchPos({\r\n                x: e.touches[0].clientX,\r\n                y: e.touches[0].clientY\r\n            });\r\n        }\r\n    }, [initialDistance, lastTouchPos, mobileZoom, zoomCenter, isPinching, isInteracting]);\r\n\r\n    const handleTouchEnd = useCallback((e: React.TouchEvent) => {\r\n        const now = Date.now();\r\n        const timeDiff = now - lastTapTime;\r\n        const target = e.target as HTMLElement;\r\n\r\n        if (timeDiff < 300 && lastTapTarget === e.target && e.touches.length === 0) {\r\n            if (target.closest('[data-photo-zone=\"true\"]')) {\r\n                e.preventDefault();\r\n                photoInputRef.current?.click();\r\n                setLastTapTime(0);\r\n            }\r\n        } else {\r\n            setLastTapTime(now);\r\n            setLastTapTarget(e.target);\r\n        }\r\n\r\n        if (e.touches.length === 0) {\r\n            setInitialDistance(0);\r\n            setIsInteracting(false);\r\n            setIsPinching(false);\r\n        }\r\n    }, [lastTapTime, lastTapTarget]);\r\n\r\n    useEffect(() => {\r\n        const onTrigger = () => handleDownload();\r\n        window.addEventListener('TRIGGER_PDF_DOWNLOAD', onTrigger);\r\n        return () => window.removeEventListener('TRIGGER_PDF_DOWNLOAD', onTrigger);\r\n    }, [profile, language]);\r\n\r\n    const mobileScale = isMobile\r\n        ? Math.min((window.innerWidth * 0.92) / 794, (window.innerHeight * 0.85) / 1123)\r\n        : 1;\r\n\r\n    const handleRippleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        triggerRipple(e.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            className=\"flex flex-col bg-transparent will-change-transform\"\r\n            onDoubleClick={(e) => {\r\n                if (!isMobile) {\r\n                    // Handle photo zone clicks\r\n                    handlePhotoClick(e);\r\n\r\n                    // EVENT DELEGATION FIX: Handle EditableField double-clicks\r\n                    // transform: scale() can interfere with native events, so we use delegation\r\n                    const target = e.target as HTMLElement;\r\n                    const editableWrapper = target.closest('[title=\"Double-click to edit\"]') as HTMLElement;\r\n                    if (editableWrapper) {\r\n                        // Re-dispatch the event to the EditableField wrapper\r\n                        const syntheticEvent = new MouseEvent('dblclick', {\r\n                            bubbles: true,\r\n                            cancelable: true,\r\n                            view: window,\r\n                            clientX: e.clientX,\r\n                            clientY: e.clientY\r\n                        });\r\n                        editableWrapper.dispatchEvent(syntheticEvent);\r\n                    }\r\n                }\r\n            }}\r\n            onTouchStart={handleTouchStart}\r\n            onTouchMove={handleTouchMove}\r\n            onTouchEnd={handleTouchEnd}\r\n            style={isMobile ? {\r\n                overflow: 'hidden',\r\n                touchAction: 'none',\r\n                userSelect: 'none'\r\n            } : {}}\r\n        >\r\n            <input\r\n                ref={photoInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handlePhotoUpload}\r\n                style={{ display: 'none' }}\r\n            />\r\n\r\n            {!hideToolbar && !isMobile && (\r\n                <div className=\"p-4 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10\">\r\n                    <div className=\"text-sm font-semibold text-slate-500\">\r\n                        {txt.previewTitle}\r\n                    </div>\r\n                    <Button\r\n                        onClick={handleDownload}\r\n                        disabled={isGeneratingPDF}\r\n                        leftIcon={isGeneratingPDF ? <Loader2 className=\"animate-spin\" /> : <Download size={16} />}\r\n                    >\r\n                        {isGeneratingPDF ? txt.generating : txt.download}\r\n                    </Button>\r\n                </div>\r\n            )}\r\n\r\n            {/* CV PREVIEW CONTAINER - No internal scroll, handled by parent */}\r\n            <div\r\n                className=\"flex-1 flex items-start justify-center p-4 relative\"\r\n                onMouseEnter={() => !isMobile && setIsHovered(true)}\r\n                onMouseLeave={() => !isMobile && setIsHovered(false)}\r\n                onMouseMove={(e) => {\r\n                    if (!isMobile) {\r\n                        setCursorPos({ x: e.clientX, y: e.clientY });\r\n                    }\r\n                }}\r\n            >\r\n                {/* MAGIC PARTICLES - Desktop only, visible when hover AND not scrolling */}\r\n                {!isMobile && isHovered && !isScrolling && (\r\n                    <MagicParticles\r\n                        cursor={cursorPos}\r\n                        accentColor={profile.metadata?.accentColor || '#8b5cf6'}\r\n                    />\r\n                )}\r\n\r\n                <div\r\n                    ref={cvRef}\r\n                    className=\"relative backface-visibility-hidden\"\r\n                    style={isMobile ? {\r\n                        width: '794px',\r\n                        minHeight: '1123px',\r\n                        borderRadius: '8px',\r\n                        boxShadow: '0 20px 60px rgba(0, 0, 0, 0.2), 0 10px 30px rgba(99, 102, 241, 0.1)',\r\n                        transform: `scale(${mobileScale * mobileZoom}) translate(${panPosition.x / mobileScale / mobileZoom}px, ${panPosition.y / mobileScale / mobileZoom}px)`,\r\n                        transformOrigin: 'center center',\r\n                        transition: isInteracting ? 'none' : 'transform 0.2s ease-out',\r\n                        willChange: isInteracting ? 'transform' : 'auto'\r\n                    } : {\r\n                        width: '794px',\r\n                        minHeight: '1123px',\r\n                        borderRadius: '12px',\r\n                        boxShadow: '0 25px 60px rgba(0, 0, 0, 0.2), 0 15px 30px rgba(99, 102, 241, 0.08)',\r\n                        transition: 'transform 0.15s ease-out, box-shadow 0.15s ease-out',\r\n                        transform: `scale(${finalZoom})`,\r\n                        transformOrigin: 'top center'\r\n                    }}\r\n                    onClick={handleRippleClick}\r\n                >\r\n                    <CVRenderer language={language} />\r\n\r\n                    {ripples.map(ripple => (\r\n                        <div\r\n                            key={ripple.id}\r\n                            className=\"absolute rounded-full bg-indigo-400 opacity-30 pointer-events-none\"\r\n                            style={{\r\n                                left: ripple.x - 20,\r\n                                top: ripple.y - 20,\r\n                                width: '40px',\r\n                                height: '40px',\r\n                                animation: 'ripple 0.6s ease-out forwards'\r\n                            }}\r\n                            onAnimationEnd={() => removeRipple(ripple.id)}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* INLINE EDITOR OVERLAY */}\r\n                <InlineEditorOverlay />\r\n            </div>\r\n\r\n            {isMobile && mobileZoom !== 1 && (\r\n                <div className=\"absolute top-20 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm font-medium\">\r\n                    {Math.round(mobileZoom * 100)}%\r\n                </div>\r\n            )}\r\n\r\n            <style>{`\r\n                @keyframes ripple {\r\n                    to {\r\n                        transform: scale(4);\r\n                        opacity: 0;\r\n                    }\r\n                }\r\n\r\n                /* Hover effect for editable elements */\r\n                [data-inline-edit]:hover {\r\n                    outline: 2px solid rgba(139, 92, 246, 0.4);\r\n                    outline-offset: 2px;\r\n                    background-color: rgba(139, 92, 246, 0.05);\r\n                    border-radius: 3px;\r\n                    cursor: pointer;\r\n                    transition: all 0.2s ease;\r\n                }\r\n\r\n                [data-inline-edit] {\r\n                    transition: all 0.2s ease;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\settings\\SettingsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'user' is assigned a value but never used.","line":52,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n * \r\n *   SETTINGS MODAL - ├ëDITION NEXAL PREMIUM\r\n *   Centre de configuration avec onglets anim├®s\r\n * \r\n *   \"Configurez votre destin├®e.\"\r\n * \r\n * ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    X, Settings, Monitor, FileOutput, Sparkles,\r\n    Globe, Moon, Sun, Smartphone, Cloud, HardDrive,\r\n    Zap, Palette, Download, FileText, Bot, Key\r\n} from 'lucide-react';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { useAuthStore } from '../../../application/store/auth-store';\r\nimport { useCVStore } from '../../../application/store/cv-store';\r\n\r\ninterface SettingsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\ntype TabId = 'general' | 'display' | 'export' | 'ai';\r\n\r\ninterface Tab {\r\n    id: TabId;\r\n    label: string;\r\n    icon: React.ReactNode;\r\n}\r\n\r\nconst tabs: Tab[] = [\r\n    { id: 'general', label: 'G├®n├®ral', icon: <Settings size={18} /> },\r\n    { id: 'display', label: 'Affichage', icon: <Monitor size={18} /> },\r\n    { id: 'export', label: 'Export', icon: <FileOutput size={18} /> },\r\n    { id: 'ai', label: 'IA Config', icon: <Sparkles size={18} /> },\r\n];\r\n\r\nexport const SettingsModal: React.FC<SettingsModalProps> = ({ isOpen, onClose }) => {\r\n    const [activeTab, setActiveTab] = useState<TabId>('general');\r\n\r\n    const {\r\n        language, setLanguage,\r\n        isMobileMode, setMobileMode,\r\n        loadDemoOnStartup, toggleDemoOnStartup,\r\n        storageMode, setStorageMode\r\n    } = useSettingsStore();\r\n    const { isAuthenticated, user } = useAuthStore();\r\n    const loadDemoProfile = useCVStore(state => state.loadDemoProfile);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.3 }}\r\n                        className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm\"\r\n                        onClick={onClose}\r\n                    />\r\n\r\n                    {/* Modal */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        transition={{ duration: 0.3, ease: [0.16, 1, 0.3, 1] }}\r\n                        className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\"\r\n                    >\r\n                        <div\r\n                            className=\"relative w-full max-w-2xl pointer-events-auto\"\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            {/* Glow effect */}\r\n                            <div className=\"absolute -inset-1 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-3xl blur-xl opacity-30\" />\r\n\r\n                            {/* Main container */}\r\n                            <div className=\"relative bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden max-h-[85vh] flex flex-col\">\r\n                                {/* Decorative header gradient */}\r\n                                <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500\" />\r\n\r\n                                {/* Header */}\r\n                                <div className=\"flex items-center justify-between p-6 border-b border-white/10\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30\">\r\n                                            <Settings className=\"text-white\" size={20} />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h2 className=\"text-xl font-bold text-white\">Param├¿tres</h2>\r\n                                            <p className=\"text-sm text-slate-400\">Personnalisez votre exp├®rience</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={onClose}\r\n                                        className=\"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200\"\r\n                                    >\r\n                                        <X size={20} />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Tabs */}\r\n                                <div className=\"flex gap-1 px-6 pt-4 border-b border-white/5\">\r\n                                    {tabs.map((tab) => (\r\n                                        <button\r\n                                            key={tab.id}\r\n                                            onClick={() => setActiveTab(tab.id)}\r\n                                            className={`relative px-4 py-3 rounded-t-lg text-sm font-medium flex items-center gap-2 transition-all duration-200 ${activeTab === tab.id\r\n                                                ? 'text-white'\r\n                                                : 'text-slate-400 hover:text-slate-200'\r\n                                                }`}\r\n                                        >\r\n                                            {tab.icon}\r\n                                            <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                                            {activeTab === tab.id && (\r\n                                                <motion.div\r\n                                                    layoutId=\"activeTab\"\r\n                                                    className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-500\"\r\n                                                    transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n                                                />\r\n                                            )}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                {/* Content */}\r\n                                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                                    <AnimatePresence mode=\"wait\">\r\n                                        <motion.div\r\n                                            key={activeTab}\r\n                                            initial={{ opacity: 0, x: 20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: -20 }}\r\n                                            transition={{ duration: 0.2 }}\r\n                                        >\r\n                                            {activeTab === 'general' && (\r\n                                                <GeneralTab\r\n                                                    language={language}\r\n                                                    setLanguage={setLanguage}\r\n                                                    loadDemoOnStartup={loadDemoOnStartup}\r\n                                                    toggleDemoOnStartup={toggleDemoOnStartup}\r\n                                                    loadDemoProfile={loadDemoProfile}\r\n                                                    storageMode={storageMode}\r\n                                                    setStorageMode={setStorageMode}\r\n                                                    isAuthenticated={isAuthenticated}\r\n                                                />\r\n                                            )}\r\n                                            {activeTab === 'display' && (\r\n                                                <DisplayTab\r\n                                                    isMobileMode={isMobileMode}\r\n                                                    setMobileMode={setMobileMode}\r\n                                                />\r\n                                            )}\r\n                                            {activeTab === 'export' && <ExportTab />}\r\n                                            {activeTab === 'ai' && <AITab isAuthenticated={isAuthenticated} />}\r\n                                        </motion.div>\r\n                                    </AnimatePresence>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// ONGLET G├ëN├ëRAL\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\ninterface GeneralTabProps {\r\n    language: string;\r\n    setLanguage: (lang: 'fr' | 'en') => void;\r\n    loadDemoOnStartup: boolean;\r\n    toggleDemoOnStartup: () => void;\r\n    loadDemoProfile: (lang: 'fr' | 'en') => void;\r\n    storageMode: string;\r\n    setStorageMode: (mode: 'local' | 'cloud') => void;\r\n    isAuthenticated: boolean;\r\n}\r\n\r\nconst GeneralTab: React.FC<GeneralTabProps> = ({\r\n    language, setLanguage, loadDemoOnStartup, toggleDemoOnStartup,\r\n    loadDemoProfile, storageMode, setStorageMode, isAuthenticated\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Language */}\r\n            <SettingsSection\r\n                icon={<Globe size={18} />}\r\n                title=\"Langue\"\r\n                description=\"Choisissez la langue de l'interface\"\r\n            >\r\n                <div className=\"flex gap-3\">\r\n                    <ToggleButton\r\n                        active={language === 'fr'}\r\n                        onClick={() => setLanguage('fr')}\r\n                        label=\"­ƒç½­ƒçÀ Fran├ºais\"\r\n                    />\r\n                    <ToggleButton\r\n                        active={language === 'en'}\r\n                        onClick={() => setLanguage('en')}\r\n                        label=\"­ƒç¼­ƒçº English\"\r\n                    />\r\n                </div>\r\n            </SettingsSection>\r\n\r\n            {/* Storage Mode */}\r\n            <SettingsSection\r\n                icon={<Cloud size={18} />}\r\n                title=\"Mode de stockage\"\r\n                description=\"O├╣ sauvegarder vos donn├®es\"\r\n            >\r\n                <div className=\"flex gap-3\">\r\n                    <ToggleButton\r\n                        active={storageMode === 'local'}\r\n                        onClick={() => setStorageMode('local')}\r\n                        label=\"Local\"\r\n                        icon={<HardDrive size={16} />}\r\n                    />\r\n                    <ToggleButton\r\n                        active={storageMode === 'cloud'}\r\n                        onClick={() => {\r\n                            if (isAuthenticated) {\r\n                                setStorageMode('cloud');\r\n                            } else {\r\n                                alert('Connectez-vous pour utiliser le mode Cloud');\r\n                            }\r\n                        }}\r\n                        label=\"Cloud\"\r\n                        icon={<Cloud size={16} />}\r\n                        disabled={!isAuthenticated}\r\n                    />\r\n                </div>\r\n            </SettingsSection>\r\n\r\n            {/* Demo Content */}\r\n            <SettingsSection\r\n                icon={<Zap size={18} />}\r\n                title=\"Contenu d├®mo\"\r\n                description=\"Charger un profil exemple au d├®marrage\"\r\n            >\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <span className=\"text-sm text-slate-300\">Charger d├®mo au d├®marrage</span>\r\n                        <AnimatedSwitch\r\n                            checked={loadDemoOnStartup}\r\n                            onChange={toggleDemoOnStartup}\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={() => loadDemoProfile(language as 'fr' | 'en')}\r\n                        className=\"w-full py-2.5 border border-white/10 hover:border-white/20 bg-white/5 hover:bg-white/10 text-slate-300 hover:text-white rounded-xl text-sm font-medium transition-all duration-200\"\r\n                    >\r\n                        G├®n├®rer profil d├®mo\r\n                    </button>\r\n                </div>\r\n            </SettingsSection>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// ONGLET AFFICHAGE\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\ninterface DisplayTabProps {\r\n    isMobileMode: boolean;\r\n    setMobileMode: (value: boolean) => void;\r\n}\r\n\r\nconst DisplayTab: React.FC<DisplayTabProps> = ({ isMobileMode, setMobileMode }) => {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Preview Mode */}\r\n            <SettingsSection\r\n                icon={<Monitor size={18} />}\r\n                title=\"Mode de pr├®visualisation\"\r\n                description=\"Simuler l'affichage mobile ou desktop\"\r\n            >\r\n                <div className=\"flex gap-3\">\r\n                    <ToggleButton\r\n                        active={!isMobileMode}\r\n                        onClick={() => setMobileMode(false)}\r\n                        label=\"Desktop\"\r\n                        icon={<Monitor size={16} />}\r\n                    />\r\n                    <ToggleButton\r\n                        active={isMobileMode}\r\n                        onClick={() => setMobileMode(true)}\r\n                        label=\"Mobile\"\r\n                        icon={<Smartphone size={16} />}\r\n                    />\r\n                </div>\r\n            </SettingsSection>\r\n\r\n            {/* Theme (Coming soon) */}\r\n            <SettingsSection\r\n                icon={<Palette size={18} />}\r\n                title=\"Th├¿me\"\r\n                description=\"Apparence de l'interface\"\r\n                badge=\"Bient├┤t\"\r\n            >\r\n                <div className=\"flex gap-3 opacity-50 pointer-events-none\">\r\n                    <ToggleButton\r\n                        active={true}\r\n                        onClick={() => { }}\r\n                        label=\"Sombre\"\r\n                        icon={<Moon size={16} />}\r\n                    />\r\n                    <ToggleButton\r\n                        active={false}\r\n                        onClick={() => { }}\r\n                        label=\"Clair\"\r\n                        icon={<Sun size={16} />}\r\n                    />\r\n                </div>\r\n            </SettingsSection>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// ONGLET EXPORT\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\nconst ExportTab: React.FC = () => {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* PDF Settings */}\r\n            <SettingsSection\r\n                icon={<FileText size={18} />}\r\n                title=\"Format PDF\"\r\n                description=\"Configuration de l'export PDF\"\r\n            >\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <span className=\"text-sm text-slate-300\">Format A4</span>\r\n                        <AnimatedSwitch checked={true} onChange={() => { }} disabled />\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <span className=\"text-sm text-slate-300\">Haute r├®solution</span>\r\n                        <AnimatedSwitch checked={true} onChange={() => { }} disabled />\r\n                    </div>\r\n                </div>\r\n            </SettingsSection>\r\n\r\n            {/* Quick Export */}\r\n            <SettingsSection\r\n                icon={<Download size={18} />}\r\n                title=\"Export rapide\"\r\n                description=\"T├®l├®charger votre CV\"\r\n            >\r\n                <button\r\n                    onClick={() => window.dispatchEvent(new Event('TRIGGER_PDF_DOWNLOAD'))}\r\n                    className=\"w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-semibold rounded-xl shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2 transition-all duration-200\"\r\n                >\r\n                    <Download size={18} />\r\n                    T├®l├®charger PDF\r\n                </button>\r\n            </SettingsSection>\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// ONGLET IA CONFIG\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\ninterface AITabProps {\r\n    isAuthenticated: boolean;\r\n}\r\n\r\nconst AITab: React.FC<AITabProps> = ({ isAuthenticated }) => {\r\n    const [apiKey, setApiKey] = useState('');\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* AI Status */}\r\n            <SettingsSection\r\n                icon={<Bot size={18} />}\r\n                title=\"Assistant IA\"\r\n                description=\"Configuration de l'intelligence artificielle\"\r\n            >\r\n                <div className=\"p-4 bg-gradient-to-r from-purple-500/10 to-indigo-500/10 border border-purple-500/20 rounded-xl\">\r\n                    <div className=\"flex items-center gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg\">\r\n                            <Sparkles className=\"text-white\" size={20} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-white\">\r\n                                {isAuthenticated ? 'Gemini Pro (Cloud)' : 'Mode Local'}\r\n                            </p>\r\n                            <p className=\"text-xs text-slate-400\">\r\n                                {isAuthenticated\r\n                                    ? 'Utilise les cr├®dits de votre compte'\r\n                                    : 'Cl├® API requise pour les fonctions IA'\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div className={`flex items-center gap-2 text-xs ${isAuthenticated ? 'text-green-400' : 'text-amber-400'}`}>\r\n                        <div className={`w-2 h-2 rounded-full animate-pulse ${isAuthenticated ? 'bg-green-400' : 'bg-amber-400'}`} />\r\n                        {isAuthenticated ? 'Connect├® et pr├¬t' : 'Non configur├®'}\r\n                    </div>\r\n                </div>\r\n            </SettingsSection>\r\n\r\n            {/* API Key (if not authenticated) */}\r\n            {!isAuthenticated && (\r\n                <SettingsSection\r\n                    icon={<Key size={18} />}\r\n                    title=\"Cl├® API Gemini\"\r\n                    description=\"Votre cl├® personnelle pour l'IA\"\r\n                >\r\n                    <div className=\"space-y-3\">\r\n                        <input\r\n                            type=\"password\"\r\n                            value={apiKey}\r\n                            onChange={(e) => setApiKey(e.target.value)}\r\n                            placeholder=\"Entrez votre cl├® API...\"\r\n                            className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200\"\r\n                        />\r\n                        <p className=\"text-xs text-slate-500\">\r\n                            Obtenez une cl├® sur{' '}\r\n                            <a\r\n                                href=\"https://aistudio.google.com/apikey\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-purple-400 hover:text-purple-300 underline\"\r\n                            >\r\n                                Google AI Studio\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </SettingsSection>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n// COMPOSANTS R├ëUTILISABLES\r\n// ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n\r\ninterface SettingsSectionProps {\r\n    icon: React.ReactNode;\r\n    title: string;\r\n    description: string;\r\n    children: React.ReactNode;\r\n    badge?: string;\r\n}\r\n\r\nconst SettingsSection: React.FC<SettingsSectionProps> = ({ icon, title, description, children, badge }) => (\r\n    <div className=\"p-5 bg-white/5 border border-white/10 rounded-xl\">\r\n        <div className=\"flex items-start gap-3 mb-4\">\r\n            <div className=\"p-2 bg-white/5 rounded-lg text-slate-400\">\r\n                {icon}\r\n            </div>\r\n            <div className=\"flex-1\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <h3 className=\"text-sm font-semibold text-white\">{title}</h3>\r\n                    {badge && (\r\n                        <span className=\"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs font-medium rounded-full\">\r\n                            {badge}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                <p className=\"text-xs text-slate-500 mt-0.5\">{description}</p>\r\n            </div>\r\n        </div>\r\n        {children}\r\n    </div>\r\n);\r\n\r\ninterface ToggleButtonProps {\r\n    active: boolean;\r\n    onClick: () => void;\r\n    label: string;\r\n    icon?: React.ReactNode;\r\n    disabled?: boolean;\r\n}\r\n\r\nconst ToggleButton: React.FC<ToggleButtonProps> = ({ active, onClick, label, icon, disabled }) => (\r\n    <button\r\n        onClick={onClick}\r\n        disabled={disabled}\r\n        className={`flex-1 py-2.5 px-4 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-all duration-200 ${active\r\n            ? 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30'\r\n            : 'bg-white/5 border border-white/10 text-slate-400 hover:text-white hover:bg-white/10'\r\n            } ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n    >\r\n        {icon}\r\n        {label}\r\n    </button>\r\n);\r\n\r\ninterface AnimatedSwitchProps {\r\n    checked: boolean;\r\n    onChange: () => void;\r\n    disabled?: boolean;\r\n}\r\n\r\nconst AnimatedSwitch: React.FC<AnimatedSwitchProps> = ({ checked, onChange, disabled }) => (\r\n    <button\r\n        onClick={onChange}\r\n        disabled={disabled}\r\n        className={`relative w-12 h-6 rounded-full transition-all duration-300 ${checked\r\n            ? 'bg-gradient-to-r from-indigo-600 to-purple-600'\r\n            : 'bg-slate-700'\r\n            } ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\r\n    >\r\n        <motion.div\r\n            animate={{ x: checked ? 24 : 2 }}\r\n            transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n            className=\"absolute top-1 w-4 h-4 bg-white rounded-full shadow-lg\"\r\n        />\r\n    </button>\r\n);\r\n\r\nexport default SettingsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\settings\\SettingsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\structure\\StructurePageGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[382,385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[382,385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { SinglePageLayout } from '../../layouts/templates/v2/SinglePageLayout';\r\nimport type { CVProfile } from '../../../domain/cv/v2/types';\r\nimport type { TemplateConfig } from '../../../domain/templates/TemplateEngine';\r\nimport type { CVMode } from '../../../application/store/v2/cv-store-v2.types';\r\n\r\ninterface StructurePageGridProps {\r\n    pages: any[];\r\n    data: CVProfile;\r\n    mode: CVMode;\r\n    config: TemplateConfig;\r\n    language: 'en' | 'fr';\r\n}\r\n\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\n\r\n// ... inside component ...\r\n\r\nexport const StructurePageGrid: React.FC<StructurePageGridProps> = ({\r\n    pages,\r\n    data,\r\n    mode,\r\n    config,\r\n    language\r\n}) => {\r\n    const { focusMode } = useSettingsStore();\r\n    const isSidebarOpen = !focusMode;\r\n\r\n    return (\r\n        <div className=\"w-full min-h-screen bg-transparent p-8 overflow-x-hidden transition-all duration-500\">\r\n            <div className=\"max-w-[1400px] mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"mb-8 text-center\">\r\n                    <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Structure du CV</h2>\r\n                    <p className=\"text-slate-500\">\r\n                        {isSidebarOpen\r\n                            ? \"Fermez le menu pour organiser vos pages\"\r\n                            : \"R├®organisez vos sections et d├®placez-les entre les pages\"}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Smart Grid - Apple Style */}\r\n                <div\r\n                    className={`\r\n                        transition-all duration-500 ease-in-out\r\n                        ${isSidebarOpen\r\n                            ? 'flex flex-col items-center -space-y-64 scale-90' // Card Stack Mode\r\n                            : 'grid grid-cols-1 md:grid-cols-2 gap-8 justify-items-center' // Grid Mode\r\n                        }\r\n                    `}\r\n                >\r\n                    {pages.map((page, index) => {\r\n                        // Logic for centering the last item if it's odd and alone in the last row\r\n                        const isLastItem = index === pages.length - 1;\r\n                        const isOddCount = pages.length % 2 !== 0;\r\n                        const shouldSpan = isLastItem && isOddCount && !isSidebarOpen;\r\n\r\n                        return (\r\n                            <div\r\n                                key={`page-${page.pageIndex}`}\r\n                                className={`\r\n                                    relative group perspective-1000 transition-all duration-500\r\n                                    ${shouldSpan ? 'md:col-span-2' : ''}\r\n                                `}\r\n                            >\r\n                                {/* Page Container with Apple-like hover effect */}\r\n                                <div className={`\r\n                                    relative \r\n                                    transition-all duration-500 ease-out\r\n                                    transform \r\n                                    ${isSidebarOpen ? 'shadow-xl' : 'hover:scale-[0.57] scale-[0.55] hover:rotate-x-2 hover:shadow-2xl'}\r\n                                    bg-white rounded-xl shadow-xl\r\n                                    origin-top\r\n                                `}>\r\n                                    {/* Page Label */}\r\n                                    <div className=\"absolute -top-12 left-0 w-full text-center\">\r\n                                        <span className=\"bg-slate-800 text-white px-4 py-1 rounded-full text-sm font-bold shadow-lg\">\r\n                                            Page {page.pageIndex + 1}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    {/* The Page Itself */}\r\n                                    <div className=\"pointer-events-auto\">\r\n                                        <SinglePageLayout\r\n                                            pageIndex={page.pageIndex}\r\n                                            sectionIds={page.sections}\r\n                                            data={data}\r\n                                            mode={mode}\r\n                                            config={config}\r\n                                            language={language}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {/* Interactive Overlay for Page Actions (optional) */}\r\n                                    <div className=\"absolute inset-0 border-4 border-transparent hover:border-indigo-400/30 rounded-lg pointer-events-none transition-colors duration-300\" />\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\subscription\\SubscriptionTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\system\\SystemInsightsTab.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\system\\SystemInsightsTab.tsx:19:9\n  17 |         SelfRefiner.startMonitoring();\n  18 |         const unsubscribe = insightsLog.subscribe(setInsights);\n> 19 |         setInsights(insightsLog.getAll());\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |\n  21 |         return () => {\n  22 |             unsubscribe();","line":19,"column":9,"nodeType":null,"endLine":19,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useEffect, useState } from 'react';\r\nimport { insightsLog } from '../../../domain/services/system/insights-log';\r\nimport type { SystemInsight } from '../../../domain/services/system/insights-log';\r\nimport { SelfRefiner } from '../../../domain/services/system/self-refiner';\r\nimport { Activity, CheckCircle, Info, Zap } from 'lucide-react';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { t } from '../../../data/translations';\r\n\r\nexport const SystemInsightsTab: React.FC = () => {\r\n    const [insights, setInsights] = useState<SystemInsight[]>([]);\r\n    const { language } = useSettingsStore();\r\n    const txt = t[language].system;\r\n\r\n    useEffect(() => {\r\n        // Start monitoring when tab is active (or globally, but here for demo)\r\n        SelfRefiner.startMonitoring();\r\n        const unsubscribe = insightsLog.subscribe(setInsights);\r\n        setInsights(insightsLog.getAll());\r\n\r\n        return () => {\r\n            unsubscribe();\r\n            SelfRefiner.stopMonitoring();\r\n        };\r\n    }, []);\r\n\r\n    const getIcon = (type: string) => {\r\n        switch (type) {\r\n            case 'performance': return <Zap size={16} className=\"text-amber-500\" />;\r\n            case 'stability': return <Activity size={16} className=\"text-red-500\" />;\r\n            case 'ux': return <CheckCircle size={16} className=\"text-blue-500\" />;\r\n            default: return <Info size={16} className=\"text-slate-500\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col bg-slate-50\">\r\n            <div className=\"p-4 border-b border-slate-200 bg-white\">\r\n                <h2 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n                    <Activity className=\"text-indigo-600\" size={18} />\r\n                    {txt.title}\r\n                </h2>\r\n                <p className=\"text-xs text-slate-500 mt-1\">\r\n                    {txt.desc}\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                {insights.length === 0 ? (\r\n                    <div className=\"text-center py-12 text-slate-400\">\r\n                        <CheckCircle size={32} className=\"mx-auto mb-2 text-green-500\" />\r\n                        <p>{txt.healthy}</p>\r\n                    </div>\r\n                ) : (\r\n                    insights.map(insight => (\r\n                        <div key={insight.id} className={`p-4 rounded-lg border shadow-sm bg-white ${insight.severity === 'critical' ? 'border-red-200 bg-red-50' :\r\n                            insight.severity === 'warning' ? 'border-amber-200 bg-amber-50' :\r\n                                'border-slate-200'\r\n                            }`}>\r\n                            <div className=\"flex items-start gap-3\">\r\n                                <div className=\"mt-0.5\">{getIcon(insight.type)}</div>\r\n                                <div>\r\n                                    <h4 className=\"text-sm font-medium text-slate-900\">{insight.message}</h4>\r\n                                    <p className=\"text-xs text-slate-600 mt-1\">{insight.recommendation}</p>\r\n                                    <div className=\"flex items-center gap-2 mt-2\">\r\n                                        <span className={`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${insight.severity === 'critical' ? 'bg-red-100 text-red-700' :\r\n                                            insight.severity === 'warning' ? 'bg-amber-100 text-amber-700' :\r\n                                                'bg-blue-100 text-blue-700'\r\n                                            }`}>\r\n                                            {insight.severity}\r\n                                        </span>\r\n                                        <span className=\"text-[10px] text-slate-400\">\r\n                                            {new Date(insight.timestamp).toLocaleTimeString()}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\templates\\TemplateGallery.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2909,2912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2909,2912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3312,3315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3312,3315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3714,3717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3714,3717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4180,4183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4180,4183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4570,4573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4570,4573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4950,4953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4950,4953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5333,5336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5333,5336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5785,5788],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5785,5788],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6168,6171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6168,6171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":167,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6563,6566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6563,6566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7003,7006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7003,7006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7389,7392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7389,7392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7814,7817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7814,7817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8149,8152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8149,8152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8507,8510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8507,8510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TEMPLATE GALLERY - 3D Carousel with Lightbox & Dynamic Effects\r\n * Final version with robust CSS fixes:\r\n * 1. Transparent outer container (no white box)\r\n * 2. No extra wrappers (no elongated container)\r\n * 3. Vertical alignment center\r\n * 4. Disables entry animations via forceMode=\"modele\"\r\n * 5. Compact UI for better visibility\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronLeft, ChevronRight, Check, ArrowLeft, X, ZoomIn } from 'lucide-react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useCVStoreV2, useSetMode } from '../../../application/store/v2';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { ModernTemplateV2 } from '../../layouts/templates/v2/ModernTemplate.v2';\r\nimport { ClassicTemplate } from '../../layouts/templates/v2/ClassicTemplate';\r\nimport { ExecutiveTemplate } from '../../layouts/templates/v2/ExecutiveTemplate';\r\n\r\n// ATS-First Templates\r\nimport { ATSClassicTemplate } from '../../cv-templates/templates/ATSClassicTemplate';\r\nimport { ATSModernTemplate } from '../../cv-templates/templates/ATSModernTemplate';\r\nimport { ATSMinimalTemplate } from '../../cv-templates/templates/ATSMinimalTemplate';\r\n\r\n// Business Templates\r\nimport { SwissExecutiveTemplate } from '../../cv-templates/templates/SwissExecutiveTemplate';\r\nimport { ConsultantTemplate } from '../../cv-templates/templates/ConsultantTemplate';\r\nimport { BankerTemplate } from '../../cv-templates/templates/BankerTemplate';\r\nimport { LegalTemplate } from '../../cv-templates/templates/LegalTemplate';\r\n\r\n// Creative & Tech Templates\r\nimport { CreativePortfolioTemplate } from '../../cv-templates/templates/CreativePortfolioTemplate';\r\nimport { DevStackTemplate } from '../../cv-templates/templates/DevStackTemplate';\r\nimport { StartupFounderTemplate } from '../../cv-templates/templates/StartupFounderTemplate';\r\n\r\n// Specialized Templates\r\nimport { HealthcareProTemplate } from '../../cv-templates/templates/HealthcareProTemplate';\r\nimport { AcademicCVTemplate } from '../../cv-templates/templates/AcademicCVTemplate';\r\n\r\n// Template Configurator\r\n// Specialized Templates removed - using new 2000 templates system\r\n\r\ninterface Template {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    preview: React.ComponentType<{ language?: 'en' | 'fr'; forceMode?: 'modele' }>;\r\n    gradient: string;\r\n    bgGradient: string;\r\n    primaryColor: string;\r\n    isNew?: boolean;\r\n    isATS?: boolean;\r\n    category: 'ats' | 'business' | 'creative' | 'tech' | 'specialized' | 'legacy';\r\n}\r\n\r\nconst TEMPLATES: Template[] = [\r\n    // ========== ATS-FIRST ==========\r\n    {\r\n        id: 'ats-classic',\r\n        name: 'ATS Classic',\r\n        description: '100% ATS compatible - Times New Roman, zero graphics',\r\n        preview: ATSClassicTemplate as any,\r\n        gradient: 'from-gray-600 to-gray-800',\r\n        bgGradient: 'from-gray-950 via-slate-900 to-gray-950',\r\n        primaryColor: 'rgb(31, 41, 55)',\r\n        isNew: true,\r\n        isATS: true,\r\n        category: 'ats'\r\n    },\r\n    {\r\n        id: 'ats-modern',\r\n        name: 'ATS Modern',\r\n        description: 'Clean modern look with ATS optimization',\r\n        preview: ATSModernTemplate as any,\r\n        gradient: 'from-blue-500 to-blue-700',\r\n        bgGradient: 'from-blue-950 via-slate-900 to-blue-950',\r\n        primaryColor: 'rgb(59, 130, 246)',\r\n        isNew: true,\r\n        isATS: true,\r\n        category: 'ats'\r\n    },\r\n    {\r\n        id: 'ats-minimal',\r\n        name: 'ATS Minimal',\r\n        description: 'Ultra-compact for senior profiles',\r\n        preview: ATSMinimalTemplate as any,\r\n        gradient: 'from-slate-500 to-slate-700',\r\n        bgGradient: 'from-slate-950 via-gray-900 to-slate-950',\r\n        primaryColor: 'rgb(100, 116, 139)',\r\n        isNew: true,\r\n        isATS: true,\r\n        category: 'ats'\r\n    },\r\n    // ========== BUSINESS ==========\r\n    {\r\n        id: 'swiss-executive',\r\n        name: 'Swiss Executive',\r\n        description: 'Elegant serif design for senior management',\r\n        preview: SwissExecutiveTemplate as any,\r\n        gradient: 'from-slate-700 to-slate-900',\r\n        bgGradient: 'from-slate-950 via-slate-900 to-slate-950',\r\n        primaryColor: 'rgb(30, 58, 95)',\r\n        isNew: true,\r\n        category: 'business'\r\n    },\r\n    {\r\n        id: 'consultant',\r\n        name: 'Consultant Pro',\r\n        description: 'Structured layout with skills grid',\r\n        preview: ConsultantTemplate as any,\r\n        gradient: 'from-teal-500 to-teal-700',\r\n        bgGradient: 'from-teal-950 via-slate-900 to-teal-950',\r\n        primaryColor: 'rgb(13, 148, 136)',\r\n        isNew: true,\r\n        category: 'business'\r\n    },\r\n    {\r\n        id: 'banker',\r\n        name: 'Private Banker',\r\n        description: 'Conservative navy-gold for finance',\r\n        preview: BankerTemplate as any,\r\n        gradient: 'from-amber-600 to-amber-800',\r\n        bgGradient: 'from-amber-950 via-slate-900 to-amber-950',\r\n        primaryColor: 'rgb(184, 134, 11)',\r\n        isNew: true,\r\n        category: 'business'\r\n    },\r\n    {\r\n        id: 'legal',\r\n        name: 'Legal Counsel',\r\n        description: 'Ultra-formal for legal professionals',\r\n        preview: LegalTemplate as any,\r\n        gradient: 'from-rose-700 to-rose-900',\r\n        bgGradient: 'from-rose-950 via-slate-900 to-rose-950',\r\n        primaryColor: 'rgb(124, 45, 18)',\r\n        isNew: true,\r\n        category: 'business'\r\n    },\r\n    // ========== CREATIVE & TECH ==========\r\n    {\r\n        id: 'creative-portfolio',\r\n        name: 'Creative Portfolio',\r\n        description: 'Bold gradient design for creatives',\r\n        preview: CreativePortfolioTemplate as any,\r\n        gradient: 'from-purple-500 to-pink-500',\r\n        bgGradient: 'from-purple-950 via-slate-900 to-pink-950',\r\n        primaryColor: 'rgb(139, 92, 246)',\r\n        isNew: true,\r\n        category: 'creative'\r\n    },\r\n    {\r\n        id: 'devstack',\r\n        name: 'DevStack',\r\n        description: 'Code-inspired design for developers',\r\n        preview: DevStackTemplate as any,\r\n        gradient: 'from-emerald-500 to-cyan-600',\r\n        bgGradient: 'from-emerald-950 via-slate-900 to-cyan-950',\r\n        primaryColor: 'rgb(78, 201, 176)',\r\n        isNew: true,\r\n        category: 'tech'\r\n    },\r\n    {\r\n        id: 'startup-founder',\r\n        name: 'Startup Founder',\r\n        description: 'Bold design for entrepreneurs',\r\n        preview: StartupFounderTemplate as any,\r\n        gradient: 'from-orange-500 to-red-500',\r\n        bgGradient: 'from-orange-950 via-slate-900 to-red-950',\r\n        primaryColor: 'rgb(249, 115, 22)',\r\n        isNew: true,\r\n        category: 'creative'\r\n    },\r\n    // ========== SPECIALIZED ==========\r\n    {\r\n        id: 'healthcare-pro',\r\n        name: 'Healthcare Pro',\r\n        description: 'Clean design for healthcare workers',\r\n        preview: HealthcareProTemplate as any,\r\n        gradient: 'from-cyan-500 to-blue-500',\r\n        bgGradient: 'from-cyan-950 via-slate-900 to-blue-950',\r\n        primaryColor: 'rgb(8, 145, 178)',\r\n        isNew: true,\r\n        category: 'specialized'\r\n    },\r\n    {\r\n        id: 'academic-cv',\r\n        name: 'Academic CV',\r\n        description: 'Traditional format for academics',\r\n        preview: AcademicCVTemplate as any,\r\n        gradient: 'from-indigo-600 to-blue-700',\r\n        bgGradient: 'from-indigo-950 via-slate-900 to-blue-950',\r\n        primaryColor: 'rgb(30, 58, 95)',\r\n        isNew: true,\r\n        category: 'specialized'\r\n    },\r\n    // ========== LEGACY ==========\r\n    {\r\n        id: 'modern',\r\n        name: 'Modern Swiss',\r\n        description: 'Design moderne avec sections color├®es',\r\n        preview: ModernTemplateV2 as any,\r\n        gradient: 'from-blue-600 to-cyan-600',\r\n        bgGradient: 'from-blue-950 via-slate-900 to-cyan-950',\r\n        primaryColor: 'rgb(37, 99, 235)',\r\n        category: 'legacy'\r\n    },\r\n    {\r\n        id: 'classic',\r\n        name: 'Classic',\r\n        description: 'Format traditionnel',\r\n        preview: ClassicTemplate as any,\r\n        gradient: 'from-slate-600 to-gray-600',\r\n        bgGradient: 'from-slate-950 via-gray-900 to-slate-950',\r\n        primaryColor: 'rgb(71, 85, 105)',\r\n        category: 'legacy'\r\n    },\r\n    {\r\n        id: 'executive',\r\n        name: 'Executive Elite',\r\n        description: 'Template premium pour cadres',\r\n        preview: ExecutiveTemplate as any,\r\n        gradient: 'from-amber-600 to-orange-600',\r\n        bgGradient: 'from-amber-950 via-slate-900 to-orange-950',\r\n        primaryColor: 'rgb(217, 119, 6)',\r\n        category: 'legacy'\r\n    }\r\n];\r\n\r\nconst getCarouselPosition = (index: number, currentIndex: number, total: number) => {\r\n    const diff = ((index - currentIndex + total) % total);\r\n\r\n    if (diff === 0) return { position: 0, visible: true };\r\n    else if (diff === 1 || diff === -(total - 1)) return { position: 1, visible: true };\r\n    else if (diff === total - 1 || diff === -1) return { position: -1, visible: true };\r\n    return { position: 0, visible: false };\r\n};\r\n\r\nconst getPositionStyles = (position: number) => {\r\n    switch (position) {\r\n        case -1:\r\n            return { x: -550, rotateY: 35, scale: 0.7, opacity: 0.65, z: -400 };\r\n        case 0:\r\n            return { x: 0, y: 0, rotateY: 0, scale: 1, opacity: 1, z: 0 };\r\n        case 1:\r\n            return { x: 550, rotateY: -35, scale: 0.7, opacity: 0.65, z: -400 };\r\n        default:\r\n            return { x: 0, y: 0, opacity: 0, scale: 0.5, z: -500 };\r\n    }\r\n};\r\n\r\nexport const TemplateGallery: React.FC = () => {\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [isZoomOpen, setIsZoomOpen] = useState(false);\r\n    const [isHoveringCenter, setIsHoveringCenter] = useState(false);\r\n    const navigate = useNavigate();\r\n    const updateField = useCVStoreV2((state) => state.updateField);\r\n    const setMode = useSetMode();\r\n    const { setThemeColor } = useSettingsStore();\r\n\r\n    // Initialize with a safe default to avoid hydration mismatch, then update\r\n    const [windowHeight, setWindowHeight] = useState(typeof window !== 'undefined' ? window.innerHeight : 800);\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => setWindowHeight(window.innerHeight);\r\n        window.addEventListener('resize', handleResize);\r\n        // Trigger once on mount to ensure correct size\r\n        handleResize();\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    // Sync global theme with current template\r\n    useEffect(() => {\r\n        const colorMap: Record<string, string> = {\r\n            'modern': 'blue',\r\n            'classic': 'slate',\r\n            'creative': 'purple',\r\n            'executive': 'amber'\r\n        };\r\n        setThemeColor(colorMap[TEMPLATES[currentIndex].id] || 'blue');\r\n    }, [currentIndex, setThemeColor]);\r\n\r\n    // Calculate exact scale to fit 85vh (center) or 70vh (side)\r\n    // 297mm is approx 1123px at 96dpi\r\n    const A4_HEIGHT_PX = 1123;\r\n    const centerScale = (windowHeight * 0.68) / A4_HEIGHT_PX;\r\n    const sideScale = (windowHeight * 0.70) / A4_HEIGHT_PX;\r\n\r\n    const currentTemplate = TEMPLATES[currentIndex];\r\n\r\n    const handlePrevious = () => {\r\n        setCurrentIndex((prev) => (prev - 1 + TEMPLATES.length) % TEMPLATES.length);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        setCurrentIndex((prev) => (prev + 1) % TEMPLATES.length);\r\n    };\r\n\r\n    const handleExit = () => navigate('/');\r\n\r\n    const [searchParams] = useSearchParams(); // Import useSearchParams\r\n    const returnTo = searchParams.get('returnTo');\r\n\r\n    const handleSelect = () => {\r\n        updateField('metadata.templateId', currentTemplate.id);\r\n\r\n        if (returnTo) {\r\n            navigate(returnTo);\r\n        } else {\r\n            setMode('edition');\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    const handleZoomOpen = () => setIsZoomOpen(true);\r\n    const handleZoomClose = () => setIsZoomOpen(false);\r\n\r\n    // Escape key to close lightbox\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape' && isZoomOpen) {\r\n                handleZoomClose();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleEscape);\r\n        return () => window.removeEventListener('keydown', handleEscape);\r\n    }, [isZoomOpen]);\r\n\r\n    return (\r\n        <>\r\n            <motion.div\r\n                className=\"h-screen flex flex-col overflow-hidden relative\"\r\n                animate={{ opacity: 1 }}\r\n                transition={{ duration: 0.8 }}\r\n            >\r\n                {/* Background handled globally by AppShell/ImmersiveBackground */}\r\n\r\n                {/* Exit Button */}\r\n                <motion.button\r\n                    onClick={handleExit}\r\n                    className=\"absolute top-6 left-6 z-50 p-3 bg-white/10 backdrop-blur-md rounded-full shadow-xl hover:bg-white/20 transition-all duration-200 text-white border border-white/20\"\r\n                    whileHover={{ scale: 1.1, x: -2 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: 0.3 }}\r\n                >\r\n                    <ArrowLeft size={24} strokeWidth={2.5} />\r\n                </motion.button>\r\n\r\n                {/* Gallery 2000+ Button */}\r\n                <motion.button\r\n                    onClick={() => navigate('/gallery')}\r\n                    className=\"absolute top-6 right-6 z-50 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 backdrop-blur-md rounded-full shadow-xl hover:from-purple-500 hover:to-pink-500 transition-all duration-200 text-white border border-white/20 flex items-center gap-2 font-semibold\"\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    initial={{ opacity: 0, x: 20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: 0.4 }}\r\n                >\r\n                    <span className=\"text-lg\">­ƒÄ¿</span>\r\n                    <span>2000+ Templates</span>\r\n                </motion.button>\r\n\r\n                {/* Header - Compact with Glassmorphism */}\r\n                <div className=\"flex-shrink-0 text-center py-4 relative z-10 flex justify-center items-center\">\r\n                    <div className=\"bg-black/40 backdrop-blur-xl rounded-xl px-6 py-2.5 border border-white/20 shadow-xl mx-4\">\r\n                        <motion.h1\r\n                            className=\"text-lg font-bold text-white mb-0.5\"\r\n                            key={`title-${currentIndex}`}\r\n                            initial={{ opacity: 0, y: -10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ duration: 0.5 }}\r\n                        >\r\n                            {currentTemplate.name}\r\n                        </motion.h1>\r\n                        <p className=\"text-slate-300 text-xs font-medium\">{currentTemplate.description}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 3D Carousel */}\r\n                <div\r\n                    className=\"flex-1 flex items-center justify-center relative\"\r\n                    style={{\r\n                        perspective: '2500px',\r\n                        WebkitPerspective: '2500px',\r\n                        perspectiveOrigin: '50% 50%',\r\n                        WebkitPerspectiveOrigin: '50% 50%',\r\n                        minHeight: 0,\r\n                        overflow: 'visible',\r\n                        paddingLeft: '80px',\r\n                        paddingRight: '80px'\r\n                    }}\r\n                >\r\n                    {/* Left Arrow */}\r\n                    <button\r\n                        onClick={handlePrevious}\r\n                        className=\"absolute left-8 z-50 p-3 bg-white/10 backdrop-blur-md rounded-full shadow-2xl hover:bg-white/20 hover:scale-110 transition-all duration-200 text-white border border-white/20\"\r\n                    >\r\n                        <ChevronLeft size={28} strokeWidth={2.5} />\r\n                    </button>\r\n\r\n                    {/* Carousel Container - FORCE CENTER & FULL HEIGHT */}\r\n                    <div\r\n                        className=\"relative w-full h-full flex items-center justify-center\"\r\n                        style={{\r\n                            transformStyle: 'preserve-3d',\r\n                            WebkitTransformStyle: 'preserve-3d',\r\n                            alignItems: 'center', // Force vertical centering\r\n                            display: 'flex',\r\n                            height: '100%' // Force full height\r\n                        }}\r\n                    >\r\n                        {TEMPLATES.map((template, index) => {\r\n                            const { position, visible } = getCarouselPosition(index, currentIndex, TEMPLATES.length);\r\n                            if (!visible) return null;\r\n\r\n                            const posStyles = getPositionStyles(position);\r\n                            const isCenter = position === 0;\r\n\r\n                            // Animation delay for floating effect\r\n                            const floatDelay = position === -1 ? 0.5 : position === 1 ? 1 : 0;\r\n\r\n                            return (\r\n                                <motion.div\r\n                                    key={template.id}\r\n                                    className={`absolute ${isCenter ? 'z-30' : 'z-10'}`}\r\n                                    animate={{\r\n                                        ...posStyles,\r\n                                        y: [0, -8, 0]\r\n                                    }}\r\n                                    transition={{\r\n                                        type: 'spring',\r\n                                        stiffness: 180,\r\n                                        damping: 35,\r\n                                        mass: 0.8,\r\n                                        y: {\r\n                                            repeat: Infinity,\r\n                                            duration: 3,\r\n                                            ease: \"easeInOut\",\r\n                                            delay: floatDelay\r\n                                        }\r\n                                    }}\r\n                                    style={{\r\n                                        transformStyle: 'preserve-3d',\r\n                                        WebkitTransformStyle: 'preserve-3d',\r\n                                        backfaceVisibility: 'hidden',\r\n                                        WebkitBackfaceVisibility: 'hidden',\r\n                                        willChange: 'transform, opacity',\r\n                                        display: 'flex', // Ensure flex context\r\n                                        alignItems: 'center', // Center vertically\r\n                                        justifyContent: 'center' // Center horizontally\r\n                                    }}\r\n                                    onMouseEnter={() => isCenter && setIsHoveringCenter(true)}\r\n                                    onMouseLeave={() => isCenter && setIsHoveringCenter(false)}\r\n                                    onClick={() => isCenter && handleZoomOpen()}\r\n                                >\r\n                                    {/* CV Card Container - TRANSPARENT !IMPORTANT */}\r\n                                    <div\r\n                                        style={{\r\n                                            height: 'auto',\r\n                                            width: 'auto',\r\n                                            position: 'relative',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            marginTop: '0', // Reset margin, use flex centering\r\n                                            cursor: isCenter ? 'zoom-in' : 'default',\r\n                                            background: 'transparent !important', // FORCE TRANSPARENT\r\n                                            boxShadow: 'none !important', // FORCE NO SHADOW\r\n                                            border: 'none !important'\r\n                                        }}\r\n                                    >\r\n                                        {/* Zoom icon indicator */}\r\n                                        {isCenter && isHoveringCenter && (\r\n                                            <motion.div\r\n                                                className=\"absolute top-4 right-4 z-50 p-2 bg-black/60 rounded-full\"\r\n                                                initial={{ opacity: 0, scale: 0.8 }}\r\n                                                animate={{ opacity: 1, scale: 1 }}\r\n                                                exit={{ opacity: 0, scale: 0.8 }}\r\n                                            >\r\n                                                <ZoomIn size={20} className=\"text-white\" />\r\n                                            </motion.div>\r\n                                        )}\r\n\r\n                                        {/* A4 Template Wrapper - FIRST PAGE ONLY */}\r\n                                        <div\r\n                                            style={{\r\n                                                width: '210mm',\r\n                                                height: '297mm',\r\n                                                maxHeight: '297mm',\r\n                                                backgroundColor: 'transparent',\r\n                                                borderRadius: '8px',\r\n                                                margin: 'auto',\r\n                                                display: 'flex',\r\n                                                alignItems: 'flex-start', // CRITICAL: Align to TOP to show first page\r\n                                                justifyContent: 'center',\r\n                                                boxShadow: 'none',\r\n                                                overflow: 'hidden', // CRITICAL: Hide pages 2+\r\n\r\n                                                transform: `scale(${isCenter ? centerScale : sideScale})`,\r\n                                                transformOrigin: 'center center',\r\n                                                WebkitTransform: `scale(${isCenter ? centerScale : sideScale})`,\r\n                                                WebkitTransformOrigin: 'center center',\r\n                                            }}\r\n                                        >\r\n                                            {/* Render CV Component Directly - Force 'modele' mode to disable animations */}\r\n                                            {React.createElement(template.preview, {\r\n                                                language: 'fr',\r\n                                                forceMode: 'modele'\r\n                                            })}\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* Right Arrow */}\r\n                    <button\r\n                        onClick={handleNext}\r\n                        className=\"absolute right-8 z-50 p-3 bg-white/10 backdrop-blur-md rounded-full shadow-2xl hover:bg-white/20 hover:scale-110 transition-all duration-200 text-white border border-white/20\"\r\n                    >\r\n                        <ChevronRight size={28} strokeWidth={2.5} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Bottom Panel */}\r\n                <div className=\"flex-shrink-0 pb-4 px-4 relative z-20\">\r\n                    <div className=\"max-w-xl mx-auto\">\r\n                        <div className=\"bg-black/40 backdrop-blur-xl rounded-xl p-3 border border-white/20 shadow-xl\">\r\n                            <div className=\"flex items-center justify-between gap-3 mb-2\">\r\n                                {/* Features */}\r\n                                <div className=\"flex gap-1.5 flex-1\">\r\n                                    <span className=\"px-2 py-0.5 bg-green-500/20 text-green-100 rounded text-[10px] font-semibold border border-green-400/30\">\r\n                                        Ô£ô ATS\r\n                                    </span>\r\n                                    <span className=\"px-2 py-0.5 bg-blue-500/20 text-blue-100 rounded text-[10px] font-semibold border border-blue-400/30\">\r\n                                        Ô£ô Swiss\r\n                                    </span>\r\n                                    <span className=\"px-2 py-0.5 bg-purple-500/20 text-purple-100 rounded text-[10px] font-semibold border border-purple-400/30\">\r\n                                        Ô£ô Pro\r\n                                    </span>\r\n                                </div>\r\n\r\n                                {/* CTA Button */}\r\n                                <motion.button\r\n                                    onClick={handleSelect}\r\n                                    className={`\r\n                                        px-4 py-1.5 rounded-lg font-semibold text-white text-xs\r\n                                        bg-gradient-to-r ${currentTemplate.gradient}\r\n                                        shadow-lg hover:shadow-xl\r\n                                        flex items-center gap-1.5\r\n                                        border border-white/20\r\n                                    `}\r\n                                    whileHover={{ scale: 1.05, y: -1 }}\r\n                                    whileTap={{ scale: 0.95 }}\r\n                                >\r\n                                    <Check size={14} strokeWidth={3} />\r\n                                    <span>Utiliser</span>\r\n                                </motion.button>\r\n\r\n                                {/* Dots */}\r\n                                <div className=\"flex gap-1.5\">\r\n                                    {TEMPLATES.map((_, index) => (\r\n                                        <button\r\n                                            key={index}\r\n                                            onClick={() => setCurrentIndex(index)}\r\n                                            className={`\r\n                                                ${index === currentIndex ? 'w-6 h-1.5 bg-white' : 'w-1.5 h-1.5 bg-white/40'}\r\n                                                rounded-full transition-all duration-300 border border-white/20\r\n                                            `}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Navigation Hints - Integrated */}\r\n                            <div className=\"pt-2 border-t border-white/10 text-center\">\r\n                                <p className=\"text-slate-400 text-[10px] flex items-center justify-center gap-2\">\r\n                                    <span className=\"flex items-center gap-1\">\r\n                                        <kbd className=\"px-1 py-0 bg-white/5 rounded border border-white/10 text-white font-sans\">ÔåÉ</kbd>\r\n                                        <kbd className=\"px-1 py-0 bg-white/5 rounded border border-white/10 text-white font-sans\">ÔåÆ</kbd>\r\n                                    </span>\r\n                                    <span>pour naviguer</span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Lightbox Modal */}\r\n            <AnimatePresence>\r\n                {isZoomOpen && (\r\n                    <motion.div\r\n                        className=\"fixed inset-0 z-[100] flex items-center justify-center p-8\"\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={handleZoomClose}\r\n                    >\r\n                        {/* Dark overlay */}\r\n                        <div className=\"absolute inset-0 bg-black/90 backdrop-blur-sm\" />\r\n\r\n                        {/* Close button */}\r\n                        <button\r\n                            onClick={handleZoomClose}\r\n                            className=\"absolute top-6 right-6 z-[110] p-3 bg-white/10 backdrop-blur-md rounded-full shadow-xl hover:bg-white/20 transition-all duration-200 text-white border border-white/20\"\r\n                        >\r\n                            <X size={24} strokeWidth={2.5} />\r\n                        </button>\r\n\r\n                        {/* CV Container */}\r\n                        <motion.div\r\n                            className=\"relative z-[105] max-w-4xl max-h-[90vh] overflow-auto bg-white rounded-lg shadow-2xl\"\r\n                            initial={{ scale: 0.8, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.8, opacity: 0 }}\r\n                            transition={{ type: 'spring', damping: 25 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                            <div style={{ width: '210mm', height: '297mm' }}>\r\n                                {React.createElement(currentTemplate.preview, { language: 'fr' })}\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\templates\\VirtualTemplateGallery.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\templates\\VirtualTemplateGallery.tsx:512:9\n  510 |     // Reset visible count when filters change\n  511 |     useEffect(() => {\n> 512 |         setVisibleCount(ITEMS_PER_PAGE);\n      |         ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  513 |     }, [filters]);\n  514 |\n  515 |     const handleSelect = useCallback((config: TemplateConfig) => {","line":512,"column":9,"nodeType":null,"endLine":512,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Virtual Template Gallery\r\n * \r\n * High-performance gallery with CSS Grid and pagination\r\n * Handles 2000+ templates with smooth filtering\r\n */\r\n\r\nimport React, { useState, useMemo, useCallback, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Search, Filter, X, ChevronLeft, Check,\r\n    FileText, ChevronDown\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport {\r\n    filterTemplates,\r\n    PREDEFINED_TAGS,\r\n    TAG_COLORS,\r\n    type TemplateConfig,\r\n    type TagCategory\r\n} from '../../cv-templates/factory/TemplateFactory';\r\nimport { DynamicTemplate } from '../../cv-templates/factory/DynamicTemplateRenderer';\r\n\r\n// ============================================================================\r\n// CONSTANTS\r\n// ============================================================================\r\n\r\nconst CARD_WIDTH = 280;\r\nconst CARD_HEIGHT = 420;\r\nconst ITEMS_PER_PAGE = 24; // Load 24 at a time\r\n\r\n// ============================================================================\r\n// TAG BADGE COMPONENT\r\n// ============================================================================\r\n\r\ninterface TagBadgeProps {\r\n    tag: { id: string; label: string; color: string };\r\n    size?: 'sm' | 'md';\r\n    onClick?: () => void;\r\n    selected?: boolean;\r\n}\r\n\r\nconst TagBadge: React.FC<TagBadgeProps> = ({ tag, size = 'sm', onClick, selected }) => (\r\n    <button\r\n        onClick={onClick}\r\n        style={{\r\n            padding: size === 'sm' ? '2px 8px' : '4px 12px',\r\n            fontSize: size === 'sm' ? '10px' : '12px',\r\n            fontWeight: 600,\r\n            borderRadius: '12px',\r\n            border: selected ? `2px solid ${tag.color}` : '1px solid transparent',\r\n            backgroundColor: selected ? `${tag.color}30` : `${tag.color}20`,\r\n            color: tag.color,\r\n            cursor: onClick ? 'pointer' : 'default',\r\n            transition: 'all 0.2s ease'\r\n        }}\r\n    >\r\n        {tag.label}\r\n    </button>\r\n);\r\n\r\n// ============================================================================\r\n// TEMPLATE CARD COMPONENT (Lightweight)\r\n// ============================================================================\r\n\r\ninterface TemplateCardProps {\r\n    config: TemplateConfig;\r\n    onClick: () => void;\r\n    isSelected: boolean;\r\n}\r\n\r\nconst TemplateCard: React.FC<TemplateCardProps> = React.memo(({\r\n    config,\r\n    onClick,\r\n    isSelected\r\n}) => {\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const cardRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Intersection Observer for lazy loading\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n                if (entry.isIntersecting) {\r\n                    setIsVisible(true);\r\n                    observer.disconnect();\r\n                }\r\n            },\r\n            { rootMargin: '100px' }\r\n        );\r\n\r\n        if (cardRef.current) {\r\n            observer.observe(cardRef.current);\r\n        }\r\n\r\n        return () => observer.disconnect();\r\n    }, []);\r\n\r\n    // ATS score color\r\n    const atsColor = config.attributes.atsScore >= 80 ? '#22c55e' :\r\n        config.attributes.atsScore >= 60 ? '#f59e0b' : '#ef4444';\r\n\r\n    return (\r\n        <motion.div\r\n            ref={cardRef}\r\n            onClick={onClick}\r\n            onMouseEnter={() => setIsHovered(true)}\r\n            onMouseLeave={() => setIsHovered(false)}\r\n            animate={{\r\n                scale: isHovered ? 1.02 : 1,\r\n                boxShadow: isHovered\r\n                    ? '0 20px 40px rgba(0,0,0,0.3)'\r\n                    : '0 4px 12px rgba(0,0,0,0.2)'\r\n            }}\r\n            style={{\r\n                width: CARD_WIDTH,\r\n                height: CARD_HEIGHT,\r\n                borderRadius: '12px',\r\n                overflow: 'hidden',\r\n                cursor: 'pointer',\r\n                position: 'relative',\r\n                background: '#1e293b',\r\n                border: isSelected ? '3px solid #8b5cf6' : '1px solid rgba(255,255,255,0.1)'\r\n            }}\r\n        >\r\n            {/* Thumbnail Preview - Only render if visible */}\r\n            <div style={{\r\n                width: '100%',\r\n                height: '280px',\r\n                overflow: 'hidden',\r\n                position: 'relative',\r\n                background: '#fff'\r\n            }}>\r\n                {isVisible ? (\r\n                    <div style={{\r\n                        transform: 'scale(0.25)',\r\n                        transformOrigin: 'top left',\r\n                        width: '210mm',\r\n                        height: '297mm',\r\n                        pointerEvents: 'none'\r\n                    }}>\r\n                        <DynamicTemplate config={config} forceMode=\"modele\" />\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        background: 'linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        color: '#9ca3af'\r\n                    }}>\r\n                        <FileText size={32} />\r\n                    </div>\r\n                )}\r\n\r\n                {/* ATS Score Badge */}\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    top: '8px',\r\n                    right: '8px',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '8px',\r\n                    background: 'rgba(0,0,0,0.7)',\r\n                    backdropFilter: 'blur(4px)',\r\n                    fontSize: '11px',\r\n                    fontWeight: 700,\r\n                    color: atsColor,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '4px'\r\n                }}>\r\n                    <FileText size={12} />\r\n                    ATS {config.attributes.atsScore}%\r\n                </div>\r\n\r\n                {/* New Badge */}\r\n                {config.attributes.isNew && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        top: '8px',\r\n                        left: '8px',\r\n                        padding: '4px 8px',\r\n                        borderRadius: '8px',\r\n                        background: 'linear-gradient(135deg, #8b5cf6, #ec4899)',\r\n                        fontSize: '10px',\r\n                        fontWeight: 700,\r\n                        color: 'white'\r\n                    }}>\r\n                        NEW\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Info Section */}\r\n            <div style={{\r\n                padding: '12px',\r\n                height: 'calc(100% - 280px)',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '8px'\r\n            }}>\r\n                <h3 style={{\r\n                    fontSize: '14px',\r\n                    fontWeight: 600,\r\n                    color: 'white',\r\n                    margin: 0,\r\n                    overflow: 'hidden',\r\n                    textOverflow: 'ellipsis',\r\n                    whiteSpace: 'nowrap'\r\n                }}>\r\n                    {config.name}\r\n                </h3>\r\n\r\n                {/* Tags */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexWrap: 'wrap',\r\n                    gap: '4px',\r\n                    overflow: 'hidden',\r\n                    maxHeight: '48px'\r\n                }}>\r\n                    {config.tags.slice(0, 4).map(tag => (\r\n                        <TagBadge key={tag.id} tag={tag} size=\"sm\" />\r\n                    ))}\r\n                    {config.tags.length > 4 && (\r\n                        <span style={{\r\n                            fontSize: '10px',\r\n                            color: 'rgba(255,255,255,0.5)',\r\n                            alignSelf: 'center'\r\n                        }}>\r\n                            +{config.tags.length - 4}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Selection Indicator */}\r\n            {isSelected && (\r\n                <div style={{\r\n                    position: 'absolute',\r\n                    bottom: '12px',\r\n                    right: '12px',\r\n                    width: '24px',\r\n                    height: '24px',\r\n                    borderRadius: '50%',\r\n                    background: '#8b5cf6',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center'\r\n                }}>\r\n                    <Check size={14} color=\"white\" />\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n});\r\n\r\nTemplateCard.displayName = 'TemplateCard';\r\n\r\n// ============================================================================\r\n// FILTER SIDEBAR\r\n// ============================================================================\r\n\r\ninterface FilterSidebarProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    filters: FilterState;\r\n    onFilterChange: (filters: FilterState) => void;\r\n    resultCount: number;\r\n}\r\n\r\ninterface FilterState {\r\n    search: string;\r\n    atsMin: number;\r\n    tags: string[];\r\n    categories: TagCategory[];\r\n}\r\n\r\nconst FilterSidebar: React.FC<FilterSidebarProps> = ({\r\n    isOpen,\r\n    onClose,\r\n    filters,\r\n    onFilterChange,\r\n    resultCount\r\n}) => {\r\n    const tagsByCategory = useMemo(() => {\r\n        const grouped: Record<TagCategory, typeof PREDEFINED_TAGS> = {\r\n            ats: [],\r\n            style: [],\r\n            industry: [],\r\n            experience: [],\r\n            feature: [],\r\n            region: []\r\n        };\r\n\r\n        PREDEFINED_TAGS.forEach(tag => {\r\n            grouped[tag.category].push(tag);\r\n        });\r\n\r\n        return grouped;\r\n    }, []);\r\n\r\n    const toggleTag = (tagId: string) => {\r\n        const newTags = filters.tags.includes(tagId)\r\n            ? filters.tags.filter(t => t !== tagId)\r\n            : [...filters.tags, tagId];\r\n        onFilterChange({ ...filters, tags: newTags });\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div\r\n                    initial={{ x: -320, opacity: 0 }}\r\n                    animate={{ x: 0, opacity: 1 }}\r\n                    exit={{ x: -320, opacity: 0 }}\r\n                    style={{\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        bottom: 0,\r\n                        width: '320px',\r\n                        background: 'linear-gradient(180deg, #0f172a 0%, #1e293b 100%)',\r\n                        borderRight: '1px solid rgba(255,255,255,0.1)',\r\n                        overflowY: 'auto',\r\n                        zIndex: 100,\r\n                        padding: '24px'\r\n                    }}\r\n                >\r\n                    {/* Header */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        marginBottom: '24px'\r\n                    }}>\r\n                        <h2 style={{\r\n                            color: 'white',\r\n                            fontSize: '18px',\r\n                            fontWeight: 700,\r\n                            margin: 0,\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px'\r\n                        }}>\r\n                            <Filter size={20} />\r\n                            Filtres\r\n                        </h2>\r\n                        <button\r\n                            onClick={onClose}\r\n                            style={{\r\n                                background: 'rgba(255,255,255,0.1)',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                padding: '8px',\r\n                                cursor: 'pointer',\r\n                                color: 'white'\r\n                            }}\r\n                        >\r\n                            <X size={18} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Result Count */}\r\n                    <div style={{\r\n                        padding: '12px 16px',\r\n                        background: 'rgba(139, 92, 246, 0.2)',\r\n                        borderRadius: '8px',\r\n                        marginBottom: '24px',\r\n                        color: '#c4b5fd',\r\n                        fontSize: '14px',\r\n                        fontWeight: 600\r\n                    }}>\r\n                        {resultCount.toLocaleString()} templates trouv├®s\r\n                    </div>\r\n\r\n                    {/* Search */}\r\n                    <div style={{ marginBottom: '24px' }}>\r\n                        <label style={{ color: 'rgba(255,255,255,0.7)', fontSize: '12px', marginBottom: '8px', display: 'block' }}>\r\n                            Recherche\r\n                        </label>\r\n                        <div style={{ position: 'relative' }}>\r\n                            <Search size={16} style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', color: 'rgba(255,255,255,0.5)' }} />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={filters.search}\r\n                                onChange={(e) => onFilterChange({ ...filters, search: e.target.value })}\r\n                                placeholder=\"Nom, style, industrie...\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    padding: '10px 12px 10px 40px',\r\n                                    borderRadius: '8px',\r\n                                    border: '1px solid rgba(255,255,255,0.1)',\r\n                                    background: 'rgba(255,255,255,0.05)',\r\n                                    color: 'white',\r\n                                    fontSize: '14px'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* ATS Score Slider */}\r\n                    <div style={{ marginBottom: '24px' }}>\r\n                        <label style={{ color: 'rgba(255,255,255,0.7)', fontSize: '12px', marginBottom: '8px', display: 'flex', justifyContent: 'space-between' }}>\r\n                            <span>Score ATS minimum</span>\r\n                            <span style={{ color: '#22c55e' }}>{filters.atsMin}%</span>\r\n                        </label>\r\n                        <input\r\n                            type=\"range\"\r\n                            min={0}\r\n                            max={100}\r\n                            value={filters.atsMin}\r\n                            onChange={(e) => onFilterChange({ ...filters, atsMin: parseInt(e.target.value) })}\r\n                            style={{ width: '100%' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Tag Filters */}\r\n                    {Object.entries(tagsByCategory).map(([category, tags]) => (\r\n                        <div key={category} style={{ marginBottom: '20px' }}>\r\n                            <label style={{\r\n                                color: TAG_COLORS[category as TagCategory],\r\n                                fontSize: '12px',\r\n                                fontWeight: 600,\r\n                                marginBottom: '8px',\r\n                                display: 'block',\r\n                                textTransform: 'uppercase',\r\n                                letterSpacing: '1px'\r\n                            }}>\r\n                                {category === 'ats' ? 'Compatibilit├® ATS' :\r\n                                    category === 'style' ? 'Style' :\r\n                                        category === 'industry' ? 'Secteur' :\r\n                                            category === 'experience' ? 'Exp├®rience' :\r\n                                                category === 'feature' ? 'Fonctionnalit├®s' :\r\n                                                    'R├®gion'}\r\n                            </label>\r\n                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>\r\n                                {tags.map(tag => (\r\n                                    <TagBadge\r\n                                        key={tag.id}\r\n                                        tag={tag}\r\n                                        size=\"md\"\r\n                                        selected={filters.tags.includes(tag.id)}\r\n                                        onClick={() => toggleTag(tag.id)}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n\r\n                    {/* Reset Button */}\r\n                    <button\r\n                        onClick={() => onFilterChange({ search: '', atsMin: 0, tags: [], categories: [] })}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '12px',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid rgba(255,255,255,0.2)',\r\n                            background: 'transparent',\r\n                            color: 'white',\r\n                            fontSize: '14px',\r\n                            cursor: 'pointer',\r\n                            marginTop: '16px'\r\n                        }}\r\n                    >\r\n                        R├®initialiser les filtres\r\n                    </button>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\n// ============================================================================\r\n// MAIN COMPONENT\r\n// ============================================================================\r\n\r\nexport const VirtualTemplateGallery: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const { setSelectedTemplate } = useSettingsStore();\r\n\r\n    const [selectedId, setSelectedId] = useState<string | null>(null);\r\n    const [filterOpen, setFilterOpen] = useState(true);\r\n    const [visibleCount, setVisibleCount] = useState(ITEMS_PER_PAGE);\r\n    const [filters, setFilters] = useState<FilterState>({\r\n        search: '',\r\n        atsMin: 0,\r\n        tags: [],\r\n        categories: []\r\n    });\r\n\r\n    // Filter templates\r\n    const filteredTemplates = useMemo(() => {\r\n        return filterTemplates({\r\n            search: filters.search || undefined,\r\n            atsMin: filters.atsMin || undefined,\r\n            tags: filters.tags.length > 0 ? filters.tags : undefined\r\n        });\r\n    }, [filters]);\r\n\r\n    // Templates to display (paginated)\r\n    const displayedTemplates = useMemo(() => {\r\n        return filteredTemplates.slice(0, visibleCount);\r\n    }, [filteredTemplates, visibleCount]);\r\n\r\n    // Reset visible count when filters change\r\n    useEffect(() => {\r\n        setVisibleCount(ITEMS_PER_PAGE);\r\n    }, [filters]);\r\n\r\n    const handleSelect = useCallback((config: TemplateConfig) => {\r\n        setSelectedId(config.id);\r\n    }, []);\r\n\r\n    const handleConfirm = useCallback(() => {\r\n        if (selectedId) {\r\n            // Save to store then navigate\r\n            setSelectedTemplate(selectedId);\r\n            navigate('/');\r\n        }\r\n    }, [selectedId, navigate, setSelectedTemplate]);\r\n\r\n    const loadMore = useCallback(() => {\r\n        setVisibleCount(prev => Math.min(prev + ITEMS_PER_PAGE, filteredTemplates.length));\r\n    }, [filteredTemplates.length]);\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100vw',\r\n            height: '100vh',\r\n            background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)',\r\n            overflow: 'hidden',\r\n            position: 'relative'\r\n        }}>\r\n            {/* Filter Sidebar */}\r\n            <FilterSidebar\r\n                isOpen={filterOpen}\r\n                onClose={() => setFilterOpen(false)}\r\n                filters={filters}\r\n                onFilterChange={setFilters}\r\n                resultCount={filteredTemplates.length}\r\n            />\r\n\r\n            {/* Main Content */}\r\n            <div style={{\r\n                marginLeft: filterOpen ? '320px' : '0',\r\n                transition: 'margin-left 0.3s ease',\r\n                height: '100%',\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    padding: '16px 24px',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    borderBottom: '1px solid rgba(255,255,255,0.1)'\r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                        <button\r\n                            onClick={() => navigate(-1)}\r\n                            style={{\r\n                                background: 'rgba(255,255,255,0.1)',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                padding: '8px 12px',\r\n                                cursor: 'pointer',\r\n                                color: 'white',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '8px'\r\n                            }}\r\n                        >\r\n                            <ChevronLeft size={18} />\r\n                            Retour\r\n                        </button>\r\n\r\n                        {!filterOpen && (\r\n                            <button\r\n                                onClick={() => setFilterOpen(true)}\r\n                                style={{\r\n                                    background: 'rgba(139, 92, 246, 0.2)',\r\n                                    border: '1px solid rgba(139, 92, 246, 0.5)',\r\n                                    borderRadius: '8px',\r\n                                    padding: '8px 12px',\r\n                                    cursor: 'pointer',\r\n                                    color: '#c4b5fd',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '8px'\r\n                                }}\r\n                            >\r\n                                <Filter size={18} />\r\n                                Filtres\r\n                            </button>\r\n                        )}\r\n\r\n                        <h1 style={{\r\n                            color: 'white',\r\n                            fontSize: '20px',\r\n                            fontWeight: 700,\r\n                            margin: 0\r\n                        }}>\r\n                            Galerie de Templates\r\n                            <span style={{\r\n                                fontSize: '14px',\r\n                                color: 'rgba(255,255,255,0.5)',\r\n                                fontWeight: 400,\r\n                                marginLeft: '12px'\r\n                            }}>\r\n                                {displayedTemplates.length} / {filteredTemplates.length.toLocaleString()} affich├®s\r\n                            </span>\r\n                        </h1>\r\n                    </div>\r\n\r\n                    {selectedId && (\r\n                        <button\r\n                            onClick={handleConfirm}\r\n                            style={{\r\n                                background: 'linear-gradient(135deg, #8b5cf6, #ec4899)',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                padding: '10px 24px',\r\n                                cursor: 'pointer',\r\n                                color: 'white',\r\n                                fontSize: '14px',\r\n                                fontWeight: 600,\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '8px'\r\n                            }}\r\n                        >\r\n                            <Check size={18} />\r\n                            Utiliser ce template\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Grid */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    padding: '24px',\r\n                    overflowY: 'auto'\r\n                }}>\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: `repeat(auto-fill, minmax(${CARD_WIDTH}px, 1fr))`,\r\n                        gap: '16px',\r\n                        justifyItems: 'center'\r\n                    }}>\r\n                        {displayedTemplates.map(config => (\r\n                            <TemplateCard\r\n                                key={config.id}\r\n                                config={config}\r\n                                onClick={() => handleSelect(config)}\r\n                                isSelected={selectedId === config.id}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Load More Button */}\r\n                    {visibleCount < filteredTemplates.length && (\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'center',\r\n                            marginTop: '32px',\r\n                            marginBottom: '48px'\r\n                        }}>\r\n                            <button\r\n                                onClick={loadMore}\r\n                                style={{\r\n                                    background: 'rgba(139, 92, 246, 0.2)',\r\n                                    border: '1px solid rgba(139, 92, 246, 0.5)',\r\n                                    borderRadius: '12px',\r\n                                    padding: '16px 48px',\r\n                                    cursor: 'pointer',\r\n                                    color: '#c4b5fd',\r\n                                    fontSize: '16px',\r\n                                    fontWeight: 600,\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '8px'\r\n                                }}\r\n                            >\r\n                                <ChevronDown size={20} />\r\n                                Charger plus ({Math.min(ITEMS_PER_PAGE, filteredTemplates.length - visibleCount)} templates)\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VirtualTemplateGallery;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\features\\wizard\\WizardPage.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useGate\" is called in function \"handleDownload\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":53,"column":26,"nodeType":"Identifier","endLine":53,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from '../../hooks/useTranslation';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useCVStore } from '../../../application/store/cv-store';\r\nimport { useSettingsStore } from '../../../application/store/settings-store';\r\nimport { Button } from '../../design-system/atoms/Button';\r\nimport { ChevronRight, ChevronLeft, Check, User, Briefcase, Layout, Download } from 'lucide-react';\r\nimport { PersonalTab } from '../editor/tabs/PersonalTab';\r\nimport { ExperienceTab } from '../editor/tabs/ExperienceTab';\r\nimport { EducationTab } from '../editor/tabs/EducationTab';\r\nimport { SkillsTab } from '../editor/tabs/SkillsTab';\r\nimport { PreviewPane } from '../preview/PreviewPane';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ntype WizardStep = 'identity' | 'experience' | 'education' | 'skills' | 'template' | 'download';\r\n\r\nexport const WizardPage: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const { t } = useTranslation();\r\n\r\n    // Initialize step from URL or default to 'identity'\r\n    const initialStep = (searchParams.get('step') as WizardStep) || 'identity';\r\n    const [step, setStep] = useState<WizardStep>(initialStep);\r\n\r\n    const { profile } = useCVStore();\r\n    const { language } = useSettingsStore();\r\n    const [isDownloading, setIsDownloading] = useState(false);\r\n\r\n    // Update URL when step changes (shallow)\r\n    useEffect(() => {\r\n        const newUrl = `/wizard?step=${step}`;\r\n        window.history.replaceState(null, '', newUrl);\r\n    }, [step]);\r\n\r\n    // Auto-redirect to template gallery when reaching template step\r\n    useEffect(() => {\r\n        if (step === 'template') {\r\n            // Navigate to REAL template gallery with return URL\r\n            // We want to return to the 'download' step after selecting a template\r\n            navigate('/templates?returnTo=/wizard?step=download');\r\n        }\r\n    }, [step, navigate]);\r\n\r\n    const handleDownload = async () => {\r\n        // GATE: Check for premium template\r\n        // \"modern\" template (Modern Swiss) is premium\r\n        const premiumTemplates = ['modern'];\r\n        const currentTemplate = profile.metadata?.templateId || 'classic';\r\n\r\n        if (premiumTemplates.includes(currentTemplate)) {\r\n            const { useGate } = await import('../../../application/hooks/useGate');\r\n            const gate = useGate();\r\n            const { allowed, triggerUpsell } = gate.checkGate('PREMIUM_TEMPLATE');\r\n\r\n            if (!allowed) {\r\n                triggerUpsell();\r\n                return;\r\n            }\r\n        }\r\n\r\n        try {\r\n            setIsDownloading(true);\r\n\r\n            // Call Puppeteer PDF API for pixel-perfect rendering\r\n            const response = await fetch('http://localhost:3000/api/puppeteer-pdf/generate', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    profile,\r\n                    language\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`Server returned ${response.status}: ${response.statusText}`);\r\n            }\r\n\r\n            // Get PDF blob from server response\r\n            const blob = await response.blob();\r\n\r\n            // Trigger download\r\n            const url = URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = `cv-${profile.personal.lastName || 'resume'}.pdf`;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            URL.revokeObjectURL(url);\r\n        } catch (error) {\r\n            console.error('Failed to generate PDF:', error);\r\n            // Could add toast notification here\r\n        } finally {\r\n            setIsDownloading(false);\r\n        }\r\n    };\r\n\r\n    const steps: { id: WizardStep; label: string; icon: React.ReactNode }[] = [\r\n        { id: 'identity', label: t('wizard.steps.identity'), icon: <User size={18} /> },\r\n        { id: 'experience', label: t('wizard.steps.experience'), icon: <Briefcase size={18} /> },\r\n        { id: 'education', label: t('sections.education'), icon: <Briefcase size={18} /> },\r\n        { id: 'skills', label: t('sections.skills'), icon: <Briefcase size={18} /> },\r\n        { id: 'template', label: t('wizard.steps.template'), icon: <Layout size={18} /> },\r\n        { id: 'download', label: t('wizard.steps.download'), icon: <Download size={18} /> },\r\n    ];\r\n\r\n    const currentStepIndex = steps.findIndex(s => s.id === step);\r\n\r\n    const handleNext = () => {\r\n        if (currentStepIndex < steps.length - 1) {\r\n            setStep(steps[currentStepIndex + 1].id);\r\n        }\r\n    };\r\n\r\n    const handleBack = () => {\r\n        if (currentStepIndex > 0) {\r\n            setStep(steps[currentStepIndex - 1].id);\r\n        } else {\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    const isStepValid = () => {\r\n        // Relaxed validation - allow progression even if fields are empty\r\n        return true;\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-transparent flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"bg-transparent border-b border-white/10 px-6 py-4 flex justify-between items-center sticky top-0 z-50 backdrop-blur-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center text-white font-bold shadow-lg shadow-brand-500/20\">\r\n                        CV\r\n                    </div>\r\n                    <span className=\"font-bold text-slate-200\">{t('wizard.title')}</span>\r\n                </div>\r\n                <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('/')} className=\"text-slate-400 hover:text-white hover:bg-white/5\">\r\n                    {t('wizard.actions.exit')}\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"bg-transparent border-b border-white/10 px-6 py-4\">\r\n                <div className=\"max-w-3xl mx-auto\">\r\n                    <div className=\"flex justify-between relative\">\r\n                        {/* Line */}\r\n                        <div className=\"absolute top-1/2 left-0 w-full h-0.5 bg-white/10 -z-10\" />\r\n                        <div\r\n                            className=\"absolute top-1/2 left-0 h-0.5 bg-brand-500 -z-10 transition-all duration-500\"\r\n                            style={{ width: `${(currentStepIndex / (steps.length - 1)) * 100}%` }}\r\n                        />\r\n\r\n                        {steps.map((s, idx) => {\r\n                            const isActive = idx === currentStepIndex;\r\n                            const isCompleted = idx < currentStepIndex;\r\n\r\n                            return (\r\n                                <div key={s.id} className=\"flex flex-col items-center gap-2 bg-transparent px-2 pt-3\">\r\n                                    <div\r\n                                        className={`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 border-2 ${isActive ? 'bg-brand-600 border-brand-400 text-white scale-110 shadow-lg shadow-brand-500/30' :\r\n                                            isCompleted ? 'bg-emerald-500 border-emerald-400 text-white' : 'bg-slate-900/50 border-slate-700 text-slate-500'\r\n                                            }`}\r\n                                    >\r\n                                        {isCompleted ? <Check size={16} /> : s.icon}\r\n                                    </div>\r\n                                    <span className={`text-xs font-medium transition-colors ${isActive ? 'text-brand-400' : 'text-slate-500'}`}>\r\n                                        {s.label}\r\n                                    </span>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                <div className=\"max-w-3xl mx-auto p-6 pb-24\">\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.div\r\n                            key={step}\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                            transition={{ duration: 0.2 }}\r\n                        >\r\n                            {step === 'identity' && (\r\n                                <div className=\"glass-card p-6 rounded-xl\">\r\n                                    <h2 className=\"text-xl font-bold text-slate-200 mb-6\">{t('wizard.headers.identity')}</h2>\r\n                                    <PersonalTab />\r\n                                </div>\r\n                            )}\r\n\r\n                            {step === 'experience' && (\r\n                                <div className=\"glass-card p-6 rounded-xl\">\r\n                                    <h2 className=\"text-xl font-bold text-slate-200 mb-6\">{t('wizard.headers.experience')}</h2>\r\n                                    <ExperienceTab />\r\n                                </div>\r\n                            )}\r\n\r\n                            {step === 'education' && (\r\n                                <div className=\"glass-card p-6 rounded-xl\">\r\n                                    <h2 className=\"text-xl font-bold text-slate-200 mb-6\">{t('sections.education')}</h2>\r\n                                    <EducationTab />\r\n                                </div>\r\n                            )}\r\n\r\n                            {step === 'skills' && (\r\n                                <div className=\"glass-card p-6 rounded-xl\">\r\n                                    <h2 className=\"text-xl font-bold text-slate-200 mb-6\">{t('sections.skills')}</h2>\r\n                                    <SkillsTab />\r\n                                </div>\r\n                            )}\r\n\r\n                            {step === 'template' && (\r\n                                <div className=\"glass-card p-6 rounded-xl\">\r\n                                    <h2 className=\"text-xl font-bold text-slate-200 mb-6\">{t('wizard.headers.template')}</h2>\r\n                                    <div className=\"flex justify-center items-center h-40\">\r\n                                        <p className=\"text-slate-400\">Redirecting to Template Gallery...</p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {step === 'download' && (\r\n                                <div className=\"h-[600px] bg-slate-900/50 backdrop-blur-sm rounded-xl overflow-y-auto overflow-x-hidden border border-white/10 shadow-inner flex justify-center items-start py-10 custom-scrollbar\">\r\n                                    <div style={{ transform: 'scale(0.6)', transformOrigin: 'top center' }} className=\"shadow-2xl shrink-0 mb-10\">\r\n                                        <PreviewPane hideToolbar />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n                    </AnimatePresence>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Footer Actions */}\r\n            <div className=\"bg-transparent border-t border-white/10 p-4 sticky bottom-0 z-50 backdrop-blur-md\">\r\n                <div className=\"max-w-3xl mx-auto flex justify-between items-center\">\r\n                    <Button variant=\"secondary\" onClick={handleBack} leftIcon={<ChevronLeft size={16} />} className=\"bg-white/5 hover:bg-white/10 text-slate-300 border-white/10\">\r\n                        {currentStepIndex === 0 ? t('wizard.actions.exit') : t('wizard.actions.back')}\r\n                    </Button>\r\n\r\n                    {step === 'download' ? (\r\n                        <Button\r\n                            onClick={handleDownload}\r\n                            className=\"bg-primary-600 hover:bg-primary-700 text-white shadow-lg shadow-primary-500/20\"\r\n                            rightIcon={<Download size={16} />}\r\n                            isLoading={isDownloading}\r\n                        >\r\n                            {t('actions.download')}\r\n                        </Button>\r\n                    ) : (\r\n                        <Button\r\n                            variant=\"primary\"\r\n                            onClick={handleNext}\r\n                            rightIcon={<ChevronRight size={16} />}\r\n                            disabled={!isStepValid()}\r\n                            className=\"bg-brand-600 hover:bg-brand-700 text-white shadow-lg shadow-brand-500/20\"\r\n                        >\r\n                            {t('wizard.actions.next')}\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useInlineEditor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[775,778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[775,778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[810,813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[810,813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[904,907],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[904,907],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1249,1252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1249,1252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2169,2172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2169,2172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2497,2500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2497,2500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2517,2520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2517,2520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2611,2614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2611,2614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\r\nimport { useCVStore } from '../../application/store/cv-store';\r\nimport { useToastStore } from '../../application/store/toast-store';\r\n\r\nexport interface InlineFieldMeta {\r\n    fieldKey: string;\r\n    label: string;\r\n    required: boolean;\r\n    removable?: boolean;\r\n    placeholderLabel?: string;\r\n    removeWarning?: string;\r\n}\r\n\r\ninterface InlineEditorState {\r\n    isOpen: boolean;\r\n    meta: InlineFieldMeta | null;\r\n    value: string;\r\n    position: { x: number; y: number };\r\n}\r\n\r\nconst initialState: InlineEditorState = {\r\n    isOpen: false,\r\n    meta: null,\r\n    value: '',\r\n    position: { x: 0, y: 0 }\r\n};\r\n\r\n/**\r\n * Smart field update by path (supports nested objects and arrays)\r\n */\r\nconst updateFieldByPath = (obj: any, path: string, value: string): any => {\r\n    const keys = path.split('.');\r\n    const result = { ...obj };\r\n    let current: any = result;\r\n\r\n    for (let i = 0; i < keys.length - 1; i++) {\r\n        const key = keys[i];\r\n        const arrayMatch = key.match(/(\\w+)\\[([^\\]]+)\\]/);\r\n\r\n        if (arrayMatch) {\r\n            const [, arrayName, id] = arrayMatch;\r\n            const array = [...(current[arrayName] || [])];\r\n            const index = array.findIndex((item: any) => item.id === id);\r\n            if (index !== -1) {\r\n                array[index] = { ...array[index] };\r\n                current[arrayName] = array;\r\n                current = array[index];\r\n            }\r\n        } else {\r\n            current[key] = { ...(current[key] || {}) };\r\n            current = current[key];\r\n        }\r\n    }\r\n\r\n    const lastKey = keys[keys.length - 1];\r\n    const arrayMatch = lastKey.match(/(\\w+)\\[([^\\]]+)\\]/);\r\n\r\n    if (arrayMatch) {\r\n        const [, arrayName, indexOrId] = arrayMatch;\r\n        const array = [...(current[arrayName] || [])];\r\n\r\n        if (/^\\d+$/.test(indexOrId)) {\r\n            // Array index\r\n            const index = parseInt(indexOrId, 10);\r\n            if (index >= 0 && index < array.length) {\r\n                array[index] = value;\r\n            }\r\n        } else {\r\n            // Object in array by ID\r\n            const index = array.findIndex((item: any) => item.id === indexOrId);\r\n            if (index !== -1) {\r\n                array[index] = value;\r\n            }\r\n        }\r\n        current[arrayName] = array;\r\n    } else {\r\n        current[lastKey] = value;\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n/**\r\n * Remove item from array by path\r\n */\r\nconst removeItemByPath = (obj: any, path: string): any => {\r\n    const keys = path.split('.');\r\n    const result = { ...obj };\r\n    let current: any = result;\r\n\r\n    for (let i = 0; i < keys.length - 1; i++) {\r\n        const key = keys[i];\r\n        current[key] = { ...(current[key] || {}) };\r\n        current = current[key];\r\n    }\r\n\r\n    const lastKey = keys[keys.length - 1];\r\n    const arrayMatch = lastKey.match(/(\\w+)\\[(\\d+)\\]/);\r\n\r\n    if (arrayMatch) {\r\n        const [, arrayName, index] = arrayMatch;\r\n        const array = [...(current[arrayName] || [])];\r\n        array.splice(parseInt(index, 10), 1);\r\n        current[arrayName] = array;\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nexport const useInlineEditor = () => {\r\n    const [state, setState] = useState<InlineEditorState>(initialState);\r\n    const { profile, updateProfile } = useCVStore();\r\n    const { addToast } = useToastStore();\r\n\r\n    const openEditor = useCallback((meta: InlineFieldMeta, value: string, position: { x: number; y: number }) => {\r\n        setState({\r\n            isOpen: true,\r\n            meta,\r\n            value,\r\n            position\r\n        });\r\n    }, []);\r\n\r\n    const closeEditor = useCallback(() => {\r\n        setState(initialState);\r\n    }, []);\r\n\r\n    const confirm = useCallback((newValue: string) => {\r\n        if (!state.meta) return;\r\n\r\n        const trimmed = newValue.trim();\r\n\r\n        // Required field validation\r\n        if (state.meta.required && !trimmed) {\r\n            const placeholder = state.meta.placeholderLabel || 'Required field';\r\n            const updated = updateFieldByPath(profile, state.meta.fieldKey, placeholder);\r\n            updateProfile(updated);\r\n            addToast(`ÔÜá´©Å ${state.meta.label} is required. Placeholder added.`, 'warning');\r\n            closeEditor();\r\n            return;\r\n        }\r\n\r\n        // Removable field logic\r\n        if (!trimmed && state.meta.removable) {\r\n            const warning = state.meta.removeWarning || `Remove ${state.meta.label}?`;\r\n            const updated = removeItemByPath(profile, state.meta.fieldKey);\r\n            updateProfile(updated);\r\n            addToast(`­ƒùæ´©Å ${warning}`, 'warning');\r\n            closeEditor();\r\n            return;\r\n        }\r\n\r\n        // Normal update\r\n        const updated = updateFieldByPath(profile, state.meta.fieldKey, trimmed || newValue);\r\n        updateProfile(updated);\r\n        closeEditor();\r\n    }, [state.meta, profile, updateProfile, addToast, closeEditor]);\r\n\r\n    return {\r\n        state,\r\n        openEditor,\r\n        closeEditor,\r\n        confirm\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useMediaQuery.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useMediaQuery.ts:22:9\n  20 |\n  21 |         const mediaQuery = window.matchMedia(query);\n> 22 |         setMatches(mediaQuery.matches);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |\n  24 |         const handler = (event: MediaQueryListEvent) => {\n  25 |             setMatches(event.matches);","line":22,"column":9,"nodeType":null,"endLine":22,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useMediaQuery - Custom hook for responsive breakpoints\r\n * \r\n * Usage:\r\n * const isMobile = useMediaQuery('(max-width: 768px)');\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport function useMediaQuery(query: string): boolean {\r\n    const [matches, setMatches] = useState(() => {\r\n        if (typeof window !== 'undefined') {\r\n            return window.matchMedia(query).matches;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (typeof window === 'undefined') return;\r\n\r\n        const mediaQuery = window.matchMedia(query);\r\n        setMatches(mediaQuery.matches);\r\n\r\n        const handler = (event: MediaQueryListEvent) => {\r\n            setMatches(event.matches);\r\n        };\r\n\r\n        mediaQuery.addEventListener('change', handler);\r\n        return () => mediaQuery.removeEventListener('change', handler);\r\n    }, [query]);\r\n\r\n    return matches;\r\n}\r\n\r\n/**\r\n * Preset breakpoint hooks for common use cases\r\n */\r\nexport function useIsMobile(): boolean {\r\n    return useMediaQuery('(max-width: 768px)');\r\n}\r\n\r\nexport function useIsTablet(): boolean {\r\n    return useMediaQuery('(min-width: 769px) and (max-width: 1024px)');\r\n}\r\n\r\nexport function useIsDesktop(): boolean {\r\n    return useMediaQuery('(min-width: 1025px)');\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\usePageDetection.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[612,615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[612,615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentPage'. Either include it or remove the dependency array.","line":76,"column":8,"nodeType":"ArrayExpression","endLine":76,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [contentRef, currentPage]","fix":{"range":[2370,2399],"text":"[contentRef, currentPage]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":76,"column":21,"nodeType":"SpreadElement","endLine":76,"endColumn":36}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, type RefObject } from 'react';\r\n\r\nconst A4_HEIGHT_PX = 1123; // A4 page height in pixels at 96 DPI\r\n\r\ninterface PageBreak {\r\n    pageNumber: number;\r\n    startY: number;\r\n    endY: number;\r\n}\r\n\r\ninterface UsePageDetectionResult {\r\n    pageCount: number;\r\n    currentPage: number;\r\n    setCurrentPage: (page: number) => void;\r\n    pageBreaks: PageBreak[];\r\n}\r\n\r\n/**\r\n * Hook to detect when CV content spans multiple pages\r\n * Calculates page breaks based on A4 page height\r\n */\r\nexport const usePageDetection = (\r\n    contentRef: RefObject<HTMLDivElement | null>,\r\n    dependencies: any[] = []\r\n): UsePageDetectionResult => {\r\n    const [pageCount, setPageCount] = useState(1);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [pageBreaks, setPageBreaks] = useState<PageBreak[]>([]);\r\n\r\n    useEffect(() => {\r\n        const calculatePages = () => {\r\n            if (!contentRef.current) return;\r\n\r\n            const totalHeight = contentRef.current.scrollHeight;\r\n            const calculatedPageCount = Math.ceil(totalHeight / A4_HEIGHT_PX);\r\n\r\n            // Generate page breaks\r\n            const breaks: PageBreak[] = [];\r\n            for (let i = 0; i < calculatedPageCount; i++) {\r\n                breaks.push({\r\n                    pageNumber: i + 1,\r\n                    startY: i * A4_HEIGHT_PX,\r\n                    endY: Math.min((i + 1) * A4_HEIGHT_PX, totalHeight)\r\n                });\r\n            }\r\n\r\n            setPageCount(calculatedPageCount);\r\n            setPageBreaks(breaks);\r\n\r\n            // Reset to page 1 if current page exceeds new page count\r\n            if (currentPage > calculatedPageCount) {\r\n                setCurrentPage(1);\r\n            }\r\n        };\r\n\r\n        // Calculate immediately\r\n        calculatePages();\r\n\r\n        // Recalculate on window resize\r\n        const handleResize = () => calculatePages();\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        // Use ResizeObserver for content changes\r\n        const resizeObserver = new ResizeObserver(() => {\r\n            calculatePages();\r\n        });\r\n\r\n        if (contentRef.current) {\r\n            resizeObserver.observe(contentRef.current);\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n            resizeObserver.disconnect();\r\n        };\r\n    }, [contentRef, ...dependencies]);\r\n\r\n    return {\r\n        pageCount,\r\n        currentPage,\r\n        setCurrentPage,\r\n        pageBreaks\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\usePagination.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useRippleEffect.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'rippleId'. Either include it or remove the dependency array.","line":24,"column":8,"nodeType":"ArrayExpression","endLine":24,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [rippleId]","fix":{"range":[748,750],"text":"[rippleId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\r\n\r\nexport const useRippleEffect = () => {\r\n    const [ripples, setRipples] = useState<{ id: number; x: number; y: number }[]>([]);\r\n    let rippleId = 0;\r\n\r\n    const triggerRipple = useCallback((element: HTMLElement) => {\r\n        const rect = element.getBoundingClientRect();\r\n        const x = rect.left + rect.width / 2;\r\n        const y = rect.top + rect.height / 2;\r\n\r\n        const newRipple = {\r\n            id: rippleId++,\r\n            x,\r\n            y\r\n        };\r\n\r\n        setRipples(prev => [...prev, newRipple]);\r\n\r\n        // Remove ripple after animation\r\n        setTimeout(() => {\r\n            setRipples(prev => prev.filter(r => r.id !== newRipple.id));\r\n        }, 1000);\r\n    }, []);\r\n\r\n    const removeRipple = useCallback((id: number) => {\r\n        setRipples(prev => prev.filter(r => r.id !== id));\r\n    }, []);\r\n\r\n    return {\r\n        ripples,\r\n        triggerRipple,\r\n        removeRipple\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useSmartDensity.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1218,1221],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1218,1221],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect } from 'react';\r\nimport { useCVStore } from '../../application/store/cv-store';\r\nimport { useAdaptiveEngine } from '../../domain/services/adaptive/adaptive-engine';\r\n\r\nexport const useSmartDensity = () => {\r\n    const { profile } = useCVStore();\r\n    const { setDensity, deviceType } = useAdaptiveEngine();\r\n\r\n    useEffect(() => {\r\n        // Only auto-adjust density on desktop for now, or if explicitly requested\r\n        if (deviceType === 'mobile') {\r\n            setDensity('compact'); // Mobile is always compact\r\n            return;\r\n        }\r\n\r\n        const analyze = async () => {\r\n            const text = [\r\n                profile.summary,\r\n                ...profile.experiences.map(e => `${e.role} ${e.tasks.join(' ')}`),\r\n                profile.skills.join(' ')\r\n            ].join(' ');\r\n\r\n            if (text.length < 50) {\r\n                setDensity('comfortable');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const { level } = await import('../../domain/services/ai/nano-brain').then(m => m.nanoBrain.analyzeComplexity(text));\r\n                // Map the level directly as it matches the Density type\r\n                setDensity(level as any);\r\n            } catch (e) {\r\n                console.warn('NanoBrain complexity analysis failed', e);\r\n            }\r\n        };\r\n\r\n        const timer = setTimeout(analyze, 1000); // Debounce 1s\r\n        return () => clearTimeout(timer);\r\n    }, [profile, deviceType, setDensity]);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\hooks\\useTranslation.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[586,589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[586,589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useSettingsStore } from '../../application/store/settings-store';\r\nimport en from '../../i18n/en.json';\r\nimport fr from '../../i18n/fr.json';\r\n\r\nconst translations = { en, fr };\r\n\r\nexport const useTranslation = (langOverride?: 'en' | 'fr') => {\r\n    const { language } = useSettingsStore();\r\n    const currentLang = langOverride || language || 'en';\r\n\r\n    // Fallback to English if the language is not found\r\n    const dict = translations[currentLang] || translations.en;\r\n\r\n    const t = (key: string): string => {\r\n        const keys = key.split('.');\r\n        let value: any = dict;\r\n\r\n        for (const k of keys) {\r\n            if (value && typeof value === 'object' && k in value) {\r\n                value = value[k];\r\n            } else {\r\n                return key; // Return key if not found\r\n            }\r\n        }\r\n\r\n        return typeof value === 'string' ? value : key;\r\n    };\r\n\r\n    return { t, language: currentLang };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\labs\\LabsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\AdaptiveLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\DynamicRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\ImmersiveBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\mobile\\MobileLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\registry.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[167,170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[167,170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport type { CVProfile } from '../../domain/entities/cv';\r\n\r\nexport interface TemplateProps {\r\n    data: CVProfile;\r\n    densityStyles: any; // We can make this stricter later\r\n    accentColor: string;\r\n    fontFamily: string;\r\n    language: 'fr' | 'en';\r\n}\r\n\r\nexport interface TemplateDefinition {\r\n    id: string;\r\n    name: string;\r\n    thumbnail?: string;\r\n    component: React.FC<TemplateProps>;\r\n    isATS: boolean;\r\n}\r\n\r\nclass LayoutRegistry {\r\n    private templates: Map<string, TemplateDefinition> = new Map();\r\n\r\n    register(template: TemplateDefinition) {\r\n        this.templates.set(template.id, template);\r\n    }\r\n\r\n    get(id: string): TemplateDefinition | undefined {\r\n        return this.templates.get(id);\r\n    }\r\n\r\n    getAll(): TemplateDefinition[] {\r\n        return Array.from(this.templates.values());\r\n    }\r\n}\r\n\r\nexport const layoutRegistry = new LayoutRegistry();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\ATSTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\ModernTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\ClassicLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateField' is assigned a value but never used.","line":56,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ClassicLayout - Traditional ATS-Friendly Layout\r\n * \r\n * Features:\r\n * - Clean, minimal design\r\n * - Serif fonts for headings\r\n * - Horizontal lines separators\r\n * - No background graphics\r\n * - Centered header\r\n */\r\n\r\nimport React from 'react';\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport { EditableField, EditableEmail, EditablePhone } from '../../../components/atomic-editor/EditableField';\r\nimport { useUpdateField } from '../../../../application/store/v2';\r\nimport { SortableItem } from '../../../components/lego/SortableItem';\r\nimport { SortableSection } from '../../../components/lego/SortableSection';\r\nimport { t } from '../../../../data/translations';\r\nimport { TemplateEngine, DEFAULT_THEME } from '../../../../domain/templates/TemplateEngine';\r\nimport type { TemplateConfig } from '../../../../domain/templates/TemplateEngine';\r\nimport type { CVProfile } from '../../../../domain/cv/v2/types';\r\nimport type { CVMode } from '../../../../application/store/v2/cv-store-v2.types';\r\n\r\ninterface ClassicLayoutProps {\r\n    pageIndex: number;\r\n    sectionIds: string[];\r\n    data: CVProfile;\r\n    mode: CVMode;\r\n    config?: TemplateConfig;\r\n    language?: 'en' | 'fr';\r\n}\r\n\r\nexport const ClassicLayout: React.FC<ClassicLayoutProps> = ({\r\n    pageIndex,\r\n    sectionIds,\r\n    data,\r\n    mode,\r\n    config = DEFAULT_THEME,\r\n    language = 'fr'\r\n}) => {\r\n    const effectiveConfig = React.useMemo(() => ({\r\n        ...config,\r\n        colors: {\r\n            ...config.colors,\r\n            primary: '#334155', // Slate-700 for classic look\r\n        },\r\n        typography: {\r\n            ...config.typography,\r\n            headingFont: 'Georgia, serif',\r\n            bodyFont: 'Arial, sans-serif',\r\n        }\r\n    }), [config]);\r\n\r\n    const cssVars = TemplateEngine.generateStyles(effectiveConfig);\r\n    const txt = t[language];\r\n    const updateField = useUpdateField();\r\n\r\n    // Section metadata\r\n    const sectionMeta = {\r\n        summary: { title: 'PROFIL' },\r\n        experience: { title: txt.experience.toUpperCase() },\r\n        education: { title: txt.education.toUpperCase() },\r\n        skills: { title: 'COMP├ëTENCES' },\r\n        languages: { title: 'LANGUES' },\r\n    };\r\n\r\n    const renderSectionContent = (sectionId: string) => {\r\n        switch (sectionId) {\r\n            case 'summary':\r\n                return data.summary ? (\r\n                    <EditableField\r\n                        path=\"summary\"\r\n                        label=\"Summary\"\r\n                        multiline\r\n                        className=\"text-sm leading-relaxed text-gray-700 text-justify\"\r\n                    >\r\n                        {(value) => <p>{value}</p>}\r\n                    </EditableField>\r\n                ) : null;\r\n\r\n            case 'experience':\r\n                return (\r\n                    <div className=\"space-y-6\">\r\n                        <SortableContext items={data.experiences.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.experiences.map((exp, index) => (\r\n                                <SortableItem key={exp.id} id={exp.id} mode={mode}>\r\n                                    <div className=\"group relative pl-0 border-l-0\">\r\n                                        <div className=\"flex justify-between items-baseline mb-1\">\r\n                                            <h4 className=\"font-bold text-gray-900 text-base\">\r\n                                                <EditableField\r\n                                                    path={`experiences.${index}.role`}\r\n                                                    label=\"Role\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </h4>\r\n                                            <span className=\"text-sm font-medium text-gray-600 whitespace-nowrap\">\r\n                                                <EditableField\r\n                                                    path={`experiences.${index}.dates`}\r\n                                                    label=\"Dates\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"text-sm font-semibold text-gray-700 mb-2\">\r\n                                            <EditableField\r\n                                                path={`experiences.${index}.company`}\r\n                                                label=\"Company\"\r\n                                            >\r\n                                                {(value) => <span>{value}</span>}\r\n                                            </EditableField>\r\n                                            {exp.location && (\r\n                                                <span className=\"font-normal text-gray-500\"> ÔÇö {exp.location}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <EditableField\r\n                                            path={`experiences.${index}.tasks`}\r\n                                            label=\"Description\"\r\n                                            multiline\r\n                                            className=\"text-sm text-gray-600 leading-relaxed\"\r\n                                        >\r\n                                            {(value) => (\r\n                                                <ul className=\"list-disc list-outside ml-4 space-y-1\">\r\n                                                    {Array.isArray(value)\r\n                                                        ? value.map((task, i) => <li key={i}>{task}</li>)\r\n                                                        : <li>{String(value)}</li>\r\n                                                    }\r\n                                                </ul>\r\n                                            )}\r\n                                        </EditableField>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'education':\r\n                return (\r\n                    <div className=\"space-y-4\">\r\n                        <SortableContext items={data.educations.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.educations.map((edu, index) => (\r\n                                <SortableItem key={edu.id} id={edu.id} mode={mode}>\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-900\">\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.school`}\r\n                                                    label=\"School\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </h4>\r\n                                            <div className=\"text-sm text-gray-700\">\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.degree`}\r\n                                                    label=\"Degree\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </div>\r\n                                        </div>\r\n                                        <span className=\"text-sm font-medium text-gray-600 whitespace-nowrap\">\r\n                                            <EditableField\r\n                                                path={`educations.${index}.year`}\r\n                                                label=\"Year\"\r\n                                            >\r\n                                                {(value) => <span>{value}</span>}\r\n                                            </EditableField>\r\n                                        </span>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'skills':\r\n                return (\r\n                    <div className=\"flex flex-wrap gap-x-6 gap-y-2\">\r\n                        <SortableContext items={data.skills} strategy={verticalListSortingStrategy}>\r\n                            {data.skills.map((skill, index) => (\r\n                                <SortableItem key={skill} id={skill} mode={mode}>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"w-1.5 h-1.5 bg-gray-800 rounded-full\"></span>\r\n                                        <EditableField\r\n                                            path={`skills.${index}`}\r\n                                            label=\"Skill\"\r\n                                            className=\"text-sm font-medium text-gray-800\"\r\n                                        >\r\n                                            {(value) => <span>{value}</span>}\r\n                                        </EditableField>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'languages':\r\n                return (\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        {data.languages.map((lang, index) => (\r\n                            <div key={index} className=\"flex justify-between items-center border-b border-gray-200 pb-1\">\r\n                                <span className=\"font-medium text-gray-800 text-sm\">{lang.name}</span>\r\n                                <span className=\"text-gray-600 text-sm\">{lang.level}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"bg-white h-full w-full relative overflow-hidden\"\r\n            style={{\r\n                ...cssVars,\r\n                padding: '40px 50px', // Standard A4 margins\r\n            } as React.CSSProperties}\r\n        >\r\n            {/* Page 1 Header */}\r\n            {pageIndex === 0 && (\r\n                <header className=\"mb-8 border-b-2 border-gray-800 pb-6 text-center\">\r\n                    <h1 className=\"text-4xl font-serif font-bold text-gray-900 mb-2 tracking-wide uppercase\">\r\n                        <EditableField\r\n                            path=\"personal.firstName\"\r\n                            label=\"First Name\"\r\n                        >\r\n                            {(val) => <span>{val} {data.personal.lastName}</span>}\r\n                        </EditableField>\r\n                    </h1>\r\n                    <h2 className=\"text-xl text-gray-600 font-medium mb-4 tracking-wider\">\r\n                        <EditableField\r\n                            path=\"personal.title\"\r\n                            label=\"Title\"\r\n                        >\r\n                            {(value) => <span>{value}</span>}\r\n                        </EditableField>\r\n                    </h2>\r\n\r\n                    <div className=\"flex flex-wrap justify-center gap-x-6 gap-y-2 text-sm text-gray-600\">\r\n                        {data.personal.contact.email && (\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                                <EditableEmail\r\n                                    path=\"personal.contact.email\"\r\n                                    label=\"Email\"\r\n                                >\r\n                                    {(value) => <span>{value}</span>}\r\n                                </EditableEmail>\r\n                            </div>\r\n                        )}\r\n                        {data.personal.contact.phone && (\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                                <span className=\"text-gray-400\">|</span>\r\n                                <EditablePhone\r\n                                    path=\"personal.contact.phone\"\r\n                                    label=\"Phone\"\r\n                                >\r\n                                    {(value) => <span>{value}</span>}\r\n                                </EditablePhone>\r\n                            </div>\r\n                        )}\r\n                        {data.personal.contact.address && (\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                                <span className=\"text-gray-400\">|</span>\r\n                                <EditableField\r\n                                    path=\"personal.contact.address\"\r\n                                    label=\"Address\"\r\n                                >\r\n                                    {(value) => <span>{value}</span>}\r\n                                </EditableField>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </header>\r\n            )}\r\n\r\n            {/* Content */}\r\n            <div className=\"space-y-8\">\r\n                {/* Sections - NO SortableContext here, it's at Template level */}\r\n                {sectionIds.map((sectionId) => (\r\n                    <SortableSection\r\n                        key={sectionId}\r\n                        id={sectionId}\r\n                        mode={mode}\r\n                        header={\r\n                            <div className=\"flex items-center gap-3 mb-4 border-b border-gray-300 pb-1\">\r\n                                <h3 className=\"text-lg font-serif font-bold text-gray-900 uppercase tracking-widest\">\r\n                                    {sectionMeta[sectionId as keyof typeof sectionMeta]?.title || sectionId}\r\n                                </h3>\r\n                            </div>\r\n                        }\r\n                    >\r\n                        <section className=\"mb-6\">\r\n                            {renderSectionContent(sectionId)}\r\n                        </section>\r\n                    </SortableSection>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\ClassicTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\CreativeLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateField' is assigned a value but never used.","line":58,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * CreativeLayout - Bold & Modern Design\r\n * \r\n * Features:\r\n * - Sidebar layout (Left column for profile/skills, Right for main content)\r\n * - Bold typography\r\n * - Vibrant accent colors\r\n * - Modern iconography\r\n */\r\n\r\nimport React from 'react';\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport {\r\n    Mail, Phone, MapPin, Briefcase, GraduationCap, Globe, Award, User\r\n} from 'lucide-react';\r\nimport { EditableField, EditableEmail, EditablePhone } from '../../../components/atomic-editor/EditableField';\r\nimport { useUpdateField } from '../../../../application/store/v2';\r\nimport { SortableItem } from '../../../components/lego/SortableItem';\r\nimport { SortableSection } from '../../../components/lego/SortableSection';\r\nimport { t } from '../../../../data/translations';\r\nimport { TemplateEngine, DEFAULT_THEME } from '../../../../domain/templates/TemplateEngine';\r\nimport type { TemplateConfig } from '../../../../domain/templates/TemplateEngine';\r\nimport type { CVProfile } from '../../../../domain/cv/v2/types';\r\nimport type { CVMode } from '../../../../application/store/v2/cv-store-v2.types';\r\n\r\ninterface CreativeLayoutProps {\r\n    pageIndex: number;\r\n    sectionIds: string[];\r\n    data: CVProfile;\r\n    mode: CVMode;\r\n    config?: TemplateConfig;\r\n    language?: 'en' | 'fr';\r\n}\r\n\r\nexport const CreativeLayout: React.FC<CreativeLayoutProps> = ({\r\n    pageIndex,\r\n    sectionIds,\r\n    data,\r\n    mode,\r\n    config = DEFAULT_THEME,\r\n    language = 'fr'\r\n}) => {\r\n    const effectiveConfig = React.useMemo(() => ({\r\n        ...config,\r\n        colors: {\r\n            ...config.colors,\r\n            primary: data.metadata.accentColor || '#8b5cf6', // Violet-500 default\r\n        },\r\n        typography: {\r\n            ...config.typography,\r\n            headingFont: 'Poppins, sans-serif',\r\n            bodyFont: 'Inter, sans-serif',\r\n        }\r\n    }), [config, data.metadata]);\r\n\r\n    const cssVars = TemplateEngine.generateStyles(effectiveConfig);\r\n    const txt = t[language];\r\n    const updateField = useUpdateField();\r\n\r\n    // Split sections into sidebar and main content\r\n    const sidebarSections = ['skills', 'languages', 'summary'];\r\n    const mainSections = ['experience', 'education'];\r\n\r\n    // Filter sections for this page\r\n    const pageSidebarSections = sectionIds.filter(id => sidebarSections.includes(id));\r\n    const pageMainSections = sectionIds.filter(id => mainSections.includes(id));\r\n\r\n    const renderSectionContent = (sectionId: string, isSidebar: boolean) => {\r\n        const textColor = isSidebar ? 'text-white' : 'text-gray-700';\r\n\r\n        switch (sectionId) {\r\n            case 'summary':\r\n                return data.summary ? (\r\n                    <EditableField\r\n                        path=\"summary\"\r\n                        label=\"Summary\"\r\n                        multiline\r\n                        className={`text-sm leading-relaxed ${textColor} text-opacity-90`}\r\n                    >\r\n                        {(value) => <p>{value}</p>}\r\n                    </EditableField>\r\n                ) : null;\r\n\r\n            case 'experience':\r\n                return (\r\n                    <div className=\"space-y-8\">\r\n                        <SortableContext items={data.experiences.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.experiences.map((exp, index) => (\r\n                                <SortableItem key={exp.id} id={exp.id} mode={mode}>\r\n                                    <div className=\"relative pl-4 border-l-2\" style={{ borderColor: effectiveConfig.colors.primary }}>\r\n                                        <div className=\"absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 bg-white\" style={{ borderColor: effectiveConfig.colors.primary }}></div>\r\n                                        <h4 className=\"font-bold text-lg text-gray-900 leading-none mb-1\">\r\n                                            <EditableField\r\n                                                path={`experiences.${index}.role`}\r\n                                                label=\"Role\"\r\n                                            >\r\n                                                {(value) => <span>{value}</span>}\r\n                                            </EditableField>\r\n                                        </h4>\r\n                                        <div className=\"text-sm font-semibold text-gray-600 mb-2 flex justify-between\">\r\n                                            <span>\r\n                                                <EditableField\r\n                                                    path={`experiences.${index}.company`}\r\n                                                    label=\"Company\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </span>\r\n                                            <span className=\"text-gray-400\">\r\n                                                <EditableField\r\n                                                    path={`experiences.${index}.dates`}\r\n                                                    label=\"Dates\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </span>\r\n                                        </div>\r\n                                        <EditableField\r\n                                            path={`experiences.${index}.tasks`}\r\n                                            label=\"Description\"\r\n                                            multiline\r\n                                            className=\"text-sm text-gray-600 leading-relaxed\"\r\n                                        >\r\n                                            {(value) => (\r\n                                                <ul className=\"list-disc list-outside ml-4 space-y-1\">\r\n                                                    {Array.isArray(value)\r\n                                                        ? value.map((task, i) => <li key={i}>{task}</li>)\r\n                                                        : <li>{String(value)}</li>\r\n                                                    }\r\n                                                </ul>\r\n                                            )}\r\n                                        </EditableField>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'education':\r\n                return (\r\n                    <div className=\"space-y-6\">\r\n                        <SortableContext items={data.educations.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.educations.map((edu, index) => (\r\n                                <SortableItem key={edu.id} id={edu.id} mode={mode}>\r\n                                    <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-100\">\r\n                                        <div className=\"flex justify-between items-start mb-1\">\r\n                                            <h4 className=\"font-bold text-gray-900\">\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.school`}\r\n                                                    label=\"School\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </h4>\r\n                                            <span className=\"text-xs font-medium text-white px-2 py-1 rounded-full\" style={{ backgroundColor: effectiveConfig.colors.primary }}>\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.year`}\r\n                                                    label=\"Year\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"text-sm text-gray-600\">\r\n                                            <EditableField\r\n                                                path={`educations.${index}.degree`}\r\n                                                label=\"Degree\"\r\n                                            >\r\n                                                {(value) => <span>{value}</span>}\r\n                                            </EditableField>\r\n                                        </div>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'skills':\r\n                return (\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        <SortableContext items={data.skills} strategy={verticalListSortingStrategy}>\r\n                            {data.skills.map((skill, index) => (\r\n                                <SortableItem key={skill} id={skill} mode={mode}>\r\n                                    <span className=\"text-xs px-3 py-1.5 rounded-lg bg-white/20 text-white backdrop-blur-sm border border-white/10\">\r\n                                        <EditableField\r\n                                            path={`skills.${index}`}\r\n                                            label=\"Skill\"\r\n                                        >\r\n                                            {(value) => <span>{value}</span>}\r\n                                        </EditableField>\r\n                                    </span>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'languages':\r\n                return (\r\n                    <div className=\"space-y-2\">\r\n                        {data.languages.map((lang, index) => (\r\n                            <div key={index} className=\"flex justify-between items-center border-b border-white/20 pb-1\">\r\n                                <span className=\"font-medium text-white text-sm\">{lang.name}</span>\r\n                                <span className=\"text-white/80 text-xs\">{lang.level}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"bg-white h-full w-full relative overflow-hidden flex\"\r\n            style={cssVars as React.CSSProperties}\r\n        >\r\n            {/* Sidebar */}\r\n            <div className=\"w-[35%] h-full p-8 flex flex-col gap-8 text-white\" style={{ backgroundColor: effectiveConfig.colors.primary }}>\r\n                {/* Header in Sidebar */}\r\n                {pageIndex === 0 && (\r\n                    <div className=\"text-center\">\r\n                        {data.personal.photoUrl && (\r\n                            <div className=\"w-32 h-32 mx-auto mb-6 rounded-full border-4 border-white/30 overflow-hidden shadow-xl\">\r\n                                <img src={data.personal.photoUrl} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                            </div>\r\n                        )}\r\n                        <h1 className=\"text-2xl font-bold mb-2 leading-tight\">\r\n                            <EditableField\r\n                                path=\"personal.firstName\"\r\n                                label=\"Name\"\r\n                            >\r\n                                {(val) => <span>{val} {data.personal.lastName}</span>}\r\n                            </EditableField>\r\n                        </h1>\r\n                        <h2 className=\"text-sm font-medium opacity-90 mb-6 uppercase tracking-wider\">\r\n                            <EditableField\r\n                                path=\"personal.title\"\r\n                                label=\"Title\"\r\n                            >\r\n                                {(value) => <span>{value}</span>}\r\n                            </EditableField>\r\n                        </h2>\r\n\r\n                        <div className=\"text-xs space-y-3 text-left bg-black/10 p-4 rounded-xl backdrop-blur-sm\">\r\n                            {data.personal.contact.email && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Mail size={14} />\r\n                                    <EditableEmail\r\n                                        path=\"personal.contact.email\"\r\n                                        label=\"Email\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditableEmail>\r\n                                </div>\r\n                            )}\r\n                            {data.personal.contact.phone && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Phone size={14} />\r\n                                    <EditablePhone\r\n                                        path=\"personal.contact.phone\"\r\n                                        label=\"Phone\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditablePhone>\r\n                                </div>\r\n                            )}\r\n                            {data.personal.contact.address && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <MapPin size={14} />\r\n                                    <EditableField\r\n                                        path=\"personal.contact.address\"\r\n                                        label=\"Address\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditableField>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Sidebar Sections */}\r\n                <div className=\"space-y-8 flex-1\">\r\n                    <SortableContext items={pageSidebarSections} strategy={verticalListSortingStrategy}>\r\n                        {pageSidebarSections.map((sectionId) => (\r\n                            <SortableSection\r\n                                key={sectionId}\r\n                                id={sectionId}\r\n                                mode={mode}\r\n                                header={\r\n                                    <h3 className=\"text-sm font-bold uppercase tracking-widest mb-4 border-b border-white/30 pb-1 flex items-center gap-2 text-white\">\r\n                                        {sectionId === 'skills' && <Award size={14} />}\r\n                                        {sectionId === 'languages' && <Globe size={14} />}\r\n                                        {sectionId === 'summary' && <User size={14} />}\r\n                                        {sectionId}\r\n                                    </h3>\r\n                                }\r\n                            >\r\n                                <section>\r\n                                    {renderSectionContent(sectionId, true)}\r\n                                </section>\r\n                            </SortableSection>\r\n                        ))}\r\n                    </SortableContext>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"flex-1 h-full p-10 overflow-hidden\">\r\n                <div className=\"space-y-10\">\r\n                    <SortableContext items={pageMainSections} strategy={verticalListSortingStrategy}>\r\n                        {pageMainSections.map((sectionId) => (\r\n                            <SortableSection\r\n                                key={sectionId}\r\n                                id={sectionId}\r\n                                mode={mode}\r\n                                header={\r\n                                    <h3 className=\"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3\">\r\n                                        <span className=\"p-2 rounded-lg bg-gray-100 text-gray-800\">\r\n                                            {sectionId === 'experience' && <Briefcase size={20} style={{ color: effectiveConfig.colors.primary }} />}\r\n                                            {sectionId === 'education' && <GraduationCap size={20} style={{ color: effectiveConfig.colors.primary }} />}\r\n                                        </span>\r\n                                        {sectionId === 'experience' ? txt.experience : txt.education}\r\n                                    </h3>\r\n                                }\r\n                            >\r\n                                <section>\r\n                                    {renderSectionContent(sectionId, false)}\r\n                                </section>\r\n                            </SortableSection>\r\n                        ))}\r\n                    </SortableContext>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\CreativeTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\ExecutiveLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Briefcase' is defined but never used.","line":14,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Globe' is defined but never used.","line":14,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Award' is defined but never used.","line":14,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":14,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'txt' is assigned a value but never used.","line":58,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateField' is assigned a value but never used.","line":59,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":22}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ExecutiveLayout - Premium & Professional Design\r\n * \r\n * Features:\r\n * - Dark, sophisticated header\r\n * - Elegant typography\r\n * - Gold/Bronze accents\r\n * - Clean, structured layout\r\n */\r\n\r\nimport React from 'react';\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport {\r\n    Mail, Phone, MapPin, Briefcase, GraduationCap, Globe, Award, User\r\n} from 'lucide-react';\r\nimport { EditableField, EditableEmail, EditablePhone } from '../../../components/atomic-editor/EditableField';\r\nimport { useUpdateField } from '../../../../application/store/v2';\r\nimport { SortableItem } from '../../../components/lego/SortableItem';\r\nimport { SortableSection } from '../../../components/lego/SortableSection';\r\nimport { t } from '../../../../data/translations';\r\nimport { TemplateEngine, DEFAULT_THEME } from '../../../../domain/templates/TemplateEngine';\r\nimport type { TemplateConfig } from '../../../../domain/templates/TemplateEngine';\r\nimport type { CVProfile } from '../../../../domain/cv/v2/types';\r\nimport type { CVMode } from '../../../../application/store/v2/cv-store-v2.types';\r\n\r\ninterface ExecutiveLayoutProps {\r\n    pageIndex: number;\r\n    sectionIds: string[];\r\n    data: CVProfile;\r\n    mode: CVMode;\r\n    config?: TemplateConfig;\r\n    language?: 'en' | 'fr';\r\n}\r\n\r\nexport const ExecutiveLayout: React.FC<ExecutiveLayoutProps> = ({\r\n    pageIndex,\r\n    sectionIds,\r\n    data,\r\n    mode,\r\n    config = DEFAULT_THEME,\r\n    language = 'fr'\r\n}) => {\r\n    const effectiveConfig = React.useMemo(() => ({\r\n        ...config,\r\n        colors: {\r\n            ...config.colors,\r\n            primary: '#1e293b', // Slate-800\r\n            secondary: '#d97706', // Amber-600 (Gold accent)\r\n        },\r\n        typography: {\r\n            ...config.typography,\r\n            headingFont: 'Playfair Display, serif',\r\n            bodyFont: 'Lato, sans-serif',\r\n        }\r\n    }), [config]);\r\n\r\n    const cssVars = TemplateEngine.generateStyles(effectiveConfig);\r\n    const txt = t[language];\r\n    const updateField = useUpdateField();\r\n\r\n    const sectionMeta = {\r\n        summary: { title: 'EXECUTIVE SUMMARY' },\r\n        experience: { title: 'PROFESSIONAL EXPERIENCE' },\r\n        education: { title: 'EDUCATION' },\r\n        skills: { title: 'CORE COMPETENCIES' },\r\n        languages: { title: 'LANGUAGES' },\r\n    };\r\n\r\n    const renderSectionContent = (sectionId: string) => {\r\n        switch (sectionId) {\r\n            case 'summary':\r\n                return data.summary ? (\r\n                    <div className=\"border-l-4 border-amber-600 pl-4 py-1 bg-gray-50 rounded-r-lg\">\r\n                        <EditableField\r\n                            path=\"summary\"\r\n                            label=\"Summary\"\r\n                            multiline\r\n                            className=\"text-sm leading-relaxed text-gray-700 italic\"\r\n                        >\r\n                            {(value) => <p>{value}</p>}\r\n                        </EditableField>\r\n                    </div>\r\n                ) : null;\r\n\r\n            case 'experience':\r\n                return (\r\n                    <div className=\"space-y-8\">\r\n                        <SortableContext items={data.experiences.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.experiences.map((exp, index) => (\r\n                                <SortableItem key={exp.id} id={exp.id} mode={mode}>\r\n                                    <div className=\"group\">\r\n                                        <div className=\"flex justify-between items-end mb-2 border-b border-gray-200 pb-2\">\r\n                                            <div>\r\n                                                <h4 className=\"font-bold text-lg text-slate-800\">\r\n                                                    <EditableField\r\n                                                        path={`experiences.${index}.role`}\r\n                                                        label=\"Role\"\r\n                                                    >\r\n                                                        {(value) => <span>{value}</span>}\r\n                                                    </EditableField>\r\n                                                </h4>\r\n                                                <div className=\"text-amber-700 font-semibold text-sm uppercase tracking-wide\">\r\n                                                    <EditableField\r\n                                                        path={`experiences.${index}.company`}\r\n                                                        label=\"Company\"\r\n                                                    >\r\n                                                        {(value) => <span>{value}</span>}\r\n                                                    </EditableField>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <span className=\"text-sm font-medium text-slate-500 block\">\r\n                                                    <EditableField\r\n                                                        path={`experiences.${index}.dates`}\r\n                                                        label=\"Dates\"\r\n                                                    >\r\n                                                        {(value) => <span>{value}</span>}\r\n                                                    </EditableField>\r\n                                                </span>\r\n                                                {exp.location && (\r\n                                                    <span className=\"text-xs text-gray-400 block\">{exp.location}</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <EditableField\r\n                                            path={`experiences.${index}.tasks`}\r\n                                            label=\"Description\"\r\n                                            multiline\r\n                                            className=\"text-sm text-gray-600 leading-relaxed mt-3\"\r\n                                        >\r\n                                            {(value) => (\r\n                                                <ul className=\"list-disc list-outside ml-4 space-y-1\">\r\n                                                    {Array.isArray(value)\r\n                                                        ? value.map((task, i) => <li key={i}>{task}</li>)\r\n                                                        : <li>{String(value)}</li>\r\n                                                    }\r\n                                                </ul>\r\n                                            )}\r\n                                        </EditableField>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'education':\r\n                return (\r\n                    <div className=\"grid grid-cols-1 gap-4\">\r\n                        <SortableContext items={data.educations.map(e => e.id)} strategy={verticalListSortingStrategy}>\r\n                            {data.educations.map((edu, index) => (\r\n                                <SortableItem key={edu.id} id={edu.id} mode={mode}>\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center text-slate-700\">\r\n                                            <GraduationCap size={20} />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <h4 className=\"font-bold text-slate-800\">\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.school`}\r\n                                                    label=\"School\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </h4>\r\n                                            <div className=\"text-sm text-amber-700 font-medium\">\r\n                                                <EditableField\r\n                                                    path={`educations.${index}.degree`}\r\n                                                    label=\"Degree\"\r\n                                                >\r\n                                                    {(value) => <span>{value}</span>}\r\n                                                </EditableField>\r\n                                            </div>\r\n                                        </div>\r\n                                        <span className=\"text-sm font-medium text-slate-500\">\r\n                                            <EditableField\r\n                                                path={`educations.${index}.year`}\r\n                                                label=\"Year\"\r\n                                            >\r\n                                                {(value) => <span>{value}</span>}\r\n                                            </EditableField>\r\n                                        </span>\r\n                                    </div>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            case 'skills':\r\n                return (\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                        <SortableContext items={data.skills} strategy={verticalListSortingStrategy}>\r\n                            {data.skills.map((skill, index) => (\r\n                                <SortableItem key={skill} id={skill} mode={mode}>\r\n                                    <span className=\"text-xs px-4 py-1.5 border border-slate-300 text-slate-700 uppercase tracking-wider font-medium\">\r\n                                        <EditableField\r\n                                            path={`skills.${index}`}\r\n                                            label=\"Skill\"\r\n                                        >\r\n                                            {(value) => <span>{value}</span>}\r\n                                        </EditableField>\r\n                                    </span>\r\n                                </SortableItem>\r\n                            ))}\r\n                        </SortableContext>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"bg-white h-full w-full relative overflow-hidden\"\r\n            style={cssVars as React.CSSProperties}\r\n        >\r\n            {/* Header */}\r\n            {pageIndex === 0 && (\r\n                <header className=\"bg-slate-900 text-white p-10 mb-10 relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-amber-600/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl\"></div>\r\n\r\n                    <div className=\"relative z-10 flex justify-between items-start\">\r\n                        <div>\r\n                            <h1 className=\"text-4xl font-serif font-bold mb-2 tracking-wide text-white\">\r\n                                <EditableField\r\n                                    path=\"personal.firstName\"\r\n                                    label=\"Name\"\r\n                                >\r\n                                    {(val) => <span>{val} {data.personal.lastName}</span>}\r\n                                </EditableField>\r\n                            </h1>\r\n                            <h2 className=\"text-lg text-amber-500 font-medium uppercase tracking-widest mb-6\">\r\n                                <EditableField\r\n                                    path=\"personal.title\"\r\n                                    label=\"Title\"\r\n                                >\r\n                                    {(value) => <span>{value}</span>}\r\n                                </EditableField>\r\n                            </h2>\r\n                        </div>\r\n\r\n                        <div className=\"text-right text-sm text-slate-300 space-y-1.5\">\r\n                            {data.personal.contact.email && (\r\n                                <div className=\"flex items-center justify-end gap-2\">\r\n                                    <EditableEmail\r\n                                        path=\"personal.contact.email\"\r\n                                        label=\"Email\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditableEmail>\r\n                                    <Mail size={14} className=\"text-amber-500\" />\r\n                                </div>\r\n                            )}\r\n                            {data.personal.contact.phone && (\r\n                                <div className=\"flex items-center justify-end gap-2\">\r\n                                    <EditablePhone\r\n                                        path=\"personal.contact.phone\"\r\n                                        label=\"Phone\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditablePhone>\r\n                                    <Phone size={14} className=\"text-amber-500\" />\r\n                                </div>\r\n                            )}\r\n                            {data.personal.contact.address && (\r\n                                <div className=\"flex items-center justify-end gap-2\">\r\n                                    <EditableField\r\n                                        path=\"personal.contact.address\"\r\n                                        label=\"Address\"\r\n                                    >\r\n                                        {(value) => <span>{value}</span>}\r\n                                    </EditableField>\r\n                                    <MapPin size={14} className=\"text-amber-500\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n            )}\r\n\r\n            {/* Content */}\r\n            <div className=\"px-10 pb-10 space-y-10\">\r\n                {/* Sections - NO SortableContext here, it's at Template level */}\r\n                {sectionIds.map((sectionId) => (\r\n                    <SortableSection\r\n                        key={sectionId}\r\n                        id={sectionId}\r\n                        mode={mode}\r\n                        header={\r\n                            <div className=\"flex items-center gap-4 mb-6\">\r\n                                <h3 className=\"text-xl font-serif font-bold text-slate-900 uppercase tracking-widest\">\r\n                                    {sectionMeta[sectionId as keyof typeof sectionMeta]?.title || sectionId}\r\n                                </h3>\r\n                                <div className=\"flex-1 h-px bg-slate-200\"></div>\r\n                            </div>\r\n                        }\r\n                    >\r\n                        <section>\r\n                            {renderSectionContent(sectionId)}\r\n                        </section>\r\n                    </SortableSection>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\ExecutiveTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\ModernTemplate.v2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\layouts\\templates\\v2\\SinglePageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\pages\\CVPageV2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\pages\\PDFRenderPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2091,2094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2091,2094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PDFRenderPage - Standalone page for PDF generation\r\n * Displays ONLY the CV template without any UI chrome\r\n * Used by Puppeteer to capture pixel-perfect PDF\r\n * \r\n * Route: /pdf-render/:id?template=modern\r\n * \r\n * CRITICAL: The #cv-template element MUST always render for Puppeteer to capture it.\r\n * Loading states are handled INSIDE the #cv-template container.\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useSearchParams } from 'react-router-dom';\r\nimport { useCVStoreV2 } from '../../application/store/v2';\r\n\r\n// Template imports (V2 templates for consistency)\r\nimport ModernTemplateV2 from '../layouts/templates/v2/ModernTemplate.v2';\r\nimport { ClassicTemplate } from '../layouts/templates/v2/ClassicTemplate';\r\nimport { ExecutiveTemplate } from '../layouts/templates/v2/ExecutiveTemplate';\r\n\r\n// ATS-First Templates\r\nimport { ATSClassicTemplate } from '../cv-templates/templates/ATSClassicTemplate';\r\nimport { ATSModernTemplate } from '../cv-templates/templates/ATSModernTemplate';\r\nimport { ATSMinimalTemplate } from '../cv-templates/templates/ATSMinimalTemplate';\r\n\r\n// Business Templates\r\nimport { SwissExecutiveTemplate } from '../cv-templates/templates/SwissExecutiveTemplate';\r\nimport { ConsultantTemplate } from '../cv-templates/templates/ConsultantTemplate';\r\nimport { BankerTemplate } from '../cv-templates/templates/BankerTemplate';\r\nimport { LegalTemplate } from '../cv-templates/templates/LegalTemplate';\r\n\r\n// Creative & Tech Templates\r\nimport { CreativePortfolioTemplate } from '../cv-templates/templates/CreativePortfolioTemplate';\r\nimport { DevStackTemplate } from '../cv-templates/templates/DevStackTemplate';\r\nimport { StartupFounderTemplate } from '../cv-templates/templates/StartupFounderTemplate';\r\n\r\n// Specialized Templates\r\nimport { HealthcareProTemplate } from '../cv-templates/templates/HealthcareProTemplate';\r\nimport { AcademicCVTemplate } from '../cv-templates/templates/AcademicCVTemplate';\r\n\r\n// Template Registry - Maps template IDs to components\r\nconst TEMPLATE_REGISTRY: Record<string, React.ComponentType<any>> = {\r\n    // ATS-First\r\n    'ats-classic': ATSClassicTemplate,\r\n    'ats-modern': ATSModernTemplate,\r\n    'ats-minimal': ATSMinimalTemplate,\r\n    // Business\r\n    'swiss-executive': SwissExecutiveTemplate,\r\n    'consultant': ConsultantTemplate,\r\n    'banker': BankerTemplate,\r\n    'legal': LegalTemplate,\r\n    // Creative & Tech\r\n    'creative-portfolio': CreativePortfolioTemplate,\r\n    'devstack': DevStackTemplate,\r\n    'startup-founder': StartupFounderTemplate,\r\n    // Specialized\r\n    'healthcare-pro': HealthcareProTemplate,\r\n    'academic-cv': AcademicCVTemplate,\r\n    // Legacy\r\n    modern: ModernTemplateV2,\r\n    classic: ClassicTemplate,\r\n    executive: ExecutiveTemplate,\r\n};\r\n\r\nconst PDFRenderPage: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const [searchParams] = useSearchParams();\r\n    const templateId = searchParams.get('template') || 'modern';\r\n\r\n    // Get setFullProfile action to inject fetched profile into store\r\n    const setFullProfile = useCVStoreV2((state) => state.setFullProfile);\r\n    const storeProfile = useCVStoreV2((state) => state.profile);\r\n\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            console.log(`[PDFRenderPage] === STARTING FETCH ===`);\r\n            console.log(`[PDFRenderPage] ID from params: ${id}`);\r\n            console.log(`[PDFRenderPage] Template: ${templateId}`);\r\n\r\n            try {\r\n                const url = `http://localhost:3000/api/puppeteer-pdf/profile/${id}`;\r\n                console.log(`[PDFRenderPage] Fetching from: ${url}`);\r\n\r\n                const response = await fetch(url);\r\n                console.log(`[PDFRenderPage] Response status: ${response.status}`);\r\n\r\n                if (!response.ok) {\r\n                    const errorText = await response.text();\r\n                    console.error(`[PDFRenderPage] Error response body:`, errorText);\r\n                    throw new Error(`Failed to fetch profile: ${response.status} ${response.statusText}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                console.log('[PDFRenderPage] Profile loaded:', !!data, data?.personal?.firstName);\r\n\r\n                // CRITICAL: Set the profile into the store so templates can access it via useProfile()\r\n                console.log('[PDFRenderPage] Calling setFullProfile...');\r\n                setFullProfile(data);\r\n                console.log('[PDFRenderPage] setFullProfile completed');\r\n\r\n                // Mark loading complete\r\n                setLoading(false);\r\n                console.log('[PDFRenderPage] Loading marked as false');\r\n\r\n            } catch (err) {\r\n                console.error('[PDFRenderPage] === FETCH ERROR ===');\r\n                console.error('[PDFRenderPage] Error:', err);\r\n                setError(err instanceof Error ? err.message : 'Unknown error');\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (id) {\r\n            fetchProfile();\r\n        } else {\r\n            console.error('[PDFRenderPage] === NO ID IN PARAMS ===');\r\n            setError('No profile ID provided');\r\n            setLoading(false);\r\n        }\r\n    }, [id, templateId, setFullProfile]);\r\n\r\n    // Log store profile changes for debugging\r\n    useEffect(() => {\r\n        console.log('[PDFRenderPage] Store profile updated:', {\r\n            hasProfile: !!storeProfile,\r\n            firstName: storeProfile?.personal?.firstName\r\n        });\r\n    }, [storeProfile]);\r\n\r\n    // Get template component from registry\r\n    const TemplateComponent = TEMPLATE_REGISTRY[templateId] || TEMPLATE_REGISTRY.modern;\r\n\r\n    // Check if we have valid profile data\r\n    const hasValidProfile = storeProfile?.personal?.firstName || storeProfile?.personal?.lastName;\r\n\r\n    console.log('[PDFRenderPage] Render:', { loading, error, hasValidProfile, firstName: storeProfile?.personal?.firstName });\r\n\r\n    // ALWAYS render #cv-template - Puppeteer needs this element!\r\n    // Contents change based on state\r\n    // data-ready attribute tells Puppeteer when template is fully rendered\r\n    const isReady = !loading && !error && hasValidProfile;\r\n\r\n    return (\r\n        <div\r\n            id=\"cv-template\"\r\n            data-ready={isReady ? 'true' : 'false'}\r\n            data-state={loading ? 'loading' : error ? 'error' : hasValidProfile ? 'ready' : 'waiting'}\r\n            style={{\r\n                margin: 0,\r\n                padding: 0,\r\n                background: 'white',\r\n            }}\r\n        >\r\n            {loading ? (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    height: '297mm',\r\n                    fontFamily: 'Inter, sans-serif'\r\n                }}>\r\n                    <div>Loading CV...</div>\r\n                </div>\r\n            ) : error ? (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    height: '297mm',\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    color: '#ef4444'\r\n                }}>\r\n                    <div>Error: {error}</div>\r\n                </div>\r\n            ) : !hasValidProfile ? (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    height: '297mm',\r\n                    fontFamily: 'Inter, sans-serif'\r\n                }}>\r\n                    <div>Waiting for profile data...</div>\r\n                </div>\r\n            ) : (\r\n                <TemplateComponent\r\n                    language=\"fr\"\r\n                    forceMode=\"modele\"\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PDFRenderPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\pdf\\PdfPageTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1821,1824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1821,1824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4961,4964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4961,4964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4974,4977],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4974,4977],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8016,8019],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8016,8019],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\pdf\\PdfPageTemplate.tsx:182:26\n  180 |                 <h3 className=\"text-sm font-bold text-slate-900 uppercase tracking-widest border-b-2 border-slate-100 pb-2 mb-4 flex items-center gap-2.5\">\n  181 |                     <div className=\"p-1.5 bg-slate-100 rounded text-slate-600\">\n> 182 |                         <Icon size={16} style={{ color: primaryColor }} />\n      |                          ^^^^ This component is created during render\n  183 |                     </div>\n  184 |                     {section.title}\n  185 |                 </h3>\n\nC:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\pdf\\PdfPageTemplate.tsx:174:18\n  172 |\n  173 | const SectionRenderer: React.FC<{ section: SectionBlock, config: any, accentColor?: string }> = ({ section, config, accentColor }) => {\n> 174 |     const Icon = getSectionIcon(section.type);\n      |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  175 |     const primaryColor = accentColor || config.colors.primary;\n  176 |\n  177 |     return (","line":182,"column":26,"nodeType":null,"endLine":182,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8803,8806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8803,8806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport type { PageDefinition, SectionBlock } from '../../domain/pdf/types';\r\nimport { PDF_CONFIG } from '../../domain/pdf/template-config';\r\nimport { MapPin, Phone, Mail, Globe, Camera, Briefcase, Award, GraduationCap } from 'lucide-react';\r\n\r\ninterface PdfPageTemplateProps {\r\n    page: PageDefinition;\r\n    scale?: number;\r\n    fontFamily?: string;\r\n    sidebarData?: SectionBlock[];\r\n}\r\n\r\nexport const PdfPageTemplate: React.FC<PdfPageTemplateProps> = ({ page, scale = 1, fontFamily, sidebarData }) => {\r\n    const config = PDF_CONFIG[page.header.variant];\r\n    const { width, height } = config.page;\r\n    const isFirstPage = page.index === 0;\r\n    const isVisual = page.header.variant === 'visual';\r\n\r\n    const style: React.CSSProperties = {\r\n        width: `${width}px`,\r\n        minHeight: `${height}px`, // Allow growth if calculation is slightly off\r\n        height: 'auto',\r\n        backgroundColor: 'white',\r\n        position: 'relative',\r\n        // overflow: 'hidden', // Removed to prevent cutting off content\r\n        transform: `scale(${scale})`,\r\n        transformOrigin: 'top left',\r\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        marginBottom: '20px',\r\n        fontFamily: fontFamily || config.typography.fontFamily,\r\n        fontSize: `${config.typography.fontSize.base}px`,\r\n        lineHeight: config.typography.lineHeight,\r\n        color: config.colors.text,\r\n    };\r\n\r\n    // Extract profile data from the first section if it exists (usually 'profile' type)\r\n    // In a real scenario, we might want to pass profile data separately to the page\r\n    const profileSection = page.sections.find(s => s.type === 'profile');\r\n    // We need to cast items to any because SectionBlock items are generic\r\n    const personalInfo = profileSection?.items[0] as any;\r\n\r\n    return (\r\n        <div id={page.id} style={style} className=\"pdf-page\">\r\n            {/* Modern Header (Visual Variant - Page 1 Only) */}\r\n            {isVisual && isFirstPage && personalInfo ? (\r\n                <ModernHeader personal={personalInfo} config={config} accentColor={page.accentColor} />\r\n            ) : (\r\n                /* Standard / Secondary Page Header */\r\n                <div style={{ height: page.marginTop, padding: `0 ${config.page.marginLeft}px`, display: 'flex', alignItems: 'center' }}>\r\n                    {!isFirstPage && (\r\n                        <div className=\"text-gray-400 text-sm w-full border-b border-gray-200 pb-2 flex justify-between\">\r\n                            <span className=\"uppercase font-bold text-xs tracking-wider\">{personalInfo?.lastName || 'CV'}</span>\r\n                            <span>Page {page.header.pageNumber}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Content Area */}\r\n            {/* Content Area with Grid */}\r\n            <div style={{\r\n                paddingLeft: config.page.marginLeft,\r\n                paddingRight: config.page.marginRight,\r\n                height: 'auto',\r\n                paddingTop: (isVisual && isFirstPage) ? 20 : 0,\r\n                display: 'grid',\r\n                gridTemplateColumns: '65% 35%',\r\n                gap: '2rem',\r\n            }}>\r\n                {/* Left Column (Main Content) */}\r\n                <div className=\"main-content\">\r\n                    {page.sections.map(section => {\r\n                        if (isVisual && isFirstPage && section.type === 'profile') return null;\r\n                        return <SectionRenderer key={section.id} section={section} config={config} accentColor={page.accentColor} />;\r\n                    })}\r\n                </div>\r\n\r\n                {/* Right Column (Sidebar) */}\r\n                <div className=\"sidebar\">\r\n                    {/* Render Sidebar Data if present (usually Page 1) */}\r\n                    {sidebarData && (\r\n                        <div style={{ backgroundColor: '#f8fafc', padding: '1rem', borderRadius: '8px', height: '100%' }}>\r\n                            {sidebarData.map(section => (\r\n                                <SectionRenderer key={section.id} section={section} config={config} accentColor={page.accentColor} />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                bottom: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: page.marginBottom,\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '10px',\r\n                color: '#94a3b8'\r\n            }}>\r\n                <span>{page.header.pageNumber}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Modern Header Component ---\r\n\r\nconst ModernHeader: React.FC<{ personal: any, config: any, accentColor?: string }> = ({ personal, config, accentColor }) => {\r\n    const primaryColor = accentColor || config.colors.primary;\r\n\r\n    const adjustColor = (color: string, amount: number) => {\r\n        return '#' + color.replace(/^#/, '').replace(/../g, c =>\r\n            ('0' + Math.min(255, Math.max(0, parseInt(c, 16) + amount)).toString(16)).slice(-2)\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"text-white grid grid-cols-12 gap-6 px-10 py-10\" style={{ background: `linear-gradient(135deg, ${primaryColor}, ${adjustColor(primaryColor, -60)})` }}>\r\n            <div className=\"col-span-3 flex items-center justify-center\">\r\n                <div className=\"w-32 h-32 bg-white rounded-full overflow-hidden border-4 border-white/30 shadow-lg relative z-10 shrink-0\">\r\n                    {personal.photoUrl ? (\r\n                        <img src={personal.photoUrl} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                    ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center bg-slate-200 text-slate-400\">\r\n                            <Camera size={40} />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"col-span-9 flex flex-col justify-center pl-2\">\r\n                <h1 className=\"text-4xl font-bold tracking-tight uppercase mb-2 leading-none\">\r\n                    {personal.firstName} <span className=\"opacity-90\">{personal.lastName}</span>\r\n                </h1>\r\n                <h2 className=\"text-xl font-medium text-white/90 tracking-wide mb-4\">\r\n                    {personal.title}\r\n                </h2>\r\n\r\n                {/* Contact Info Grid */}\r\n                <div className=\"flex flex-wrap gap-x-6 gap-y-2 text-xs font-medium text-white/80\">\r\n                    {personal.contact?.address && (\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <MapPin size={12} /> <span>{personal.contact.address}</span>\r\n                        </div>\r\n                    )}\r\n                    {personal.contact?.phone && (\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <Phone size={12} /> <span>{personal.contact.phone}</span>\r\n                        </div>\r\n                    )}\r\n                    {personal.contact?.email && (\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <Mail size={12} /> <span>{personal.contact.email}</span>\r\n                        </div>\r\n                    )}\r\n                    {personal.mobility && (\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <Globe size={12} /> <span>{personal.mobility}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Section Renderer ---\r\n\r\nconst SectionRenderer: React.FC<{ section: SectionBlock, config: any, accentColor?: string }> = ({ section, config, accentColor }) => {\r\n    const Icon = getSectionIcon(section.type);\r\n    const primaryColor = accentColor || config.colors.primary;\r\n\r\n    return (\r\n        <div className=\"mb-6 break-inside-avoid\">\r\n            {section.title && (\r\n                <h3 className=\"text-sm font-bold text-slate-900 uppercase tracking-widest border-b-2 border-slate-100 pb-2 mb-4 flex items-center gap-2.5\">\r\n                    <div className=\"p-1.5 bg-slate-100 rounded text-slate-600\">\r\n                        <Icon size={16} style={{ color: primaryColor }} />\r\n                    </div>\r\n                    {section.title}\r\n                </h3>\r\n            )}\r\n\r\n            <div className=\"space-y-4\">\r\n                {section.items.map((item: any, idx) => (\r\n                    <div key={idx} className=\"relative pl-4 border-l-2 border-slate-100\">\r\n                        {/* Dot for timeline */}\r\n                        {(section.type === 'experience' || section.type === 'education') && (\r\n                            <div className=\"absolute -left-[5px] top-1.5 w-2 h-2 rounded-full bg-white border-2\" style={{ borderColor: primaryColor }} />\r\n                        )}\r\n\r\n                        <div className=\"flex justify-between items-baseline mb-1\">\r\n                            {(item.role || item.degree || item.title) && (\r\n                                <div className=\"font-bold text-slate-800\">{item.role || item.degree || item.title}</div>\r\n                            )}\r\n                            {(item.date || item.dates || item.year) && (\r\n                                <span className=\"text-xs font-bold text-slate-500 bg-slate-50 px-2 py-0.5 rounded\">\r\n                                    {item.date || item.dates || item.year}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n\r\n                        {(item.company || item.school) && (\r\n                            <div className=\"text-xs font-bold text-slate-500 uppercase mb-2\">\r\n                                {item.company || item.school}\r\n                            </div>\r\n                        )}\r\n\r\n                        {(item.summary || item.description) && (\r\n                            <p className=\"text-sm text-slate-600 whitespace-pre-wrap leading-relaxed\">\r\n                                {item.summary || item.description}\r\n                            </p>\r\n                        )}\r\n\r\n                        {/* Tasks list for experience */}\r\n                        {item.tasks && Array.isArray(item.tasks) && (\r\n                            <ul className=\"list-disc list-outside ml-4 mt-2 space-y-1 text-sm text-slate-600\">\r\n                                {item.tasks.map((task: string, i: number) => (\r\n                                    <li key={i}>{task}</li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n\r\n                        {/* Simple string items (Skills) */}\r\n                        {typeof item === 'string' && (\r\n                            <span className=\"inline-block bg-slate-100 rounded px-2 py-1 text-xs font-medium text-slate-700 mr-2 mb-2\">\r\n                                {item}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction getSectionIcon(type: string) {\r\n    switch (type) {\r\n        case 'experience': return Award;\r\n        case 'education': return GraduationCap;\r\n        case 'skills': return Award; // Or a different icon\r\n        default: return Briefcase;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\presentation\\utils\\color-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\shared\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\shared\\sanitizer.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\shared\\sanitizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[104,107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[104,107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[504,507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[504,507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1118,1121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1118,1121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NA_VALUES } from './constants';\r\n\r\nexport class DataSanitizer {\r\n    static cleanText(value: any): string {\r\n        if (!value && value !== 0) return '';\r\n        let str = String(value).trim();\r\n\r\n        // Remove markdown code blocks artifacts\r\n        str = str.replace(/```json/g, '').replace(/```/g, '');\r\n\r\n        if (!str) return '';\r\n        if (NA_VALUES.includes(str.toLowerCase())) return '';\r\n        return str.replace(/\\s+/g, ' ').trim();\r\n    }\r\n\r\n    static cleanArray(arr: any[] | undefined): string[] {\r\n        if (!arr || !Array.isArray(arr)) return [];\r\n        return arr.map(item => this.cleanText(item)).filter(Boolean);\r\n    }\r\n\r\n    static extractJSON(text: string): string {\r\n        let clean = text.replace(/```json/g, '').replace(/```/g, '').trim();\r\n        const firstBrace = clean.indexOf('{');\r\n        const lastBrace = clean.lastIndexOf('}');\r\n        if (firstBrace !== -1 && lastBrace !== -1) {\r\n            clean = clean.substring(firstBrace, lastBrace + 1);\r\n        }\r\n        return clean;\r\n    }\r\n\r\n    static safeParse<T>(text: string, schema: { parse: (data: any) => T }): T | null {\r\n        try {\r\n            const jsonString = this.extractJSON(text);\r\n            const rawData = JSON.parse(jsonString);\r\n            // We can add a recursive cleaning step here if needed before schema validation\r\n            return schema.parse(rawData);\r\n        } catch (error) {\r\n            console.error('JSON Parse/Validation Error:', error);\r\n            return null;\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\test-uuid.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\worker\\ai.worker.ts","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":34,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":34,"endColumn":53,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1024,1493],"text":"{ const { cvText, jobText } = payload;\r\n                const cvVec = vectoriser.vectorise(cvText);\r\n                const jobVec = vectoriser.vectorise(jobText);\r\n                const similarity = VectorMath.cosineSimilarity(cvVec, jobVec);\r\n\r\n                self.postMessage({\r\n                    type: 'analysis_result',\r\n                    id,\r\n                    payload: { similarity: Math.round(similarity * 100) }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":35,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":35,"endColumn":60,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1024,1493],"text":"{ const { cvText, jobText } = payload;\r\n                const cvVec = vectoriser.vectorise(cvText);\r\n                const jobVec = vectoriser.vectorise(jobText);\r\n                const similarity = VectorMath.cosineSimilarity(cvVec, jobVec);\r\n\r\n                self.postMessage({\r\n                    type: 'analysis_result',\r\n                    id,\r\n                    payload: { similarity: Math.round(similarity * 100) }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":36,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":36,"endColumn":62,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1024,1493],"text":"{ const { cvText, jobText } = payload;\r\n                const cvVec = vectoriser.vectorise(cvText);\r\n                const jobVec = vectoriser.vectorise(jobText);\r\n                const similarity = VectorMath.cosineSimilarity(cvVec, jobVec);\r\n\r\n                self.postMessage({\r\n                    type: 'analysis_result',\r\n                    id,\r\n                    payload: { similarity: Math.round(similarity * 100) }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":37,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":37,"endColumn":79,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1024,1493],"text":"{ const { cvText, jobText } = payload;\r\n                const cvVec = vectoriser.vectorise(cvText);\r\n                const jobVec = vectoriser.vectorise(jobText);\r\n                const similarity = VectorMath.cosineSimilarity(cvVec, jobVec);\r\n\r\n                self.postMessage({\r\n                    type: 'analysis_result',\r\n                    id,\r\n                    payload: { similarity: Math.round(similarity * 100) }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":49,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":49,"endColumn":69,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1710,2625],"text":"{ const inputVec = vectoriser.vectorise(payload.text);\r\n                let bestMatch = '';\r\n                let bestScore = -1;\r\n\r\n                seedCorpus.forEach(doc => {\r\n                    const docVec = vectoriser.vectorise(doc);\r\n                    const score = VectorMath.cosineSimilarity(inputVec, docVec);\r\n                    if (score > bestScore) {\r\n                        bestScore = score;\r\n                        bestMatch = doc;\r\n                    }\r\n                });\r\n\r\n                self.postMessage({\r\n                    type: 'suggestions_result',\r\n                    id,\r\n                    payload: {\r\n                        match: bestMatch,\r\n                        score: bestScore,\r\n                        keywords: bestMatch.split(' ').filter(w => !payload.text.toLowerCase().includes(w.toLowerCase()))\r\n                    }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":50,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":50,"endColumn":36,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1710,2625],"text":"{ const inputVec = vectoriser.vectorise(payload.text);\r\n                let bestMatch = '';\r\n                let bestScore = -1;\r\n\r\n                seedCorpus.forEach(doc => {\r\n                    const docVec = vectoriser.vectorise(doc);\r\n                    const score = VectorMath.cosineSimilarity(inputVec, docVec);\r\n                    if (score > bestScore) {\r\n                        bestScore = score;\r\n                        bestMatch = doc;\r\n                    }\r\n                });\r\n\r\n                self.postMessage({\r\n                    type: 'suggestions_result',\r\n                    id,\r\n                    payload: {\r\n                        match: bestMatch,\r\n                        score: bestScore,\r\n                        keywords: bestMatch.split(' ').filter(w => !payload.text.toLowerCase().includes(w.toLowerCase()))\r\n                    }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":51,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":51,"endColumn":36,"suggestions":[{"messageId":"addBrackets","fix":{"range":[1710,2625],"text":"{ const inputVec = vectoriser.vectorise(payload.text);\r\n                let bestMatch = '';\r\n                let bestScore = -1;\r\n\r\n                seedCorpus.forEach(doc => {\r\n                    const docVec = vectoriser.vectorise(doc);\r\n                    const score = VectorMath.cosineSimilarity(inputVec, docVec);\r\n                    if (score > bestScore) {\r\n                        bestScore = score;\r\n                        bestMatch = doc;\r\n                    }\r\n                });\r\n\r\n                self.postMessage({\r\n                    type: 'suggestions_result',\r\n                    id,\r\n                    payload: {\r\n                        match: bestMatch,\r\n                        score: bestScore,\r\n                        keywords: bestMatch.split(' ').filter(w => !payload.text.toLowerCase().includes(w.toLowerCase()))\r\n                    }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":74,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":74,"endColumn":53,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":81,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":81,"endColumn":99,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":82,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":82,"endColumn":85,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":83,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":83,"endColumn":102,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":86,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":86,"endColumn":96,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":87,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":87,"endColumn":88,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":92,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":92,"endColumn":75,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":97,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":97,"endColumn":43,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2685,4231],"text":"{ const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { TfIdfVectoriser } from '../domain/services/ai/core/tfidf';\r\nimport { VectorMath } from '../domain/services/ai/core/vector-math';\r\n\r\nconst vectoriser = new TfIdfVectoriser();\r\nlet isReady = false;\r\n\r\n// Seed data (simulated for now, normally loaded from JSON)\r\nconst seedCorpus = [\r\n    \"Software Engineer React TypeScript Frontend\",\r\n    \"Backend Developer Node.js Express Database SQL\",\r\n    \"Full Stack Developer React Node.js TypeScript\",\r\n    \"Project Manager Agile Scrum Leadership\",\r\n    \"Data Scientist Python Machine Learning AI\",\r\n    \"UX Designer Figma Prototype User Research\"\r\n];\r\n\r\n// Initialize\r\nseedCorpus.forEach(doc => vectoriser.addDocument(doc));\r\nvectoriser.calculateIdf();\r\nisReady = true;\r\n\r\nself.onmessage = (e: MessageEvent) => {\r\n    const { type, payload, id } = e.data;\r\n\r\n    if (!isReady) {\r\n        self.postMessage({ type: 'error', id, payload: 'AI not ready' });\r\n        return;\r\n    }\r\n\r\n    try {\r\n        switch (type) {\r\n            case 'analyze_relevance':\r\n                const { cvText, jobText } = payload;\r\n                const cvVec = vectoriser.vectorise(cvText);\r\n                const jobVec = vectoriser.vectorise(jobText);\r\n                const similarity = VectorMath.cosineSimilarity(cvVec, jobVec);\r\n\r\n                self.postMessage({\r\n                    type: 'analysis_result',\r\n                    id,\r\n                    payload: { similarity: Math.round(similarity * 100) }\r\n                });\r\n                break;\r\n\r\n            case 'suggest_keywords':\r\n                // Simple implementation: find most similar seed doc and return its keywords\r\n                // In a real version, we'd use the ConceptGraph\r\n                const inputVec = vectoriser.vectorise(payload.text);\r\n                let bestMatch = '';\r\n                let bestScore = -1;\r\n\r\n                seedCorpus.forEach(doc => {\r\n                    const docVec = vectoriser.vectorise(doc);\r\n                    const score = VectorMath.cosineSimilarity(inputVec, docVec);\r\n                    if (score > bestScore) {\r\n                        bestScore = score;\r\n                        bestMatch = doc;\r\n                    }\r\n                });\r\n\r\n                self.postMessage({\r\n                    type: 'suggestions_result',\r\n                    id,\r\n                    payload: {\r\n                        match: bestMatch,\r\n                        score: bestScore,\r\n                        keywords: bestMatch.split(' ').filter(w => !payload.text.toLowerCase().includes(w.toLowerCase()))\r\n                    }\r\n                });\r\n                break;\r\n\r\n            case 'analyze_complexity':\r\n                const text = payload.text as string;\r\n                if (!text) {\r\n                    self.postMessage({ type: 'complexity_result', id, payload: { score: 0, level: 'compact' } });\r\n                    return;\r\n                }\r\n\r\n                // 1. Sentence Length (Words per sentence)\r\n                const sentences = text.split(/[.!?]+/).filter((s: string) => s.trim().length > 0);\r\n                const words = text.split(/\\s+/).filter((w: string) => w.length > 0);\r\n                const avgSentenceLength = sentences.length > 0 ? words.length / sentences.length : 0;\r\n\r\n                // 2. Average Word Length\r\n                const totalChars = words.reduce((acc: number, w: string) => acc + w.length, 0);\r\n                const avgWordLength = words.length > 0 ? totalChars / words.length : 0;\r\n\r\n                // 3. Heuristic Score (0-100 approx)\r\n                // Simple: 4 words/sent -> score ~20. 20 words/sent -> score ~80.\r\n                // Long words also boost score.\r\n                let score = (avgSentenceLength * 3) + (avgWordLength * 5);\r\n\r\n                // Cap at 100\r\n                score = Math.min(Math.max(score, 0), 100);\r\n\r\n                let level = 'comfortable';\r\n                if (score < 30) level = 'compact';\r\n                else if (score > 60) level = 'spacious';\r\n\r\n                self.postMessage({\r\n                    type: 'complexity_result',\r\n                    id,\r\n                    payload: { score: Math.round(score), level }\r\n                });\r\n                break;\r\n\r\n            default:\r\n                self.postMessage({ type: 'error', id, payload: 'Unknown command' });\r\n        }\r\n    } catch (error) {\r\n        self.postMessage({ type: 'error', id, payload: String(error) });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\src\\worker\\layout.worker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[250,253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[250,253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[417,420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[417,420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { LayoutSolver } from '../domain/services/layout-solver';\r\nimport type { CVProfile } from '../domain/entities/cv';\r\n\r\nself.onmessage = (e: MessageEvent) => {\r\n    const { profile, constraints } = e.data as { profile: CVProfile, constraints: any };\r\n\r\n    try {\r\n        const solution = LayoutSolver.solve(profile, constraints);\r\n        self.postMessage({ type: 'SUCCESS', solution });\r\n    } catch (error: any) {\r\n        self.postMessage({ type: 'ERROR', message: error.message });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\temp_preview_clean.tsx","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: File appears to be binary.","line":1,"column":0}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"´┐¢´┐¢i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000,\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000R\u0000e\u0000f\u0000,\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000,\u0000 \u0000u\u0000s\u0000e\u0000C\u0000a\u0000l\u0000l\u0000b\u0000a\u0000c\u0000k\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000r\u0000e\u0000a\u0000c\u0000t\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000D\u0000y\u0000n\u0000a\u0000m\u0000i\u0000c\u0000R\u0000e\u0000n\u0000d\u0000e\u0000r\u0000e\u0000r\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000l\u0000a\u0000y\u0000o\u0000u\u0000t\u0000s\u0000/\u0000D\u0000y\u0000n\u0000a\u0000m\u0000i\u0000c\u0000R\u0000e\u0000n\u0000d\u0000e\u0000r\u0000e\u0000r\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000U\u0000I\u0000S\u0000t\u0000o\u0000r\u0000e\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000a\u0000p\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000/\u0000s\u0000t\u0000o\u0000r\u0000e\u0000/\u0000u\u0000i\u0000-\u0000s\u0000t\u0000o\u0000r\u0000e\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000S\u0000e\u0000t\u0000t\u0000i\u0000n\u0000g\u0000s\u0000S\u0000t\u0000o\u0000r\u0000e\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000a\u0000p\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000/\u0000s\u0000t\u0000o\u0000r\u0000e\u0000/\u0000s\u0000e\u0000t\u0000t\u0000i\u0000n\u0000g\u0000s\u0000-\u0000s\u0000t\u0000o\u0000r\u0000e\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000C\u0000V\u0000S\u0000t\u0000o\u0000r\u0000e\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000a\u0000p\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000/\u0000s\u0000t\u0000o\u0000r\u0000e\u0000/\u0000c\u0000v\u0000-\u0000s\u0000t\u0000o\u0000r\u0000e\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000T\u0000o\u0000a\u0000s\u0000t\u0000S\u0000t\u0000o\u0000r\u0000e\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000a\u0000p\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000/\u0000s\u0000t\u0000o\u0000r\u0000e\u0000/\u0000t\u0000o\u0000a\u0000s\u0000t\u0000-\u0000s\u0000t\u0000o\u0000r\u0000e\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000B\u0000u\u0000t\u0000t\u0000o\u0000n\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000d\u0000e\u0000s\u0000i\u0000g\u0000n\u0000-\u0000s\u0000y\u0000s\u0000t\u0000e\u0000m\u0000/\u0000a\u0000t\u0000o\u0000m\u0000s\u0000/\u0000B\u0000u\u0000t\u0000t\u0000o\u0000n\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000D\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000,\u0000 \u0000L\u0000o\u0000a\u0000d\u0000e\u0000r\u00002\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000l\u0000u\u0000c\u0000i\u0000d\u0000e\u0000-\u0000r\u0000e\u0000a\u0000c\u0000t\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000t\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000d\u0000a\u0000t\u0000a\u0000/\u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000i\u0000o\u0000n\u0000s\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000P\u0000a\u0000g\u0000e\u0000D\u0000e\u0000t\u0000e\u0000c\u0000t\u0000i\u0000o\u0000n\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000h\u0000o\u0000o\u0000k\u0000s\u0000/\u0000u\u0000s\u0000e\u0000P\u0000a\u0000g\u0000e\u0000D\u0000e\u0000t\u0000e\u0000c\u0000t\u0000i\u0000o\u0000n\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000I\u0000n\u0000l\u0000i\u0000n\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000h\u0000o\u0000o\u0000k\u0000s\u0000/\u0000u\u0000s\u0000e\u0000I\u0000n\u0000l\u0000i\u0000n\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000'\u0000;\u0000\r\u0000\n\u0000i\u0000m\u0000p\u0000o\u0000r\u0000t\u0000 \u0000{\u0000 \u0000u\u0000s\u0000e\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000E\u0000f\u0000f\u0000e\u0000c\u0000t\u0000 \u0000}\u0000 \u0000f\u0000r\u0000o\u0000m\u0000 \u0000'\u0000.\u0000.\u0000/\u0000.\u0000.\u0000/\u0000h\u0000o\u0000o\u0000k\u0000s\u0000/\u0000u\u0000s\u0000e\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000E\u0000f\u0000f\u0000e\u0000c\u0000t\u0000'\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000i\u0000n\u0000t\u0000e\u0000r\u0000f\u0000a\u0000c\u0000e\u0000 \u0000P\u0000r\u0000e\u0000v\u0000i\u0000e\u0000w\u0000P\u0000a\u0000n\u0000e\u0000P\u0000r\u0000o\u0000p\u0000s\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000h\u0000i\u0000d\u0000e\u0000T\u0000o\u0000o\u0000l\u0000b\u0000a\u0000r\u0000?\u0000:\u0000 \u0000b\u0000o\u0000o\u0000l\u0000e\u0000a\u0000n\u0000;\u0000\r\u0000\n\u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000e\u0000x\u0000p\u0000o\u0000r\u0000t\u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000P\u0000r\u0000e\u0000v\u0000i\u0000e\u0000w\u0000P\u0000a\u0000n\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000F\u0000C\u0000<\u0000P\u0000r\u0000e\u0000v\u0000i\u0000e\u0000w\u0000P\u0000a\u0000n\u0000e\u0000P\u0000r\u0000o\u0000p\u0000s\u0000>\u0000 \u0000=\u0000 \u0000(\u0000{\u0000 \u0000h\u0000i\u0000d\u0000e\u0000T\u0000o\u0000o\u0000l\u0000b\u0000a\u0000r\u0000 \u0000}\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000R\u0000e\u0000f\u0000<\u0000H\u0000T\u0000M\u0000L\u0000D\u0000i\u0000v\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000>\u0000(\u0000n\u0000u\u0000l\u0000l\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000c\u0000o\u0000n\u0000t\u0000a\u0000i\u0000n\u0000e\u0000r\u0000R\u0000e\u0000f\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000R\u0000e\u0000f\u0000<\u0000H\u0000T\u0000M\u0000L\u0000D\u0000i\u0000v\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000>\u0000(\u0000n\u0000u\u0000l\u0000l\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000p\u0000h\u0000o\u0000t\u0000o\u0000I\u0000n\u0000p\u0000u\u0000t\u0000R\u0000e\u0000f\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000R\u0000e\u0000f\u0000<\u0000H\u0000T\u0000M\u0000L\u0000I\u0000n\u0000p\u0000u\u0000t\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000>\u0000(\u0000n\u0000u\u0000l\u0000l\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000i\u0000s\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000,\u0000 \u0000s\u0000e\u0000t\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000U\u0000I\u0000S\u0000t\u0000o\u0000r\u0000e\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000l\u0000a\u0000n\u0000g\u0000u\u0000a\u0000g\u0000e\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000e\u0000t\u0000t\u0000i\u0000n\u0000g\u0000s\u0000S\u0000t\u0000o\u0000r\u0000e\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000T\u0000o\u0000a\u0000s\u0000t\u0000S\u0000t\u0000o\u0000r\u0000e\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000C\u0000V\u0000S\u0000t\u0000o\u0000r\u0000e\u0000(\u0000s\u0000t\u0000a\u0000t\u0000e\u0000 \u0000=\u0000>\u0000 \u0000s\u0000t\u0000a\u0000t\u0000e\u0000.\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000C\u0000V\u0000S\u0000t\u0000o\u0000r\u0000e\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000F\u0000R\u0000E\u0000E\u0000 \u0000z\u0000o\u0000o\u0000m\u0000 \u0000&\u0000 \u0000p\u0000a\u0000n\u0000 \u0000-\u0000 \u00001\u0000 \u0000f\u0000i\u0000n\u0000g\u0000e\u0000r\u0000 \u0000=\u0000 \u0000p\u0000a\u0000n\u0000,\u0000 \u00002\u0000 \u0000f\u0000i\u0000n\u0000g\u0000e\u0000r\u0000s\u0000 \u0000=\u0000 \u0000f\u0000r\u0000e\u0000e\u0000 \u0000z\u0000o\u0000o\u0000m\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000,\u0000 \u0000s\u0000e\u0000t\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u00001\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000p\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000,\u0000 \u0000s\u0000e\u0000t\u0000P\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u0000{\u0000 \u0000x\u0000:\u0000 \u00000\u0000,\u0000 \u0000y\u0000:\u0000 \u00000\u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000,\u0000 \u0000s\u0000e\u0000t\u0000Z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u0000{\u0000 \u0000x\u0000:\u0000 \u00000\u0000,\u0000 \u0000y\u0000:\u0000 \u00000\u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000i\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000,\u0000 \u0000s\u0000e\u0000t\u0000I\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000l\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000,\u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u0000{\u0000 \u0000x\u0000:\u0000 \u00000\u0000,\u0000 \u0000y\u0000:\u0000 \u00000\u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000i\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000,\u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000i\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000,\u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000t\u0000a\u0000p\u0000 \u0000d\u0000e\u0000t\u0000e\u0000c\u0000t\u0000i\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000,\u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000(\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000,\u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000]\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000S\u0000t\u0000a\u0000t\u0000e\u0000<\u0000E\u0000v\u0000e\u0000n\u0000t\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000|\u0000 \u0000n\u0000u\u0000l\u0000l\u0000>\u0000(\u0000n\u0000u\u0000l\u0000l\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000p\u0000a\u0000g\u0000e\u0000C\u0000o\u0000u\u0000n\u0000t\u0000,\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000P\u0000a\u0000g\u0000e\u0000,\u0000 \u0000s\u0000e\u0000t\u0000C\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000P\u0000a\u0000g\u0000e\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000P\u0000a\u0000g\u0000e\u0000D\u0000e\u0000t\u0000e\u0000c\u0000t\u0000i\u0000o\u0000n\u0000(\u0000c\u0000v\u0000R\u0000e\u0000f\u0000,\u0000 \u0000[\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000,\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000u\u0000b\u0000l\u0000e\u0000C\u0000l\u0000i\u0000c\u0000k\u0000,\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000V\u0000a\u0000l\u0000u\u0000e\u0000,\u0000 \u0000c\u0000l\u0000o\u0000s\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000I\u0000n\u0000l\u0000i\u0000n\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000{\u0000 \u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000s\u0000,\u0000 \u0000t\u0000r\u0000i\u0000g\u0000g\u0000e\u0000r\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000,\u0000 \u0000r\u0000e\u0000m\u0000o\u0000v\u0000e\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000 \u0000}\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000E\u0000f\u0000f\u0000e\u0000c\u0000t\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000t\u0000x\u0000t\u0000 \u0000=\u0000 \u0000t\u0000[\u0000l\u0000a\u0000n\u0000g\u0000u\u0000a\u0000g\u0000e\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000=\u0000 \u0000t\u0000y\u0000p\u0000e\u0000o\u0000f\u0000 \u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000 \u0000!\u0000=\u0000=\u0000 \u0000'\u0000u\u0000n\u0000d\u0000e\u0000f\u0000i\u0000n\u0000e\u0000d\u0000'\u0000 \u0000&\u0000&\u0000 \u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000.\u0000i\u0000n\u0000n\u0000e\u0000r\u0000W\u0000i\u0000d\u0000t\u0000h\u0000 \u0000<\u0000 \u00007\u00006\u00008\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000 \u0000=\u0000 \u0000a\u0000s\u0000y\u0000n\u0000c\u0000 \u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000(\u0000t\u0000r\u0000u\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000y\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000r\u0000e\u0000s\u0000p\u0000o\u0000n\u0000s\u0000e\u0000 \u0000=\u0000 \u0000a\u0000w\u0000a\u0000i\u0000t\u0000 \u0000f\u0000e\u0000t\u0000c\u0000h\u0000(\u0000'\u0000/\u0000a\u0000p\u0000i\u0000/\u0000p\u0000u\u0000p\u0000p\u0000e\u0000t\u0000e\u0000e\u0000r\u0000-\u0000p\u0000d\u0000f\u0000/\u0000g\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000e\u0000'\u0000,\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000m\u0000e\u0000t\u0000h\u0000o\u0000d\u0000:\u0000 \u0000'\u0000P\u0000O\u0000S\u0000T\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000e\u0000a\u0000d\u0000e\u0000r\u0000s\u0000:\u0000 \u0000{\u0000 \u0000'\u0000C\u0000o\u0000n\u0000t\u0000e\u0000n\u0000t\u0000-\u0000T\u0000y\u0000p\u0000e\u0000'\u0000:\u0000 \u0000'\u0000a\u0000p\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000/\u0000j\u0000s\u0000o\u0000n\u0000'\u0000 \u0000}\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000b\u0000o\u0000d\u0000y\u0000:\u0000 \u0000J\u0000S\u0000O\u0000N\u0000.\u0000s\u0000t\u0000r\u0000i\u0000n\u0000g\u0000i\u0000f\u0000y\u0000(\u0000{\u0000 \u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000,\u0000 \u0000l\u0000a\u0000n\u0000g\u0000u\u0000a\u0000g\u0000e\u0000 \u0000}\u0000)\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000r\u0000e\u0000s\u0000p\u0000o\u0000n\u0000s\u0000e\u0000.\u0000o\u0000k\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000h\u0000r\u0000o\u0000w\u0000 \u0000n\u0000e\u0000w\u0000 \u0000E\u0000r\u0000r\u0000o\u0000r\u0000(\u0000`\u0000S\u0000e\u0000r\u0000v\u0000e\u0000r\u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000e\u0000d\u0000 \u0000$\u0000{\u0000r\u0000e\u0000s\u0000p\u0000o\u0000n\u0000s\u0000e\u0000.\u0000s\u0000t\u0000a\u0000t\u0000u\u0000s\u0000}\u0000:\u0000 \u0000$\u0000{\u0000r\u0000e\u0000s\u0000p\u0000o\u0000n\u0000s\u0000e\u0000.\u0000s\u0000t\u0000a\u0000t\u0000u\u0000s\u0000T\u0000e\u0000x\u0000t\u0000}\u0000`\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000b\u0000l\u0000o\u0000b\u0000 \u0000=\u0000 \u0000a\u0000w\u0000a\u0000i\u0000t\u0000 \u0000r\u0000e\u0000s\u0000p\u0000o\u0000n\u0000s\u0000e\u0000.\u0000b\u0000l\u0000o\u0000b\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000u\u0000r\u0000l\u0000 \u0000=\u0000 \u0000U\u0000R\u0000L\u0000.\u0000c\u0000r\u0000e\u0000a\u0000t\u0000e\u0000O\u0000b\u0000j\u0000e\u0000c\u0000t\u0000U\u0000R\u0000L\u0000(\u0000b\u0000l\u0000o\u0000b\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000l\u0000i\u0000n\u0000k\u0000 \u0000=\u0000 \u0000d\u0000o\u0000c\u0000u\u0000m\u0000e\u0000n\u0000t\u0000.\u0000c\u0000r\u0000e\u0000a\u0000t\u0000e\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000(\u0000'\u0000a\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000i\u0000n\u0000k\u0000.\u0000h\u0000r\u0000e\u0000f\u0000 \u0000=\u0000 \u0000u\u0000r\u0000l\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000i\u0000n\u0000k\u0000.\u0000d\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000 \u0000=\u0000 \u0000`\u0000c\u0000v\u0000-\u0000$\u0000{\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000.\u0000p\u0000e\u0000r\u0000s\u0000o\u0000n\u0000a\u0000l\u0000.\u0000l\u0000a\u0000s\u0000t\u0000N\u0000a\u0000m\u0000e\u0000 \u0000|\u0000|\u0000 \u0000'\u0000r\u0000e\u0000s\u0000u\u0000m\u0000e\u0000'\u0000}\u0000.\u0000p\u0000d\u0000f\u0000`\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000n\u0000a\u0000v\u0000i\u0000g\u0000a\u0000t\u0000o\u0000r\u0000.\u0000u\u0000s\u0000e\u0000r\u0000A\u0000g\u0000e\u0000n\u0000t\u0000.\u0000m\u0000a\u0000t\u0000c\u0000h\u0000(\u0000/\u0000i\u0000P\u0000h\u0000o\u0000n\u0000e\u0000|\u0000i\u0000P\u0000a\u0000d\u0000|\u0000i\u0000P\u0000o\u0000d\u0000|\u0000A\u0000n\u0000d\u0000r\u0000o\u0000i\u0000d\u0000/\u0000i\u0000)\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000i\u0000n\u0000k\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000=\u0000 \u0000'\u0000_\u0000b\u0000l\u0000a\u0000n\u0000k\u0000'\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000i\u0000n\u0000k\u0000.\u0000r\u0000e\u0000l\u0000 \u0000=\u0000 \u0000'\u0000n\u0000o\u0000o\u0000p\u0000e\u0000n\u0000e\u0000r\u0000 \u0000n\u0000o\u0000r\u0000e\u0000f\u0000e\u0000r\u0000r\u0000e\u0000r\u0000'\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000d\u0000o\u0000c\u0000u\u0000m\u0000e\u0000n\u0000t\u0000.\u0000b\u0000o\u0000d\u0000y\u0000.\u0000a\u0000p\u0000p\u0000e\u0000n\u0000d\u0000C\u0000h\u0000i\u0000l\u0000d\u0000(\u0000l\u0000i\u0000n\u0000k\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000i\u0000n\u0000k\u0000.\u0000c\u0000l\u0000i\u0000c\u0000k\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000d\u0000o\u0000c\u0000u\u0000m\u0000e\u0000n\u0000t\u0000.\u0000b\u0000o\u0000d\u0000y\u0000.\u0000r\u0000e\u0000m\u0000o\u0000v\u0000e\u0000C\u0000h\u0000i\u0000l\u0000d\u0000(\u0000l\u0000i\u0000n\u0000k\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000T\u0000i\u0000m\u0000e\u0000o\u0000u\u0000t\u0000(\u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000U\u0000R\u0000L\u0000.\u0000r\u0000e\u0000v\u0000o\u0000k\u0000e\u0000O\u0000b\u0000j\u0000e\u0000c\u0000t\u0000U\u0000R\u0000L\u0000(\u0000u\u0000r\u0000l\u0000)\u0000,\u0000 \u00001\u00000\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000(\u0000'\u0000P\u0000D\u0000F\u0000 \u0000d\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000e\u0000d\u0000 \u0000s\u0000u\u0000c\u0000c\u0000e\u0000s\u0000s\u0000f\u0000u\u0000l\u0000l\u0000y\u0000!\u0000'\u0000,\u0000 \u0000'\u0000s\u0000u\u0000c\u0000c\u0000e\u0000s\u0000s\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000c\u0000a\u0000t\u0000c\u0000h\u0000 \u0000(\u0000e\u0000r\u0000r\u0000o\u0000r\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000o\u0000l\u0000e\u0000.\u0000e\u0000r\u0000r\u0000o\u0000r\u0000(\u0000'\u0000P\u0000D\u0000F\u0000 \u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000o\u0000n\u0000 \u0000f\u0000a\u0000i\u0000l\u0000e\u0000d\u0000'\u0000,\u0000 \u0000e\u0000r\u0000r\u0000o\u0000r\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000(\u0000'\u0000F\u0000a\u0000i\u0000l\u0000e\u0000d\u0000 \u0000t\u0000o\u0000 \u0000g\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000e\u0000 \u0000P\u0000D\u0000F\u0000.\u0000 \u0000P\u0000l\u0000e\u0000a\u0000s\u0000e\u0000 \u0000t\u0000r\u0000y\u0000 \u0000a\u0000g\u0000a\u0000i\u0000n\u0000.\u0000'\u0000,\u0000 \u0000'\u0000e\u0000r\u0000r\u0000o\u0000r\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000f\u0000i\u0000n\u0000a\u0000l\u0000l\u0000y\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000P\u0000h\u0000o\u0000t\u0000o\u0000U\u0000p\u0000l\u0000o\u0000a\u0000d\u0000 \u0000=\u0000 \u0000(\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000E\u0000v\u0000e\u0000n\u0000t\u0000<\u0000H\u0000T\u0000M\u0000L\u0000I\u0000n\u0000p\u0000u\u0000t\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000>\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000f\u0000i\u0000l\u0000e\u0000 \u0000=\u0000 \u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000f\u0000i\u0000l\u0000e\u0000s\u0000?\u0000.\u0000[\u00000\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000f\u0000i\u0000l\u0000e\u0000)\u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000r\u0000e\u0000a\u0000d\u0000e\u0000r\u0000 \u0000=\u0000 \u0000n\u0000e\u0000w\u0000 \u0000F\u0000i\u0000l\u0000e\u0000R\u0000e\u0000a\u0000d\u0000e\u0000r\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000a\u0000d\u0000e\u0000r\u0000.\u0000o\u0000n\u0000l\u0000o\u0000a\u0000d\u0000 \u0000=\u0000 \u0000(\u0000e\u0000v\u0000e\u0000n\u0000t\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000p\u0000h\u0000o\u0000t\u0000o\u0000U\u0000r\u0000l\u0000 \u0000=\u0000 \u0000e\u0000v\u0000e\u0000n\u0000t\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000?\u0000.\u0000r\u0000e\u0000s\u0000u\u0000l\u0000t\u0000 \u0000a\u0000s\u0000 \u0000s\u0000t\u0000r\u0000i\u0000n\u0000g\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000 \u0000=\u0000 \u0000{\u0000 \u0000.\u0000.\u0000.\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000,\u0000 \u0000p\u0000e\u0000r\u0000s\u0000o\u0000n\u0000a\u0000l\u0000:\u0000 \u0000{\u0000 \u0000.\u0000.\u0000.\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000.\u0000p\u0000e\u0000r\u0000s\u0000o\u0000n\u0000a\u0000l\u0000,\u0000 \u0000p\u0000h\u0000o\u0000t\u0000o\u0000U\u0000r\u0000l\u0000 \u0000}\u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000(\u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000(\u0000'\u0000´┐¢\u0000´┐¢\u0000´┐¢\u0000 \u0000P\u0000h\u0000o\u0000t\u0000o\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000!\u0000'\u0000,\u0000 \u0000'\u0000s\u0000u\u0000c\u0000c\u0000e\u0000s\u0000s\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000a\u0000d\u0000e\u0000r\u0000.\u0000r\u0000e\u0000a\u0000d\u0000A\u0000s\u0000D\u0000a\u0000t\u0000a\u0000U\u0000R\u0000L\u0000(\u0000f\u0000i\u0000l\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000P\u0000h\u0000o\u0000t\u0000o\u0000C\u0000l\u0000i\u0000c\u0000k\u0000 \u0000=\u0000 \u0000(\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000M\u0000o\u0000u\u0000s\u0000e\u0000E\u0000v\u0000e\u0000n\u0000t\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000=\u0000 \u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000a\u0000s\u0000 \u0000H\u0000T\u0000M\u0000L\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000c\u0000l\u0000o\u0000s\u0000e\u0000s\u0000t\u0000(\u0000'\u0000[\u0000d\u0000a\u0000t\u0000a\u0000-\u0000p\u0000h\u0000o\u0000t\u0000o\u0000-\u0000z\u0000o\u0000n\u0000e\u0000=\u0000\"\u0000t\u0000r\u0000u\u0000e\u0000\"\u0000]\u0000'\u0000)\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000e\u0000.\u0000s\u0000t\u0000o\u0000p\u0000P\u0000r\u0000o\u0000p\u0000a\u0000g\u0000a\u0000t\u0000i\u0000o\u0000n\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000p\u0000h\u0000o\u0000t\u0000o\u0000I\u0000n\u0000p\u0000u\u0000t\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000?\u0000.\u0000c\u0000l\u0000i\u0000c\u0000k\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000S\u0000a\u0000v\u0000e\u0000E\u0000d\u0000i\u0000t\u0000 \u0000=\u0000 \u0000(\u0000p\u0000a\u0000t\u0000h\u0000:\u0000 \u0000s\u0000t\u0000r\u0000i\u0000n\u0000g\u0000,\u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000:\u0000 \u0000s\u0000t\u0000r\u0000i\u0000n\u0000g\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000y\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000 \u0000=\u0000 \u0000J\u0000S\u0000O\u0000N\u0000.\u0000p\u0000a\u0000r\u0000s\u0000e\u0000(\u0000J\u0000S\u0000O\u0000N\u0000.\u0000s\u0000t\u0000r\u0000i\u0000n\u0000g\u0000i\u0000f\u0000y\u0000(\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000)\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000i\u0000r\u0000e\u0000c\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000 \u0000=\u0000 \u0000p\u0000a\u0000t\u0000h\u0000.\u0000m\u0000a\u0000t\u0000c\u0000h\u0000(\u0000/\u0000^\u0000(\u0000\\\u0000w\u0000+\u0000)\u0000\\\u0000[\u0000(\u0000\\\u0000d\u0000+\u0000)\u0000\\\u0000]\u0000$\u0000/\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000d\u0000i\u0000r\u0000e\u0000c\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000,\u0000 \u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000,\u0000 \u0000i\u0000n\u0000d\u0000e\u0000x\u0000]\u0000 \u0000=\u0000 \u0000d\u0000i\u0000r\u0000e\u0000c\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000A\u0000r\u0000r\u0000a\u0000y\u0000.\u0000i\u0000s\u0000A\u0000r\u0000r\u0000a\u0000y\u0000(\u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000[\u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000]\u0000)\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000[\u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000]\u0000[\u0000p\u0000a\u0000r\u0000s\u0000e\u0000I\u0000n\u0000t\u0000(\u0000i\u0000n\u0000d\u0000e\u0000x\u0000)\u0000]\u0000 \u0000=\u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000k\u0000e\u0000y\u0000s\u0000 \u0000=\u0000 \u0000p\u0000a\u0000t\u0000h\u0000.\u0000s\u0000p\u0000l\u0000i\u0000t\u0000(\u0000'\u0000.\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000e\u0000t\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000:\u0000 \u0000a\u0000n\u0000y\u0000 \u0000=\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000f\u0000o\u0000r\u0000 \u0000(\u0000l\u0000e\u0000t\u0000 \u0000i\u0000 \u0000=\u0000 \u00000\u0000;\u0000 \u0000i\u0000 \u0000<\u0000 \u0000k\u0000e\u0000y\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000-\u0000 \u00001\u0000;\u0000 \u0000i\u0000+\u0000+\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000k\u0000e\u0000y\u0000 \u0000=\u0000 \u0000k\u0000e\u0000y\u0000s\u0000[\u0000i\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000a\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000 \u0000=\u0000 \u0000k\u0000e\u0000y\u0000.\u0000m\u0000a\u0000t\u0000c\u0000h\u0000(\u0000/\u0000(\u0000\\\u0000w\u0000+\u0000)\u0000\\\u0000[\u0000(\u0000\\\u0000d\u0000+\u0000)\u0000\\\u0000]\u0000/\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000a\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000,\u0000 \u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000,\u0000 \u0000i\u0000n\u0000d\u0000e\u0000x\u0000]\u0000 \u0000=\u0000 \u0000a\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000 \u0000=\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000]\u0000[\u0000p\u0000a\u0000r\u0000s\u0000e\u0000I\u0000n\u0000t\u0000(\u0000i\u0000n\u0000d\u0000e\u0000x\u0000)\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000k\u0000e\u0000y\u0000]\u0000)\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000k\u0000e\u0000y\u0000]\u0000 \u0000=\u0000 \u0000{\u0000}\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000 \u0000=\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000k\u0000e\u0000y\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000l\u0000a\u0000s\u0000t\u0000K\u0000e\u0000y\u0000 \u0000=\u0000 \u0000k\u0000e\u0000y\u0000s\u0000[\u0000k\u0000e\u0000y\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000-\u0000 \u00001\u0000]\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000l\u0000a\u0000s\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000 \u0000=\u0000 \u0000l\u0000a\u0000s\u0000t\u0000K\u0000e\u0000y\u0000.\u0000m\u0000a\u0000t\u0000c\u0000h\u0000(\u0000/\u0000(\u0000\\\u0000w\u0000+\u0000)\u0000\\\u0000[\u0000(\u0000\\\u0000d\u0000+\u0000)\u0000\\\u0000]\u0000/\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000l\u0000a\u0000s\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000[\u0000,\u0000 \u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000,\u0000 \u0000i\u0000n\u0000d\u0000e\u0000x\u0000]\u0000 \u0000=\u0000 \u0000l\u0000a\u0000s\u0000t\u0000A\u0000r\u0000r\u0000a\u0000y\u0000M\u0000a\u0000t\u0000c\u0000h\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000a\u0000r\u0000r\u0000a\u0000y\u0000N\u0000a\u0000m\u0000e\u0000]\u0000[\u0000p\u0000a\u0000r\u0000s\u0000e\u0000I\u0000n\u0000t\u0000(\u0000i\u0000n\u0000d\u0000e\u0000x\u0000)\u0000]\u0000 \u0000=\u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000[\u0000l\u0000a\u0000s\u0000t\u0000K\u0000e\u0000y\u0000]\u0000 \u0000=\u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000(\u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000P\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000(\u0000'\u0000´┐¢\u0000´┐¢\u0000´┐¢\u0000 \u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000s\u0000 \u0000s\u0000a\u0000v\u0000e\u0000d\u0000!\u0000'\u0000,\u0000 \u0000'\u0000s\u0000u\u0000c\u0000c\u0000e\u0000s\u0000s\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000c\u0000a\u0000t\u0000c\u0000h\u0000 \u0000(\u0000e\u0000r\u0000r\u0000o\u0000r\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000o\u0000l\u0000e\u0000.\u0000e\u0000r\u0000r\u0000o\u0000r\u0000(\u0000'\u0000E\u0000r\u0000r\u0000o\u0000r\u0000 \u0000s\u0000a\u0000v\u0000i\u0000n\u0000g\u0000 \u0000e\u0000d\u0000i\u0000t\u0000:\u0000'\u0000,\u0000 \u0000e\u0000r\u0000r\u0000o\u0000r\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000d\u0000d\u0000T\u0000o\u0000a\u0000s\u0000t\u0000(\u0000'\u0000F\u0000a\u0000i\u0000l\u0000e\u0000d\u0000 \u0000t\u0000o\u0000 \u0000s\u0000a\u0000v\u0000e\u0000 \u0000c\u0000h\u0000a\u0000n\u0000g\u0000e\u0000s\u0000'\u0000,\u0000 \u0000'\u0000e\u0000r\u0000r\u0000o\u0000r\u0000'\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000F\u0000R\u0000E\u0000E\u0000 \u0000p\u0000i\u0000n\u0000c\u0000h\u0000 \u0000z\u0000o\u0000o\u0000m\u0000 \u0000-\u0000 \u0000z\u0000o\u0000o\u0000m\u0000 \u0000a\u0000t\u0000 \u0000f\u0000i\u0000n\u0000g\u0000e\u0000r\u0000 \u0000p\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000g\u0000e\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000 \u0000=\u0000 \u0000(\u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000,\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000x\u0000 \u0000=\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000 \u0000-\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000y\u0000 \u0000=\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000 \u0000-\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000 \u0000M\u0000a\u0000t\u0000h\u0000.\u0000s\u0000q\u0000r\u0000t\u0000(\u0000d\u0000x\u0000 \u0000*\u0000 \u0000d\u0000x\u0000 \u0000+\u0000 \u0000d\u0000y\u0000 \u0000*\u0000 \u0000d\u0000y\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000g\u0000e\u0000t\u0000M\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000 \u0000=\u0000 \u0000(\u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000,\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000x\u0000:\u0000 \u0000(\u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000 \u0000+\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000)\u0000 \u0000/\u0000 \u00002\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000y\u0000:\u0000 \u0000(\u0000t\u0000o\u0000u\u0000c\u0000h\u00001\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000 \u0000+\u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u00002\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000)\u0000 \u0000/\u0000 \u00002\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000S\u0000t\u0000a\u0000r\u0000t\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000C\u0000a\u0000l\u0000l\u0000b\u0000a\u0000c\u0000k\u0000(\u0000(\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000v\u0000e\u0000n\u0000t\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00002\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000P\u0000I\u0000N\u0000C\u0000H\u0000 \u0000S\u0000T\u0000A\u0000R\u0000T\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000 \u0000=\u0000 \u0000g\u0000e\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000,\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00001\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000 \u0000=\u0000 \u0000g\u0000e\u0000t\u0000M\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000,\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00001\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000(\u0000d\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000Z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000(\u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000(\u0000t\u0000r\u0000u\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000(\u0000t\u0000r\u0000u\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000i\u0000f\u0000 \u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00001\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000P\u0000A\u0000N\u0000 \u0000S\u0000T\u0000A\u0000R\u0000T\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000(\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000x\u0000:\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000y\u0000:\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000(\u0000t\u0000r\u0000u\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000,\u0000 \u0000[\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000M\u0000o\u0000v\u0000e\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000C\u0000a\u0000l\u0000l\u0000b\u0000a\u0000c\u0000k\u0000(\u0000(\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000v\u0000e\u0000n\u0000t\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000e\u0000.\u0000p\u0000r\u0000e\u0000v\u0000e\u0000n\u0000t\u0000D\u0000e\u0000f\u0000a\u0000u\u0000l\u0000t\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00002\u0000 \u0000&\u0000&\u0000 \u0000i\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000 \u0000>\u0000 \u00000\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000F\u0000R\u0000E\u0000E\u0000 \u0000P\u0000I\u0000N\u0000C\u0000H\u0000 \u0000Z\u0000O\u0000O\u0000M\u0000 \u0000-\u0000 \u0000z\u0000o\u0000o\u0000m\u0000 \u0000a\u0000t\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000 \u0000p\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000 \u0000=\u0000 \u0000g\u0000e\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000,\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00001\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000s\u0000c\u0000a\u0000l\u0000e\u0000 \u0000=\u0000 \u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000 \u0000/\u0000 \u0000i\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000n\u0000e\u0000w\u0000Z\u0000o\u0000o\u0000m\u0000 \u0000=\u0000 \u0000M\u0000a\u0000t\u0000h\u0000.\u0000m\u0000a\u0000x\u0000(\u00000\u0000.\u00008\u0000,\u0000 \u0000M\u0000a\u0000t\u0000h\u0000.\u0000m\u0000i\u0000n\u0000(\u00002\u0000.\u00005\u0000,\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000 \u0000*\u0000 \u0000s\u0000c\u0000a\u0000l\u0000e\u0000)\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000A\u0000d\u0000j\u0000u\u0000s\u0000t\u0000 \u0000p\u0000a\u0000n\u0000 \u0000t\u0000o\u0000 \u0000k\u0000e\u0000e\u0000p\u0000 \u0000z\u0000o\u0000o\u0000m\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000e\u0000d\u0000 \u0000a\u0000t\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000 \u0000=\u0000 \u0000g\u0000e\u0000t\u0000M\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000,\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00001\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000X\u0000 \u0000=\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000.\u0000x\u0000 \u0000-\u0000 \u0000z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000.\u0000x\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000Y\u0000 \u0000=\u0000 \u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000.\u0000y\u0000 \u0000-\u0000 \u0000z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000.\u0000y\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000P\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000(\u0000p\u0000r\u0000e\u0000v\u0000 \u0000=\u0000>\u0000 \u0000(\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000x\u0000:\u0000 \u0000p\u0000r\u0000e\u0000v\u0000.\u0000x\u0000 \u0000+\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000X\u0000 \u0000*\u0000 \u00000\u0000.\u00005\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000y\u0000:\u0000 \u0000p\u0000r\u0000e\u0000v\u0000.\u0000y\u0000 \u0000+\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000Y\u0000 \u0000*\u0000 \u00000\u0000.\u00005\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000)\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000(\u0000n\u0000e\u0000w\u0000Z\u0000o\u0000o\u0000m\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000(\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000Z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000(\u0000m\u0000i\u0000d\u0000p\u0000o\u0000i\u0000n\u0000t\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000i\u0000f\u0000 \u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00001\u0000 \u0000&\u0000&\u0000 \u0000!\u0000i\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000F\u0000R\u0000E\u0000E\u0000 \u0000P\u0000A\u0000N\u0000N\u0000I\u0000N\u0000G\u0000 \u0000w\u0000i\u0000t\u0000h\u0000 \u00001\u0000 \u0000f\u0000i\u0000n\u0000g\u0000e\u0000r\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000X\u0000 \u0000=\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000 \u0000-\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000.\u0000x\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000Y\u0000 \u0000=\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000 \u0000-\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000.\u0000y\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000P\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000(\u0000p\u0000r\u0000e\u0000v\u0000 \u0000=\u0000>\u0000 \u0000(\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000x\u0000:\u0000 \u0000p\u0000r\u0000e\u0000v\u0000.\u0000x\u0000 \u0000+\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000X\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000y\u0000:\u0000 \u0000p\u0000r\u0000e\u0000v\u0000.\u0000y\u0000 \u0000+\u0000 \u0000d\u0000e\u0000l\u0000t\u0000a\u0000Y\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000)\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000(\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000x\u0000:\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000y\u0000:\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000[\u00000\u0000]\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000,\u0000 \u0000[\u0000i\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000,\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000o\u0000u\u0000c\u0000h\u0000P\u0000o\u0000s\u0000,\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000,\u0000 \u0000z\u0000o\u0000o\u0000m\u0000C\u0000e\u0000n\u0000t\u0000e\u0000r\u0000,\u0000 \u0000i\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000n\u0000d\u0000 \u0000=\u0000 \u0000u\u0000s\u0000e\u0000C\u0000a\u0000l\u0000l\u0000b\u0000a\u0000c\u0000k\u0000(\u0000(\u0000e\u0000:\u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000v\u0000e\u0000n\u0000t\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000n\u0000o\u0000w\u0000 \u0000=\u0000 \u0000D\u0000a\u0000t\u0000e\u0000.\u0000n\u0000o\u0000w\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000t\u0000i\u0000m\u0000e\u0000D\u0000i\u0000f\u0000f\u0000 \u0000=\u0000 \u0000n\u0000o\u0000w\u0000 \u0000-\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000=\u0000 \u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000a\u0000s\u0000 \u0000H\u0000T\u0000M\u0000L\u0000E\u0000l\u0000e\u0000m\u0000e\u0000n\u0000t\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000t\u0000i\u0000m\u0000e\u0000D\u0000i\u0000f\u0000f\u0000 \u0000<\u0000 \u00003\u00000\u00000\u0000 \u0000&\u0000&\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000=\u0000=\u0000=\u0000 \u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000 \u0000&\u0000&\u0000 \u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00000\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000c\u0000l\u0000o\u0000s\u0000e\u0000s\u0000t\u0000(\u0000'\u0000[\u0000d\u0000a\u0000t\u0000a\u0000-\u0000p\u0000h\u0000o\u0000t\u0000o\u0000-\u0000z\u0000o\u0000n\u0000e\u0000=\u0000\"\u0000t\u0000r\u0000u\u0000e\u0000\"\u0000]\u0000'\u0000)\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000e\u0000.\u0000p\u0000r\u0000e\u0000v\u0000e\u0000n\u0000t\u0000D\u0000e\u0000f\u0000a\u0000u\u0000l\u0000t\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000p\u0000h\u0000o\u0000t\u0000o\u0000I\u0000n\u0000p\u0000u\u0000t\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000?\u0000.\u0000c\u0000l\u0000i\u0000c\u0000k\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000(\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000i\u0000f\u0000 \u0000(\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000c\u0000l\u0000o\u0000s\u0000e\u0000s\u0000t\u0000(\u0000'\u0000[\u0000d\u0000a\u0000t\u0000a\u0000-\u0000e\u0000d\u0000i\u0000t\u0000a\u0000b\u0000l\u0000e\u0000]\u0000'\u0000)\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000u\u0000b\u0000l\u0000e\u0000C\u0000l\u0000i\u0000c\u0000k\u0000(\u0000e\u0000 \u0000a\u0000s\u0000 \u0000a\u0000n\u0000y\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000(\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000e\u0000l\u0000s\u0000e\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000(\u0000n\u0000o\u0000w\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000L\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000(\u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000e\u0000.\u0000t\u0000o\u0000u\u0000c\u0000h\u0000e\u0000s\u0000.\u0000l\u0000e\u0000n\u0000g\u0000t\u0000h\u0000 \u0000=\u0000=\u0000=\u0000 \u00000\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000n\u0000i\u0000t\u0000i\u0000a\u0000l\u0000D\u0000i\u0000s\u0000t\u0000a\u0000n\u0000c\u0000e\u0000(\u00000\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000e\u0000t\u0000I\u0000s\u0000P\u0000i\u0000n\u0000c\u0000h\u0000i\u0000n\u0000g\u0000(\u0000f\u0000a\u0000l\u0000s\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000,\u0000 \u0000[\u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000i\u0000m\u0000e\u0000,\u0000 \u0000l\u0000a\u0000s\u0000t\u0000T\u0000a\u0000p\u0000T\u0000a\u0000r\u0000g\u0000e\u0000t\u0000,\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000u\u0000b\u0000l\u0000e\u0000C\u0000l\u0000i\u0000c\u0000k\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000R\u0000e\u0000a\u0000c\u0000t\u0000.\u0000u\u0000s\u0000e\u0000E\u0000f\u0000f\u0000e\u0000c\u0000t\u0000(\u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000o\u0000n\u0000T\u0000r\u0000i\u0000g\u0000g\u0000e\u0000r\u0000 \u0000=\u0000 \u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000.\u0000a\u0000d\u0000d\u0000E\u0000v\u0000e\u0000n\u0000t\u0000L\u0000i\u0000s\u0000t\u0000e\u0000n\u0000e\u0000r\u0000(\u0000'\u0000T\u0000R\u0000I\u0000G\u0000G\u0000E\u0000R\u0000_\u0000P\u0000D\u0000F\u0000_\u0000D\u0000O\u0000W\u0000N\u0000L\u0000O\u0000A\u0000D\u0000'\u0000,\u0000 \u0000o\u0000n\u0000T\u0000r\u0000i\u0000g\u0000g\u0000e\u0000r\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000 \u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000.\u0000r\u0000e\u0000m\u0000o\u0000v\u0000e\u0000E\u0000v\u0000e\u0000n\u0000t\u0000L\u0000i\u0000s\u0000t\u0000e\u0000n\u0000e\u0000r\u0000(\u0000'\u0000T\u0000R\u0000I\u0000G\u0000G\u0000E\u0000R\u0000_\u0000P\u0000D\u0000F\u0000_\u0000D\u0000O\u0000W\u0000N\u0000L\u0000O\u0000A\u0000D\u0000'\u0000,\u0000 \u0000o\u0000n\u0000T\u0000r\u0000i\u0000g\u0000g\u0000e\u0000r\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000}\u0000,\u0000 \u0000[\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000]\u0000)\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000S\u0000c\u0000a\u0000l\u0000e\u0000 \u0000=\u0000 \u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000?\u0000 \u0000M\u0000a\u0000t\u0000h\u0000.\u0000m\u0000i\u0000n\u0000(\u0000(\u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000.\u0000i\u0000n\u0000n\u0000e\u0000r\u0000W\u0000i\u0000d\u0000t\u0000h\u0000 \u0000*\u0000 \u00000\u0000.\u00009\u00002\u0000)\u0000 \u0000/\u0000 \u00007\u00009\u00004\u0000,\u0000 \u0000(\u0000w\u0000i\u0000n\u0000d\u0000o\u0000w\u0000.\u0000i\u0000n\u0000n\u0000e\u0000r\u0000H\u0000e\u0000i\u0000g\u0000h\u0000t\u0000 \u0000*\u0000 \u00000\u0000.\u00008\u00005\u0000)\u0000 \u0000/\u0000 \u00001\u00001\u00002\u00003\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000:\u0000 \u00001\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000t\u0000u\u0000r\u0000n\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000f\u0000=\u0000{\u0000c\u0000o\u0000n\u0000t\u0000a\u0000i\u0000n\u0000e\u0000r\u0000R\u0000e\u0000f\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000f\u0000l\u0000e\u0000x\u0000 \u0000f\u0000l\u0000e\u0000x\u0000-\u0000c\u0000o\u0000l\u0000 \u0000h\u0000-\u0000f\u0000u\u0000l\u0000l\u0000 \u0000b\u0000g\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00001\u00000\u00000\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000D\u0000o\u0000u\u0000b\u0000l\u0000e\u0000C\u0000l\u0000i\u0000c\u0000k\u0000=\u0000{\u0000(\u0000e\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000P\u0000h\u0000o\u0000t\u0000o\u0000C\u0000l\u0000i\u0000c\u0000k\u0000(\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000u\u0000b\u0000l\u0000e\u0000C\u0000l\u0000i\u0000c\u0000k\u0000(\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000T\u0000o\u0000u\u0000c\u0000h\u0000S\u0000t\u0000a\u0000r\u0000t\u0000=\u0000{\u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000S\u0000t\u0000a\u0000r\u0000t\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000T\u0000o\u0000u\u0000c\u0000h\u0000M\u0000o\u0000v\u0000e\u0000=\u0000{\u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000M\u0000o\u0000v\u0000e\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000n\u0000d\u0000=\u0000{\u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000T\u0000o\u0000u\u0000c\u0000h\u0000E\u0000n\u0000d\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000?\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000v\u0000e\u0000r\u0000f\u0000l\u0000o\u0000w\u0000:\u0000 \u0000'\u0000h\u0000i\u0000d\u0000d\u0000e\u0000n\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000o\u0000u\u0000c\u0000h\u0000A\u0000c\u0000t\u0000i\u0000o\u0000n\u0000:\u0000 \u0000'\u0000n\u0000o\u0000n\u0000e\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000u\u0000s\u0000e\u0000r\u0000S\u0000e\u0000l\u0000e\u0000c\u0000t\u0000:\u0000 \u0000'\u0000n\u0000o\u0000n\u0000e\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000:\u0000 \u0000{\u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000i\u0000n\u0000p\u0000u\u0000t\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000f\u0000=\u0000{\u0000p\u0000h\u0000o\u0000t\u0000o\u0000I\u0000n\u0000p\u0000u\u0000t\u0000R\u0000e\u0000f\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000y\u0000p\u0000e\u0000=\u0000\"\u0000f\u0000i\u0000l\u0000e\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000c\u0000c\u0000e\u0000p\u0000t\u0000=\u0000\"\u0000i\u0000m\u0000a\u0000g\u0000e\u0000/\u0000*\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000=\u0000{\u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000P\u0000h\u0000o\u0000t\u0000o\u0000U\u0000p\u0000l\u0000o\u0000a\u0000d\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000{\u0000 \u0000d\u0000i\u0000s\u0000p\u0000l\u0000a\u0000y\u0000:\u0000 \u0000'\u0000n\u0000o\u0000n\u0000e\u0000'\u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000>\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000!\u0000h\u0000i\u0000d\u0000e\u0000T\u0000o\u0000o\u0000l\u0000b\u0000a\u0000r\u0000 \u0000&\u0000&\u0000 \u0000!\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000&\u0000&\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000p\u0000-\u00004\u0000 \u0000b\u0000g\u0000-\u0000w\u0000h\u0000i\u0000t\u0000e\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000b\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00002\u00000\u00000\u0000 \u0000f\u0000l\u0000e\u0000x\u0000 \u0000j\u0000u\u0000s\u0000t\u0000i\u0000f\u0000y\u0000-\u0000b\u0000e\u0000t\u0000w\u0000e\u0000e\u0000n\u0000 \u0000i\u0000t\u0000e\u0000m\u0000s\u0000-\u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000 \u0000s\u0000h\u0000a\u0000d\u0000o\u0000w\u0000-\u0000s\u0000m\u0000 \u0000z\u0000-\u00001\u00000\u0000\"\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000t\u0000e\u0000x\u0000t\u0000-\u0000s\u0000m\u0000 \u0000f\u0000o\u0000n\u0000t\u0000-\u0000s\u0000e\u0000m\u0000i\u0000b\u0000o\u0000l\u0000d\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00005\u00000\u00000\u0000\"\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000t\u0000x\u0000t\u0000.\u0000p\u0000r\u0000e\u0000v\u0000i\u0000e\u0000w\u0000T\u0000i\u0000t\u0000l\u0000e\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000B\u0000u\u0000t\u0000t\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000l\u0000i\u0000c\u0000k\u0000=\u0000{\u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000D\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000d\u0000i\u0000s\u0000a\u0000b\u0000l\u0000e\u0000d\u0000=\u0000{\u0000i\u0000s\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000e\u0000f\u0000t\u0000I\u0000c\u0000o\u0000n\u0000=\u0000{\u0000i\u0000s\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000 \u0000?\u0000 \u0000<\u0000L\u0000o\u0000a\u0000d\u0000e\u0000r\u00002\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000a\u0000n\u0000i\u0000m\u0000a\u0000t\u0000e\u0000-\u0000s\u0000p\u0000i\u0000n\u0000\"\u0000 \u0000/\u0000>\u0000 \u0000:\u0000 \u0000<\u0000D\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000 \u0000s\u0000i\u0000z\u0000e\u0000=\u0000{\u00001\u00006\u0000}\u0000 \u0000/\u0000>\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000i\u0000s\u0000G\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000P\u0000D\u0000F\u0000 \u0000?\u0000 \u0000t\u0000x\u0000t\u0000.\u0000g\u0000e\u0000n\u0000e\u0000r\u0000a\u0000t\u0000i\u0000n\u0000g\u0000 \u0000:\u0000 \u0000t\u0000x\u0000t\u0000.\u0000d\u0000o\u0000w\u0000n\u0000l\u0000o\u0000a\u0000d\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000B\u0000u\u0000t\u0000t\u0000o\u0000n\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000f\u0000l\u0000e\u0000x\u0000-\u00001\u0000 \u0000f\u0000l\u0000e\u0000x\u0000 \u0000i\u0000t\u0000e\u0000m\u0000s\u0000-\u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000 \u0000j\u0000u\u0000s\u0000t\u0000i\u0000f\u0000y\u0000-\u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000 \u0000p\u0000-\u00004\u0000 \u0000r\u0000e\u0000l\u0000a\u0000t\u0000i\u0000v\u0000e\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000m\u0000i\u0000n\u0000H\u0000e\u0000i\u0000g\u0000h\u0000t\u0000:\u0000 \u00000\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000v\u0000e\u0000r\u0000f\u0000l\u0000o\u0000w\u0000:\u0000 \u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000?\u0000 \u0000'\u0000h\u0000i\u0000d\u0000d\u0000e\u0000n\u0000'\u0000 \u0000:\u0000 \u0000'\u0000a\u0000u\u0000t\u0000o\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000e\u0000f\u0000=\u0000{\u0000c\u0000v\u0000R\u0000e\u0000f\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000b\u0000g\u0000-\u0000w\u0000h\u0000i\u0000t\u0000e\u0000 \u0000r\u0000e\u0000l\u0000a\u0000t\u0000i\u0000v\u0000e\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000?\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000w\u0000i\u0000d\u0000t\u0000h\u0000:\u0000 \u0000'\u00007\u00009\u00004\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000m\u0000i\u0000n\u0000H\u0000e\u0000i\u0000g\u0000h\u0000t\u0000:\u0000 \u0000'\u00001\u00001\u00002\u00003\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000R\u0000a\u0000d\u0000i\u0000u\u0000s\u0000:\u0000 \u0000'\u00008\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000b\u0000o\u0000x\u0000S\u0000h\u0000a\u0000d\u0000o\u0000w\u0000:\u0000 \u0000'\u00000\u0000 \u00002\u00000\u0000p\u0000x\u0000 \u00006\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000.\u00002\u0000)\u0000,\u0000 \u00000\u0000 \u00001\u00000\u0000p\u0000x\u0000 \u00003\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00009\u00009\u0000,\u0000 \u00001\u00000\u00002\u0000,\u0000 \u00002\u00004\u00001\u0000,\u0000 \u00000\u0000.\u00001\u0000)\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000:\u0000 \u0000`\u0000s\u0000c\u0000a\u0000l\u0000e\u0000(\u0000$\u0000{\u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000S\u0000c\u0000a\u0000l\u0000e\u0000 \u0000*\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000}\u0000)\u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000(\u0000$\u0000{\u0000p\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000.\u0000x\u0000 \u0000/\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000S\u0000c\u0000a\u0000l\u0000e\u0000 \u0000/\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000}\u0000p\u0000x\u0000,\u0000 \u0000$\u0000{\u0000p\u0000a\u0000n\u0000P\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000.\u0000y\u0000 \u0000/\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000S\u0000c\u0000a\u0000l\u0000e\u0000 \u0000/\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000}\u0000p\u0000x\u0000)\u0000`\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000O\u0000r\u0000i\u0000g\u0000i\u0000n\u0000:\u0000 \u0000'\u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000:\u0000 \u0000i\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000 \u0000?\u0000 \u0000'\u0000n\u0000o\u0000n\u0000e\u0000'\u0000 \u0000:\u0000 \u0000'\u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000 \u00000\u0000.\u00002\u0000s\u0000 \u0000e\u0000a\u0000s\u0000e\u0000-\u0000o\u0000u\u0000t\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000w\u0000i\u0000l\u0000l\u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000:\u0000 \u0000i\u0000s\u0000I\u0000n\u0000t\u0000e\u0000r\u0000a\u0000c\u0000t\u0000i\u0000n\u0000g\u0000 \u0000?\u0000 \u0000'\u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000'\u0000 \u0000:\u0000 \u0000'\u0000a\u0000u\u0000t\u0000o\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000 \u0000:\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000w\u0000i\u0000d\u0000t\u0000h\u0000:\u0000 \u0000'\u00007\u00009\u00004\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000m\u0000i\u0000n\u0000H\u0000e\u0000i\u0000g\u0000h\u0000t\u0000:\u0000 \u0000'\u00001\u00001\u00002\u00003\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000R\u0000a\u0000d\u0000i\u0000u\u0000s\u0000:\u0000 \u0000'\u00001\u00002\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000b\u0000o\u0000x\u0000S\u0000h\u0000a\u0000d\u0000o\u0000w\u0000:\u0000 \u0000'\u00000\u0000 \u00002\u00005\u0000p\u0000x\u0000 \u00006\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000.\u00002\u0000)\u0000,\u0000 \u00000\u0000 \u00001\u00005\u0000p\u0000x\u0000 \u00003\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00009\u00009\u0000,\u0000 \u00001\u00000\u00002\u0000,\u0000 \u00002\u00004\u00001\u0000,\u0000 \u00000\u0000.\u00000\u00008\u0000)\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000:\u0000 \u0000'\u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000 \u00000\u0000.\u00004\u0000s\u0000 \u0000c\u0000u\u0000b\u0000i\u0000c\u0000-\u0000b\u0000e\u0000z\u0000i\u0000e\u0000r\u0000(\u00000\u0000.\u00001\u00006\u0000,\u0000 \u00001\u0000,\u0000 \u00000\u0000.\u00003\u0000,\u0000 \u00001\u0000)\u0000,\u0000 \u0000b\u0000o\u0000x\u0000-\u0000s\u0000h\u0000a\u0000d\u0000o\u0000w\u0000 \u00000\u0000.\u00004\u0000s\u0000 \u0000c\u0000u\u0000b\u0000i\u0000c\u0000-\u0000b\u0000e\u0000z\u0000i\u0000e\u0000r\u0000(\u00000\u0000.\u00001\u00006\u0000,\u0000 \u00001\u0000,\u0000 \u00000\u0000.\u00003\u0000,\u0000 \u00001\u0000)\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000:\u0000 \u0000'\u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000Z\u0000(\u00000\u0000)\u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000X\u0000(\u00000\u0000d\u0000e\u0000g\u0000)\u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000Y\u0000(\u00000\u0000d\u0000e\u0000g\u0000)\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000S\u0000t\u0000y\u0000l\u0000e\u0000:\u0000 \u0000'\u0000p\u0000r\u0000e\u0000s\u0000e\u0000r\u0000v\u0000e\u0000-\u00003\u0000d\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000p\u0000e\u0000r\u0000s\u0000p\u0000e\u0000c\u0000t\u0000i\u0000v\u0000e\u0000:\u0000 \u0000'\u00001\u00002\u00000\u00000\u0000p\u0000x\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000l\u0000i\u0000c\u0000k\u0000=\u0000{\u0000t\u0000r\u0000i\u0000g\u0000g\u0000e\u0000r\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000M\u0000o\u0000u\u0000s\u0000e\u0000M\u0000o\u0000v\u0000e\u0000=\u0000{\u0000(\u0000e\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000I\u0000N\u0000V\u0000E\u0000R\u0000T\u0000E\u0000D\u0000 \u0000M\u0000A\u0000G\u0000N\u0000E\u0000T\u0000I\u0000C\u0000 \u0000-\u0000 \u0000C\u0000V\u0000 \u0000m\u0000o\u0000v\u0000e\u0000s\u0000 \u0000O\u0000P\u0000P\u0000O\u0000S\u0000I\u0000T\u0000E\u0000 \u0000t\u0000o\u0000 \u0000c\u0000u\u0000r\u0000s\u0000o\u0000r\u0000,\u0000 \u0000a\u0000t\u0000 \u0000c\u0000u\u0000r\u0000s\u0000o\u0000r\u0000'\u0000s\u0000 \u0000Y\u0000 \u0000l\u0000e\u0000v\u0000e\u0000l\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000&\u0000&\u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000r\u0000e\u0000c\u0000t\u0000 \u0000=\u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000.\u0000g\u0000e\u0000t\u0000B\u0000o\u0000u\u0000n\u0000d\u0000i\u0000n\u0000g\u0000C\u0000l\u0000i\u0000e\u0000n\u0000t\u0000R\u0000e\u0000c\u0000t\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000X\u0000 \u0000=\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000l\u0000e\u0000f\u0000t\u0000 \u0000+\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000w\u0000i\u0000d\u0000t\u0000h\u0000 \u0000/\u0000 \u00002\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000Y\u0000 \u0000=\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000t\u0000o\u0000p\u0000 \u0000+\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000h\u0000e\u0000i\u0000g\u0000h\u0000t\u0000 \u0000/\u0000 \u00002\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000m\u0000o\u0000u\u0000s\u0000e\u0000X\u0000 \u0000=\u0000 \u0000e\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000X\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000m\u0000o\u0000u\u0000s\u0000e\u0000Y\u0000 \u0000=\u0000 \u0000e\u0000.\u0000c\u0000l\u0000i\u0000e\u0000n\u0000t\u0000Y\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000C\u0000a\u0000l\u0000c\u0000u\u0000l\u0000a\u0000t\u0000e\u0000 \u0000r\u0000e\u0000l\u0000a\u0000t\u0000i\u0000v\u0000e\u0000 \u0000p\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000x\u0000 \u0000=\u0000 \u0000(\u0000m\u0000o\u0000u\u0000s\u0000e\u0000X\u0000 \u0000-\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000X\u0000)\u0000 \u0000/\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000w\u0000i\u0000d\u0000t\u0000h\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000y\u0000 \u0000=\u0000 \u0000(\u0000m\u0000o\u0000u\u0000s\u0000e\u0000Y\u0000 \u0000-\u0000 \u0000c\u0000e\u0000n\u0000t\u0000e\u0000r\u0000Y\u0000)\u0000 \u0000/\u0000 \u0000r\u0000e\u0000c\u0000t\u0000.\u0000h\u0000e\u0000i\u0000g\u0000h\u0000t\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000/\u0000 \u0000I\u0000N\u0000V\u0000E\u0000R\u0000T\u0000E\u0000D\u0000:\u0000 \u0000C\u0000V\u0000 \u0000m\u0000o\u0000v\u0000e\u0000s\u0000 \u0000O\u0000P\u0000P\u0000O\u0000S\u0000I\u0000T\u0000E\u0000 \u0000d\u0000i\u0000r\u0000e\u0000c\u0000t\u0000i\u0000o\u0000n\u0000 \u0000(\u0000n\u0000e\u0000g\u0000a\u0000t\u0000i\u0000v\u0000e\u0000 \u0000m\u0000u\u0000l\u0000t\u0000i\u0000p\u0000l\u0000i\u0000c\u0000a\u0000t\u0000i\u0000o\u0000n\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000a\u0000t\u0000t\u0000r\u0000a\u0000c\u0000t\u0000X\u0000 \u0000=\u0000 \u0000-\u0000x\u0000 \u0000*\u0000 \u00001\u00005\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000o\u0000n\u0000s\u0000t\u0000 \u0000a\u0000t\u0000t\u0000r\u0000a\u0000c\u0000t\u0000Y\u0000 \u0000=\u0000 \u0000-\u0000y\u0000 \u0000*\u0000 \u00001\u00005\u0000;\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000.\u0000s\u0000t\u0000y\u0000l\u0000e\u0000.\u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000 \u0000=\u0000 \u0000`\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000Z\u0000(\u00000\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000X\u0000(\u0000$\u0000{\u0000a\u0000t\u0000t\u0000r\u0000a\u0000c\u0000t\u0000X\u0000}\u0000p\u0000x\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000Y\u0000(\u0000$\u0000{\u0000a\u0000t\u0000t\u0000r\u0000a\u0000c\u0000t\u0000Y\u0000}\u0000p\u0000x\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000X\u0000(\u0000$\u0000{\u0000-\u0000y\u0000 \u0000*\u0000 \u00008\u0000}\u0000d\u0000e\u0000g\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000Y\u0000(\u0000$\u0000{\u0000x\u0000 \u0000*\u0000 \u00008\u0000}\u0000d\u0000e\u0000g\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000c\u0000a\u0000l\u0000e\u0000(\u00001\u0000.\u00000\u00002\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000`\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000.\u0000s\u0000t\u0000y\u0000l\u0000e\u0000.\u0000b\u0000o\u0000x\u0000S\u0000h\u0000a\u0000d\u0000o\u0000w\u0000 \u0000=\u0000 \u0000`\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000$\u0000{\u0000x\u0000 \u0000*\u0000 \u00002\u00005\u0000}\u0000p\u0000x\u0000 \u0000$\u0000{\u0000y\u0000 \u0000*\u0000 \u00002\u00005\u0000}\u0000p\u0000x\u0000 \u00006\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000.\u00002\u0000)\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u00000\u0000 \u00002\u00005\u0000p\u0000x\u0000 \u00006\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00009\u00009\u0000,\u0000 \u00001\u00000\u00002\u0000,\u0000 \u00002\u00004\u00001\u0000,\u0000 \u00000\u0000.\u00001\u00005\u0000)\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000`\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000M\u0000o\u0000u\u0000s\u0000e\u0000L\u0000e\u0000a\u0000v\u0000e\u0000=\u0000{\u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000i\u0000f\u0000 \u0000(\u0000!\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000&\u0000&\u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000)\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000.\u0000s\u0000t\u0000y\u0000l\u0000e\u0000.\u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000 \u0000=\u0000 \u0000'\u0000t\u0000r\u0000a\u0000n\u0000s\u0000l\u0000a\u0000t\u0000e\u0000Z\u0000(\u00000\u0000)\u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000X\u0000(\u00000\u0000d\u0000e\u0000g\u0000)\u0000 \u0000r\u0000o\u0000t\u0000a\u0000t\u0000e\u0000Y\u0000(\u00000\u0000d\u0000e\u0000g\u0000)\u0000'\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000v\u0000R\u0000e\u0000f\u0000.\u0000c\u0000u\u0000r\u0000r\u0000e\u0000n\u0000t\u0000.\u0000s\u0000t\u0000y\u0000l\u0000e\u0000.\u0000b\u0000o\u0000x\u0000S\u0000h\u0000a\u0000d\u0000o\u0000w\u0000 \u0000=\u0000 \u0000'\u00000\u0000 \u00002\u00005\u0000p\u0000x\u0000 \u00006\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000,\u0000 \u00000\u0000.\u00002\u0000)\u0000,\u0000 \u00000\u0000 \u00001\u00005\u0000p\u0000x\u0000 \u00003\u00000\u0000p\u0000x\u0000 \u0000r\u0000g\u0000b\u0000a\u0000(\u00009\u00009\u0000,\u0000 \u00001\u00000\u00002\u0000,\u0000 \u00002\u00004\u00001\u0000,\u0000 \u00000\u0000.\u00000\u00008\u0000)\u0000'\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000D\u0000y\u0000n\u0000a\u0000m\u0000i\u0000c\u0000R\u0000e\u0000n\u0000d\u0000e\u0000r\u0000e\u0000r\u0000 \u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000=\u0000{\u0000p\u0000r\u0000o\u0000f\u0000i\u0000l\u0000e\u0000}\u0000 \u0000l\u0000a\u0000n\u0000g\u0000u\u0000a\u0000g\u0000e\u0000=\u0000{\u0000l\u0000a\u0000n\u0000g\u0000u\u0000a\u0000g\u0000e\u0000}\u0000 \u0000/\u0000>\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000s\u0000.\u0000m\u0000a\u0000p\u0000(\u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000 \u0000=\u0000>\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000k\u0000e\u0000y\u0000=\u0000{\u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000.\u0000i\u0000d\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000a\u0000b\u0000s\u0000o\u0000l\u0000u\u0000t\u0000e\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000f\u0000u\u0000l\u0000l\u0000 \u0000b\u0000g\u0000-\u0000i\u0000n\u0000d\u0000i\u0000g\u0000o\u0000-\u00004\u00000\u00000\u0000 \u0000o\u0000p\u0000a\u0000c\u0000i\u0000t\u0000y\u0000-\u00003\u00000\u0000 \u0000p\u0000o\u0000i\u0000n\u0000t\u0000e\u0000r\u0000-\u0000e\u0000v\u0000e\u0000n\u0000t\u0000s\u0000-\u0000n\u0000o\u0000n\u0000e\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000e\u0000f\u0000t\u0000:\u0000 \u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000.\u0000x\u0000 \u0000-\u0000 \u00002\u00000\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000o\u0000p\u0000:\u0000 \u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000.\u0000y\u0000 \u0000-\u0000 \u00002\u00000\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000w\u0000i\u0000d\u0000t\u0000h\u0000:\u0000 \u0000'\u00004\u00000\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000e\u0000i\u0000g\u0000h\u0000t\u0000:\u0000 \u0000'\u00004\u00000\u0000p\u0000x\u0000'\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000n\u0000i\u0000m\u0000a\u0000t\u0000i\u0000o\u0000n\u0000:\u0000 \u0000'\u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000 \u00000\u0000.\u00006\u0000s\u0000 \u0000e\u0000a\u0000s\u0000e\u0000-\u0000o\u0000u\u0000t\u0000 \u0000f\u0000o\u0000r\u0000w\u0000a\u0000r\u0000d\u0000s\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000A\u0000n\u0000i\u0000m\u0000a\u0000t\u0000i\u0000o\u0000n\u0000E\u0000n\u0000d\u0000=\u0000{\u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000r\u0000e\u0000m\u0000o\u0000v\u0000e\u0000R\u0000i\u0000p\u0000p\u0000l\u0000e\u0000(\u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000.\u0000i\u0000d\u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000i\u0000s\u0000E\u0000d\u0000i\u0000t\u0000i\u0000n\u0000g\u0000 \u0000&\u0000&\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000a\u0000b\u0000s\u0000o\u0000l\u0000u\u0000t\u0000e\u0000 \u0000b\u0000g\u0000-\u0000w\u0000h\u0000i\u0000t\u0000e\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000l\u0000g\u0000 \u0000s\u0000h\u0000a\u0000d\u0000o\u0000w\u0000-\u00002\u0000x\u0000l\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00002\u00000\u00000\u0000 \u0000p\u0000-\u00004\u0000 \u0000z\u0000-\u00005\u00000\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000s\u0000t\u0000y\u0000l\u0000e\u0000=\u0000{\u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000l\u0000e\u0000f\u0000t\u0000:\u0000 \u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000p\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000.\u0000x\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000o\u0000p\u0000:\u0000 \u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000p\u0000o\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000.\u0000y\u0000,\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000m\u0000i\u0000n\u0000W\u0000i\u0000d\u0000t\u0000h\u0000:\u0000 \u0000'\u00003\u00006\u00000\u0000p\u0000x\u0000'\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000t\u0000e\u0000x\u0000t\u0000-\u0000x\u0000s\u0000 \u0000f\u0000o\u0000n\u0000t\u0000-\u0000s\u0000e\u0000m\u0000i\u0000b\u0000o\u0000l\u0000d\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00007\u00000\u00000\u0000 \u0000m\u0000b\u0000-\u00002\u0000\"\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000l\u0000a\u0000b\u0000e\u0000l\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000t\u0000y\u0000p\u0000e\u0000 \u0000=\u0000=\u0000=\u0000 \u0000'\u0000t\u0000e\u0000x\u0000t\u0000a\u0000r\u0000e\u0000a\u0000'\u0000 \u0000?\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000t\u0000e\u0000x\u0000t\u0000a\u0000r\u0000e\u0000a\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000w\u0000-\u0000f\u0000u\u0000l\u0000l\u0000 \u0000p\u0000x\u0000-\u00003\u0000 \u0000p\u0000y\u0000-\u00002\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00002\u00000\u00000\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000l\u0000g\u0000 \u0000f\u0000o\u0000c\u0000u\u0000s\u0000:\u0000o\u0000u\u0000t\u0000l\u0000i\u0000n\u0000e\u0000-\u0000n\u0000o\u0000n\u0000e\u0000 \u0000f\u0000o\u0000c\u0000u\u0000s\u0000:\u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00005\u00000\u00000\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000=\u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000v\u0000a\u0000l\u0000u\u0000e\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000=\u0000{\u0000(\u0000e\u0000)\u0000 \u0000=\u0000>\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000V\u0000a\u0000l\u0000u\u0000e\u0000(\u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000v\u0000a\u0000l\u0000u\u0000e\u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000r\u0000o\u0000w\u0000s\u0000=\u0000{\u00005\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000u\u0000t\u0000o\u0000F\u0000o\u0000c\u0000u\u0000s\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000 \u0000:\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000i\u0000n\u0000p\u0000u\u0000t\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000y\u0000p\u0000e\u0000=\u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000t\u0000y\u0000p\u0000e\u0000 \u0000=\u0000=\u0000=\u0000 \u0000'\u0000e\u0000m\u0000a\u0000i\u0000l\u0000'\u0000 \u0000?\u0000 \u0000'\u0000e\u0000m\u0000a\u0000i\u0000l\u0000'\u0000 \u0000:\u0000 \u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000t\u0000y\u0000p\u0000e\u0000 \u0000=\u0000=\u0000=\u0000 \u0000'\u0000t\u0000e\u0000l\u0000'\u0000 \u0000?\u0000 \u0000'\u0000t\u0000e\u0000l\u0000'\u0000 \u0000:\u0000 \u0000'\u0000t\u0000e\u0000x\u0000t\u0000'\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000w\u0000-\u0000f\u0000u\u0000l\u0000l\u0000 \u0000p\u0000x\u0000-\u00003\u0000 \u0000p\u0000y\u0000-\u00002\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000 \u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00002\u00000\u00000\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000l\u0000g\u0000 \u0000f\u0000o\u0000c\u0000u\u0000s\u0000:\u0000o\u0000u\u0000t\u0000l\u0000i\u0000n\u0000e\u0000-\u0000n\u0000o\u0000n\u0000e\u0000 \u0000f\u0000o\u0000c\u0000u\u0000s\u0000:\u0000b\u0000o\u0000r\u0000d\u0000e\u0000r\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00005\u00000\u00000\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000v\u0000a\u0000l\u0000u\u0000e\u0000=\u0000{\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000v\u0000a\u0000l\u0000u\u0000e\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000h\u0000a\u0000n\u0000g\u0000e\u0000=\u0000{\u0000(\u0000e\u0000)\u0000 \u0000=\u0000>\u0000 \u0000u\u0000p\u0000d\u0000a\u0000t\u0000e\u0000V\u0000a\u0000l\u0000u\u0000e\u0000(\u0000e\u0000.\u0000t\u0000a\u0000r\u0000g\u0000e\u0000t\u0000.\u0000v\u0000a\u0000l\u0000u\u0000e\u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000a\u0000u\u0000t\u0000o\u0000F\u0000o\u0000c\u0000u\u0000s\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000/\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000f\u0000l\u0000e\u0000x\u0000 \u0000g\u0000a\u0000p\u0000-\u00002\u0000 \u0000m\u0000t\u0000-\u00003\u0000\"\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000b\u0000u\u0000t\u0000t\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000f\u0000l\u0000e\u0000x\u0000-\u00001\u0000 \u0000p\u0000x\u0000-\u00004\u0000 \u0000p\u0000y\u0000-\u00002\u0000 \u0000b\u0000g\u0000-\u0000g\u0000r\u0000a\u0000d\u0000i\u0000e\u0000n\u0000t\u0000-\u0000t\u0000o\u0000-\u0000r\u0000 \u0000f\u0000r\u0000o\u0000m\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00006\u00000\u00000\u0000 \u0000t\u0000o\u0000-\u0000i\u0000n\u0000d\u0000i\u0000g\u0000o\u0000-\u00006\u00000\u00000\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000w\u0000h\u0000i\u0000t\u0000e\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000l\u0000g\u0000 \u0000h\u0000o\u0000v\u0000e\u0000r\u0000:\u0000f\u0000r\u0000o\u0000m\u0000-\u0000p\u0000u\u0000r\u0000p\u0000l\u0000e\u0000-\u00007\u00000\u00000\u0000 \u0000h\u0000o\u0000v\u0000e\u0000r\u0000:\u0000t\u0000o\u0000-\u0000i\u0000n\u0000d\u0000i\u0000g\u0000o\u0000-\u00007\u00000\u00000\u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000-\u0000c\u0000o\u0000l\u0000o\u0000r\u0000s\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000l\u0000i\u0000c\u0000k\u0000=\u0000{\u0000(\u0000)\u0000 \u0000=\u0000>\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000h\u0000a\u0000n\u0000d\u0000l\u0000e\u0000S\u0000a\u0000v\u0000e\u0000E\u0000d\u0000i\u0000t\u0000(\u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000p\u0000a\u0000t\u0000h\u0000,\u0000 \u0000e\u0000d\u0000i\u0000t\u0000o\u0000r\u0000S\u0000t\u0000a\u0000t\u0000e\u0000.\u0000v\u0000a\u0000l\u0000u\u0000e\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000o\u0000s\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000(\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000S\u0000a\u0000v\u0000e\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000b\u0000u\u0000t\u0000t\u0000o\u0000n\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000b\u0000u\u0000t\u0000t\u0000o\u0000n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000p\u0000x\u0000-\u00004\u0000 \u0000p\u0000y\u0000-\u00002\u0000 \u0000b\u0000g\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00001\u00000\u00000\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00007\u00000\u00000\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000l\u0000g\u0000 \u0000h\u0000o\u0000v\u0000e\u0000r\u0000:\u0000b\u0000g\u0000-\u0000s\u0000l\u0000a\u0000t\u0000e\u0000-\u00002\u00000\u00000\u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000i\u0000t\u0000i\u0000o\u0000n\u0000-\u0000c\u0000o\u0000l\u0000o\u0000r\u0000s\u0000\"\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000n\u0000C\u0000l\u0000i\u0000c\u0000k\u0000=\u0000{\u0000c\u0000l\u0000o\u0000s\u0000e\u0000E\u0000d\u0000i\u0000t\u0000o\u0000r\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000C\u0000a\u0000n\u0000c\u0000e\u0000l\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000b\u0000u\u0000t\u0000t\u0000o\u0000n\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000i\u0000s\u0000M\u0000o\u0000b\u0000i\u0000l\u0000e\u0000 \u0000&\u0000&\u0000 \u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000 \u0000!\u0000=\u0000=\u0000 \u00001\u0000 \u0000&\u0000&\u0000 \u0000(\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000d\u0000i\u0000v\u0000 \u0000c\u0000l\u0000a\u0000s\u0000s\u0000N\u0000a\u0000m\u0000e\u0000=\u0000\"\u0000a\u0000b\u0000s\u0000o\u0000l\u0000u\u0000t\u0000e\u0000 \u0000t\u0000o\u0000p\u0000-\u00002\u00000\u0000 \u0000r\u0000i\u0000g\u0000h\u0000t\u0000-\u00004\u0000 \u0000b\u0000g\u0000-\u0000b\u0000l\u0000a\u0000c\u0000k\u0000/\u00007\u00000\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000w\u0000h\u0000i\u0000t\u0000e\u0000 \u0000p\u0000x\u0000-\u00003\u0000 \u0000p\u0000y\u0000-\u00001\u0000 \u0000r\u0000o\u0000u\u0000n\u0000d\u0000e\u0000d\u0000-\u0000f\u0000u\u0000l\u0000l\u0000 \u0000t\u0000e\u0000x\u0000t\u0000-\u0000s\u0000m\u0000 \u0000f\u0000o\u0000n\u0000t\u0000-\u0000m\u0000e\u0000d\u0000i\u0000u\u0000m\u0000\"\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000{\u0000M\u0000a\u0000t\u0000h\u0000.\u0000r\u0000o\u0000u\u0000n\u0000d\u0000(\u0000m\u0000o\u0000b\u0000i\u0000l\u0000e\u0000Z\u0000o\u0000o\u0000m\u0000 \u0000*\u0000 \u00001\u00000\u00000\u0000)\u0000}\u0000%\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000)\u0000}\u0000\r\u0000\n\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000s\u0000t\u0000y\u0000l\u0000e\u0000>\u0000{\u0000`\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000@\u0000k\u0000e\u0000y\u0000f\u0000r\u0000a\u0000m\u0000e\u0000s\u0000 \u0000r\u0000i\u0000p\u0000p\u0000l\u0000e\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000o\u0000 \u0000{\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000t\u0000r\u0000a\u0000n\u0000s\u0000f\u0000o\u0000r\u0000m\u0000:\u0000 \u0000s\u0000c\u0000a\u0000l\u0000e\u0000(\u00004\u0000)\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000o\u0000p\u0000a\u0000c\u0000i\u0000t\u0000y\u0000:\u0000 \u00000\u0000;\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000}\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000`\u0000}\u0000<\u0000/\u0000s\u0000t\u0000y\u0000l\u0000e\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000 \u0000<\u0000/\u0000d\u0000i\u0000v\u0000>\u0000\r\u0000\n\u0000 \u0000 \u0000 \u0000 \u0000)\u0000;\u0000\r\u0000\n\u0000}\u0000;\u0000\r\u0000\n\u0000","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\user\\.gemini\\antigravity\\scratch\\swiss-cv-builder\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
